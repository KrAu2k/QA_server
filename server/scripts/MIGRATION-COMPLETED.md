# ğŸ‰ æ•°æ®åº“è¿ç§»ä»»åŠ¡å®Œæˆ

## å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ™ºèƒ½è¡¨æå–å·¥å…· âœ…
- **æ–‡ä»¶**: `scripts/extract-tables.js`
- **åŠŸèƒ½**: è‡ªåŠ¨æ‰«ææ‰€æœ‰ `*.entity.ts` æ–‡ä»¶ï¼Œæå–è¡¨åç”Ÿæˆç™½åå•
- **å‘½ä»¤**: `npm run extract:tables`

### 2. é€‰æ‹©æ€§è¿ç§»è„šæœ¬ âœ…
- **æ–‡ä»¶**: `scripts/migrate-selective.js`
- **åŠŸèƒ½**: åŸºäºç™½åå•çš„æ™ºèƒ½è¿ç§»ï¼Œåªè¿ç§» myserver å®é™…ä½¿ç”¨çš„è¡¨
- **ç‰¹ç‚¹**:
  - âœ… è‡ªåŠ¨è¿‡æ»¤æµ‹è¯•è¡¨å’Œæ— ç”¨è¡¨
  - âœ… æ”¯æŒç¯å¢ƒå˜é‡é…ç½®
  - âœ… åˆ†æ‰¹æ•°æ®å¤„ç†
  - âœ… å®Œæ•´çš„è¿ç§»éªŒè¯
  - âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•
- **å‘½ä»¤**: `npm run migrate:selective`

### 3. é…ç½®ç®¡ç† âœ…
- **è¡¨ç™½åå•**: `scripts/migration-tables.json`
- **ç¯å¢ƒå˜é‡**: `.env.migration.example`
- **åŒ…å«20ä¸ªä¸šåŠ¡è¡¨**ï¼šdepartments, user, logs, goods, customer, supplier ç­‰

### 4. æ–‡æ¡£å’Œå·¥å…· âœ…
- **ä½¿ç”¨æŒ‡å—**: `scripts/README-migration-selective.md`
- **ç¤ºä¾‹è„šæœ¬**: `scripts/migration-example.js`
- **æµ‹è¯•å·¥å…·**: `scripts/test-filter.js`
- **npm è„šæœ¬**: å·²æ·»åŠ åˆ° `package.json`

## ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¼€å§‹ ğŸš€
```bash
# 1. ç”Ÿæˆè¡¨ç™½åå•ï¼ˆå·²å®Œæˆï¼‰
npm run extract:tables

# 2. å¤åˆ¶é…ç½®æ–‡ä»¶
cp .env.migration.example .env.migration

# 3. æ‰§è¡Œé€‰æ‹©æ€§è¿ç§»
npm run migrate:selective

# 4. æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©
npm run migrate:help
```

### è¿ç§»çš„è¡¨åˆ—è¡¨ ğŸ“‹
ä»¥ä¸‹20ä¸ªè¡¨å°†è¢«è¿ç§»ï¼ˆè¿‡æ»¤æ‰æµ‹è¯•è¡¨ï¼‰ï¼š
1. departments - éƒ¨é—¨ç®¡ç†
2. user - ç”¨æˆ·ç®¡ç†  
3. logs - æ—¥å¿—è®°å½•
4. goods - å•†å“ç®¡ç†
5. sales_quote_details - é”€å”®æŠ¥ä»·æ˜ç»†
6. sales_quotes - é”€å”®æŠ¥ä»·
7. goods_category - å•†å“åˆ†ç±»
8. purchase_stock_in - é‡‡è´­å…¥åº“
9. purchase_stock_in_details - é‡‡è´­å…¥åº“æ˜ç»†
10. report_data - æŠ¥è¡¨æ•°æ®
11. customer_category - å®¢æˆ·åˆ†ç±»
12. sell_order - é”€å”®è®¢å•
13. customer - å®¢æˆ·ç®¡ç†
14. sell_order_details - é”€å”®è®¢å•æ˜ç»†
15. supplier - ä¾›åº”å•†ç®¡ç†
16. supplier_category - ä¾›åº”å•†åˆ†ç±»
17. purchase_return_details - é‡‡è´­é€€è´§æ˜ç»†
18. purchase_return - é‡‡è´­é€€è´§
19. sales_deliveries - é”€å”®äº¤ä»˜
20. sales_delivery_details - é”€å”®äº¤ä»˜æ˜ç»†

## å®‰å…¨ä¿éšœ ğŸ›¡ï¸

### è‡ªåŠ¨è¿‡æ»¤æœºåˆ¶
- âœ… **ç³»ç»Ÿè¡¨è¿‡æ»¤**: è‡ªåŠ¨æ’é™¤ migrations, typeorm_metadata ç­‰
- âœ… **ç™½åå•æœºåˆ¶**: åªè¿ç§»å®ä½“æ–‡ä»¶ä¸­å®šä¹‰çš„è¡¨
- âœ… **æµ‹è¯•è¡¨æ’é™¤**: è‡ªåŠ¨è·³è¿‡ä¸åœ¨ç™½åå•ä¸­çš„æµ‹è¯•è¡¨

### è¿ç§»éªŒè¯
- âœ… **æ•°æ®å®Œæ•´æ€§æ£€æŸ¥**: å¯¹æ¯”æºè¡¨å’Œç›®æ ‡è¡¨è®°å½•æ•°
- âœ… **ç»“æ„éªŒè¯**: ç¡®ä¿è¡¨ç»“æ„æ­£ç¡®åˆ›å»º
- âœ… **æ—¥å¿—è®°å½•**: å®Œæ•´çš„è¿ç§»è¿‡ç¨‹æ—¥å¿—

## ä¸‹ä¸€æ­¥æ“ä½œ ğŸ“

1. **é…ç½®ç¯å¢ƒå˜é‡**: æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ `.env.migration`
2. **å¤‡ä»½ç›®æ ‡æ•°æ®åº“**: ç¡®ä¿ `report` æ•°æ®åº“æœ‰å¤‡ä»½
3. **æ‰§è¡Œè¿ç§»**: è¿è¡Œ `npm run migrate:selective`
4. **éªŒè¯ç»“æœ**: æ£€æŸ¥è¿ç§»æ—¥å¿—å’Œæ•°æ®å®Œæ•´æ€§

## æŠ€æœ¯ç»†èŠ‚ ğŸ”§

### è¿ç§»æµç¨‹
1. è¿æ¥æºæ•°æ®åº“ï¼ˆranciï¼‰å’Œç›®æ ‡æ•°æ®åº“ï¼ˆreportï¼‰
2. åŸºäºç™½åå•ç­›é€‰éœ€è¦è¿ç§»çš„è¡¨
3. é€è¡¨æ‰§è¡Œï¼šç»“æ„åˆ›å»º â†’ æ•°æ®è¿ç§» â†’ éªŒè¯æ£€æŸ¥
4. ç”Ÿæˆè¯¦ç»†çš„è¿ç§»æŠ¥å‘Šå’Œæ—¥å¿—

### æ€§èƒ½ä¼˜åŒ–
- **åˆ†æ‰¹å¤„ç†**: å¤§è¡¨æ•°æ®åˆ†æ‰¹è¿ç§»ï¼Œé»˜è®¤æ¯æ‰¹1000æ¡
- **å¤–é”®å¤„ç†**: ä¸´æ—¶ç¦ç”¨å¤–é”®æ£€æŸ¥ï¼Œè¿ç§»å®Œæˆåæ¢å¤
- **å†…å­˜ä¼˜åŒ–**: é¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®

## æ–‡ä»¶ç»“æ„ ğŸ“
```
scripts/
â”œâ”€â”€ migrate-selective.js          # é€‰æ‹©æ€§è¿ç§»è„šæœ¬ï¼ˆä¸»è¦ï¼‰
â”œâ”€â”€ extract-tables.js            # è¡¨åæå–å·¥å…·
â”œâ”€â”€ migration-tables.json        # è¡¨ç™½åå•é…ç½®
â”œâ”€â”€ test-filter.js               # è¿‡æ»¤é€»è¾‘æµ‹è¯•
â”œâ”€â”€ migration-example.js         # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ README-migration-selective.md # è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ migrate-database.js          # å…¨é‡è¿ç§»è„šæœ¬ï¼ˆå¤‡ç”¨ï¼‰
â””â”€â”€ migrate-simple.js            # ç®€åŒ–è¿ç§»è„šæœ¬ï¼ˆå¤‡ç”¨ï¼‰
```

---

âœ… **ä»»åŠ¡å®Œæˆ**: æ•°æ®åº“è¿ç§»å·¥å…·å·²å®Œæˆï¼Œæ”¯æŒä» `ranci` æ•°æ®åº“é€‰æ‹©æ€§è¿ç§»åˆ° `report` æ•°æ®åº“ï¼Œåªè¿ç§» myserver å®é™…ä½¿ç”¨çš„ä¸šåŠ¡è¡¨ï¼Œè‡ªåŠ¨è¿‡æ»¤æµ‹è¯•è¡¨å’Œæ— ç”¨è¡¨ã€‚
