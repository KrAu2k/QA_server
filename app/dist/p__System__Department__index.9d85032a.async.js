"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[765],{73173:function(xe,X,u){u.r(X),u.d(X,{default:function(){return Dr}});var ae=u(13769),S=u.n(ae),se=u(15009),o=u.n(se),T=u(99289),F=u.n(T),P=u(97857),R=u.n(P),N=u(19632),ue=u.n(N),z=u(5574),g=u.n(z),K=u(64599),ie=u.n(K),p=u(67294),le=u(25593),x=u(25278),pe=u(34041),w=u(77569),b=u(2453),M=u(66309),H=u(78957),O=u(83062),B=u(83622),$=u(86738),m=u(4393),f=u(71230),E=u(15746),c=u(74330),l=u(69499),h=u(17788),D=u(96074),y=u(59847),j=u(68997),q=u(72269),cr=u(40784),De=u(24969),pr=u(55355),mr=u(86548),fr=u(48689),Be=u(87547),hr=u(43425),vr=u(90930),gr=u(40238),W=u(97593),Te=u(96287),Oe=u(20882),e=u(85893),yr=["children"],bt=le.Z.Title,jr=x.Z.Search,Er=pe.Z.Option,Sr=Oe.jG.b;function Me(oe,L){var I=ie()(oe),Y;try{for(I.s();!(Y=I.n()).done;){var G=Y.value;if(G.id===L)return G;if(G.children){var J=Me(G.children,L);if(J)return J}}}catch(de){I.e(de)}finally{I.f()}return null}var Ie=p.memo(function(oe){var L=oe.treeData,I=p.useState(),Y=g()(I,2),G=Y[0],J=Y[1];(0,p.useEffect)(function(){var ee=function(v){var Q=[],re=[],te=function C(A,me){Q.push({id:A.id.toString(),data:{email:"".concat(A.code,"@company.com"),name:A.name,position:A.managerNames&&A.managerNames.length>0?A.managerNames.join(", "):"-",status:A.status===1?"online":"offline",phone:"555-0100",fax:"555-0101"}}),me&&re.push({source:me,target:A.id.toString()}),A.children&&A.children.length>0&&A.children.forEach(function(fe){C(fe,A.id.toString())})};return v.forEach(function(C){te(C)}),{nodes:Q,edges:re}};if(L&&L.length>0){var _=ee(L);J(_)}},[L]);var de=p.useMemo(function(){return{padding:[0,0,0,0],height:460,autoFit:"view",data:G,node:{style:{component:function(_){var U,v=_.data||{},Q=v.name,re=v.position,te=v.status,C=(U=_.states)===null||U===void 0?void 0:U.includes("active");return(0,e.jsx)(Sr,{name:Q,position:re,status:te,isActive:C})},size:new Float32Array([180,75])}},edge:{style:{radius:16,lineWidth:5,endArrow:!0}},layout:{type:"antv-dagre",nodesep:24,ranksep:20},transforms:function(_){return[].concat(ue()(_.filter(function(U){return U.type!=="collapse-expand-react-node"})),[R()(R()({},_.find(function(U){return U.type==="collapse-expand-react-node"})),{},{enable:!0,iconOffsetY:24})])},behaviors:["drag-canvas","drag-node","click-select"]}},[G]);return(0,e.jsx)(Oe.OE,R()({},de))});Ie.displayName="DemoOrganizationChart";function Dr(){var oe=(0,p.useState)([]),L=g()(oe,2),I=L[0],Y=L[1],G=(0,p.useState)(!1),J=g()(G,2),de=J[0],ee=J[1],_=(0,p.useState)(null),U=g()(_,2),v=U[0],Q=U[1],re=(0,p.useState)(null),te=g()(re,2),C=te[0],A=te[1],me=(0,p.useState)([]),fe=g()(me,2),Ct=fe[0],Ue=fe[1],br=(0,p.useState)([]),Re=g()(br,2),Zt=Re[0],$e=Re[1],Cr=(0,p.useState)(""),Le=g()(Cr,2),Zr=Le[0],Fr=Le[1],wr=(0,p.useState)(!1),ke=g()(wr,2),be=ke[0],he=ke[1],Ar=(0,p.useState)(!1),Ne=g()(Ar,2),Ce=Ne[0],ze=Ne[1],Pr=(0,p.useState)(!1),Ke=g()(Pr,2),xr=Ke[0],Br=Ke[1],Tr=(0,p.useState)(null),We=g()(Tr,2),V=We[0],ce=We[1],Or=(0,p.useState)([]),Ge=g()(Or,2),Mr=Ge[0],Ir=Ge[1],Ur=(0,p.useState)(!1),_e=g()(Ur,2),Rr=_e[0],Ve=_e[1],$r=w.Z.useForm(),Lr=g()($r,1),k=Lr[0],kr=(0,p.useState)(!1),Qe=g()(kr,2),Nr=Qe[0],He=Qe[1],zr=(0,p.useState)(null),Ye=g()(zr,2),ve=Ye[0],Kr=Ye[1],Wr=(0,p.useState)([]),Je=g()(Wr,2),Xe=Je[0],Ze=Je[1],Gr=(0,p.useState)(!1),qe=g()(Gr,2),_r=qe[0],ne=qe[1],Vr=(0,p.useState)(""),er=g()(Vr,2),ge=er[0],Qr=er[1],Hr=(0,p.useState)(!1),rr=g()(Hr,2),Yr=rr[0],ye=rr[1],Jr=(0,p.useState)(!1),tr=g()(Jr,2),Xr=tr[0],je=tr[1],qr=(0,p.useState)([]),nr=g()(qr,2),Fe=nr[0],ar=nr[1],et=(0,p.useState)([]),sr=g()(et,2),rt=sr[0],we=sr[1],tt=(0,p.useState)([]),ur=g()(tt,2),Ee=ur[0],ir=ur[1],nt=function a(r){return r.map(function(t){return{title:t.name,value:t.id,key:t.id,children:t.children&&t.children.length>0?a(t.children):void 0}})},at=function a(r){var t=[];return r.forEach(function(n){t.push(n.id.toString()),n.children&&n.children.length>0&&(t=t.concat(a(n.children)))}),t},lr=function(r){Ue([r.id.toString()]),Q(r),r&&Ae(r.id)},Ae=function(){var a=F()(o()().mark(function r(t){var n;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,W.W6)(t);case 3:n=i.sent,n.success?A(n.data||null):b.ZP.error(n.message||"\u52A0\u8F7D\u90E8\u95E8\u8BE6\u60C5\u5931\u8D25"),i.next=11;break;case 7:i.prev=7,i.t0=i.catch(0),b.ZP.error("\u52A0\u8F7D\u90E8\u95E8\u8BE6\u60C5\u5931\u8D25"),console.error("\u52A0\u8F7D\u90E8\u95E8\u8BE6\u60C5\u5931\u8D25:",i.t0);case 11:case"end":return i.stop()}},r,null,[[0,7]])}));return function(t){return a.apply(this,arguments)}}(),Pe=function(){var a=F()(o()().mark(function r(){var t,n,s;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return ee(!0),d.prev=1,d.next=4,(0,W.Sb)();case 4:t=d.sent,t.success?(n=t.data||[],Y(n),s=at(n),$e(s),n.length>0&&!v&&lr(n[0])):b.ZP.error(t.message||"\u52A0\u8F7D\u90E8\u95E8\u6570\u636E\u5931\u8D25"),d.next=12;break;case 8:d.prev=8,d.t0=d.catch(1),b.ZP.error("\u52A0\u8F7D\u90E8\u95E8\u6570\u636E\u5931\u8D25"),console.error("\u52A0\u8F7D\u90E8\u95E8\u6570\u636E\u5931\u8D25:",d.t0);case 12:return d.prev=12,ee(!1),d.finish(12);case 15:case"end":return d.stop()}},r,null,[[1,8,12,15]])}));return function(){return a.apply(this,arguments)}}(),st=function(){var a=F()(o()().mark(function r(){var t;return o()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return Ve(!0),s.prev=1,s.next=4,(0,Te.lE)({pageSize:1e3});case 4:t=s.sent,t.success?Ir(t.data||[]):b.ZP.error("\u52A0\u8F7D\u7528\u6237\u5217\u8868\u5931\u8D25"),s.next=12;break;case 8:s.prev=8,s.t0=s.catch(1),b.ZP.error("\u52A0\u8F7D\u7528\u6237\u5217\u8868\u5931\u8D25"),console.error("\u52A0\u8F7D\u7528\u6237\u5217\u8868\u5931\u8D25:",s.t0);case 12:return s.prev=12,Ve(!1),s.finish(12);case 15:case"end":return s.stop()}},r,null,[[1,8,12,15]])}));return function(){return a.apply(this,arguments)}}(),ut=(0,gr.Z)(function(a){Fr(a)},{wait:300}),it=ut.run,Ft=function(r){$e(r.map(function(t){return t.toString()}))},or=function(r){ce(null),he(!0),setTimeout(function(){k.resetFields(),r&&k.setFieldsValue({parentId:r})},100)},lt=function(r){ce(r),he(!0),setTimeout(function(){k.resetFields(),k.setFieldsValue({name:r.name,code:r.code,parentId:r.parentId,managerIds:r.managerIds||[],description:r.description,status:r.status===1,sort:r.sort})},100)},ot=function(){var a=F()(o()().mark(function r(t){var n;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,W.If)(t.id);case 3:n=i.sent,n.success?(b.ZP.success("\u5220\u9664\u6210\u529F"),Pe(),(v==null?void 0:v.id)===t.id&&(Q(null),A(null),Ue([]))):b.ZP.error(n.message||"\u5220\u9664\u5931\u8D25"),i.next=11;break;case 7:i.prev=7,i.t0=i.catch(0),b.ZP.error("\u5220\u9664\u5931\u8D25"),console.error("\u5220\u9664\u5931\u8D25:",i.t0);case 11:case"end":return i.stop()}},r,null,[[0,7]])}));return function(t){return a.apply(this,arguments)}}(),dt=function a(r){var t=[];return r.children&&r.children.length>0&&r.children.forEach(function(n){t.push(n.id),t=t.concat(a(n))}),t},ct=function(){var a=F()(o()().mark(function r(t){var n,s,i;return o()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!(V&&t.parentId)){Z.next=7;break}if(n=Me(I,V.id),!n){Z.next=7;break}if(s=dt(n),!s.includes(t.parentId)){Z.next=7;break}return b.ZP.error("\u4E0D\u80FD\u5C06\u90E8\u95E8\u7684\u4E0A\u7EA7\u8BBE\u7F6E\u4E3A\u81EA\u5DF1\u7684\u5B50\u90E8\u95E8\u6216\u540E\u4EE3\u90E8\u95E8"),Z.abrupt("return");case 7:if(t.sort!==void 0&&(t.sort=Number(t.sort)),Z.prev=8,!V){Z.next=15;break}return Z.next=12,(0,W.j4)(V.id,t);case 12:i=Z.sent,Z.next=18;break;case 15:return Z.next=17,(0,W.v$)(t);case 17:i=Z.sent;case 18:i.success?(b.ZP.success(V?"\u66F4\u65B0\u6210\u529F":"\u521B\u5EFA\u6210\u529F"),he(!1),ce(null),k&&k.resetFields(),Pe(),V&&(v==null?void 0:v.id)===V.id&&Ae(V.id)):b.ZP.error(i.message||"\u64CD\u4F5C\u5931\u8D25"),Z.next=25;break;case 21:Z.prev=21,Z.t0=Z.catch(8),b.ZP.error("\u64CD\u4F5C\u5931\u8D25"),console.error("\u90E8\u95E8\u64CD\u4F5C\u5931\u8D25:",Z.t0);case 25:case"end":return Z.stop()}},r,null,[[8,21]])}));return function(t){return a.apply(this,arguments)}}(),wt=function(r){lr(r)};(0,p.useEffect)(function(){Pe(),st()},[]),(0,p.useEffect)(function(){be||ce(null)},[be]);var pt=function a(r){var t=[];return r.forEach(function(n){var s=n.children,i=S()(n,yr);t.push(i),n.children&&n.children.length>0&&(t=t.concat(a(n.children)))}),t},mt=function a(r,t){return t?r.filter(function(n){var s=n.name.toLowerCase().includes(t.toLowerCase()),i=n.code.toLowerCase().includes(t.toLowerCase());if(s||i)return!0;if(n.children&&n.children.length>0){var d=a(n.children,t);if(d.length>0)return n.children=d,!0}return!1}):r},ft=mt(I,Zr),ht=pt(ft),vt=[{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"name",key:"name",render:function(r){return(0,e.jsx)("span",{style:{fontWeight:500},children:r})}},{title:"\u90E8\u95E8\u7F16\u7801",dataIndex:"code",key:"code"},{title:"\u4E0A\u7EA7\u90E8\u95E8",dataIndex:"parentName",key:"parentName",render:function(r){return r||"\u65E0"}},{title:"\u8D1F\u8D23\u4EBA",dataIndex:"managerNames",key:"managerNames",render:function(r){return r&&r.length>0?r.join(", "):"\u672A\u8BBE\u7F6E"}},{title:"\u72B6\u6001",dataIndex:"status",key:"status",render:function(r){return(0,e.jsx)(M.Z,{color:r===1?"success":"error",children:r===1?"\u6B63\u5E38":"\u7981\u7528"})}},{title:"\u64CD\u4F5C",key:"action",render:function(r,t){return(0,e.jsxs)(H.Z,{children:[(0,e.jsx)(O.Z,{title:"\u65B0\u589E\u5B50\u90E8\u95E8",children:(0,e.jsx)(B.ZP,{type:"text",size:"small",icon:(0,e.jsx)(De.Z,{}),onClick:function(s){s.stopPropagation(),or(t.id)}})}),(0,e.jsx)(O.Z,{title:"\u6210\u5458\u7BA1\u7406",children:(0,e.jsx)(B.ZP,{type:"text",size:"small",icon:(0,e.jsx)(pr.Z,{}),onClick:function(s){s.stopPropagation(),Q(t),ze(!0)}})}),(0,e.jsx)(O.Z,{title:"\u7F16\u8F91",children:(0,e.jsx)(B.ZP,{type:"text",size:"small",icon:(0,e.jsx)(mr.Z,{}),onClick:function(s){s.stopPropagation(),lt(t)}})}),(0,e.jsx)(O.Z,{title:"\u5220\u9664",children:(0,e.jsx)($.Z,{title:'\u786E\u5B9A\u5220\u9664"'.concat(t.name,'"\uFF1F'),onConfirm:function(s){s==null||s.stopPropagation(),ot(t)},onCancel:function(s){return s==null?void 0:s.stopPropagation()},children:(0,e.jsx)(B.ZP,{type:"text",size:"small",danger:!0,icon:(0,e.jsx)(fr.Z,{}),onClick:function(s){return s.stopPropagation()}})})})]})}}],Se=function(){var a=F()(o()().mark(function r(t){var n;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return ne(!0),i.prev=1,i.next=4,(0,W.Tp)(t);case 4:n=i.sent,n.success&&Array.isArray(n.data)?Ze(n.data):Ze([]),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),Ze([]);case 11:return i.prev=11,ne(!1),i.finish(11);case 14:case"end":return i.stop()}},r,null,[[1,8,11,14]])}));return function(t){return a.apply(this,arguments)}}();(0,p.useEffect)(function(){Ce&&v&&Se(v.id)},[Ce,v]);var gt=function(){var a=F()(o()().mark(function r(t){return o()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(v){s.next=2;break}return s.abrupt("return");case 2:return ne(!0),s.prev=3,s.next=6,(0,W.wA)(v.id,t);case 6:b.ZP.success("\u79FB\u9664\u6210\u529F"),Se(v.id),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(3),b.ZP.error("\u79FB\u9664\u5931\u8D25");case 13:return s.prev=13,ne(!1),s.finish(13);case 16:case"end":return s.stop()}},r,null,[[3,10,13,16]])}));return function(t){return a.apply(this,arguments)}}(),yt=[{title:"\u59D3\u540D",dataIndex:"userName",key:"userName"},{title:"\u5DE5\u53F7",dataIndex:"userCode",key:"userCode"},{title:"\u804C\u4F4D",dataIndex:"positionName",key:"positionName"},{title:"\u90AE\u7BB1",dataIndex:"email",key:"email"},{title:"\u64CD\u4F5C",key:"action",render:function(r,t){return(0,e.jsx)($.Z,{title:"\u786E\u5B9A\u79FB\u9664\u8BE5\u6210\u5458\uFF1F",onConfirm:function(){return gt(t.userId)},children:(0,e.jsx)(B.ZP,{type:"link",danger:!0,size:"small",children:"\u79FB\u9664"})})}}],dr=Xe.filter(function(a){var r,t,n,s;return((r=a.userName)===null||r===void 0?void 0:r.includes(ge))||((t=a.userCode)===null||t===void 0?void 0:t.includes(ge))||((n=a.positionName)===null||n===void 0?void 0:n.includes(ge))||((s=a.email)===null||s===void 0?void 0:s.includes(ge))}),jt=function(){var a=F()(o()().mark(function r(){var t,n;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return je(!0),i.prev=1,i.next=4,(0,Te.lE)({pageSize:1e3});case 4:t=i.sent,t.success&&Array.isArray(t.data)?(n=Xe.map(function(d){return String(d.userId)}),we(t.data.filter(function(d){return!n.includes(String(d.id))}))):we([]),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),we([]);case 11:return i.prev=11,je(!1),i.finish(11);case 14:case"end":return i.stop()}},r,null,[[1,8,11,14]])}));return function(){return a.apply(this,arguments)}}(),Et=function(){ar([]),ye(!0),jt()},St=function(){var a=F()(o()().mark(function r(){var t,n,s;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(t=Fe.filter(function(Z){return Z!=null}),v){d.next=3;break}return d.abrupt("return");case 3:if(t.length!==0){d.next=6;break}return b.ZP.warning("\u8BF7\u9009\u62E9\u8981\u6DFB\u52A0\u7684\u6210\u5458"),d.abrupt("return");case 6:return console.log("[\u6DFB\u52A0\u6210\u5458] \u90E8\u95E8ID:",v.id,"\u9009\u4E2D\u7528\u6237ID:",Fe,"\u63D0\u4EA4 userIds:",t),je(!0),d.prev=8,d.next=11,(0,W.Gv)(v.id,t);case 11:n=d.sent,console.log("[\u6DFB\u52A0\u6210\u5458] \u540E\u7AEF\u54CD\u5E94:",n),b.ZP.success("\u6DFB\u52A0\u6210\u529F"),ye(!1),Se(v.id),d.next=22;break;case 18:d.prev=18,d.t0=d.catch(8),console.error("[\u6DFB\u52A0\u6210\u5458] \u5931\u8D25:",d.t0),b.ZP.error((d.t0===null||d.t0===void 0||(s=d.t0.data)===null||s===void 0?void 0:s.message)||(d.t0===null||d.t0===void 0?void 0:d.t0.message)||"\u6DFB\u52A0\u5931\u8D25");case 22:return d.prev=22,je(!1),d.finish(22);case 25:case"end":return d.stop()}},r,null,[[8,18,22,25]])}));return function(){return a.apply(this,arguments)}}(),Dt=function(){var a=F()(o()().mark(function r(){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!v||Ee.length===0)){n.next=2;break}return n.abrupt("return");case 2:return ne(!0),n.prev=3,n.next=6,Promise.all(Ee.map(function(s){return(0,W.wA)(v.id,s)}));case 6:b.ZP.success("\u6279\u91CF\u79FB\u9664\u6210\u529F"),ir([]),Se(v.id),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),b.ZP.error("\u6279\u91CF\u79FB\u9664\u5931\u8D25");case 14:return n.prev=14,ne(!1),n.finish(14);case 17:case"end":return n.stop()}},r,null,[[3,11,14,17]])}));return function(){return a.apply(this,arguments)}}();return(0,e.jsxs)(vr._z,{className:"department-management",children:[(0,e.jsx)(m.Z,{title:"\u7EC4\u7EC7\u67B6\u6784",style:{marginBottom:16},children:(0,e.jsx)("div",{style:{height:450},children:(0,e.jsx)(Ie,{treeData:I})})}),(0,e.jsx)(f.Z,{gutter:16,children:(0,e.jsx)(E.Z,{span:24,children:(0,e.jsxs)(m.Z,{title:"\u90E8\u95E8\u7BA1\u7406",extra:(0,e.jsx)(B.ZP,{type:"primary",icon:(0,e.jsx)(De.Z,{}),onClick:function(){return or()},children:"\u65B0\u589E\u90E8\u95E8"}),styles:{body:{padding:"16px"}},children:[(0,e.jsx)("div",{className:"department-search",children:(0,e.jsx)(jr,{placeholder:"\u641C\u7D22\u90E8\u95E8",allowClear:!0,onChange:function(r){return it(r.target.value)}})}),(0,e.jsx)("div",{className:"department-table-container",children:(0,e.jsx)(c.Z,{spinning:de,children:(0,e.jsx)(l.Z,{rowKey:"id",columns:vt,dataSource:ht,pagination:!1,onRow:function(r){return{onClick:function(){Kr(r),He(!0),Ae(r.id)},style:{cursor:"pointer"}}},rowClassName:function(r){return(v==null?void 0:v.id)===r.id?"ant-table-row-selected":""}})})})]})})}),(0,e.jsx)(h.Z,{title:"".concat(ve==null?void 0:ve.name," - \u90E8\u95E8\u8BE6\u60C5"),open:Nr,onCancel:function(){return He(!1)},footer:null,width:600,children:ve&&C?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{marginBottom:20},children:[(0,e.jsxs)(f.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{span:12,children:(0,e.jsxs)("div",{style:{marginBottom:16},children:[(0,e.jsx)("div",{style:{color:"#666",fontSize:13,marginBottom:4},children:"\u90E8\u95E8\u540D\u79F0"}),(0,e.jsx)("div",{style:{fontSize:16,fontWeight:600},children:C.name})]})}),(0,e.jsx)(E.Z,{span:12,children:(0,e.jsxs)("div",{style:{marginBottom:16},children:[(0,e.jsx)("div",{style:{color:"#666",fontSize:13,marginBottom:4},children:"\u90E8\u95E8\u7F16\u7801"}),(0,e.jsx)("div",{style:{fontSize:16},children:C.code})]})}),(0,e.jsx)(E.Z,{span:12,children:(0,e.jsxs)("div",{style:{marginBottom:16},children:[(0,e.jsx)("div",{style:{color:"#666",fontSize:13,marginBottom:4},children:"\u4E0A\u7EA7\u90E8\u95E8"}),(0,e.jsx)("div",{style:{fontSize:16},children:C.parentName||"\u65E0"})]})}),(0,e.jsx)(E.Z,{span:12,children:(0,e.jsxs)("div",{style:{marginBottom:16},children:[(0,e.jsx)("div",{style:{color:"#666",fontSize:13,marginBottom:4},children:"\u72B6\u6001"}),(0,e.jsx)(M.Z,{color:C.status===1?"green":"red",children:C.status===1?"\u6B63\u5E38":"\u7981\u7528"})]})})]}),(0,e.jsxs)("div",{style:{marginBottom:16},children:[(0,e.jsx)("div",{style:{color:"#666",fontSize:13,marginBottom:8},children:"\u90E8\u95E8\u8D1F\u8D23\u4EBA"}),C.managerNames&&C.managerNames.length>0?(0,e.jsx)(H.Z,{size:8,wrap:!0,children:C.managerNames.map(function(a){return(0,e.jsxs)("span",{style:{color:"#1890ff"},children:[(0,e.jsx)(Be.Z,{style:{marginRight:4}}),a]},a)})}):(0,e.jsx)("span",{style:{color:"#bfbfbf"},children:"\u672A\u8BBE\u7F6E\u8D1F\u8D23\u4EBA"})]}),C.description&&(0,e.jsxs)("div",{style:{marginBottom:16},children:[(0,e.jsx)("div",{style:{color:"#666",fontSize:13,marginBottom:8},children:"\u90E8\u95E8\u63CF\u8FF0"}),(0,e.jsx)("div",{style:{color:"#595959",fontSize:14},children:C.description})]})]}),(0,e.jsx)(D.Z,{style:{margin:"8px 0 16px 0"}}),(0,e.jsxs)("div",{style:{marginBottom:16},children:[(0,e.jsx)("div",{style:{fontSize:15,fontWeight:600,marginBottom:12},children:"\u90E8\u95E8\u7EDF\u8BA1"}),(0,e.jsxs)(f.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{span:8,children:(0,e.jsxs)("div",{style:{textAlign:"center",padding:"16px",background:"#f5f5f5",borderRadius:6},children:[(0,e.jsx)("div",{style:{fontSize:24,fontWeight:700,color:"#1890ff",marginBottom:4},children:C.memberCount||0}),(0,e.jsx)("div",{style:{fontSize:13,color:"#666"},children:"\u90E8\u95E8\u4EBA\u6570"})]})}),(0,e.jsx)(E.Z,{span:8,children:(0,e.jsxs)("div",{style:{textAlign:"center",padding:"16px",background:"#f5f5f5",borderRadius:6},children:[(0,e.jsx)("div",{style:{fontSize:24,fontWeight:700,color:"#52c41a",marginBottom:4},children:C.childCount||0}),(0,e.jsx)("div",{style:{fontSize:13,color:"#666"},children:"\u5B50\u90E8\u95E8\u6570"})]})}),(0,e.jsx)(E.Z,{span:8,children:(0,e.jsxs)("div",{style:{textAlign:"center",padding:"16px",background:"#f5f5f5",borderRadius:6},children:[(0,e.jsx)("div",{style:{fontSize:24,fontWeight:700,color:"#fa8c16",marginBottom:4},children:C.totalMemberCount||0}),(0,e.jsx)("div",{style:{fontSize:13,color:"#666"},children:"\u603B\u4EBA\u6570"})]})})]})]}),(0,e.jsxs)("div",{style:{background:"#fafafa",padding:"12px 16px",borderRadius:6,fontSize:13,color:"#666",display:"flex",justifyContent:"space-between"},children:[(0,e.jsxs)("span",{children:["\u6392\u5E8F\uFF1A",C.sort]}),(0,e.jsxs)("span",{children:["\u521B\u5EFA\u65F6\u95F4\uFF1A",C.createTime]})]})]}):(0,e.jsx)("div",{style:{textAlign:"center",padding:"40px 0"},children:(0,e.jsx)(c.Z,{})})}),(0,e.jsx)(h.Z,{title:V?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8",open:be,onOk:function(){k.validateFields().then(function(r){ct(r)})},onCancel:function(){he(!1),ce(null),k&&k.resetFields()},width:600,children:(0,e.jsxs)(w.Z,{form:k,layout:"vertical",initialValues:{status:!0,sort:0,managerIds:[]},children:[(0,e.jsxs)(f.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{span:12,children:(0,e.jsx)(w.Z.Item,{name:"name",label:"\u90E8\u95E8\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"}],children:(0,e.jsx)(x.Z,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"})})}),(0,e.jsx)(E.Z,{span:12,children:(0,e.jsx)(w.Z.Item,{name:"code",label:"\u90E8\u95E8\u7F16\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u7801"}],children:(0,e.jsx)(x.Z,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7F16\u7801"})})})]}),(0,e.jsx)(w.Z.Item,{name:"parentId",label:"\u4E0A\u7EA7\u90E8\u95E8",children:(0,e.jsx)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",allowClear:!0,treeData:nt(I),treeDefaultExpandAll:!0,showSearch:!0,filterTreeNode:function(r,t){var n,s;return(n=t==null||(s=t.title)===null||s===void 0?void 0:s.toString().toLowerCase().includes(r.toLowerCase()))!==null&&n!==void 0?n:!1}})}),(0,e.jsx)(w.Z.Item,{name:"managerIds",label:"\u90E8\u95E8\u8D1F\u8D23\u4EBA",children:(0,e.jsx)(pe.Z,{mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u90E8\u95E8\u8D1F\u8D23\u4EBA",allowClear:!0,showSearch:!0,filterOption:function(r,t){var n;return t==null||(n=t.children)===null||n===void 0?void 0:n.toLowerCase().includes(r.toLowerCase())},loading:Rr,children:Mr.map(function(a){return(0,e.jsx)(Er,{value:a.id,children:(0,e.jsxs)(H.Z,{children:[(0,e.jsx)(j.Z,{size:"small",icon:(0,e.jsx)(Be.Z,{})}),(0,e.jsx)("span",{children:a.name}),a.departmentName&&(0,e.jsx)(M.Z,{color:"blue",children:a.departmentName})]})},a.id)})})}),(0,e.jsx)(w.Z.Item,{name:"description",label:"\u90E8\u95E8\u63CF\u8FF0",children:(0,e.jsx)(x.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u63CF\u8FF0",rows:3})}),(0,e.jsxs)(f.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{span:12,children:(0,e.jsx)(w.Z.Item,{name:"status",label:"\u72B6\u6001",valuePropName:"checked",children:(0,e.jsx)(q.Z,{checkedChildren:"\u542F\u7528",unCheckedChildren:"\u7981\u7528"})})}),(0,e.jsx)(E.Z,{span:12,children:(0,e.jsx)(w.Z.Item,{name:"sort",label:"\u6392\u5E8F",children:(0,e.jsx)(x.Z,{type:"number",placeholder:"\u6392\u5E8F\u53F7"})})})]})]})}),(0,e.jsxs)(h.Z,{title:"".concat(v==null?void 0:v.name," - \u6210\u5458\u7BA1\u7406"),open:Ce,onCancel:function(){return ze(!1)},footer:null,width:800,children:[(0,e.jsxs)("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0"},children:[(0,e.jsx)(x.Z.Search,{placeholder:"\u641C\u7D22\u6210\u5458\uFF08\u59D3\u540D/\u5DE5\u53F7/\u804C\u4F4D/\u90AE\u7BB1\uFF09",allowClear:!0,style:{width:300,borderRadius:6},onChange:function(r){return Qr(r.target.value)}}),(0,e.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,e.jsxs)("span",{style:{alignSelf:"center",color:"#888",fontSize:14,marginRight:12},children:["\u5F53\u524D\u6210\u5458\u6570\uFF1A",dr.length]}),(0,e.jsx)(B.ZP,{danger:!0,disabled:Ee.length===0,onClick:Dt,style:{borderRadius:6},children:"\u6279\u91CF\u79FB\u9664"}),(0,e.jsx)(B.ZP,{type:"primary",icon:(0,e.jsx)(De.Z,{}),onClick:Et,style:{borderRadius:6},children:"\u6DFB\u52A0\u6210\u5458"})]})]}),(0,e.jsx)(D.Z,{style:{margin:"8px 0 16px 0"}}),(0,e.jsx)(l.Z,{rowKey:"userId",columns:yt.map(function(a){return a.key==="action"?a:R()(R()({},a),{},{onHeaderCell:function(){return{style:{fontWeight:600}}}})}),dataSource:dr,loading:_r,pagination:!1,size:"small",bordered:!0,rowSelection:{selectedRowKeys:Ee,onChange:function(r){return ir(r)}},style:{background:"#fff",borderRadius:8}}),(0,e.jsxs)(h.Z,{title:"\u6DFB\u52A0\u6210\u5458",open:Yr,onCancel:function(){return ye(!1)},footer:null,width:700,children:[(0,e.jsx)(cr.Z,{dataSource:rt.map(function(a){return R()({key:a.id,title:a.name},a)}),showSearch:!0,listStyle:{width:280,height:400},targetKeys:Fe,onChange:function(r){return ar(r)},render:function(r){return r.name},filterOption:function(r,t){var n;return((n=t.title)!==null&&n!==void 0?n:"").toLowerCase().includes((r!=null?r:"").toLowerCase())},titles:["\u53EF\u9009\u7528\u6237","\u5DF2\u9009\u7528\u6237"],operations:["\u6DFB\u52A0","\u79FB\u9664"]}),(0,e.jsxs)("div",{style:{textAlign:"right",marginTop:16},children:[(0,e.jsx)(B.ZP,{onClick:function(){return ye(!1)},style:{marginRight:8},children:"\u53D6\u6D88"}),(0,e.jsx)(B.ZP,{type:"primary",onClick:St,loading:Xr,children:"\u786E\u5B9A"})]})]})]}),(0,e.jsx)(h.Z,{title:"\u6279\u91CF\u64CD\u4F5C",open:xr,onCancel:function(){return Br(!1)},footer:null,width:600,children:(0,e.jsxs)("div",{style:{padding:20,textAlign:"center"},children:[(0,e.jsx)(hr.Z,{style:{fontSize:48,color:"#1890ff",marginBottom:16}}),(0,e.jsx)("div",{children:"\u6279\u91CF\u64CD\u4F5C\u529F\u80FD\u5F00\u53D1\u4E2D..."})]})})]})}},97593:function(xe,X,u){u.d(X,{Gv:function(){return B},If:function(){return le},Sb:function(){return R},Tp:function(){return H},W6:function(){return ue},j4:function(){return ie},v$:function(){return g},wA:function(){return m}});var ae=u(97857),S=u.n(ae),se=u(15009),o=u.n(se),T=u(99289),F=u.n(T),P=u(45618);function R(){return N.apply(this,arguments)}function N(){return N=F()(o()().mark(function l(){return o()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,P.request)("/api/departments/tree",{method:"GET"}));case 1:case"end":return D.stop()}},l)})),N.apply(this,arguments)}function ue(l){return z.apply(this,arguments)}function z(){return z=F()(o()().mark(function l(h){return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,P.request)("/api/departments/".concat(h),{method:"GET"}));case 1:case"end":return y.stop()}},l)})),z.apply(this,arguments)}function g(l){return K.apply(this,arguments)}function K(){return K=F()(o()().mark(function l(h){return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,P.request)("/api/departments",{method:"POST",data:S()(S()({},h),{},{status:h.status?1:0})}));case 1:case"end":return y.stop()}},l)})),K.apply(this,arguments)}function ie(l,h){return p.apply(this,arguments)}function p(){return p=F()(o()().mark(function l(h,D){return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,P.request)("/api/departments/".concat(h),{method:"PUT",data:S()(S()({},D),{},{status:D.status?1:0})}));case 1:case"end":return j.stop()}},l)})),p.apply(this,arguments)}function le(l){return x.apply(this,arguments)}function x(){return x=F()(o()().mark(function l(h){return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,P.request)("/api/departments/".concat(h),{method:"DELETE"}));case 1:case"end":return y.stop()}},l)})),x.apply(this,arguments)}function pe(l,h){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function l(h,D){return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",request("/api/departments/".concat(h,"/status"),{method:"PATCH",data:{status:D}}));case 1:case"end":return j.stop()}},l)})),w.apply(this,arguments)}function b(l,h,D){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function l(h,D,y){return _regeneratorRuntime().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.abrupt("return",request("/api/departments/".concat(h,"/move"),{method:"PATCH",data:{parentId:D,sort:y}}));case 1:case"end":return q.stop()}},l)})),M.apply(this,arguments)}function H(l){return O.apply(this,arguments)}function O(){return O=F()(o()().mark(function l(h){return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,P.request)("/api/departments/".concat(h,"/members"),{method:"GET"}));case 1:case"end":return y.stop()}},l)})),O.apply(this,arguments)}function B(l,h){return $.apply(this,arguments)}function $(){return $=F()(o()().mark(function l(h,D){return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,P.request)("/api/departments/".concat(h,"/members"),{method:"POST",data:{userIds:D}}));case 1:case"end":return j.stop()}},l)})),$.apply(this,arguments)}function m(l,h){return f.apply(this,arguments)}function f(){return f=F()(o()().mark(function l(h,D){return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,P.request)("/api/departments/".concat(h,"/members/").concat(D),{method:"DELETE"}));case 1:case"end":return j.stop()}},l)})),f.apply(this,arguments)}function E(l,h){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function l(h,D){return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",request("/api/departments/".concat(h,"/manager"),{method:"PUT",data:{userId:D}}));case 1:case"end":return j.stop()}},l)})),c.apply(this,arguments)}},96287:function(xe,X,u){u.d(X,{Cp:function(){return H},Nq:function(){return g},VC:function(){return le},VR:function(){return B},Wf:function(){return b},h8:function(){return ie},lE:function(){return F},nE:function(){return R},r4:function(){return ue}});var ae=u(15009),S=u.n(ae),se=u(99289),o=u.n(se),T=u(45618);function F(m){return P.apply(this,arguments)}function P(){return P=o()(S()().mark(function m(f){return S()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,T.request)("/api/users",{method:"GET",params:f}));case 1:case"end":return c.stop()}},m)})),P.apply(this,arguments)}function R(m){return N.apply(this,arguments)}function N(){return N=o()(S()().mark(function m(f){return S()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,T.request)("/api/users/".concat(f),{method:"GET"}));case 1:case"end":return c.stop()}},m)})),N.apply(this,arguments)}function ue(m){return z.apply(this,arguments)}function z(){return z=o()(S()().mark(function m(f){return S()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,T.request)("/api/users",{method:"POST",data:f}));case 1:case"end":return c.stop()}},m)})),z.apply(this,arguments)}function g(m){return K.apply(this,arguments)}function K(){return K=o()(S()().mark(function m(f){return S()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,T.request)("/api/users/".concat(f.id),{method:"PUT",data:f}));case 1:case"end":return c.stop()}},m)})),K.apply(this,arguments)}function ie(m){return p.apply(this,arguments)}function p(){return p=o()(S()().mark(function m(f){return S()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,T.request)("/api/users/".concat(f),{method:"DELETE"}));case 1:case"end":return c.stop()}},m)})),p.apply(this,arguments)}function le(m,f){return x.apply(this,arguments)}function x(){return x=o()(S()().mark(function m(f,E){return S()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,T.request)("/api/users/".concat(f,"/toggle-status"),{method:"PUT",data:{isActive:E}}));case 1:case"end":return l.stop()}},m)})),x.apply(this,arguments)}function pe(m){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function m(f){return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",request("/api/users/batch-delete",{method:"POST",data:{ids:f}}));case 1:case"end":return c.stop()}},m)})),w.apply(this,arguments)}function b(m,f){return M.apply(this,arguments)}function M(){return M=o()(S()().mark(function m(f,E){return S()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,T.request)("/api/users/batch-toggle-status",{method:"PUT",data:{ids:f,isActive:E}}));case 1:case"end":return l.stop()}},m)})),M.apply(this,arguments)}function H(m){return O.apply(this,arguments)}function O(){return O=o()(S()().mark(function m(f){return S()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,T.request)("/api/users/change-password",{method:"PUT",data:f}));case 1:case"end":return c.stop()}},m)})),O.apply(this,arguments)}function B(m,f){return $.apply(this,arguments)}function $(){return $=o()(S()().mark(function m(f,E){return S()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,T.request)("/api/users/".concat(f,"/reset-password"),{method:"PUT",data:E}));case 1:case"end":return l.stop()}},m)})),$.apply(this,arguments)}}}]);
