"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[818],{12084:function(J,S,t){t.r(S);var W=t(15009),i=t.n(W),k=t(99289),m=t.n(k),g=t(5574),I=t.n(g),C=t(67294),H=t(90930),R=t(66854),$=t(72269),v=t(78957),L=t(66309),P=t(83622),G=t(86738),d=t(2453),F=t(99611),A=t(86548),z=t(48689),M=t(24969),b=t(45618),y=t(98323),c=t(85893),U=function(){var w=(0,C.useState)([]),B=I()(w,2),O=B[0],Q=B[1],Z=(0,C.useState)(!1),V=I()(Z,2),T=V[0],K=V[1],D=(0,C.useRef)(),r=[{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"name",key:"name",ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u9879\u76EE\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u9879\u76EE\u63CF\u8FF0",dataIndex:"description",key:"description",ellipsis:!0,search:!1,hideInTable:window.innerWidth<1200},{title:"H5\u5730\u5740",dataIndex:"h5Url",key:"h5Url",ellipsis:!0,search:!1,render:function(u){return(0,c.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:u})}},{title:"\u6392\u5E8F\u6743\u91CD",dataIndex:"sortOrder",key:"sortOrder",search:!1,width:100,hideInTable:window.innerWidth<1e3},{title:"\u72B6\u6001",dataIndex:"isActive",key:"isActive",width:100,valueType:"select",valueEnum:{true:{text:"\u542F\u7528",status:"Success"},false:{text:"\u7981\u7528",status:"Default"}},render:function(u,s){return(0,c.jsx)($.Z,{checked:s.isActive,onChange:function(h){return E(s.id,h)}})}},{title:"\u66F4\u65B0\u4EE3\u7801\u914D\u7F6E",key:"updateCodeConfig",search:!1,width:120,hideInTable:window.innerWidth<1400,render:function(u,s){return(0,c.jsxs)(v.Z,{direction:"vertical",size:"small",children:[(0,c.jsx)(L.Z,{color:s.enableUpdateCode?"green":"default",children:s.enableUpdateCode?"\u5DF2\u542F\u7528":"\u672A\u542F\u7528"}),s.enableUpdateCode&&s.updateCodeCommand&&(0,c.jsx)(L.Z,{color:"purple",style:{fontSize:"10px"},children:"\u6709\u547D\u4EE4"})]})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createdAt",key:"createdAt",valueType:"dateTime",search:!1,width:180},{title:"\u64CD\u4F5C",key:"action",search:!1,width:280,render:function(u,s){return(0,c.jsxs)(v.Z,{children:[(0,c.jsx)(P.ZP,{type:"link",icon:(0,c.jsx)(F.Z,{}),onClick:function(){return a(s.id)},children:"\u67E5\u770B"}),(0,c.jsx)(P.ZP,{type:"link",icon:(0,c.jsx)(A.Z,{}),onClick:function(){return e(s.id)},children:"\u7F16\u8F91"}),(0,c.jsx)(G.Z,{title:"\u786E\u5B9A\u5220\u9664\u6B64\u9879\u76EE\u5417\uFF1F",onConfirm:function(){return f(s.id)},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,c.jsx)(P.ZP,{type:"link",danger:!0,icon:(0,c.jsx)(z.Z,{}),children:"\u5220\u9664"})})]})}}],n=function(){var p=m()(i()().mark(function u(s){var o;return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,y.mW)({current:String(s.current||1),pageSize:String(s.pageSize||10),name:s.name,isActive:s.isActive});case 3:if(o=_.sent,!o.success){_.next=8;break}return _.abrupt("return",{data:o.data,total:o.total,success:!0});case 8:return d.ZP.error(o.message||"\u83B7\u53D6\u9879\u76EE\u5217\u8868\u5931\u8D25"),_.abrupt("return",{data:[],total:0,success:!1});case 10:_.next=16;break;case 12:return _.prev=12,_.t0=_.catch(0),d.ZP.error("\u83B7\u53D6\u9879\u76EE\u5217\u8868\u5931\u8D25"),_.abrupt("return",{data:[],total:0,success:!1});case 16:case"end":return _.stop()}},u,null,[[0,12]])}));return function(s){return p.apply(this,arguments)}}(),a=function(u){b.history.push("/system/project/detail/".concat(u))},e=function(u){b.history.push("/system/project/edit/".concat(u))},f=function(){var p=m()(i()().mark(function u(s){var o,h;return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,y.th)(s);case 3:o=l.sent,o.success?(d.ZP.success("\u5220\u9664\u9879\u76EE\u6210\u529F"),(h=D.current)===null||h===void 0||h.reload()):d.ZP.error(o.message||"\u5220\u9664\u9879\u76EE\u5931\u8D25"),l.next=10;break;case 7:l.prev=7,l.t0=l.catch(0),d.ZP.error("\u5220\u9664\u9879\u76EE\u5931\u8D25");case 10:case"end":return l.stop()}},u,null,[[0,7]])}));return function(s){return p.apply(this,arguments)}}(),E=function(){var p=m()(i()().mark(function u(s,o){var h,_;return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,(0,y.Ms)([s],o);case 3:h=j.sent,h.success?(d.ZP.success("\u9879\u76EE\u5DF2".concat(o?"\u542F\u7528":"\u7981\u7528")),(_=D.current)===null||_===void 0||_.reload()):d.ZP.error(h.message||"\u72B6\u6001\u66F4\u65B0\u5931\u8D25"),j.next=10;break;case 7:j.prev=7,j.t0=j.catch(0),d.ZP.error("\u72B6\u6001\u66F4\u65B0\u5931\u8D25");case 10:case"end":return j.stop()}},u,null,[[0,7]])}));return function(s,o){return p.apply(this,arguments)}}(),x=function(){var p=m()(i()().mark(function u(s){var o,h;return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(O.length!==0){l.next=3;break}return d.ZP.warning("\u8BF7\u5148\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u9879\u76EE"),l.abrupt("return");case 3:return K(!0),l.prev=4,l.next=7,(0,y.Ms)(O,s);case 7:o=l.sent,o.success?(d.ZP.success("\u6279\u91CF".concat(s?"\u542F\u7528":"\u7981\u7528","\u6210\u529F")),Q([]),(h=D.current)===null||h===void 0||h.reload()):d.ZP.error(o.message||"\u6279\u91CF\u64CD\u4F5C\u5931\u8D25"),l.next=14;break;case 11:l.prev=11,l.t0=l.catch(4),d.ZP.error("\u6279\u91CF\u64CD\u4F5C\u5931\u8D25");case 14:return l.prev=14,K(!1),l.finish(14);case 17:case"end":return l.stop()}},u,null,[[4,11,14,17]])}));return function(s){return p.apply(this,arguments)}}();return(0,c.jsx)(H._z,{children:(0,c.jsx)(R.Z,{columns:r,actionRef:D,request:n,rowKey:"id",search:{labelWidth:120},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"\u9879\u76EE\u5217\u8868",toolBarRender:function(){return[(0,c.jsx)(P.ZP,{type:"primary",icon:(0,c.jsx)(M.Z,{}),onClick:function(){return b.history.push("/system/project/create")},children:"\u65B0\u5EFA\u9879\u76EE"},"primary")]},rowSelection:{selectedRowKeys:O,onChange:Q},tableAlertRender:function(u){var s=u.selectedRowKeys,o=u.selectedRows,h=u.onCleanSelected;return(0,c.jsx)(v.Z,{size:24,children:(0,c.jsxs)("span",{children:["\u5DF2\u9009\u62E9 ",s.length," \u9879",(0,c.jsx)("a",{style:{marginLeft:8},onClick:h,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(){return(0,c.jsxs)(v.Z,{children:[(0,c.jsx)(P.ZP,{size:"small",loading:T,onClick:function(){return x(!0)},children:"\u6279\u91CF\u542F\u7528"}),(0,c.jsx)(P.ZP,{size:"small",loading:T,onClick:function(){return x(!1)},children:"\u6279\u91CF\u7981\u7528"})]})}})})};S.default=U},98323:function(J,S,t){t.d(S,{$L:function(){return G},A4:function(){return B},AF:function(){return $},Ms:function(){return b},e5:function(){return L},mW:function(){return I},th:function(){return z},ty:function(){return F},uh:function(){return K}});var W=t(15009),i=t.n(W),k=t(99289),m=t.n(k),g=t(45618);function I(r){return C.apply(this,arguments)}function C(){return C=m()(i()().mark(function r(n){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("/api/projects",{method:"GET",params:n}));case 1:case"end":return e.stop()}},r)})),C.apply(this,arguments)}function H(){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function r(){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/projects",{method:"GET"}));case 1:case"end":return a.stop()}},r)})),R.apply(this,arguments)}function $(){return v.apply(this,arguments)}function v(){return v=m()(i()().mark(function r(){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,g.request)("/api/projects/active",{method:"GET"}));case 1:case"end":return a.stop()}},r)})),v.apply(this,arguments)}function L(r){return P.apply(this,arguments)}function P(){return P=m()(i()().mark(function r(n){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("/api/projects/".concat(n),{method:"GET"}));case 1:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function G(r){return d.apply(this,arguments)}function d(){return d=m()(i()().mark(function r(n){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("/api/projects",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),d.apply(this,arguments)}function F(r,n){return A.apply(this,arguments)}function A(){return A=m()(i()().mark(function r(n,a){return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,g.request)("/api/projects/".concat(n),{method:"PUT",data:a}));case 1:case"end":return f.stop()}},r)})),A.apply(this,arguments)}function z(r){return M.apply(this,arguments)}function M(){return M=m()(i()().mark(function r(n){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("/api/projects/".concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}},r)})),M.apply(this,arguments)}function b(r,n){return y.apply(this,arguments)}function y(){return y=m()(i()().mark(function r(n,a){return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,g.request)("/api/projects/batch-toggle-status",{method:"PUT",data:{ids:n,isActive:a}}));case 1:case"end":return f.stop()}},r)})),y.apply(this,arguments)}function c(r){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/projects/".concat(n,"/update"),{method:"POST"}));case 1:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function N(r){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/projects/".concat(n,"/update-status"),{method:"GET"}));case 1:case"end":return e.stop()}},r)})),w.apply(this,arguments)}function B(r){return O.apply(this,arguments)}function O(){return O=m()(i()().mark(function r(n){var a,e=arguments;return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return a=e.length>1&&e[1]!==void 0?e[1]:10,E.abrupt("return",(0,g.request)("/api/projects/".concat(n,"/update-logs"),{method:"GET",params:{limit:a}}));case 2:case"end":return E.stop()}},r)})),O.apply(this,arguments)}function Q(r){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/projects/".concat(n,"/update-code"),{method:"POST"}));case 1:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}function V(r){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/projects/".concat(n,"/update-code-status"),{method:"GET"}));case 1:case"end":return e.stop()}},r)})),T.apply(this,arguments)}function K(r){return D.apply(this,arguments)}function D(){return D=m()(i()().mark(function r(n){var a,e=arguments;return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return a=e.length>1&&e[1]!==void 0?e[1]:10,E.abrupt("return",(0,g.request)("/api/projects/".concat(n,"/update-code-logs"),{method:"GET",params:{limit:a}}));case 2:case"end":return E.stop()}},r)})),D.apply(this,arguments)}}}]);
