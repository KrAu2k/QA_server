"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[625],{44333:function(x,Z,t){t.r(Z);var F=t(97857),i=t.n(F),L=t(15009),a=t.n(L),E=t(99289),D=t.n(E),c=t(5574),I=t.n(c),v=t(82826),S=t(60219),A=t(90930),d=t(97269),o=t(5966),W=t(19054),C=t(50335),K=t(52688),M=t(90672),G=t(64317),g=t(2453),R=t(83622),U=t(4393),w=t(45618),P=t(67294),$=t(96287),T=t(97593),e=t(85893),u=function(){var n=(0,P.useState)([]),r=I()(n,2),s=r[0],p=r[1];(0,P.useEffect)(function(){var f=function(){var B=D()(a()().mark(function b(){var j;return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,(0,T.Sb)();case 3:j=m.sent,j.success&&j.data&&p(j.data),m.next=10;break;case 7:m.prev=7,m.t0=m.catch(0),console.error("\u52A0\u8F7D\u90E8\u95E8\u6811\u5931\u8D25:",m.t0);case 10:case"end":return m.stop()}},b,null,[[0,7]])}));return function(){return B.apply(this,arguments)}}();f()},[]);var _=function f(B){return B.map(function(b){return{title:b.name,value:b.id,children:b.children?f(b.children):void 0}})},l=function(){var f=D()(a()().mark(function B(b){var j,y;return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,j=i()(i()({},b),{},{isActive:!0}),O.next=4,(0,$.r4)(j);case 4:y=O.sent,y.success?(g.ZP.success("\u7528\u6237\u521B\u5EFA\u6210\u529F"),w.history.push("/system/user/list")):g.ZP.error("\u7528\u6237\u521B\u5EFA\u5931\u8D25"),O.next=11;break;case 8:O.prev=8,O.t0=O.catch(0),g.ZP.error("\u7528\u6237\u521B\u5EFA\u5931\u8D25");case 11:case"end":return O.stop()}},B,null,[[0,8]])}));return function(b){return f.apply(this,arguments)}}();return(0,e.jsx)(A._z,{header:{title:"\u521B\u5EFA\u7528\u6237",extra:[(0,e.jsx)(R.ZP,{icon:(0,e.jsx)(v.Z,{}),onClick:function(){return w.history.back()},children:"\u8FD4\u56DE"},"back")]},children:(0,e.jsx)(U.Z,{children:(0,e.jsxs)(d.A,{onFinish:l,layout:"vertical",submitter:{render:function(B,b){return[(0,e.jsx)(R.ZP,{onClick:function(){return w.history.back()},children:"\u53D6\u6D88"},"cancel"),(0,e.jsx)(R.ZP,{type:"primary",icon:(0,e.jsx)(S.Z,{}),onClick:function(){var y,m;return(y=B.form)===null||y===void 0||(m=y.submit)===null||m===void 0?void 0:m.call(y)},children:"\u4FDD\u5B58"},"submit")]}},children:[(0,e.jsxs)(d.A.Group,{children:[(0,e.jsx)(o.Z,{name:"username",label:"\u7528\u6237\u540D",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{min:3,message:"\u7528\u6237\u540D\u81F3\u5C113\u4E2A\u5B57\u7B26"},{max:20,message:"\u7528\u6237\u540D\u6700\u591A20\u4E2A\u5B57\u7B26"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u7528\u6237\u540D\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\u3001\u6570\u5B57\u548C\u4E0B\u5212\u7EBF"}],placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}),(0,e.jsx)(o.Z,{name:"name",label:"\u59D3\u540D",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"},{max:50,message:"\u59D3\u540D\u6700\u591A50\u4E2A\u5B57\u7B26"}],placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"})]}),(0,e.jsxs)(d.A.Group,{children:[(0,e.jsx)(o.Z.Password,{name:"password",label:"\u5BC6\u7801",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"},{min:6,message:"\u5BC6\u7801\u81F3\u5C116\u4E2A\u5B57\u7B26"},{max:20,message:"\u5BC6\u7801\u6700\u591A20\u4E2A\u5B57\u7B26"}],placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"}),(0,e.jsx)(o.Z,{name:"employeeNo",label:"\u5458\u5DE5\u7F16\u53F7",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5458\u5DE5\u7F16\u53F7"},{pattern:/^\d+$/,message:"\u5458\u5DE5\u7F16\u53F7\u53EA\u80FD\u662F\u6570\u5B57"}],placeholder:"\u8BF7\u8F93\u5165\u5458\u5DE5\u7F16\u53F7"})]}),(0,e.jsxs)(d.A.Group,{children:[(0,e.jsx)(o.Z,{name:"email",label:"\u90AE\u7BB1",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},{type:"email",message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740"}],placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}),(0,e.jsx)(o.Z,{name:"phone",label:"\u624B\u673A\u53F7",width:"md",rules:[{pattern:/^1[3-9]\d{9}$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u624B\u673A\u53F7\u7801"}],placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"})]}),(0,e.jsxs)(d.A.Group,{children:[(0,e.jsx)(W.Z,{name:"departmentId",label:"\u6240\u5C5E\u90E8\u95E8",width:"md",placeholder:"\u8BF7\u9009\u62E9\u90E8\u95E8",allowClear:!0,fieldProps:{treeData:_(s),showSearch:!0,treeDefaultExpandAll:!1,treeNodeFilterProp:"title",placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u90E8\u95E8"}}),(0,e.jsx)(o.Z,{name:"position",label:"\u804C\u4F4D",width:"md",placeholder:"\u8BF7\u8F93\u5165\u804C\u4F4D"})]}),(0,e.jsxs)(d.A.Group,{children:[(0,e.jsx)(C.Z,{name:"joinDate",label:"\u5165\u804C\u65F6\u95F4",width:"md",placeholder:"\u8BF7\u9009\u62E9\u5165\u804C\u65F6\u95F4"}),(0,e.jsx)(K.Z,{name:"isAdmin",label:"\u7BA1\u7406\u5458\u6743\u9650",tooltip:"\u5F00\u542F\u540E\u7528\u6237\u5C06\u62E5\u6709\u7CFB\u7EDF\u7BA1\u7406\u6743\u9650",fieldProps:{checkedChildren:"\u662F",unCheckedChildren:"\u5426"}})]}),(0,e.jsx)(d.A.Group,{children:(0,e.jsx)(o.Z,{name:"country",label:"\u56FD\u5BB6/\u5730\u533A",width:"md",placeholder:"\u8BF7\u8F93\u5165\u56FD\u5BB6/\u5730\u533A"})}),(0,e.jsx)(d.A.Group,{children:(0,e.jsx)(o.Z,{name:"address",label:"\u5730\u5740",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5730\u5740"})}),(0,e.jsx)(d.A.Group,{children:(0,e.jsx)(o.Z,{name:"avatar",label:"\u5934\u50CFURL",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u5934\u50CFURL"})}),(0,e.jsx)(d.A.Group,{children:(0,e.jsx)(M.Z,{name:"signature",label:"\u4E2A\u4EBA\u7B7E\u540D",width:"xl",placeholder:"\u8BF7\u8F93\u5165\u4E2A\u4EBA\u7B7E\u540D",fieldProps:{rows:4}})}),(0,e.jsx)(d.A.Group,{children:(0,e.jsx)(G.Z,{name:"tags",label:"\u6807\u7B7E",width:"xl",mode:"tags",placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\uFF08\u6309\u56DE\u8F66\u6DFB\u52A0\uFF09",fieldProps:{tokenSeparators:[","]}})})]})})})};Z.default=u},97593:function(x,Z,t){t.d(Z,{Gv:function(){return $},If:function(){return K},Sb:function(){return I},Tp:function(){return w},W6:function(){return S},j4:function(){return W},v$:function(){return d},wA:function(){return e}});var F=t(97857),i=t.n(F),L=t(15009),a=t.n(L),E=t(99289),D=t.n(E),c=t(45618);function I(){return v.apply(this,arguments)}function v(){return v=D()(a()().mark(function r(){return a()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,c.request)("/api/departments/tree",{method:"GET"}));case 1:case"end":return p.stop()}},r)})),v.apply(this,arguments)}function S(r){return A.apply(this,arguments)}function A(){return A=D()(a()().mark(function r(s){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/departments/".concat(s),{method:"GET"}));case 1:case"end":return _.stop()}},r)})),A.apply(this,arguments)}function d(r){return o.apply(this,arguments)}function o(){return o=D()(a()().mark(function r(s){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/departments",{method:"POST",data:i()(i()({},s),{},{status:s.status?1:0})}));case 1:case"end":return _.stop()}},r)})),o.apply(this,arguments)}function W(r,s){return C.apply(this,arguments)}function C(){return C=D()(a()().mark(function r(s,p){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.request)("/api/departments/".concat(s),{method:"PUT",data:i()(i()({},p),{},{status:p.status?1:0})}));case 1:case"end":return l.stop()}},r)})),C.apply(this,arguments)}function K(r){return M.apply(this,arguments)}function M(){return M=D()(a()().mark(function r(s){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/departments/".concat(s),{method:"DELETE"}));case 1:case"end":return _.stop()}},r)})),M.apply(this,arguments)}function G(r,s){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function r(s,p){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/departments/".concat(s,"/status"),{method:"PATCH",data:{status:p}}));case 1:case"end":return l.stop()}},r)})),g.apply(this,arguments)}function R(r,s,p){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function r(s,p,_){return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",request("/api/departments/".concat(s,"/move"),{method:"PATCH",data:{parentId:p,sort:_}}));case 1:case"end":return f.stop()}},r)})),U.apply(this,arguments)}function w(r){return P.apply(this,arguments)}function P(){return P=D()(a()().mark(function r(s){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/departments/".concat(s,"/members"),{method:"GET"}));case 1:case"end":return _.stop()}},r)})),P.apply(this,arguments)}function $(r,s){return T.apply(this,arguments)}function T(){return T=D()(a()().mark(function r(s,p){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.request)("/api/departments/".concat(s,"/members"),{method:"POST",data:{userIds:p}}));case 1:case"end":return l.stop()}},r)})),T.apply(this,arguments)}function e(r,s){return u.apply(this,arguments)}function u(){return u=D()(a()().mark(function r(s,p){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.request)("/api/departments/".concat(s,"/members/").concat(p),{method:"DELETE"}));case 1:case"end":return l.stop()}},r)})),u.apply(this,arguments)}function h(r,s){return n.apply(this,arguments)}function n(){return n=_asyncToGenerator(_regeneratorRuntime().mark(function r(s,p){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/api/departments/".concat(s,"/manager"),{method:"PUT",data:{userId:p}}));case 1:case"end":return l.stop()}},r)})),n.apply(this,arguments)}},96287:function(x,Z,t){t.d(Z,{Cp:function(){return w},Nq:function(){return d},VC:function(){return K},VR:function(){return $},Wf:function(){return R},h8:function(){return W},lE:function(){return D},nE:function(){return I},r4:function(){return S}});var F=t(15009),i=t.n(F),L=t(99289),a=t.n(L),E=t(45618);function D(e){return c.apply(this,arguments)}function c(){return c=a()(i()().mark(function e(u){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/users",{method:"GET",params:u}));case 1:case"end":return n.stop()}},e)})),c.apply(this,arguments)}function I(e){return v.apply(this,arguments)}function v(){return v=a()(i()().mark(function e(u){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/users/".concat(u),{method:"GET"}));case 1:case"end":return n.stop()}},e)})),v.apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return A=a()(i()().mark(function e(u){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/users",{method:"POST",data:u}));case 1:case"end":return n.stop()}},e)})),A.apply(this,arguments)}function d(e){return o.apply(this,arguments)}function o(){return o=a()(i()().mark(function e(u){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/users/".concat(u.id),{method:"PUT",data:u}));case 1:case"end":return n.stop()}},e)})),o.apply(this,arguments)}function W(e){return C.apply(this,arguments)}function C(){return C=a()(i()().mark(function e(u){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/users/".concat(u),{method:"DELETE"}));case 1:case"end":return n.stop()}},e)})),C.apply(this,arguments)}function K(e,u){return M.apply(this,arguments)}function M(){return M=a()(i()().mark(function e(u,h){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.request)("/api/users/".concat(u,"/toggle-status"),{method:"PUT",data:{isActive:h}}));case 1:case"end":return r.stop()}},e)})),M.apply(this,arguments)}function G(e){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function e(u){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/users/batch-delete",{method:"POST",data:{ids:u}}));case 1:case"end":return n.stop()}},e)})),g.apply(this,arguments)}function R(e,u){return U.apply(this,arguments)}function U(){return U=a()(i()().mark(function e(u,h){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.request)("/api/users/batch-toggle-status",{method:"PUT",data:{ids:u,isActive:h}}));case 1:case"end":return r.stop()}},e)})),U.apply(this,arguments)}function w(e){return P.apply(this,arguments)}function P(){return P=a()(i()().mark(function e(u){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/users/change-password",{method:"PUT",data:u}));case 1:case"end":return n.stop()}},e)})),P.apply(this,arguments)}function $(e,u){return T.apply(this,arguments)}function T(){return T=a()(i()().mark(function e(u,h){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.request)("/api/users/".concat(u,"/reset-password"),{method:"PUT",data:h}));case 1:case"end":return r.stop()}},e)})),T.apply(this,arguments)}}}]);
