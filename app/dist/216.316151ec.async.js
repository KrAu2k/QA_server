!(function(){var U9=Object.defineProperty,Y9=Object.defineProperties;var X9=Object.getOwnPropertyDescriptors;var Jm=Object.getOwnPropertySymbols;var YA=Object.prototype.hasOwnProperty,XA=Object.prototype.propertyIsEnumerable;var qv=Math.pow,yS=(Se,Vt,K)=>Vt in Se?U9(Se,Vt,{enumerable:!0,configurable:!0,writable:!0,value:K}):Se[Vt]=K,Br=(Se,Vt)=>{for(var K in Vt||(Vt={}))YA.call(Vt,K)&&yS(Se,K,Vt[K]);if(Jm)for(var K of Jm(Vt))XA.call(Vt,K)&&yS(Se,K,Vt[K]);return Se},Ps=(Se,Vt)=>Y9(Se,X9(Vt));var Ur=(Se,Vt)=>{var K={};for(var vt in Se)YA.call(Se,vt)&&Vt.indexOf(vt)<0&&(K[vt]=Se[vt]);if(Se!=null&&Jm)for(var vt of Jm(Se))Vt.indexOf(vt)<0&&XA.call(Se,vt)&&(K[vt]=Se[vt]);return K};var Qv=(Se,Vt,K)=>yS(Se,typeof Vt!="symbol"?Vt+"":Vt,K);var KA=(Se,Vt,K)=>new Promise((vt,B)=>{var Nt=H=>{try{gt(K.next(H))}catch(j){B(j)}},Rt=H=>{try{gt(K.throw(H))}catch(j){B(j)}},gt=H=>H.done?vt(H.value):Promise.resolve(H.value).then(Nt,Rt);gt((K=K.apply(Se,Vt)).next())});(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[216],{20882:function(Se,Vt,K){"use strict";K.d(Vt,{OE:function(){return Z9},jG:function(){return Rt}});var vt={};K.r(vt),K.d(vt,{add:function(){return Rn},adjoint:function(){return lo},clone:function(){return Go},copy:function(){return Na},create:function(){return Qe},determinant:function(){return $o},equals:function(){return fo},exactEquals:function(){return Ue},frob:function(){return ke},fromQuat:function(){return zl},fromQuat2:function(){return uo},fromRotation:function(){return Dl},fromRotationTranslation:function(){return Bl},fromRotationTranslationScale:function(){return $u},fromRotationTranslationScaleOrigin:function(){return ho},fromScaling:function(){return us},fromTranslation:function(){return La},fromValues:function(){return jo},fromXRotation:function(){return ju},fromYRotation:function(){return Lc},fromZRotation:function(){return co},frustum:function(){return Hu},getRotation:function(){return Fl},getScaling:function(){return hs},getTranslation:function(){return Ho},identity:function(){return ni},invert:function(){return Di},lookAt:function(){return Xu},mul:function(){return Dc},multiply:function(){return qt},multiplyScalar:function(){return xi},multiplyScalarAndAdd:function(){return Je},ortho:function(){return Zl},orthoNO:function(){return Uu},orthoZO:function(){return Yu},perspective:function(){return Ff},perspectiveFromFieldOfView:function(){return Vu},perspectiveNO:function(){return Ic},perspectiveZO:function(){return zf},rotate:function(){return Zr},rotateX:function(){return bi},rotateY:function(){return Nc},rotateZ:function(){return Bf},scale:function(){return Dn},set:function(){return da},str:function(){return ne},sub:function(){return Ku},subtract:function(){return ri},targetTo:function(){return Wl},translate:function(){return Be},transpose:function(){return oo}});var B={};K.r(B),K.d(B,{circle:function(){return ZN},diamond:function(){return WN},rect:function(){return jN},simple:function(){return HN},triangle:function(){return nC},triangleRect:function(){return $N},vee:function(){return GN}});var Nt={};K.r(Nt),K.d(Nt,{ArrowCountIcon:function(){return TF},PlusMinusIcon:function(){return AF}});var Rt={};K.r(Rt),K.d(Rt,{b:function(){return PF},TextNode:function(){return KF}});var gt=K(1413),H=K(15671),j=K(43144),J=K(74902),$=K(53640),X=K(60136),V=K(97685),ct=K(26729),Ct=ct,it=1e-6,Ot=typeof Float32Array!="undefined"?Float32Array:Array,Dt=Math.random;function Ft(a){Ot=a}var me=Math.PI/180;function Yt(a){return a*me}function Ge(a,n){return Math.abs(a-n)<=it*Math.max(1,Math.abs(a),Math.abs(n))}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});function Xt(){var a=new Ot(3);return Ot!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function On(a){var n=new Ot(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}function rn(a){var n=a[0],r=a[1],s=a[2];return Math.hypot(n,r,s)}function pe(a,n,r){var s=new Ot(3);return s[0]=a,s[1]=n,s[2]=r,s}function bt(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a}function Ut(a,n,r,s){return a[0]=n,a[1]=r,a[2]=s,a}function oe(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a}function zt(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a}function ce(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a[2]=n[2]*r[2],a}function Me(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a[2]=n[2]/r[2],a}function Ne(a,n){return a[0]=Math.ceil(n[0]),a[1]=Math.ceil(n[1]),a[2]=Math.ceil(n[2]),a}function dn(a,n){return a[0]=Math.floor(n[0]),a[1]=Math.floor(n[1]),a[2]=Math.floor(n[2]),a}function or(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a[2]=Math.min(n[2],r[2]),a}function qn(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a[2]=Math.max(n[2],r[2]),a}function Li(a,n){return a[0]=Math.round(n[0]),a[1]=Math.round(n[1]),a[2]=Math.round(n[2]),a}function hr(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a}function Cr(a,n,r,s){return a[0]=n[0]+r[0]*s,a[1]=n[1]+r[1]*s,a[2]=n[2]+r[2]*s,a}function ot(a,n){var r=n[0]-a[0],s=n[1]-a[1],l=n[2]-a[2];return Math.hypot(r,s,l)}function ut(a,n){var r=n[0]-a[0],s=n[1]-a[1],l=n[2]-a[2];return r*r+s*s+l*l}function dt(a){var n=a[0],r=a[1],s=a[2];return n*n+r*r+s*s}function ht(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a}function Tt(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a}function _t(a,n){var r=n[0],s=n[1],l=n[2],u=r*r+s*s+l*l;return u>0&&(u=1/Math.sqrt(u)),a[0]=n[0]*u,a[1]=n[1]*u,a[2]=n[2]*u,a}function $t(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}function _e(a,n,r){var s=n[0],l=n[1],u=n[2],h=r[0],f=r[1],d=r[2];return a[0]=l*d-u*f,a[1]=u*h-s*d,a[2]=s*f-l*h,a}function An(a,n,r,s){var l=n[0],u=n[1],h=n[2];return a[0]=l+s*(r[0]-l),a[1]=u+s*(r[1]-u),a[2]=h+s*(r[2]-h),a}function he(a,n,r,s,l,u){var h=u*u,f=h*(2*u-3)+1,d=h*(u-2)+u,v=h*(u-1),p=h*(3-2*u);return a[0]=n[0]*f+r[0]*d+s[0]*v+l[0]*p,a[1]=n[1]*f+r[1]*d+s[1]*v+l[1]*p,a[2]=n[2]*f+r[2]*d+s[2]*v+l[2]*p,a}function on(a,n,r,s,l,u){var h=1-u,f=h*h,d=u*u,v=f*h,p=3*u*f,g=3*d*h,m=d*u;return a[0]=n[0]*v+r[0]*p+s[0]*g+l[0]*m,a[1]=n[1]*v+r[1]*p+s[1]*g+l[1]*m,a[2]=n[2]*v+r[2]*p+s[2]*g+l[2]*m,a}function lr(a,n){n=n||1;var r=glMatrix.RANDOM()*2*Math.PI,s=glMatrix.RANDOM()*2-1,l=Math.sqrt(1-s*s)*n;return a[0]=Math.cos(r)*l,a[1]=Math.sin(r)*l,a[2]=s*n,a}function Ve(a,n,r){var s=n[0],l=n[1],u=n[2],h=r[3]*s+r[7]*l+r[11]*u+r[15];return h=h||1,a[0]=(r[0]*s+r[4]*l+r[8]*u+r[12])/h,a[1]=(r[1]*s+r[5]*l+r[9]*u+r[13])/h,a[2]=(r[2]*s+r[6]*l+r[10]*u+r[14])/h,a}function Ee(a,n,r){var s=n[0],l=n[1],u=n[2];return a[0]=s*r[0]+l*r[3]+u*r[6],a[1]=s*r[1]+l*r[4]+u*r[7],a[2]=s*r[2]+l*r[5]+u*r[8],a}function Wn(a,n,r){var s=r[0],l=r[1],u=r[2],h=r[3],f=n[0],d=n[1],v=n[2],p=l*v-u*d,g=u*f-s*v,m=s*d-l*f,b=l*m-u*g,E=u*p-s*m,w=s*g-l*p,S=h*2;return p*=S,g*=S,m*=S,b*=2,E*=2,w*=2,a[0]=f+p+b,a[1]=d+g+E,a[2]=v+m+w,a}function Vn(a,n,r,s){var l=[],u=[];return l[0]=n[0]-r[0],l[1]=n[1]-r[1],l[2]=n[2]-r[2],u[0]=l[0],u[1]=l[1]*Math.cos(s)-l[2]*Math.sin(s),u[2]=l[1]*Math.sin(s)+l[2]*Math.cos(s),a[0]=u[0]+r[0],a[1]=u[1]+r[1],a[2]=u[2]+r[2],a}function vi(a,n,r,s){var l=[],u=[];return l[0]=n[0]-r[0],l[1]=n[1]-r[1],l[2]=n[2]-r[2],u[0]=l[2]*Math.sin(s)+l[0]*Math.cos(s),u[1]=l[1],u[2]=l[2]*Math.cos(s)-l[0]*Math.sin(s),a[0]=u[0]+r[0],a[1]=u[1]+r[1],a[2]=u[2]+r[2],a}function ua(a,n,r,s){var l=[],u=[];return l[0]=n[0]-r[0],l[1]=n[1]-r[1],l[2]=n[2]-r[2],u[0]=l[0]*Math.cos(s)-l[1]*Math.sin(s),u[1]=l[0]*Math.sin(s)+l[1]*Math.cos(s),u[2]=l[2],a[0]=u[0]+r[0],a[1]=u[1]+r[1],a[2]=u[2]+r[2],a}function Rs(a,n){var r=a[0],s=a[1],l=a[2],u=n[0],h=n[1],f=n[2],d=Math.sqrt(r*r+s*s+l*l),v=Math.sqrt(u*u+h*h+f*f),p=d*v,g=p&&$t(a,n)/p;return Math.acos(Math.min(Math.max(g,-1),1))}function ti(a){return a[0]=0,a[1]=0,a[2]=0,a}function ro(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}function Zo(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]}function Ns(a,n){var r=a[0],s=a[1],l=a[2],u=n[0],h=n[1],f=n[2];return Math.abs(r-u)<=it*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-h)<=it*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(l-f)<=it*Math.max(1,Math.abs(l),Math.abs(f))}var mr=zt,Ii=null,Aa=null,Ls=ot,Wt=null,jt=rn,ge=null,se=function(){var a=Xt();return function(n,r,s,l,u,h){var f,d;for(r||(r=3),s||(s=0),l?d=Math.min(l*r+s,n.length):d=n.length,f=s;f<d;f+=r)a[0]=n[f],a[1]=n[f+1],a[2]=n[f+2],u(a,a,h),n[f]=a[0],n[f+1]=a[1],n[f+2]=a[2];return n}}();function ae(){var a=new Ot(4);return Ot!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0),a}function be(a){var n=new Ot(4);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n}function fe(a,n,r,s){var l=new Ot(4);return l[0]=a,l[1]=n,l[2]=r,l[3]=s,l}function ln(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a}function kn(a,n,r,s,l){return a[0]=n,a[1]=r,a[2]=s,a[3]=l,a}function Qn(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a[3]=n[3]+r[3],a}function Pn(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a[3]=n[3]-r[3],a}function an(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a[2]=n[2]*r[2],a[3]=n[3]*r[3],a}function pi(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a[2]=n[2]/r[2],a[3]=n[3]/r[3],a}function Un(a,n){return a[0]=Math.ceil(n[0]),a[1]=Math.ceil(n[1]),a[2]=Math.ceil(n[2]),a[3]=Math.ceil(n[3]),a}function Yr(a,n){return a[0]=Math.floor(n[0]),a[1]=Math.floor(n[1]),a[2]=Math.floor(n[2]),a[3]=Math.floor(n[3]),a}function os(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a[2]=Math.min(n[2],r[2]),a[3]=Math.min(n[3],r[3]),a}function io(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a[2]=Math.max(n[2],r[2]),a[3]=Math.max(n[3],r[3]),a}function ka(a,n){return a[0]=Math.round(n[0]),a[1]=Math.round(n[1]),a[2]=Math.round(n[2]),a[3]=Math.round(n[3]),a}function ei(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a[3]=n[3]*r,a}function Pa(a,n,r,s){return a[0]=n[0]+r[0]*s,a[1]=n[1]+r[1]*s,a[2]=n[2]+r[2]*s,a[3]=n[3]+r[3]*s,a}function Ra(a,n){var r=n[0]-a[0],s=n[1]-a[1],l=n[2]-a[2],u=n[3]-a[3];return Math.hypot(r,s,l,u)}function Is(a,n){var r=n[0]-a[0],s=n[1]-a[1],l=n[2]-a[2],u=n[3]-a[3];return r*r+s*s+l*l+u*u}function gi(a){var n=a[0],r=a[1],s=a[2],l=a[3];return Math.hypot(n,r,s,l)}function In(a){var n=a[0],r=a[1],s=a[2],l=a[3];return n*n+r*r+s*s+l*l}function br(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=-n[3],a}function ha(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a[3]=1/n[3],a}function Jn(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=r*r+s*s+l*l+u*u;return h>0&&(h=1/Math.sqrt(h)),a[0]=r*h,a[1]=s*h,a[2]=l*h,a[3]=u*h,a}function Fr(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]}function yi(a,n,r,s){var l=r[0]*s[1]-r[1]*s[0],u=r[0]*s[2]-r[2]*s[0],h=r[0]*s[3]-r[3]*s[0],f=r[1]*s[2]-r[2]*s[1],d=r[1]*s[3]-r[3]*s[1],v=r[2]*s[3]-r[3]*s[2],p=n[0],g=n[1],m=n[2],b=n[3];return a[0]=g*v-m*d+b*f,a[1]=-(p*v)+m*h-b*u,a[2]=p*d-g*h+b*l,a[3]=-(p*f)+g*u-m*l,a}function ls(a,n,r,s){var l=n[0],u=n[1],h=n[2],f=n[3];return a[0]=l+s*(r[0]-l),a[1]=u+s*(r[1]-u),a[2]=h+s*(r[2]-h),a[3]=f+s*(r[3]-f),a}function kc(a,n){n=n||1;var r,s,l,u,h,f;do r=glMatrix.RANDOM()*2-1,s=glMatrix.RANDOM()*2-1,h=r*r+s*s;while(h>=1);do l=glMatrix.RANDOM()*2-1,u=glMatrix.RANDOM()*2-1,f=l*l+u*u;while(f>=1);var d=Math.sqrt((1-h)/f);return a[0]=n*r,a[1]=n*s,a[2]=n*l*d,a[3]=n*u*d,a}function mi(a,n,r){var s=n[0],l=n[1],u=n[2],h=n[3];return a[0]=r[0]*s+r[4]*l+r[8]*u+r[12]*h,a[1]=r[1]*s+r[5]*l+r[9]*u+r[13]*h,a[2]=r[2]*s+r[6]*l+r[10]*u+r[14]*h,a[3]=r[3]*s+r[7]*l+r[11]*u+r[15]*h,a}function ao(a,n,r){var s=n[0],l=n[1],u=n[2],h=r[0],f=r[1],d=r[2],v=r[3],p=v*s+f*u-d*l,g=v*l+d*s-h*u,m=v*u+h*l-f*s,b=-h*s-f*l-d*u;return a[0]=p*v+b*-h+g*-d-m*-f,a[1]=g*v+b*-f+m*-h-p*-d,a[2]=m*v+b*-d+p*-f-g*-h,a[3]=n[3],a}function zr(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}function Xi(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}function so(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]&&a[3]===n[3]}function Pc(a,n){var r=a[0],s=a[1],l=a[2],u=a[3],h=n[0],f=n[1],d=n[2],v=n[3];return Math.abs(r-h)<=it*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(s-f)<=it*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(l-d)<=it*Math.max(1,Math.abs(l),Math.abs(d))&&Math.abs(u-v)<=it*Math.max(1,Math.abs(u),Math.abs(v))}var Wu=null,Gu=null,Wo=null,cs=null,fa=null,tr=null,Rc=null,Il=function(){var a=ae();return function(n,r,s,l,u,h){var f,d;for(r||(r=4),s||(s=0),l?d=Math.min(l*r+s,n.length):d=n.length,f=s;f<d;f+=r)a[0]=n[f],a[1]=n[f+1],a[2]=n[f+2],a[3]=n[f+3],u(a,a,h),n[f]=a[0],n[f+1]=a[1],n[f+2]=a[2],n[f+3]=a[3];return n}}();function Qe(){var a=new Ot(16);return Ot!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function Go(a){var n=new Ot(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n}function Na(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}function jo(a,n,r,s,l,u,h,f,d,v,p,g,m,b,E,w){var S=new Ot(16);return S[0]=a,S[1]=n,S[2]=r,S[3]=s,S[4]=l,S[5]=u,S[6]=h,S[7]=f,S[8]=d,S[9]=v,S[10]=p,S[11]=g,S[12]=m,S[13]=b,S[14]=E,S[15]=w,S}function da(a,n,r,s,l,u,h,f,d,v,p,g,m,b,E,w,S){return a[0]=n,a[1]=r,a[2]=s,a[3]=l,a[4]=u,a[5]=h,a[6]=f,a[7]=d,a[8]=v,a[9]=p,a[10]=g,a[11]=m,a[12]=b,a[13]=E,a[14]=w,a[15]=S,a}function ni(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function oo(a,n){if(a===n){var r=n[1],s=n[2],l=n[3],u=n[6],h=n[7],f=n[11];a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=r,a[6]=n[9],a[7]=n[13],a[8]=s,a[9]=u,a[11]=n[14],a[12]=l,a[13]=h,a[14]=f}else a[0]=n[0],a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=n[1],a[5]=n[5],a[6]=n[9],a[7]=n[13],a[8]=n[2],a[9]=n[6],a[10]=n[10],a[11]=n[14],a[12]=n[3],a[13]=n[7],a[14]=n[11],a[15]=n[15];return a}function Di(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=n[4],f=n[5],d=n[6],v=n[7],p=n[8],g=n[9],m=n[10],b=n[11],E=n[12],w=n[13],S=n[14],M=n[15],C=r*f-s*h,T=r*d-l*h,k=r*v-u*h,O=s*d-l*f,A=s*v-u*f,R=l*v-u*d,L=p*w-g*E,D=p*S-m*E,z=p*M-b*E,W=g*S-m*w,G=g*M-b*w,Y=m*M-b*S,q=C*Y-T*G+k*W+O*z-A*D+R*L;return q?(q=1/q,a[0]=(f*Y-d*G+v*W)*q,a[1]=(l*G-s*Y-u*W)*q,a[2]=(w*R-S*A+M*O)*q,a[3]=(m*A-g*R-b*O)*q,a[4]=(d*z-h*Y-v*D)*q,a[5]=(r*Y-l*z+u*D)*q,a[6]=(S*k-E*R-M*T)*q,a[7]=(p*R-m*k+b*T)*q,a[8]=(h*G-f*z+v*L)*q,a[9]=(s*z-r*G-u*L)*q,a[10]=(E*A-w*k+M*C)*q,a[11]=(g*k-p*A-b*C)*q,a[12]=(f*D-h*W-d*L)*q,a[13]=(r*W-s*D+l*L)*q,a[14]=(w*T-E*O-S*C)*q,a[15]=(p*O-g*T+m*C)*q,a):null}function lo(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=n[4],f=n[5],d=n[6],v=n[7],p=n[8],g=n[9],m=n[10],b=n[11],E=n[12],w=n[13],S=n[14],M=n[15];return a[0]=f*(m*M-b*S)-g*(d*M-v*S)+w*(d*b-v*m),a[1]=-(s*(m*M-b*S)-g*(l*M-u*S)+w*(l*b-u*m)),a[2]=s*(d*M-v*S)-f*(l*M-u*S)+w*(l*v-u*d),a[3]=-(s*(d*b-v*m)-f*(l*b-u*m)+g*(l*v-u*d)),a[4]=-(h*(m*M-b*S)-p*(d*M-v*S)+E*(d*b-v*m)),a[5]=r*(m*M-b*S)-p*(l*M-u*S)+E*(l*b-u*m),a[6]=-(r*(d*M-v*S)-h*(l*M-u*S)+E*(l*v-u*d)),a[7]=r*(d*b-v*m)-h*(l*b-u*m)+p*(l*v-u*d),a[8]=h*(g*M-b*w)-p*(f*M-v*w)+E*(f*b-v*g),a[9]=-(r*(g*M-b*w)-p*(s*M-u*w)+E*(s*b-u*g)),a[10]=r*(f*M-v*w)-h*(s*M-u*w)+E*(s*v-u*f),a[11]=-(r*(f*b-v*g)-h*(s*b-u*g)+p*(s*v-u*f)),a[12]=-(h*(g*S-m*w)-p*(f*S-d*w)+E*(f*m-d*g)),a[13]=r*(g*S-m*w)-p*(s*S-l*w)+E*(s*m-l*g),a[14]=-(r*(f*S-d*w)-h*(s*S-l*w)+E*(s*d-l*f)),a[15]=r*(f*m-d*g)-h*(s*m-l*g)+p*(s*d-l*f),a}function $o(a){var n=a[0],r=a[1],s=a[2],l=a[3],u=a[4],h=a[5],f=a[6],d=a[7],v=a[8],p=a[9],g=a[10],m=a[11],b=a[12],E=a[13],w=a[14],S=a[15],M=n*h-r*u,C=n*f-s*u,T=n*d-l*u,k=r*f-s*h,O=r*d-l*h,A=s*d-l*f,R=v*E-p*b,L=v*w-g*b,D=v*S-m*b,z=p*w-g*E,W=p*S-m*E,G=g*S-m*w;return M*G-C*W+T*z+k*D-O*L+A*R}function qt(a,n,r){var s=n[0],l=n[1],u=n[2],h=n[3],f=n[4],d=n[5],v=n[6],p=n[7],g=n[8],m=n[9],b=n[10],E=n[11],w=n[12],S=n[13],M=n[14],C=n[15],T=r[0],k=r[1],O=r[2],A=r[3];return a[0]=T*s+k*f+O*g+A*w,a[1]=T*l+k*d+O*m+A*S,a[2]=T*u+k*v+O*b+A*M,a[3]=T*h+k*p+O*E+A*C,T=r[4],k=r[5],O=r[6],A=r[7],a[4]=T*s+k*f+O*g+A*w,a[5]=T*l+k*d+O*m+A*S,a[6]=T*u+k*v+O*b+A*M,a[7]=T*h+k*p+O*E+A*C,T=r[8],k=r[9],O=r[10],A=r[11],a[8]=T*s+k*f+O*g+A*w,a[9]=T*l+k*d+O*m+A*S,a[10]=T*u+k*v+O*b+A*M,a[11]=T*h+k*p+O*E+A*C,T=r[12],k=r[13],O=r[14],A=r[15],a[12]=T*s+k*f+O*g+A*w,a[13]=T*l+k*d+O*m+A*S,a[14]=T*u+k*v+O*b+A*M,a[15]=T*h+k*p+O*E+A*C,a}function Be(a,n,r){var s=r[0],l=r[1],u=r[2],h,f,d,v,p,g,m,b,E,w,S,M;return n===a?(a[12]=n[0]*s+n[4]*l+n[8]*u+n[12],a[13]=n[1]*s+n[5]*l+n[9]*u+n[13],a[14]=n[2]*s+n[6]*l+n[10]*u+n[14],a[15]=n[3]*s+n[7]*l+n[11]*u+n[15]):(h=n[0],f=n[1],d=n[2],v=n[3],p=n[4],g=n[5],m=n[6],b=n[7],E=n[8],w=n[9],S=n[10],M=n[11],a[0]=h,a[1]=f,a[2]=d,a[3]=v,a[4]=p,a[5]=g,a[6]=m,a[7]=b,a[8]=E,a[9]=w,a[10]=S,a[11]=M,a[12]=h*s+p*l+E*u+n[12],a[13]=f*s+g*l+w*u+n[13],a[14]=d*s+m*l+S*u+n[14],a[15]=v*s+b*l+M*u+n[15]),a}function Dn(a,n,r){var s=r[0],l=r[1],u=r[2];return a[0]=n[0]*s,a[1]=n[1]*s,a[2]=n[2]*s,a[3]=n[3]*s,a[4]=n[4]*l,a[5]=n[5]*l,a[6]=n[6]*l,a[7]=n[7]*l,a[8]=n[8]*u,a[9]=n[9]*u,a[10]=n[10]*u,a[11]=n[11]*u,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}function Zr(a,n,r,s){var l=s[0],u=s[1],h=s[2],f=Math.hypot(l,u,h),d,v,p,g,m,b,E,w,S,M,C,T,k,O,A,R,L,D,z,W,G,Y,q,rt;return f<it?null:(f=1/f,l*=f,u*=f,h*=f,d=Math.sin(r),v=Math.cos(r),p=1-v,g=n[0],m=n[1],b=n[2],E=n[3],w=n[4],S=n[5],M=n[6],C=n[7],T=n[8],k=n[9],O=n[10],A=n[11],R=l*l*p+v,L=u*l*p+h*d,D=h*l*p-u*d,z=l*u*p-h*d,W=u*u*p+v,G=h*u*p+l*d,Y=l*h*p+u*d,q=u*h*p-l*d,rt=h*h*p+v,a[0]=g*R+w*L+T*D,a[1]=m*R+S*L+k*D,a[2]=b*R+M*L+O*D,a[3]=E*R+C*L+A*D,a[4]=g*z+w*W+T*G,a[5]=m*z+S*W+k*G,a[6]=b*z+M*W+O*G,a[7]=E*z+C*W+A*G,a[8]=g*Y+w*q+T*rt,a[9]=m*Y+S*q+k*rt,a[10]=b*Y+M*q+O*rt,a[11]=E*Y+C*q+A*rt,n!==a&&(a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a)}function bi(a,n,r){var s=Math.sin(r),l=Math.cos(r),u=n[4],h=n[5],f=n[6],d=n[7],v=n[8],p=n[9],g=n[10],m=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=u*l+v*s,a[5]=h*l+p*s,a[6]=f*l+g*s,a[7]=d*l+m*s,a[8]=v*l-u*s,a[9]=p*l-h*s,a[10]=g*l-f*s,a[11]=m*l-d*s,a}function Nc(a,n,r){var s=Math.sin(r),l=Math.cos(r),u=n[0],h=n[1],f=n[2],d=n[3],v=n[8],p=n[9],g=n[10],m=n[11];return n!==a&&(a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=u*l-v*s,a[1]=h*l-p*s,a[2]=f*l-g*s,a[3]=d*l-m*s,a[8]=u*s+v*l,a[9]=h*s+p*l,a[10]=f*s+g*l,a[11]=d*s+m*l,a}function Bf(a,n,r){var s=Math.sin(r),l=Math.cos(r),u=n[0],h=n[1],f=n[2],d=n[3],v=n[4],p=n[5],g=n[6],m=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=u*l+v*s,a[1]=h*l+p*s,a[2]=f*l+g*s,a[3]=d*l+m*s,a[4]=v*l-u*s,a[5]=p*l-h*s,a[6]=g*l-f*s,a[7]=m*l-d*s,a}function La(a,n){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=n[0],a[13]=n[1],a[14]=n[2],a[15]=1,a}function us(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Dl(a,n,r){var s=r[0],l=r[1],u=r[2],h=Math.hypot(s,l,u),f,d,v;return h<it?null:(h=1/h,s*=h,l*=h,u*=h,f=Math.sin(n),d=Math.cos(n),v=1-d,a[0]=s*s*v+d,a[1]=l*s*v+u*f,a[2]=u*s*v-l*f,a[3]=0,a[4]=s*l*v-u*f,a[5]=l*l*v+d,a[6]=u*l*v+s*f,a[7]=0,a[8]=s*u*v+l*f,a[9]=l*u*v-s*f,a[10]=u*u*v+d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function ju(a,n){var r=Math.sin(n),s=Math.cos(n);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=r,a[7]=0,a[8]=0,a[9]=-r,a[10]=s,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Lc(a,n){var r=Math.sin(n),s=Math.cos(n);return a[0]=s,a[1]=0,a[2]=-r,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=r,a[9]=0,a[10]=s,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function co(a,n){var r=Math.sin(n),s=Math.cos(n);return a[0]=s,a[1]=r,a[2]=0,a[3]=0,a[4]=-r,a[5]=s,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Bl(a,n,r){var s=n[0],l=n[1],u=n[2],h=n[3],f=s+s,d=l+l,v=u+u,p=s*f,g=s*d,m=s*v,b=l*d,E=l*v,w=u*v,S=h*f,M=h*d,C=h*v;return a[0]=1-(b+w),a[1]=g+C,a[2]=m-M,a[3]=0,a[4]=g-C,a[5]=1-(p+w),a[6]=E+S,a[7]=0,a[8]=m+M,a[9]=E-S,a[10]=1-(p+b),a[11]=0,a[12]=r[0],a[13]=r[1],a[14]=r[2],a[15]=1,a}function uo(a,n){var r=new Ot(3),s=-n[0],l=-n[1],u=-n[2],h=n[3],f=n[4],d=n[5],v=n[6],p=n[7],g=s*s+l*l+u*u+h*h;return g>0?(r[0]=(f*h+p*s+d*u-v*l)*2/g,r[1]=(d*h+p*l+v*s-f*u)*2/g,r[2]=(v*h+p*u+f*l-d*s)*2/g):(r[0]=(f*h+p*s+d*u-v*l)*2,r[1]=(d*h+p*l+v*s-f*u)*2,r[2]=(v*h+p*u+f*l-d*s)*2),Bl(a,n,r),a}function Ho(a,n){return a[0]=n[12],a[1]=n[13],a[2]=n[14],a}function hs(a,n){var r=n[0],s=n[1],l=n[2],u=n[4],h=n[5],f=n[6],d=n[8],v=n[9],p=n[10];return a[0]=Math.hypot(r,s,l),a[1]=Math.hypot(u,h,f),a[2]=Math.hypot(d,v,p),a}function Fl(a,n){var r=new Ot(3);hs(r,n);var s=1/r[0],l=1/r[1],u=1/r[2],h=n[0]*s,f=n[1]*l,d=n[2]*u,v=n[4]*s,p=n[5]*l,g=n[6]*u,m=n[8]*s,b=n[9]*l,E=n[10]*u,w=h+p+E,S=0;return w>0?(S=Math.sqrt(w+1)*2,a[3]=.25*S,a[0]=(g-b)/S,a[1]=(m-d)/S,a[2]=(f-v)/S):h>p&&h>E?(S=Math.sqrt(1+h-p-E)*2,a[3]=(g-b)/S,a[0]=.25*S,a[1]=(f+v)/S,a[2]=(m+d)/S):p>E?(S=Math.sqrt(1+p-h-E)*2,a[3]=(m-d)/S,a[0]=(f+v)/S,a[1]=.25*S,a[2]=(g+b)/S):(S=Math.sqrt(1+E-h-p)*2,a[3]=(f-v)/S,a[0]=(m+d)/S,a[1]=(g+b)/S,a[2]=.25*S),a}function $u(a,n,r,s){var l=n[0],u=n[1],h=n[2],f=n[3],d=l+l,v=u+u,p=h+h,g=l*d,m=l*v,b=l*p,E=u*v,w=u*p,S=h*p,M=f*d,C=f*v,T=f*p,k=s[0],O=s[1],A=s[2];return a[0]=(1-(E+S))*k,a[1]=(m+T)*k,a[2]=(b-C)*k,a[3]=0,a[4]=(m-T)*O,a[5]=(1-(g+S))*O,a[6]=(w+M)*O,a[7]=0,a[8]=(b+C)*A,a[9]=(w-M)*A,a[10]=(1-(g+E))*A,a[11]=0,a[12]=r[0],a[13]=r[1],a[14]=r[2],a[15]=1,a}function ho(a,n,r,s,l){var u=n[0],h=n[1],f=n[2],d=n[3],v=u+u,p=h+h,g=f+f,m=u*v,b=u*p,E=u*g,w=h*p,S=h*g,M=f*g,C=d*v,T=d*p,k=d*g,O=s[0],A=s[1],R=s[2],L=l[0],D=l[1],z=l[2],W=(1-(w+M))*O,G=(b+k)*O,Y=(E-T)*O,q=(b-k)*A,rt=(1-(m+M))*A,yt=(S+C)*A,st=(E+T)*R,mt=(S-C)*R,at=(1-(m+w))*R;return a[0]=W,a[1]=G,a[2]=Y,a[3]=0,a[4]=q,a[5]=rt,a[6]=yt,a[7]=0,a[8]=st,a[9]=mt,a[10]=at,a[11]=0,a[12]=r[0]+L-(W*L+q*D+st*z),a[13]=r[1]+D-(G*L+rt*D+mt*z),a[14]=r[2]+z-(Y*L+yt*D+at*z),a[15]=1,a}function zl(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=r+r,f=s+s,d=l+l,v=r*h,p=s*h,g=s*f,m=l*h,b=l*f,E=l*d,w=u*h,S=u*f,M=u*d;return a[0]=1-g-E,a[1]=p+M,a[2]=m-S,a[3]=0,a[4]=p-M,a[5]=1-v-E,a[6]=b+w,a[7]=0,a[8]=m+S,a[9]=b-w,a[10]=1-v-g,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Hu(a,n,r,s,l,u,h){var f=1/(r-n),d=1/(l-s),v=1/(u-h);return a[0]=u*2*f,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u*2*d,a[6]=0,a[7]=0,a[8]=(r+n)*f,a[9]=(l+s)*d,a[10]=(h+u)*v,a[11]=-1,a[12]=0,a[13]=0,a[14]=h*u*2*v,a[15]=0,a}function Ic(a,n,r,s,l){var u=1/Math.tan(n/2),h;return a[0]=u/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,l!=null&&l!==1/0?(h=1/(s-l),a[10]=(l+s)*h,a[14]=2*l*s*h):(a[10]=-1,a[14]=-2*s),a}var Ff=Ic;function zf(a,n,r,s,l){var u=1/Math.tan(n/2),h;return a[0]=u/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,l!=null&&l!==1/0?(h=1/(s-l),a[10]=l*h,a[14]=l*s*h):(a[10]=-1,a[14]=-s),a}function Vu(a,n,r,s){var l=Math.tan(n.upDegrees*Math.PI/180),u=Math.tan(n.downDegrees*Math.PI/180),h=Math.tan(n.leftDegrees*Math.PI/180),f=Math.tan(n.rightDegrees*Math.PI/180),d=2/(h+f),v=2/(l+u);return a[0]=d,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=v,a[6]=0,a[7]=0,a[8]=-((h-f)*d*.5),a[9]=(l-u)*v*.5,a[10]=s/(r-s),a[11]=-1,a[12]=0,a[13]=0,a[14]=s*r/(r-s),a[15]=0,a}function Uu(a,n,r,s,l,u,h){var f=1/(n-r),d=1/(s-l),v=1/(u-h);return a[0]=-2*f,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*v,a[11]=0,a[12]=(n+r)*f,a[13]=(l+s)*d,a[14]=(h+u)*v,a[15]=1,a}var Zl=Uu;function Yu(a,n,r,s,l,u,h){var f=1/(n-r),d=1/(s-l),v=1/(u-h);return a[0]=-2*f,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=v,a[11]=0,a[12]=(n+r)*f,a[13]=(l+s)*d,a[14]=u*v,a[15]=1,a}function Xu(a,n,r,s){var l,u,h,f,d,v,p,g,m,b,E=n[0],w=n[1],S=n[2],M=s[0],C=s[1],T=s[2],k=r[0],O=r[1],A=r[2];return Math.abs(E-k)<it&&Math.abs(w-O)<it&&Math.abs(S-A)<it?ni(a):(p=E-k,g=w-O,m=S-A,b=1/Math.hypot(p,g,m),p*=b,g*=b,m*=b,l=C*m-T*g,u=T*p-M*m,h=M*g-C*p,b=Math.hypot(l,u,h),b?(b=1/b,l*=b,u*=b,h*=b):(l=0,u=0,h=0),f=g*h-m*u,d=m*l-p*h,v=p*u-g*l,b=Math.hypot(f,d,v),b?(b=1/b,f*=b,d*=b,v*=b):(f=0,d=0,v=0),a[0]=l,a[1]=f,a[2]=p,a[3]=0,a[4]=u,a[5]=d,a[6]=g,a[7]=0,a[8]=h,a[9]=v,a[10]=m,a[11]=0,a[12]=-(l*E+u*w+h*S),a[13]=-(f*E+d*w+v*S),a[14]=-(p*E+g*w+m*S),a[15]=1,a)}function Wl(a,n,r,s){var l=n[0],u=n[1],h=n[2],f=s[0],d=s[1],v=s[2],p=l-r[0],g=u-r[1],m=h-r[2],b=p*p+g*g+m*m;b>0&&(b=1/Math.sqrt(b),p*=b,g*=b,m*=b);var E=d*m-v*g,w=v*p-f*m,S=f*g-d*p;return b=E*E+w*w+S*S,b>0&&(b=1/Math.sqrt(b),E*=b,w*=b,S*=b),a[0]=E,a[1]=w,a[2]=S,a[3]=0,a[4]=g*S-m*w,a[5]=m*E-p*S,a[6]=p*w-g*E,a[7]=0,a[8]=p,a[9]=g,a[10]=m,a[11]=0,a[12]=l,a[13]=u,a[14]=h,a[15]=1,a}function ne(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function ke(a){return Math.hypot(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])}function Rn(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a[3]=n[3]+r[3],a[4]=n[4]+r[4],a[5]=n[5]+r[5],a[6]=n[6]+r[6],a[7]=n[7]+r[7],a[8]=n[8]+r[8],a[9]=n[9]+r[9],a[10]=n[10]+r[10],a[11]=n[11]+r[11],a[12]=n[12]+r[12],a[13]=n[13]+r[13],a[14]=n[14]+r[14],a[15]=n[15]+r[15],a}function ri(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a[3]=n[3]-r[3],a[4]=n[4]-r[4],a[5]=n[5]-r[5],a[6]=n[6]-r[6],a[7]=n[7]-r[7],a[8]=n[8]-r[8],a[9]=n[9]-r[9],a[10]=n[10]-r[10],a[11]=n[11]-r[11],a[12]=n[12]-r[12],a[13]=n[13]-r[13],a[14]=n[14]-r[14],a[15]=n[15]-r[15],a}function xi(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a[3]=n[3]*r,a[4]=n[4]*r,a[5]=n[5]*r,a[6]=n[6]*r,a[7]=n[7]*r,a[8]=n[8]*r,a[9]=n[9]*r,a[10]=n[10]*r,a[11]=n[11]*r,a[12]=n[12]*r,a[13]=n[13]*r,a[14]=n[14]*r,a[15]=n[15]*r,a}function Je(a,n,r,s){return a[0]=n[0]+r[0]*s,a[1]=n[1]+r[1]*s,a[2]=n[2]+r[2]*s,a[3]=n[3]+r[3]*s,a[4]=n[4]+r[4]*s,a[5]=n[5]+r[5]*s,a[6]=n[6]+r[6]*s,a[7]=n[7]+r[7]*s,a[8]=n[8]+r[8]*s,a[9]=n[9]+r[9]*s,a[10]=n[10]+r[10]*s,a[11]=n[11]+r[11]*s,a[12]=n[12]+r[12]*s,a[13]=n[13]+r[13]*s,a[14]=n[14]+r[14]*s,a[15]=n[15]+r[15]*s,a}function Ue(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]&&a[3]===n[3]&&a[4]===n[4]&&a[5]===n[5]&&a[6]===n[6]&&a[7]===n[7]&&a[8]===n[8]&&a[9]===n[9]&&a[10]===n[10]&&a[11]===n[11]&&a[12]===n[12]&&a[13]===n[13]&&a[14]===n[14]&&a[15]===n[15]}function fo(a,n){var r=a[0],s=a[1],l=a[2],u=a[3],h=a[4],f=a[5],d=a[6],v=a[7],p=a[8],g=a[9],m=a[10],b=a[11],E=a[12],w=a[13],S=a[14],M=a[15],C=n[0],T=n[1],k=n[2],O=n[3],A=n[4],R=n[5],L=n[6],D=n[7],z=n[8],W=n[9],G=n[10],Y=n[11],q=n[12],rt=n[13],yt=n[14],st=n[15];return Math.abs(r-C)<=it*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(s-T)<=it*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(l-k)<=it*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(u-O)<=it*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(h-A)<=it*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(f-R)<=it*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(d-L)<=it*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(v-D)<=it*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(p-z)<=it*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(g-W)<=it*Math.max(1,Math.abs(g),Math.abs(W))&&Math.abs(m-G)<=it*Math.max(1,Math.abs(m),Math.abs(G))&&Math.abs(b-Y)<=it*Math.max(1,Math.abs(b),Math.abs(Y))&&Math.abs(E-q)<=it*Math.max(1,Math.abs(E),Math.abs(q))&&Math.abs(w-rt)<=it*Math.max(1,Math.abs(w),Math.abs(rt))&&Math.abs(S-yt)<=it*Math.max(1,Math.abs(S),Math.abs(yt))&&Math.abs(M-st)<=it*Math.max(1,Math.abs(M),Math.abs(st))}var Dc=qt,Ku=ri;function vo(){var a=new Ot(9);return Ot!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function t1(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[4],a[4]=n[5],a[5]=n[6],a[6]=n[8],a[7]=n[9],a[8]=n[10],a}function mS(a){var n=new glMatrix.ARRAY_TYPE(9);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n}function e1(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a}function n1(a,n,r,s,l,u,h,f,d){var v=new Ot(9);return v[0]=a,v[1]=n,v[2]=r,v[3]=s,v[4]=l,v[5]=u,v[6]=h,v[7]=f,v[8]=d,v}function ii(a,n,r,s,l,u,h,f,d,v){return a[0]=n,a[1]=r,a[2]=s,a[3]=l,a[4]=u,a[5]=h,a[6]=f,a[7]=d,a[8]=v,a}function r1(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a}function qu(a,n){if(a===n){var r=n[1],s=n[2],l=n[5];a[1]=n[3],a[2]=n[6],a[3]=r,a[5]=n[7],a[6]=s,a[7]=l}else a[0]=n[0],a[1]=n[3],a[2]=n[6],a[3]=n[1],a[4]=n[4],a[5]=n[7],a[6]=n[2],a[7]=n[5],a[8]=n[8];return a}function i1(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=n[4],f=n[5],d=n[6],v=n[7],p=n[8],g=p*h-f*v,m=-p*u+f*d,b=v*u-h*d,E=r*g+s*m+l*b;return E?(E=1/E,a[0]=g*E,a[1]=(-p*s+l*v)*E,a[2]=(f*s-l*h)*E,a[3]=m*E,a[4]=(p*r-l*d)*E,a[5]=(-f*r+l*u)*E,a[6]=b*E,a[7]=(-v*r+s*d)*E,a[8]=(h*r-s*u)*E,a):null}function Jv(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=n[4],f=n[5],d=n[6],v=n[7],p=n[8];return a[0]=h*p-f*v,a[1]=l*v-s*p,a[2]=s*f-l*h,a[3]=f*d-u*p,a[4]=r*p-l*d,a[5]=l*u-r*f,a[6]=u*v-h*d,a[7]=s*d-r*v,a[8]=r*h-s*u,a}function Ia(a){var n=a[0],r=a[1],s=a[2],l=a[3],u=a[4],h=a[5],f=a[6],d=a[7],v=a[8];return n*(v*u-h*d)+r*(-v*l+h*f)+s*(d*l-u*f)}function a1(a,n,r){var s=n[0],l=n[1],u=n[2],h=n[3],f=n[4],d=n[5],v=n[6],p=n[7],g=n[8],m=r[0],b=r[1],E=r[2],w=r[3],S=r[4],M=r[5],C=r[6],T=r[7],k=r[8];return a[0]=m*s+b*h+E*v,a[1]=m*l+b*f+E*p,a[2]=m*u+b*d+E*g,a[3]=w*s+S*h+M*v,a[4]=w*l+S*f+M*p,a[5]=w*u+S*d+M*g,a[6]=C*s+T*h+k*v,a[7]=C*l+T*f+k*p,a[8]=C*u+T*d+k*g,a}function s1(a,n,r){var s=n[0],l=n[1],u=n[2],h=n[3],f=n[4],d=n[5],v=n[6],p=n[7],g=n[8],m=r[0],b=r[1];return a[0]=s,a[1]=l,a[2]=u,a[3]=h,a[4]=f,a[5]=d,a[6]=m*s+b*h+v,a[7]=m*l+b*f+p,a[8]=m*u+b*d+g,a}function o1(a,n,r){var s=n[0],l=n[1],u=n[2],h=n[3],f=n[4],d=n[5],v=n[6],p=n[7],g=n[8],m=Math.sin(r),b=Math.cos(r);return a[0]=b*s+m*h,a[1]=b*l+m*f,a[2]=b*u+m*d,a[3]=b*h-m*s,a[4]=b*f-m*l,a[5]=b*d-m*u,a[6]=v,a[7]=p,a[8]=g,a}function l1(a,n,r){var s=r[0],l=r[1];return a[0]=s*n[0],a[1]=s*n[1],a[2]=s*n[2],a[3]=l*n[3],a[4]=l*n[4],a[5]=l*n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a}function c1(a,n){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=n[0],a[7]=n[1],a[8]=1,a}function u1(a,n){var r=Math.sin(n),s=Math.cos(n);return a[0]=s,a[1]=r,a[2]=0,a[3]=-r,a[4]=s,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a}function va(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=n[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a}function bS(a,n){return a[0]=n[0],a[1]=n[1],a[2]=0,a[3]=n[2],a[4]=n[3],a[5]=0,a[6]=n[4],a[7]=n[5],a[8]=1,a}function Da(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=r+r,f=s+s,d=l+l,v=r*h,p=s*h,g=s*f,m=l*h,b=l*f,E=l*d,w=u*h,S=u*f,M=u*d;return a[0]=1-g-E,a[3]=p-M,a[6]=m+S,a[1]=p+M,a[4]=1-v-E,a[7]=b-w,a[2]=m-S,a[5]=b+w,a[8]=1-v-g,a}function xS(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=n[4],f=n[5],d=n[6],v=n[7],p=n[8],g=n[9],m=n[10],b=n[11],E=n[12],w=n[13],S=n[14],M=n[15],C=r*f-s*h,T=r*d-l*h,k=r*v-u*h,O=s*d-l*f,A=s*v-u*f,R=l*v-u*d,L=p*w-g*E,D=p*S-m*E,z=p*M-b*E,W=g*S-m*w,G=g*M-b*w,Y=m*M-b*S,q=C*Y-T*G+k*W+O*z-A*D+R*L;return q?(q=1/q,a[0]=(f*Y-d*G+v*W)*q,a[1]=(d*z-h*Y-v*D)*q,a[2]=(h*G-f*z+v*L)*q,a[3]=(l*G-s*Y-u*W)*q,a[4]=(r*Y-l*z+u*D)*q,a[5]=(s*z-r*G-u*L)*q,a[6]=(w*R-S*A+M*O)*q,a[7]=(S*k-E*R-M*T)*q,a[8]=(E*A-w*k+M*C)*q,a):null}function h1(a,n,r){return a[0]=2/n,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/r,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a}function Vo(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}function Zf(a){return Math.hypot(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])}function t0(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a[3]=n[3]+r[3],a[4]=n[4]+r[4],a[5]=n[5]+r[5],a[6]=n[6]+r[6],a[7]=n[7]+r[7],a[8]=n[8]+r[8],a}function er(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a[3]=n[3]-r[3],a[4]=n[4]-r[4],a[5]=n[5]-r[5],a[6]=n[6]-r[6],a[7]=n[7]-r[7],a[8]=n[8]-r[8],a}function Uo(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a[3]=n[3]*r,a[4]=n[4]*r,a[5]=n[5]*r,a[6]=n[6]*r,a[7]=n[7]*r,a[8]=n[8]*r,a}function e0(a,n,r,s){return a[0]=n[0]+r[0]*s,a[1]=n[1]+r[1]*s,a[2]=n[2]+r[2]*s,a[3]=n[3]+r[3]*s,a[4]=n[4]+r[4]*s,a[5]=n[5]+r[5]*s,a[6]=n[6]+r[6]*s,a[7]=n[7]+r[7]*s,a[8]=n[8]+r[8]*s,a}function ES(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]&&a[3]===n[3]&&a[4]===n[4]&&a[5]===n[5]&&a[6]===n[6]&&a[7]===n[7]&&a[8]===n[8]}function n0(a,n){var r=a[0],s=a[1],l=a[2],u=a[3],h=a[4],f=a[5],d=a[6],v=a[7],p=a[8],g=n[0],m=n[1],b=n[2],E=n[3],w=n[4],S=n[5],M=n[6],C=n[7],T=n[8];return Math.abs(r-g)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(s-m)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(u-E)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(h-w)<=glMatrix.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(f-S)<=glMatrix.EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(d-M)<=glMatrix.EPSILON*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(v-C)<=glMatrix.EPSILON*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(p-T)<=glMatrix.EPSILON*Math.max(1,Math.abs(p),Math.abs(T))}var wS=null,SS=null;function Tr(){var a=new Ot(4);return Ot!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function f1(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function Ba(a,n,r){r=r*.5;var s=Math.sin(r);return a[0]=s*n[0],a[1]=s*n[1],a[2]=s*n[2],a[3]=Math.cos(r),a}function Bc(a,n){var r=Math.acos(n[3])*2,s=Math.sin(r/2);return s>glMatrix.EPSILON?(a[0]=n[0]/s,a[1]=n[1]/s,a[2]=n[2]/s):(a[0]=1,a[1]=0,a[2]=0),r}function _S(a,n){var r=x1(a,n);return Math.acos(2*r*r-1)}function Ds(a,n,r){var s=n[0],l=n[1],u=n[2],h=n[3],f=r[0],d=r[1],v=r[2],p=r[3];return a[0]=s*p+h*f+l*v-u*d,a[1]=l*p+h*d+u*f-s*v,a[2]=u*p+h*v+s*d-l*f,a[3]=h*p-s*f-l*d-u*v,a}function d1(a,n,r){r*=.5;var s=n[0],l=n[1],u=n[2],h=n[3],f=Math.sin(r),d=Math.cos(r);return a[0]=s*d+h*f,a[1]=l*d+u*f,a[2]=u*d-l*f,a[3]=h*d-s*f,a}function r0(a,n,r){r*=.5;var s=n[0],l=n[1],u=n[2],h=n[3],f=Math.sin(r),d=Math.cos(r);return a[0]=s*d-u*f,a[1]=l*d+h*f,a[2]=u*d+s*f,a[3]=h*d-l*f,a}function i0(a,n,r){r*=.5;var s=n[0],l=n[1],u=n[2],h=n[3],f=Math.sin(r),d=Math.cos(r);return a[0]=s*d+l*f,a[1]=l*d-s*f,a[2]=u*d+h*f,a[3]=h*d-u*f,a}function v1(a,n){var r=n[0],s=n[1],l=n[2];return a[0]=r,a[1]=s,a[2]=l,a[3]=Math.sqrt(Math.abs(1-r*r-s*s-l*l)),a}function p1(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=Math.sqrt(r*r+s*s+l*l),f=Math.exp(u),d=h>0?f*Math.sin(h)/h:0;return a[0]=r*d,a[1]=s*d,a[2]=l*d,a[3]=f*Math.cos(h),a}function Wf(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=Math.sqrt(r*r+s*s+l*l),f=h>0?Math.atan2(h,u)/h:0;return a[0]=r*f,a[1]=s*f,a[2]=l*f,a[3]=.5*Math.log(r*r+s*s+l*l+u*u),a}function a0(a,n,r){return Wf(a,n),b1(a,a,r),p1(a,a),a}function Gf(a,n,r,s){var l=n[0],u=n[1],h=n[2],f=n[3],d=r[0],v=r[1],p=r[2],g=r[3],m,b,E,w,S;return b=l*d+u*v+h*p+f*g,b<0&&(b=-b,d=-d,v=-v,p=-p,g=-g),1-b>it?(m=Math.acos(b),E=Math.sin(m),w=Math.sin((1-s)*m)/E,S=Math.sin(s*m)/E):(w=1-s,S=s),a[0]=w*l+S*d,a[1]=w*u+S*v,a[2]=w*h+S*p,a[3]=w*f+S*g,a}function g1(a){var n=glMatrix.RANDOM(),r=glMatrix.RANDOM(),s=glMatrix.RANDOM(),l=Math.sqrt(1-n),u=Math.sqrt(n);return a[0]=l*Math.sin(2*Math.PI*r),a[1]=l*Math.cos(2*Math.PI*r),a[2]=u*Math.sin(2*Math.PI*s),a[3]=u*Math.cos(2*Math.PI*s),a}function Ei(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=r*r+s*s+l*l+u*u,f=h?1/h:0;return a[0]=-r*f,a[1]=-s*f,a[2]=-l*f,a[3]=u*f,a}function s0(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=n[3],a}function Fc(a,n){var r=n[0]+n[4]+n[8],s;if(r>0)s=Math.sqrt(r+1),a[3]=.5*s,s=.5/s,a[0]=(n[5]-n[7])*s,a[1]=(n[6]-n[2])*s,a[2]=(n[1]-n[3])*s;else{var l=0;n[4]>n[0]&&(l=1),n[8]>n[l*3+l]&&(l=2);var u=(l+1)%3,h=(l+2)%3;s=Math.sqrt(n[l*3+l]-n[u*3+u]-n[h*3+h]+1),a[l]=.5*s,s=.5/s,a[3]=(n[u*3+h]-n[h*3+u])*s,a[u]=(n[u*3+l]+n[l*3+u])*s,a[h]=(n[h*3+l]+n[l*3+h])*s}return a}function zc(a,n,r,s){var l=.5*Math.PI/180;n*=l,r*=l,s*=l;var u=Math.sin(n),h=Math.cos(n),f=Math.sin(r),d=Math.cos(r),v=Math.sin(s),p=Math.cos(s);return a[0]=u*d*p-h*f*v,a[1]=h*f*p+u*d*v,a[2]=h*d*v-u*f*p,a[3]=h*d*p+u*f*v,a}function y1(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}var MS=be,m1=fe,Qu=ln,o0=kn,CS=Qn,Yo=Ds,b1=ei,x1=Fr,l0=ls,E1=gi,Xo=null,jf=In,TS=null,Ju=Jn,OS=so,Zc=Pc,fs=function(){var a=Xt(),n=pe(1,0,0),r=pe(0,1,0);return function(s,l,u){var h=$t(l,u);return h<-.999999?(_e(a,n,l),jt(a)<1e-6&&_e(a,r,l),_t(a,a),Ba(s,a,Math.PI),s):h>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(_e(a,l,u),s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=1+h,Ju(s,s))}}(),w1=function(){var a=Tr(),n=Tr();return function(r,s,l,u,h,f){return Gf(a,s,h,f),Gf(n,l,u,f),Gf(r,a,n,2*f*(1-f)),r}}(),AS=function(){var a=vo();return function(n,r,s,l){return a[0]=s[0],a[3]=s[1],a[6]=s[2],a[1]=l[0],a[4]=l[1],a[7]=l[2],a[2]=-r[0],a[5]=-r[1],a[8]=-r[2],Ju(n,Fc(n,a))}}();function $f(){var a=new Ot(2);return Ot!=Float32Array&&(a[0]=0,a[1]=0),a}function kS(a){var n=new glMatrix.ARRAY_TYPE(2);return n[0]=a[0],n[1]=a[1],n}function PS(a,n){var r=new glMatrix.ARRAY_TYPE(2);return r[0]=a,r[1]=n,r}function S1(a,n){return a[0]=n[0],a[1]=n[1],a}function th(a,n,r){return a[0]=n,a[1]=r,a}function et(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a}function xt(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a}function ft(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a}function Qt(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a}function Oe(a,n){return a[0]=Math.ceil(n[0]),a[1]=Math.ceil(n[1]),a}function vn(a,n){return a[0]=Math.floor(n[0]),a[1]=Math.floor(n[1]),a}function Wr(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a}function Bn(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a}function c0(a,n){return a[0]=Math.round(n[0]),a[1]=Math.round(n[1]),a}function RS(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a}function Fa(a,n,r,s){return a[0]=n[0]+r[0]*s,a[1]=n[1]+r[1]*s,a}function Hf(a,n){var r=n[0]-a[0],s=n[1]-a[1];return Math.hypot(r,s)}function NS(a,n){var r=n[0]-a[0],s=n[1]-a[1];return r*r+s*s}function Wc(a){var n=a[0],r=a[1];return Math.hypot(n,r)}function Vf(a){var n=a[0],r=a[1];return n*n+r*r}function Uf(a,n){return a[0]=-n[0],a[1]=-n[1],a}function Sn(a,n){return a[0]=1/n[0],a[1]=1/n[1],a}function _1(a,n){var r=n[0],s=n[1],l=r*r+s*s;return l>0&&(l=1/Math.sqrt(l)),a[0]=n[0]*l,a[1]=n[1]*l,a}function u0(a,n){return a[0]*n[0]+a[1]*n[1]}function Yf(a,n,r){var s=n[0]*r[1]-n[1]*r[0];return a[0]=a[1]=0,a[2]=s,a}function LS(a,n,r,s){var l=n[0],u=n[1];return a[0]=l+s*(r[0]-l),a[1]=u+s*(r[1]-u),a}function IS(a,n){n=n||1;var r=glMatrix.RANDOM()*2*Math.PI;return a[0]=Math.cos(r)*n,a[1]=Math.sin(r)*n,a}function DS(a,n,r){var s=n[0],l=n[1];return a[0]=r[0]*s+r[2]*l,a[1]=r[1]*s+r[3]*l,a}function Xf(a,n,r){var s=n[0],l=n[1];return a[0]=r[0]*s+r[2]*l+r[4],a[1]=r[1]*s+r[3]*l+r[5],a}function Ko(a,n,r){var s=n[0],l=n[1];return a[0]=r[0]*s+r[3]*l+r[6],a[1]=r[1]*s+r[4]*l+r[7],a}function Kf(a,n,r){var s=n[0],l=n[1];return a[0]=r[0]*s+r[4]*l+r[12],a[1]=r[1]*s+r[5]*l+r[13],a}function M1(a,n,r,s){var l=n[0]-r[0],u=n[1]-r[1],h=Math.sin(s),f=Math.cos(s);return a[0]=l*f-u*h+r[0],a[1]=l*h+u*f+r[1],a}function qf(a,n){var r=a[0],s=a[1],l=n[0],u=n[1],h=Math.sqrt(r*r+s*s)*Math.sqrt(l*l+u*u),f=h&&(r*l+s*u)/h;return Math.acos(Math.min(Math.max(f,-1),1))}function C1(a){return a[0]=0,a[1]=0,a}function T1(a){return"vec2("+a[0]+", "+a[1]+")"}function eh(a,n){return a[0]===n[0]&&a[1]===n[1]}function O1(a,n){var r=a[0],s=a[1],l=n[0],u=n[1];return Math.abs(r-l)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-u)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))}var nh=null,Gl=null,Qf=null,BS=null,FS=null,zS=null,Jf=null,td=function(){var a=$f();return function(n,r,s,l,u,h){var f,d;for(r||(r=2),s||(s=0),l?d=Math.min(l*r+s,n.length):d=n.length,f=s;f<d;f+=r)a[0]=n[f],a[1]=n[f+1],u(a,a,h),n[f]=a[0],n[f+1]=a[1];return n}}(),tn=K(25897);function Bi(a,n){return Math.sqrt((a[0]-n[0])*(a[0]-n[0])+(a[1]-n[1])*(a[1]-n[1]))}var le=K(95147),xn=K(76714),A1=function(a,n,r){return a<n?n:a>r?r:a},Le=A1,N=K(97582),Gc={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function h0(a){return Array.isArray(a)&&a.every(function(n){var r=n[0].toLowerCase();return Gc[r]===n.length-1&&"achlmqstvz".includes(r)})}function ed(a){return h0(a)&&a.every(function(n){var r=n[0];return r===r.toUpperCase()})}function f0(a){return ed(a)&&a.every(function(n){var r=n[0];return"ACLMQZ".includes(r)})}var rh={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function jl(a){for(var n=a.pathValue[a.segmentStart],r=n.toLowerCase(),s=a.data;s.length>=Gc[r]&&(r==="m"&&s.length>2?(a.segments.push([n].concat(s.splice(0,2))),r="l",n=n==="m"?"l":"L"):a.segments.push([n].concat(s.splice(0,Gc[r]))),!!Gc[r]););}function nd(a){var n=a.index,r=a.pathValue,s=r.charCodeAt(n);if(s===48){a.param=0,a.index+=1;return}if(s===49){a.param=1,a.index+=1;return}a.err='[path-util]: invalid Arc flag "'.concat(r[n],'", expecting 0 or 1 at index ').concat(n)}function $l(a){return a>=48&&a<=57||a===43||a===45||a===46}function ds(a){return a>=48&&a<=57}function jc(a){var n=a.max,r=a.pathValue,s=a.index,l=s,u=!1,h=!1,f=!1,d=!1,v;if(l>=n){a.err="[path-util]: Invalid path value at index ".concat(l,', "pathValue" is missing param');return}if(v=r.charCodeAt(l),(v===43||v===45)&&(l+=1,v=r.charCodeAt(l)),!ds(v)&&v!==46){a.err="[path-util]: Invalid path value at index ".concat(l,', "').concat(r[l],'" is not a number');return}if(v!==46){if(u=v===48,l+=1,v=r.charCodeAt(l),u&&l<n&&v&&ds(v)){a.err="[path-util]: Invalid path value at index ".concat(s,', "').concat(r[s],'" illegal number');return}for(;l<n&&ds(r.charCodeAt(l));)l+=1,h=!0;v=r.charCodeAt(l)}if(v===46){for(d=!0,l+=1;ds(r.charCodeAt(l));)l+=1,f=!0;v=r.charCodeAt(l)}if(v===101||v===69){if(d&&!h&&!f){a.err="[path-util]: Invalid path value at index ".concat(l,', "').concat(r[l],'" invalid float exponent');return}if(l+=1,v=r.charCodeAt(l),(v===43||v===45)&&(l+=1),l<n&&ds(r.charCodeAt(l)))for(;l<n&&ds(r.charCodeAt(l));)l+=1;else{a.err="[path-util]: Invalid path value at index ".concat(l,', "').concat(r[l],'" invalid integer exponent');return}}a.index=l,a.param=+a.pathValue.slice(s,l)}function ih(a){var n=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return a===10||a===13||a===8232||a===8233||a===32||a===9||a===11||a===12||a===160||a>=5760&&n.includes(a)}function Bs(a){for(var n=a.pathValue,r=a.max;a.index<r&&ih(n.charCodeAt(a.index));)a.index+=1}function k1(a){switch(a|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function P1(a){return(a|32)===97}function R1(a){var n=a.max,r=a.pathValue,s=a.index,l=r.charCodeAt(s),u=Gc[r[s].toLowerCase()];if(a.segmentStart=s,!k1(l)){a.err='[path-util]: Invalid path value "'.concat(r[s],'" is not a path command');return}if(a.index+=1,Bs(a),a.data=[],!u){jl(a);return}for(;;){for(var h=u;h>0;h-=1){if(P1(l)&&(h===3||h===4)?nd(a):jc(a),a.err.length)return;a.data.push(a.param),Bs(a),a.index<n&&r.charCodeAt(a.index)===44&&(a.index+=1,Bs(a))}if(a.index>=a.max||!$l(r.charCodeAt(a.index)))break}jl(a)}var N1=function(){function a(n){this.pathValue=n,this.segments=[],this.max=n.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return a}();function L1(a){if(h0(a))return[].concat(a);var n=new N1(a);for(Bs(n);n.index<n.max&&!n.err.length;)R1(n);return n.err?n.err:n.segments}function ah(a){if(ed(a))return[].concat(a);var n=L1(a),r=0,s=0,l=0,u=0;return n.map(function(h){var f=h.slice(1).map(Number),d=h[0],v=d.toUpperCase();if(d==="M")return r=f[0],s=f[1],l=r,u=s,["M",r,s];var p;if(d!==v)switch(v){case"A":p=[v,f[0],f[1],f[2],f[3],f[4],f[5]+r,f[6]+s];break;case"V":p=[v,f[0]+s];break;case"H":p=[v,f[0]+r];break;default:{var g=f.map(function(b,E){return b+(E%2?s:r)});p=[v].concat(g)}}else p=[v].concat(f);var m=p.length;switch(v){case"Z":r=l,s=u;break;case"H":r=p[1];break;case"V":s=p[1];break;default:r=p[m-2],s=p[m-1],v==="M"&&(l=r,u=s)}return p})}function $c(a,n){var r=a[0],s=n.x1,l=n.y1,u=n.x2,h=n.y2,f=a.slice(1).map(Number),d=a;if("TQ".includes(r)||(n.qx=null,n.qy=null),r==="H")d=["L",a[1],l];else if(r==="V")d=["L",s,a[1]];else if(r==="S"){var v=s*2-u,p=l*2-h;n.x1=v,n.y1=p,d=["C",v,p].concat(f)}else if(r==="T"){var g=s*2-n.qx,m=l*2-n.qy;n.qx=g,n.qy=m,d=["Q",g,m].concat(f)}else if(r==="Q"){var b=f[0],E=f[1];n.qx=b,n.qy=E}return d}function Hc(a){if(f0(a))return[].concat(a);for(var n=ah(a),r=(0,N.pi)({},rh),s=0;s<n.length;s+=1){n[s]=$c(n[s],r);var l=n[s],u=l.length;r.x1=+l[u-2],r.y1=+l[u-1],r.x2=+l[u-4]||r.x1,r.y2=+l[u-3]||r.y1}return n}function F(a,n,r){var s=a[0],l=a[1],u=n[0],h=n[1];return[s+(u-s)*r,l+(h-l)*r]}function po(a,n,r,s,l){var u=Bi([a,n],[r,s]),h={x:0,y:0};if(typeof l=="number")if(l<=0)h={x:a,y:n};else if(l>=u)h={x:r,y:s};else{var f=F([a,n],[r,s],l/u),d=f[0],v=f[1];h={x:d,y:v}}return{length:u,point:h,min:{x:Math.min(a,r),y:Math.min(n,s)},max:{x:Math.max(a,r),y:Math.max(n,s)}}}function Vc(a,n){var r=a.x,s=a.y,l=n.x,u=n.y,h=r*l+s*u,f=Math.sqrt((Math.pow(r,2)+Math.pow(s,2))*(Math.pow(l,2)+Math.pow(u,2))),d=r*u-s*l<0?-1:1,v=d*Math.acos(h/f);return v}function pa(a,n,r,s,l,u,h,f,d,v){var p=Math.abs,g=Math.sin,m=Math.cos,b=Math.sqrt,E=Math.PI,w=p(r),S=p(s),M=(l%360+360)%360,C=M*(E/180);if(a===f&&n===d)return{x:a,y:n};if(w===0||S===0)return po(a,n,f,d,v).point;var T=(a-f)/2,k=(n-d)/2,O={x:m(C)*T+g(C)*k,y:-g(C)*T+m(C)*k},A=Math.pow(O.x,2)/Math.pow(w,2)+Math.pow(O.y,2)/Math.pow(S,2);A>1&&(w*=b(A),S*=b(A));var R=Math.pow(w,2)*Math.pow(S,2)-Math.pow(w,2)*Math.pow(O.y,2)-Math.pow(S,2)*Math.pow(O.x,2),L=Math.pow(w,2)*Math.pow(O.y,2)+Math.pow(S,2)*Math.pow(O.x,2),D=R/L;D=D<0?0:D;var z=(u!==h?1:-1)*b(D),W={x:z*(w*O.y/S),y:z*(-(S*O.x)/w)},G={x:m(C)*W.x-g(C)*W.y+(a+f)/2,y:g(C)*W.x+m(C)*W.y+(n+d)/2},Y={x:(O.x-W.x)/w,y:(O.y-W.y)/S},q=Vc({x:1,y:0},Y),rt={x:(-O.x-W.x)/w,y:(-O.y-W.y)/S},yt=Vc(Y,rt);!h&&yt>0?yt-=2*E:h&&yt<0&&(yt+=2*E),yt%=2*E;var st=q+yt*v,mt=w*m(st),at=S*g(st),Et={x:m(C)*mt-g(C)*at+G.x,y:g(C)*mt+m(C)*at+G.y};return Et}function Ke(a,n,r,s,l,u,h,f,d,v,p){var g,m=p.bbox,b=m===void 0?!0:m,E=p.length,w=E===void 0?!0:E,S=p.sampleSize,M=S===void 0?30:S,C=typeof v=="number",T=a,k=n,O=0,A=[T,k,O],R=[T,k],L=0,D={x:0,y:0},z=[{x:T,y:k}];C&&v<=0&&(D={x:T,y:k});for(var W=0;W<=M;W+=1){if(L=W/M,g=pa(a,n,r,s,l,u,h,f,d,L),T=g.x,k=g.y,b&&z.push({x:T,y:k}),w&&(O+=Bi(R,[T,k])),R=[T,k],C&&O>=v&&v>A[2]){var G=(O-v)/(O-A[2]);D={x:R[0]*(1-G)+A[0]*G,y:R[1]*(1-G)+A[1]*G}}A=[T,k,O]}return C&&v>=O&&(D={x:f,y:d}),{length:O,point:D,min:{x:Math.min.apply(null,z.map(function(Y){return Y.x})),y:Math.min.apply(null,z.map(function(Y){return Y.y}))},max:{x:Math.max.apply(null,z.map(function(Y){return Y.x})),y:Math.max.apply(null,z.map(function(Y){return Y.y}))}}}function I1(a,n,r,s,l,u,h,f,d){var v=1-d;return{x:Math.pow(v,3)*a+3*Math.pow(v,2)*d*r+3*v*Math.pow(d,2)*l+Math.pow(d,3)*h,y:Math.pow(v,3)*n+3*Math.pow(v,2)*d*s+3*v*Math.pow(d,2)*u+Math.pow(d,3)*f}}function d0(a,n,r,s,l,u,h,f,d,v){var p,g=v.bbox,m=g===void 0?!0:g,b=v.length,E=b===void 0?!0:b,w=v.sampleSize,S=w===void 0?10:w,M=typeof d=="number",C=a,T=n,k=0,O=[C,T,k],A=[C,T],R=0,L={x:0,y:0},D=[{x:C,y:T}];M&&d<=0&&(L={x:C,y:T});for(var z=0;z<=S;z+=1){if(R=z/S,p=I1(a,n,r,s,l,u,h,f,R),C=p.x,T=p.y,m&&D.push({x:C,y:T}),E&&(k+=Bi(A,[C,T])),A=[C,T],M&&k>=d&&d>O[2]){var W=(k-d)/(k-O[2]);L={x:A[0]*(1-W)+O[0]*W,y:A[1]*(1-W)+O[1]*W}}O=[C,T,k]}return M&&d>=k&&(L={x:h,y:f}),{length:k,point:L,min:{x:Math.min.apply(null,D.map(function(G){return G.x})),y:Math.min.apply(null,D.map(function(G){return G.y}))},max:{x:Math.max.apply(null,D.map(function(G){return G.x})),y:Math.max.apply(null,D.map(function(G){return G.y}))}}}function D1(a,n,r,s,l,u,h){var f=1-h;return{x:Math.pow(f,2)*a+2*f*h*r+Math.pow(h,2)*l,y:Math.pow(f,2)*n+2*f*h*s+Math.pow(h,2)*u}}function qo(a,n,r,s,l,u,h,f){var d,v=f.bbox,p=v===void 0?!0:v,g=f.length,m=g===void 0?!0:g,b=f.sampleSize,E=b===void 0?10:b,w=typeof h=="number",S=a,M=n,C=0,T=[S,M,C],k=[S,M],O=0,A={x:0,y:0},R=[{x:S,y:M}];w&&h<=0&&(A={x:S,y:M});for(var L=0;L<=E;L+=1){if(O=L/E,d=D1(a,n,r,s,l,u,O),S=d.x,M=d.y,p&&R.push({x:S,y:M}),m&&(C+=Bi(k,[S,M])),k=[S,M],w&&C>=h&&h>T[2]){var D=(C-h)/(C-T[2]);A={x:k[0]*(1-D)+T[0]*D,y:k[1]*(1-D)+T[1]*D}}T=[S,M,C]}return w&&h>=C&&(A={x:l,y:u}),{length:C,point:A,min:{x:Math.min.apply(null,R.map(function(z){return z.x})),y:Math.min.apply(null,R.map(function(z){return z.y}))},max:{x:Math.max.apply(null,R.map(function(z){return z.x})),y:Math.max.apply(null,R.map(function(z){return z.y}))}}}function v0(a,n,r){for(var s,l,u,h,f,d,v=Hc(a),p=typeof n=="number",g,m=[],b,E=0,w=0,S=0,M=0,C,T=[],k=[],O=0,A={x:0,y:0},R=A,L=A,D=A,z=0,W=0,G=v.length;W<G;W+=1)C=v[W],b=C[0],g=b==="M",m=g?m:[E,w].concat(C.slice(1)),g?(S=C[1],M=C[2],A={x:S,y:M},R=A,O=0,p&&n<.001&&(D=A)):b==="L"?(s=po(m[0],m[1],m[2],m[3],(n||0)-z),O=s.length,A=s.min,R=s.max,L=s.point):b==="A"?(l=Ke(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],(n||0)-z,r||{}),O=l.length,A=l.min,R=l.max,L=l.point):b==="C"?(u=d0(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],(n||0)-z,r||{}),O=u.length,A=u.min,R=u.max,L=u.point):b==="Q"?(h=qo(m[0],m[1],m[2],m[3],m[4],m[5],(n||0)-z,r||{}),O=h.length,A=h.min,R=h.max,L=h.point):b==="Z"&&(m=[E,w,S,M],f=po(m[0],m[1],m[2],m[3],(n||0)-z),O=f.length,A=f.min,R=f.max,L=f.point),p&&z<n&&z+O>=n&&(D=L),k.push(R),T.push(A),z+=O,d=b!=="Z"?C.slice(-2):[S,M],E=d[0],w=d[1];return p&&n>=z&&(D={x:E,y:w}),{length:z,point:D,min:{x:Math.min.apply(null,T.map(function(Y){return Y.x})),y:Math.min.apply(null,T.map(function(Y){return Y.y}))},max:{x:Math.max.apply(null,k.map(function(Y){return Y.x})),y:Math.max.apply(null,k.map(function(Y){return Y.y}))}}}function B1(a,n){return v0(a,void 0,(0,N.pi)((0,N.pi)({},n),{bbox:!1,length:!0})).length}var za=K(5199),sh=function(a){if((0,za.Z)(a))return a.reduce(function(n,r){return Math.min(n,r)},a[0])};function oh(a){if(!Array.isArray(a))return-1/0;var n=a.length;if(!n)return-1/0;for(var r=a[0],s=1;s<n;s++)r=Math.max(r,a[s]);return r}var Fs=1e-5;function Uc(a,n,r){return r===void 0&&(r=Fs),a===n||Math.abs(a-n)<r}var F1=function(a,n){return(a%n+n)%n},p0=F1;function z1(a,n,r){if(a[r].length>7){a[r].shift();for(var s=a[r],l=r;s.length;)n[r]="A",a.splice(l+=1,0,["C"].concat(s.splice(0,6)));a.splice(r,1)}}function Z1(a){return f0(a)&&a.every(function(n){var r=n[0];return"MC".includes(r)})}function ga(a,n,r){var s=a*Math.cos(r)-n*Math.sin(r),l=a*Math.sin(r)+n*Math.cos(r);return{x:s,y:l}}function rd(a,n,r,s,l,u,h,f,d,v){var p=a,g=n,m=r,b=s,E=f,w=d,S=Math.PI*120/180,M=Math.PI/180*(+l||0),C=[],T,k,O,A,R;if(v)k=v[0],O=v[1],A=v[2],R=v[3];else{T=ga(p,g,-M),p=T.x,g=T.y,T=ga(E,w,-M),E=T.x,w=T.y;var L=(p-E)/2,D=(g-w)/2,z=L*L/(m*m)+D*D/(b*b);z>1&&(z=Math.sqrt(z),m*=z,b*=z);var W=m*m,G=b*b,Y=(u===h?-1:1)*Math.sqrt(Math.abs((W*G-W*D*D-G*L*L)/(W*D*D+G*L*L)));A=Y*m*D/b+(p+E)/2,R=Y*-b*L/m+(g+w)/2,k=Math.asin(((g-R)/b*Math.pow(10,9)>>0)/Math.pow(10,9)),O=Math.asin(((w-R)/b*Math.pow(10,9)>>0)/Math.pow(10,9)),k=p<A?Math.PI-k:k,O=E<A?Math.PI-O:O,k<0&&(k=Math.PI*2+k),O<0&&(O=Math.PI*2+O),h&&k>O&&(k-=Math.PI*2),!h&&O>k&&(O-=Math.PI*2)}var q=O-k;if(Math.abs(q)>S){var rt=O,yt=E,st=w;O=k+S*(h&&O>k?1:-1),E=A+m*Math.cos(O),w=R+b*Math.sin(O),C=rd(E,w,m,b,l,0,h,yt,st,[O,rt,A,R])}q=O-k;var mt=Math.cos(k),at=Math.sin(k),Et=Math.cos(O),It=Math.sin(O),Gt=Math.tan(q/4),Jt=4/3*m*Gt,Re=4/3*b*Gt,te=[p,g],we=[p+Jt*at,g-Re*mt],cn=[E+Jt*It,w-Re*Et],$e=[E,w];if(we[0]=2*te[0]-we[0],we[1]=2*te[1]-we[1],v)return we.concat(cn,$e,C);C=we.concat(cn,$e,C);for(var qe=[],Xe=0,Ir=C.length;Xe<Ir;Xe+=1)qe[Xe]=Xe%2?ga(C[Xe-1],C[Xe],M).y:ga(C[Xe],C[Xe+1],M).x;return qe}function W1(a,n,r,s,l,u){var h=.3333333333333333,f=2/3;return[h*a+f*r,h*n+f*s,h*l+f*r,h*u+f*s,l,u]}var g0=function(a,n,r,s){var l=.5,u=F([a,n],[r,s],l);return(0,N.ev)((0,N.ev)([],u,!0),[r,s,r,s],!1)};function G1(a,n){var r=a[0],s=a.slice(1).map(Number),l=s[0],u=s[1],h,f=n.x1,d=n.y1,v=n.x,p=n.y;switch("TQ".includes(r)||(n.qx=null,n.qy=null),r){case"M":return n.x=l,n.y=u,a;case"A":return h=[f,d].concat(s),["C"].concat(rd(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9]));case"Q":return n.qx=l,n.qy=u,h=[f,d].concat(s),["C"].concat(W1(h[0],h[1],h[2],h[3],h[4],h[5]));case"L":return["C"].concat(g0(f,d,l,u));case"Z":return f===v&&d===p?["C",f,d,v,p,v,p]:["C"].concat(g0(f,d,v,p));default:}return a}function id(a,n){if(n===void 0&&(n=!1),Z1(a)){var r=[].concat(a);return n?[r,[]]:r}for(var s=Hc(a),l=(0,N.pi)({},rh),u=[],h="",f=s.length,d,v,p=[],g=0;g<f;g+=1){s[g]&&(h=s[g][0]),u[g]=h;var m=G1(s[g],l);s[g]=m,z1(s,u,g),f=s.length,h==="Z"&&p.push(g),d=s[g],v=d.length,l.x1=+d[v-2],l.y1=+d[v-1],l.x2=+d[v-4]||l.x1,l.y2=+d[v-3]||l.y1}return n?[s,p]:s}var Qo=50;function j1(a,n){n===void 0&&(n=.5);var r=a.slice(0,2),s=a.slice(2,4),l=a.slice(4,6),u=a.slice(6,8),h=F(r,s,n),f=F(s,l,n),d=F(l,u,n),v=F(h,f,n),p=F(f,d,n),g=F(v,p,n);return[["C"].concat(h,v,g),["C"].concat(p,d,u)]}function y0(a){return a.map(function(n,r,s){var l=r&&s[r-1].slice(-2).concat(n.slice(1)),u=r?d0(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],{bbox:!1}).length:0,h;return r?h=u?j1(l):[n,n]:h=[n],{s:n,ss:h,l:u}})}function ya(a,n,r,s){if(s===void 0&&(s=0),s>Qo)return console.warn("Maximum recursion depth reached in equalizeSegments"),[a,n];var l=y0(a),u=y0(n),h=l.length,f=u.length,d=l.filter(function(M){return M.l}).length,v=u.filter(function(M){return M.l}).length,p=l.filter(function(M){return M.l}).reduce(function(M,C){var T=C.l;return M+T},0)/d||0,g=u.filter(function(M){return M.l}).reduce(function(M,C){var T=C.l;return M+T},0)/v||0,m=r||Math.max(h,f),b=[p,g],E=[m-h,m-f],w=0,S=[l,u].map(function(M,C){return M.l===m?M.map(function(T){return T.s}):M.map(function(T,k){return w=k&&E[C]&&T.l>=b[C],E[C]-=w?1:0,w?T.ss:[T.s]}).flat()});return S[0].length===S[1].length?S:ya(S[0],S[1],m,s+1)}function $1(a,n,r,s,l,u,h,f){return 3*((f-n)*(r+l)-(h-a)*(s+u)+s*(a-l)-r*(n-u)+f*(l+a/3)-h*(u+n/3))/20}function H1(a){var n=0,r=0,s=0;return id(a).map(function(l){var u;switch(l[0]){case"M":return n=l[1],r=l[2],0;default:var h=l.slice(1),f=h[0],d=h[1],v=h[2],p=h[3],g=h[4],m=h[5];return s=$1(n,r,f,d,v,p,g,m),u=l.slice(-2),n=u[0],r=u[1],s}}).reduce(function(l,u){return l+u},0)}function m0(a){return H1(a)>=0}function V1(a){var n=a.slice(1).map(function(r,s,l){return s?l[s-1].slice(-2).concat(r.slice(1)):a[0].slice(1).concat(r.slice(1))}).map(function(r){return r.map(function(s,l){return r[r.length-l-2*(1-l%2)]})}).reverse();return[["M"].concat(n[0].slice(0,2))].concat(n.map(function(r){return["C"].concat(r.slice(2))}))}function U1(a){return a.map(function(n){return Array.isArray(n)?[].concat(n):n})}function b0(a){var n=a.length,r=n-1;return a.map(function(s,l){return a.map(function(u,h){var f=l+h,d;return h===0||a[f]&&a[f][0]==="M"?(d=a[f],["M"].concat(d.slice(-2))):(f>=n&&(f-=r),a[f])})})}function x0(a,n){var r=a.length-1,s=[],l=0,u=0,h=b0(a);return h.forEach(function(f,d){a.slice(1).forEach(function(v,p){u+=Bi(a[(d+p)%r].slice(-2),n[p%r].slice(-2))}),s[d]=u,u=0}),l=s.indexOf(Math.min.apply(null,s)),h[l]}var Y1=function(a){return a===void 0},xe=Y1,ad=K(95456),Yc=function(a){return(0,ad.Z)(a,"Boolean")},go=Yc,re=K(45607),ai=K(4637);function X1(a,n,r){return v0(a,n,(0,N.pi)((0,N.pi)({},r),{bbox:!1,length:!0})).point}var Zt=K(4942),lh=K(61120);function Jo(a,n){for(;!{}.hasOwnProperty.call(a,n)&&(a=(0,lh.Z)(a))!==null;);return a}function Fi(){return Fi=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(a,n,r){var s=Jo(a,n);if(s){var l=Object.getOwnPropertyDescriptor(s,n);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Fi.apply(null,arguments)}function E0(a,n,r,s){var l=Fi((0,lh.Z)(1&s?a.prototype:a),n,r);return 2&s&&typeof l=="function"?function(u){return l.apply(r,u)}:l}function Xr(a,n,r,s){var l=a-r,u=n-s;return Math.sqrt(l*l+u*u)}function Xc(a,n){var r=Math.min.apply(Math,(0,J.Z)(a)),s=Math.min.apply(Math,(0,J.Z)(n)),l=Math.max.apply(Math,(0,J.Z)(a)),u=Math.max.apply(Math,(0,J.Z)(n));return{x:r,y:s,width:l-r,height:u-s}}function Hl(a){return(a+Math.PI*2)%(Math.PI*2)}function zs(a,n){var r=Math.abs(a);return n>0?r:r*-1}function w0(a,n,r,s,l,u){var h=r,f=s;if(h===0||f===0)return{x:a,y:n};for(var d=l-a,v=u-n,p=Math.abs(d),g=Math.abs(v),m=h*h,b=f*f,E=Math.PI/4,w=0,S=0,M=0;M<4;M++){w=h*Math.cos(E),S=f*Math.sin(E);var C=(m-b)*Math.pow(Math.cos(E),3)/h,T=(b-m)*Math.pow(Math.sin(E),3)/f,k=w-C,O=S-T,A=p-C,R=g-T,L=Math.hypot(O,k),D=Math.hypot(R,A),z=L*Math.asin((k*R-O*A)/(L*D)),W=z/Math.sqrt(m+b-w*w-S*S);E+=W,E=Math.min(Math.PI/2,Math.max(0,E))}return{x:a+zs(w,d),y:n+zs(S,v)}}function K1(a,n,r,s,l,u,h,f){return-1*r*Math.cos(l)*Math.sin(f)-s*Math.sin(l)*Math.cos(f)}function ch(a,n,r,s,l,u,h,f){return-1*r*Math.sin(l)*Math.sin(f)+s*Math.cos(l)*Math.cos(f)}function q1(a,n,r){return Math.atan(-n/a*Math.tan(r))}function S0(a,n,r){return Math.atan(n/(a*Math.tan(r)))}function Kr(a,n,r,s,l,u){return r*Math.cos(l)*Math.cos(u)-s*Math.sin(l)*Math.sin(u)+a}function sd(a,n,r,s,l,u){return r*Math.sin(l)*Math.cos(u)+s*Math.cos(l)*Math.sin(u)+n}function _0(a,n,r,s){var l=Math.atan2(s*a,r*n);return(l+Math.PI*2)%(Math.PI*2)}function Za(a,n,r){return{x:a*Math.cos(r),y:n*Math.sin(r)}}function uh(a,n,r){var s=Math.cos(r),l=Math.sin(r);return[a*s-n*l,a*l+n*s]}function hh(a,n,r,s,l,u,h){for(var f=q1(r,s,l),d=1/0,v=-1/0,p=[u,h],g=-Math.PI*2;g<=Math.PI*2;g+=Math.PI){var m=f+g;u<h?u<m&&m<h&&p.push(m):h<m&&m<u&&p.push(m)}for(var b=0;b<p.length;b++){var E=Kr(a,n,r,s,l,p[b]);E<d&&(d=E),E>v&&(v=E)}for(var w=S0(r,s,l),S=1/0,M=-1/0,C=[u,h],T=-Math.PI*2;T<=Math.PI*2;T+=Math.PI){var k=w+T;u<h?u<k&&k<h&&C.push(k):h<k&&k<u&&C.push(k)}for(var O=0;O<C.length;O++){var A=sd(a,n,r,s,l,C[O]);A<S&&(S=A),A>M&&(M=A)}return{x:d,y:S,width:v-d,height:M-S}}function Vl(a,n,r,s,l,u,h,f,d){var v=uh(f-a,d-n,-l),p=_slicedToArray(v,2),g=p[0],m=p[1],b=w0(0,0,r,s,g,m),E=_0(r,s,b.x,b.y);E<u?b=Za(r,s,u):E>h&&(b=Za(r,s,h));var w=uh(b.x,b.y,l);return{x:w[0]+a,y:w[1]+n}}function Q1(a,n,r,s,l,u,h,f){var d=(h-u)*f+u,v=K1(a,n,r,s,l,u,h,d),p=ch(a,n,r,s,l,u,h,d);return Hl(Math.atan2(p,v))}var wi=1e-4;function fh(a,n,r,s,l,u){var h=-1,f=1/0,d=[r,s],v=20;u&&u>200&&(v=u/10);for(var p=1/v,g=p/10,m=0;m<=v;m++){var b=m*p,E=[l.apply(void 0,(0,J.Z)(a.concat([b]))),l.apply(void 0,(0,J.Z)(n.concat([b])))],w=Xr(d[0],d[1],E[0],E[1]);w<f&&(h=b,f=w)}if(h===0)return{x:a[0],y:n[0]};if(h===1){var S=a.length;return{x:a[S-1],y:n[S-1]}}f=1/0;for(var M=0;M<32&&!(g<wi);M++){var C=h-g,T=h+g,k=[l.apply(void 0,(0,J.Z)(a.concat([C]))),l.apply(void 0,(0,J.Z)(n.concat([C])))],O=Xr(d[0],d[1],k[0],k[1]);if(C>=0&&O<f)h=C,f=O;else{var A=[l.apply(void 0,(0,J.Z)(a.concat([T]))),l.apply(void 0,(0,J.Z)(n.concat([T])))],R=Xr(d[0],d[1],A[0],A[1]);T<=1&&R<f?(h=T,f=R):g*=.5}}return{x:l.apply(void 0,(0,J.Z)(a.concat([h]))),y:l.apply(void 0,(0,J.Z)(n.concat([h])))}}function J1(a,n){for(var r=0,s=a.length,l=0;l<s;l++){var u=a[l],h=n[l],f=a[(l+1)%s],d=n[(l+1)%s];r+=Xr(u,h,f,d)}return r/2}function ZS(a,n,r,s){return Xc([a,r],[n,s])}function M0(a,n,r,s){return Xr(a,n,r,s)}function ma(a,n,r,s,l){return{x:(1-l)*a+l*r,y:(1-l)*n+l*s}}function tb(a,n,r,s,l,u){var h=(r-a)*(l-a)+(s-n)*(u-n);if(h<0)return Xr(a,n,l,u);var f=(r-a)*(r-a)+(s-n)*(s-n);return h>f?Xr(r,s,l,u):Ul(a,n,r,s,l,u)}function Ul(a,n,r,s,l,u){var h=[r-a,s-n];if(eh(h,[0,0]))return Math.sqrt((l-a)*(l-a)+(u-n)*(u-n));var f=[-h[1],h[0]];_1(f,f);var d=[l-a,u-n];return Math.abs(u0(d,f))}function eb(a,n,r,s){return Math.atan2(s-n,r-a)}function tl(a,n,r,s,l){var u=1-l;return u*u*u*a+3*n*l*u*u+3*r*l*l*u+s*l*l*l}function C0(a,n,r,s,l){var u=1-l;return 3*(u*u*(n-a)+2*u*l*(r-n)+l*l*(s-r))}function Yl(a,n,r,s){var l=-3*a+9*n-9*r+3*s,u=6*a-12*n+6*r,h=3*n-3*a,f=[],d,v,p;if(Uc(l,0))Uc(u,0)||(d=-h/u,d>=0&&d<=1&&f.push(d));else{var g=u*u-4*l*h;Uc(g,0)?f.push(-u/(2*l)):g>0&&(p=Math.sqrt(g),d=(-u+p)/(2*l),v=(-u-p)/(2*l),d>=0&&d<=1&&f.push(d),v>=0&&v<=1&&f.push(v))}return f}function nb(a,n,r,s,l,u,h,f,d){var v=tl(a,r,l,h,d),p=tl(n,s,u,f,d),g=ma(a,n,r,s,d),m=ma(r,s,l,u,d),b=ma(l,u,h,f,d),E=ma(g.x,g.y,m.x,m.y,d),w=ma(m.x,m.y,b.x,b.y,d);return[[a,n,g.x,g.y,E.x,E.y,v,p],[v,p,w.x,w.y,b.x,b.y,h,f]]}function od(a,n,r,s,l,u,h,f,d){if(d===0)return J1([a,r,l,h],[n,s,u,f]);var v=nb(a,n,r,s,l,u,h,f,.5),p=[].concat(_toConsumableArray(v[0]),[d-1]),g=[].concat(_toConsumableArray(v[1]),[d-1]);return od.apply(void 0,_toConsumableArray(p))+od.apply(void 0,_toConsumableArray(g))}function ld(a,n,r,s,l,u,h,f){for(var d=[a,h],v=[n,f],p=Yl(a,r,l,h),g=Yl(n,s,u,f),m=0;m<p.length;m++)d.push(tl(a,r,l,h,p[m]));for(var b=0;b<g.length;b++)v.push(tl(n,s,u,f,g[b]));return Xc(d,v)}function rb(a,n,r,s,l,u,h,f){return od(a,n,r,s,l,u,h,f,3)}function ib(a,n,r,s,l,u,h,f,d,v,p){return fh([a,r,l,h],[n,s,u,f],d,v,tl,p)}function T0(a,n,r,s,l,u,h,f,d,v,p){var g=ib(a,n,r,s,l,u,h,f,d,v,p);return Xr(g.x,g.y,d,v)}function WS(a,n,r,s,l,u,h,f,d){return{x:tl(a,r,l,h,d),y:tl(n,s,u,f,d)}}function ab(a,n,r,s,l,u,h,f,d){var v=C0(a,r,l,h,d),p=C0(n,s,u,f,d);return Hl(Math.atan2(p,v))}function dh(a){for(var n=0,r=[],s=0;s<a.length-1;s++){var l=a[s],u=a[s+1],h=Xr(l[0],l[1],u[0],u[1]),f={from:l,to:u,length:h};r.push(f),n+=h}return{segments:r,totalLength:n}}function O0(a){if(a.length<2)return 0;for(var n=0,r=0;r<a.length-1;r++){var s=a[r],l=a[r+1];n+=Xr(s[0],s[1],l[0],l[1])}return n}function vh(a,n){if(n>1||n<0||a.length<2)return null;var r=dh(a),s=r.segments,l=r.totalLength;if(l===0)return{x:a[0][0],y:a[0][1]};for(var u=0,h=null,f=0;f<s.length;f++){var d=s[f],v=d.from,p=d.to,g=d.length/l;if(n>=u&&n<=u+g){var m=(n-u)/g;h=ma(v[0],v[1],p[0],p[1],m);break}u+=g}return h}function cd(a,n){if(n>1||n<0||a.length<2)return 0;for(var r=dh(a),s=r.segments,l=r.totalLength,u=0,h=0,f=0;f<s.length;f++){var d=s[f],v=d.from,p=d.to,g=d.length/l;if(n>=u&&n<=u+g){h=Math.atan2(p[1]-v[1],p[0]-v[0]);break}u+=g}return h}function ud(a,n,r){for(var s=1/0,l=0;l<a.length-1;l++){var u=a[l],h=a[l+1],f=tb(u[0],u[1],h[0],h[1],n,r);f<s&&(s=f)}return s}function A0(a){for(var n=[],r=[],s=0;s<a.length;s++){var l=a[s];n.push(l[0]),r.push(l[1])}return Xc(n,r)}function ph(a){return O0(a)}function GS(a,n){return vh(a,n)}function sb(a,n,r){return ud(a,n,r)}function ob(a,n){return cd(a,n)}function gh(a){var n=a.slice(0);return a.length&&n.push(a[0]),n}function lb(a){return A0(a)}function jS(a){return O0(gh(a))}function k0(a,n){return vh(gh(a),n)}function cb(a,n,r){return ud(gh(a),n,r)}function P0(a,n){return cd(gh(a),n)}function Kc(a,n,r,s){var l=1-s;return l*l*a+2*s*l*n+s*s*r}function yh(a,n,r){var s=a+r-2*n;if(Uc(s,0))return[.5];var l=(a-n)/s;return l<=1&&l>=0?[l]:[]}function Fe(a,n,r,s,l,u,h){var f=Kc(a,r,l,h),d=Kc(n,s,u,h),v=ma(a,n,r,s,h),p=ma(r,s,l,u,h);return[[a,n,v.x,v.y,f,d],[f,d,p.x,p.y,l,u]]}function hd(a,n,r,s,l,u,h){if(h===0)return(Xr(a,n,r,s)+Xr(r,s,l,u)+Xr(a,n,l,u))/2;var f=Fe(a,n,r,s,l,u,.5),d=f[0],v=f[1];return d.push(h-1),v.push(h-1),hd.apply(void 0,_toConsumableArray(d))+hd.apply(void 0,_toConsumableArray(v))}function ub(a,n,r,s,l,u){var h=yh(a,r,l)[0],f=yh(n,s,u)[0],d=[a,l],v=[n,u];return h!==void 0&&d.push(Kc(a,r,l,h)),f!==void 0&&v.push(Kc(n,s,u,f)),Xc(d,v)}function mh(a,n,r,s,l,u){return hd(a,n,r,s,l,u,3)}function R0(a,n,r,s,l,u,h,f){return fh([a,r,l],[n,s,u],h,f,Kc)}function hb(a,n,r,s,l,u,h,f){var d=R0(a,n,r,s,l,u,h,f);return Xr(d.x,d.y,h,f)}var si=K(55850),Or=K(15861),el=K(37762),vs=K(91);var fd=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof K.g!="undefined"?K.g:typeof self!="undefined"?self:{},dd={exports:{}};(function(a,n){(function(r,s){a.exports=s()})(fd,function(){function r(O,A,R,L,D){s(O,A,R||0,L||O.length-1,D||u)}function s(O,A,R,L,D){for(;L>R;){if(L-R>600){var z=L-R+1,W=A-R+1,G=Math.log(z),Y=.5*Math.exp(2*G/3),q=.5*Math.sqrt(G*Y*(z-Y)/z)*(W-z/2<0?-1:1),rt=Math.max(R,Math.floor(A-W*Y/z+q)),yt=Math.min(L,Math.floor(A+(z-W)*Y/z+q));s(O,A,rt,yt,D)}var st=O[A],mt=R,at=L;for(l(O,R,A),D(O[L],st)>0&&l(O,R,L);mt<at;){for(l(O,mt,at),mt++,at--;D(O[mt],st)<0;)mt++;for(;D(O[at],st)>0;)at--}D(O[R],st)===0?l(O,R,at):(at++,l(O,at,L)),at<=A&&(R=at+1),A<=at&&(L=at-1)}}function l(O,A,R){var L=O[A];O[A]=O[R],O[R]=L}function u(O,A){return O<A?-1:O>A?1:0}var h=function(A){A===void 0&&(A=9),this._maxEntries=Math.max(4,A),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};h.prototype.all=function(){return this._all(this.data,[])},h.prototype.search=function(A){var R=this.data,L=[];if(!C(A,R))return L;for(var D=this.toBBox,z=[];R;){for(var W=0;W<R.children.length;W++){var G=R.children[W],Y=R.leaf?D(G):G;C(A,Y)&&(R.leaf?L.push(G):M(A,Y)?this._all(G,L):z.push(G))}R=z.pop()}return L},h.prototype.collides=function(A){var R=this.data;if(!C(A,R))return!1;for(var L=[];R;){for(var D=0;D<R.children.length;D++){var z=R.children[D],W=R.leaf?this.toBBox(z):z;if(C(A,W)){if(R.leaf||M(A,W))return!0;L.push(z)}}R=L.pop()}return!1},h.prototype.load=function(A){if(!(A&&A.length))return this;if(A.length<this._minEntries){for(var R=0;R<A.length;R++)this.insert(A[R]);return this}var L=this._build(A.slice(),0,A.length-1,0);if(!this.data.children.length)this.data=L;else if(this.data.height===L.height)this._splitRoot(this.data,L);else{if(this.data.height<L.height){var D=this.data;this.data=L,L=D}this._insert(L,this.data.height-L.height-1,!0)}return this},h.prototype.insert=function(A){return A&&this._insert(A,this.data.height-1),this},h.prototype.clear=function(){return this.data=T([]),this},h.prototype.remove=function(A,R){if(!A)return this;for(var L=this.data,D=this.toBBox(A),z=[],W=[],G,Y,q;L||z.length;){if(L||(L=z.pop(),Y=z[z.length-1],G=W.pop(),q=!0),L.leaf){var rt=f(A,L.children,R);if(rt!==-1)return L.children.splice(rt,1),z.push(L),this._condense(z),this}!q&&!L.leaf&&M(L,D)?(z.push(L),W.push(G),G=0,Y=L,L=L.children[0]):Y?(G++,L=Y.children[G],q=!1):L=null}return this},h.prototype.toBBox=function(A){return A},h.prototype.compareMinX=function(A,R){return A.minX-R.minX},h.prototype.compareMinY=function(A,R){return A.minY-R.minY},h.prototype.toJSON=function(){return this.data},h.prototype.fromJSON=function(A){return this.data=A,this},h.prototype._all=function(A,R){for(var L=[];A;)A.leaf?R.push.apply(R,A.children):L.push.apply(L,A.children),A=L.pop();return R},h.prototype._build=function(A,R,L,D){var z=L-R+1,W=this._maxEntries,G;if(z<=W)return G=T(A.slice(R,L+1)),d(G,this.toBBox),G;D||(D=Math.ceil(Math.log(z)/Math.log(W)),W=Math.ceil(z/Math.pow(W,D-1))),G=T([]),G.leaf=!1,G.height=D;var Y=Math.ceil(z/W),q=Y*Math.ceil(Math.sqrt(W));k(A,R,L,q,this.compareMinX);for(var rt=R;rt<=L;rt+=q){var yt=Math.min(rt+q-1,L);k(A,rt,yt,Y,this.compareMinY);for(var st=rt;st<=yt;st+=Y){var mt=Math.min(st+Y-1,yt);G.children.push(this._build(A,st,mt,D-1))}}return d(G,this.toBBox),G},h.prototype._chooseSubtree=function(A,R,L,D){for(;D.push(R),!(R.leaf||D.length-1===L);){for(var z=1/0,W=1/0,G=void 0,Y=0;Y<R.children.length;Y++){var q=R.children[Y],rt=b(q),yt=w(A,q)-rt;yt<W?(W=yt,z=rt<z?rt:z,G=q):yt===W&&rt<z&&(z=rt,G=q)}R=G||R.children[0]}return R},h.prototype._insert=function(A,R,L){var D=L?A:this.toBBox(A),z=[],W=this._chooseSubtree(D,this.data,R,z);for(W.children.push(A),p(W,D);R>=0&&z[R].children.length>this._maxEntries;)this._split(z,R),R--;this._adjustParentBBoxes(D,z,R)},h.prototype._split=function(A,R){var L=A[R],D=L.children.length,z=this._minEntries;this._chooseSplitAxis(L,z,D);var W=this._chooseSplitIndex(L,z,D),G=T(L.children.splice(W,L.children.length-W));G.height=L.height,G.leaf=L.leaf,d(L,this.toBBox),d(G,this.toBBox),R?A[R-1].children.push(G):this._splitRoot(L,G)},h.prototype._splitRoot=function(A,R){this.data=T([A,R]),this.data.height=A.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},h.prototype._chooseSplitIndex=function(A,R,L){for(var D,z=1/0,W=1/0,G=R;G<=L-R;G++){var Y=v(A,0,G,this.toBBox),q=v(A,G,L,this.toBBox),rt=S(Y,q),yt=b(Y)+b(q);rt<z?(z=rt,D=G,W=yt<W?yt:W):rt===z&&yt<W&&(W=yt,D=G)}return D||L-R},h.prototype._chooseSplitAxis=function(A,R,L){var D=A.leaf?this.compareMinX:g,z=A.leaf?this.compareMinY:m,W=this._allDistMargin(A,R,L,D),G=this._allDistMargin(A,R,L,z);W<G&&A.children.sort(D)},h.prototype._allDistMargin=function(A,R,L,D){A.children.sort(D);for(var z=this.toBBox,W=v(A,0,R,z),G=v(A,L-R,L,z),Y=E(W)+E(G),q=R;q<L-R;q++){var rt=A.children[q];p(W,A.leaf?z(rt):rt),Y+=E(W)}for(var yt=L-R-1;yt>=R;yt--){var st=A.children[yt];p(G,A.leaf?z(st):st),Y+=E(G)}return Y},h.prototype._adjustParentBBoxes=function(A,R,L){for(var D=L;D>=0;D--)p(R[D],A)},h.prototype._condense=function(A){for(var R=A.length-1,L=void 0;R>=0;R--)A[R].children.length===0?R>0?(L=A[R-1].children,L.splice(L.indexOf(A[R]),1)):this.clear():d(A[R],this.toBBox)};function f(O,A,R){if(!R)return A.indexOf(O);for(var L=0;L<A.length;L++)if(R(O,A[L]))return L;return-1}function d(O,A){v(O,0,O.children.length,A,O)}function v(O,A,R,L,D){D||(D=T(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var z=A;z<R;z++){var W=O.children[z];p(D,O.leaf?L(W):W)}return D}function p(O,A){return O.minX=Math.min(O.minX,A.minX),O.minY=Math.min(O.minY,A.minY),O.maxX=Math.max(O.maxX,A.maxX),O.maxY=Math.max(O.maxY,A.maxY),O}function g(O,A){return O.minX-A.minX}function m(O,A){return O.minY-A.minY}function b(O){return(O.maxX-O.minX)*(O.maxY-O.minY)}function E(O){return O.maxX-O.minX+(O.maxY-O.minY)}function w(O,A){return(Math.max(A.maxX,O.maxX)-Math.min(A.minX,O.minX))*(Math.max(A.maxY,O.maxY)-Math.min(A.minY,O.minY))}function S(O,A){var R=Math.max(O.minX,A.minX),L=Math.max(O.minY,A.minY),D=Math.min(O.maxX,A.maxX),z=Math.min(O.maxY,A.maxY);return Math.max(0,D-R)*Math.max(0,z-L)}function M(O,A){return O.minX<=A.minX&&O.minY<=A.minY&&A.maxX<=O.maxX&&A.maxY<=O.maxY}function C(O,A){return A.minX<=O.maxX&&A.minY<=O.maxY&&A.maxX>=O.minX&&A.maxY>=O.minY}function T(O){return{children:O,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function k(O,A,R,L,D){for(var z=[A,R];z.length;)if(R=z.pop(),A=z.pop(),!(R-A<=L)){var W=A+Math.ceil((R-A)/L/2)*L;r(O,W,A,R,D),z.push(A,W,W,R)}}return h})})(dd);var N0=dd.exports,lt=function(a){return a.GROUP="g",a.FRAGMENT="fragment",a.CIRCLE="circle",a.ELLIPSE="ellipse",a.IMAGE="image",a.RECT="rect",a.LINE="line",a.POLYLINE="polyline",a.POLYGON="polygon",a.TEXT="text",a.PATH="path",a.HTML="html",a.MESH="mesh",a}({}),Wa=function(a){return a[a.ZERO=0]="ZERO",a[a.NEGATIVE_ONE=1]="NEGATIVE_ONE",a}({}),ps=function(){function a(){(0,H.Z)(this,a),this.plugins=[]}return(0,j.Z)(a,[{key:"addRenderingPlugin",value:function(r){this.plugins.push(r),this.context.renderingPlugins.push(r)}},{key:"removeAllRenderingPlugins",value:function(){var r=this;this.plugins.forEach(function(s){var l=r.context.renderingPlugins.indexOf(s);l>=0&&r.context.renderingPlugins.splice(l,1)})}}])}(),L0=function(){function a(n){(0,H.Z)(this,a),this.clipSpaceNearZ=Wa.NEGATIVE_ONE,this.plugins=[],this.config=(0,gt.Z)({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},n)}return(0,j.Z)(a,[{key:"registerPlugin",value:function(r){var s=this.plugins.findIndex(function(l){return l===r});s===-1&&this.plugins.push(r)}},{key:"unregisterPlugin",value:function(r){var s=this.plugins.findIndex(function(l){return l===r});s>-1&&this.plugins.splice(s,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(r){return this.plugins.find(function(s){return s.name===r})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(r){Object.assign(this.config,r)}}])}(),Xl=oe,nl=bt,vd=qn,I0=or,bh=hr,qc=mr,en=function(){function a(){(0,H.Z)(this,a),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return(0,j.Z)(a,[{key:"update",value:function(r,s){nl(this.center,r),nl(this.halfExtents,s),qc(this.min,this.center,this.halfExtents),Xl(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(r,s){Xl(this.center,s,r),bh(this.center,this.center,.5),qc(this.halfExtents,s,r),bh(this.halfExtents,this.halfExtents,.5),nl(this.min,r),nl(this.max,s)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(r){if(!a.isEmpty(r)){if(a.isEmpty(this)){this.setMinMax(r.getMin(),r.getMax());return}var s=this.center,l=s[0],u=s[1],h=s[2],f=this.halfExtents,d=f[0],v=f[1],p=f[2],g=l-d,m=l+d,b=u-v,E=u+v,w=h-p,S=h+p,M=r.center,C=M[0],T=M[1],k=M[2],O=r.halfExtents,A=O[0],R=O[1],L=O[2],D=C-A,z=C+A,W=T-R,G=T+R,Y=k-L,q=k+L;D<g&&(g=D),z>m&&(m=z),W<b&&(b=W),G>E&&(E=G),Y<w&&(w=Y),q>S&&(S=q),s[0]=(g+m)*.5,s[1]=(b+E)*.5,s[2]=(w+S)*.5,f[0]=(m-g)*.5,f[1]=(E-b)*.5,f[2]=(S-w)*.5,this.min[0]=g,this.min[1]=b,this.min[2]=w,this.max[0]=m,this.max[1]=E,this.max[2]=S}}},{key:"setFromTransformedAABB",value:function(r,s){var l=this.center,u=this.halfExtents,h=r.center,f=r.halfExtents,d=s[0],v=s[4],p=s[8],g=s[1],m=s[5],b=s[9],E=s[2],w=s[6],S=s[10],M=Math.abs(d),C=Math.abs(v),T=Math.abs(p),k=Math.abs(g),O=Math.abs(m),A=Math.abs(b),R=Math.abs(E),L=Math.abs(w),D=Math.abs(S);l[0]=s[12]+d*h[0]+v*h[1]+p*h[2],l[1]=s[13]+g*h[0]+m*h[1]+b*h[2],l[2]=s[14]+E*h[0]+w*h[1]+S*h[2],u[0]=M*f[0]+C*f[1]+T*f[2],u[1]=k*f[0]+O*f[1]+A*f[2],u[2]=R*f[0]+L*f[1]+D*f[2],qc(this.min,l,u),Xl(this.max,l,u)}},{key:"intersects",value:function(r){var s=this.getMax(),l=this.getMin(),u=r.getMax(),h=r.getMin();return l[0]<=u[0]&&s[0]>=h[0]&&l[1]<=u[1]&&s[1]>=h[1]&&l[2]<=u[2]&&s[2]>=h[2]}},{key:"intersection",value:function(r){if(!this.intersects(r))return null;var s=new a,l=vd([0,0,0],this.getMin(),r.getMin()),u=I0([0,0,0],this.getMax(),r.getMax());return s.setMinMax(l,u),s}},{key:"getNegativeFarPoint",value:function(r){return r.pnVertexFlag===273?nl([0,0,0],this.min):r.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:r.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:r.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:r.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:r.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:r.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(r){return r.pnVertexFlag===273?nl([0,0,0],this.max):r.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:r.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:r.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:r.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:r.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:r.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(r){return!r||r.halfExtents[0]===0&&r.halfExtents[1]===0&&r.halfExtents[2]===0}}])}(),fb=function(){function a(n,r){(0,H.Z)(this,a),this.distance=n||0,this.normal=r||pe(0,1,0),this.updatePNVertexFlag()}return(0,j.Z)(a,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(r){return $t(r,this.normal)-this.distance}},{key:"normalize",value:function(){var r=1/jt(this.normal);hr(this.normal,this.normal,r),this.distance*=r}},{key:"intersectsLine",value:function(r,s,l){var u=this.distanceToPoint(r),h=this.distanceToPoint(s),f=u/(u-h),d=f>=0&&f<=1;return d&&l&&An(l,r,s,f),d}}])}(),Ki=function(a){return a[a.OUTSIDE=4294967295]="OUTSIDE",a[a.INSIDE=0]="INSIDE",a[a.INDETERMINATE=2147483647]="INDETERMINATE",a}({}),D0=function(){function a(n){if((0,H.Z)(this,a),this.planes=[],n)this.planes=n;else for(var r=0;r<6;r++)this.planes.push(new fb)}return(0,j.Z)(a,[{key:"extractFromVPMatrix",value:function(r){var s=(0,V.Z)(r,16),l=s[0],u=s[1],h=s[2],f=s[3],d=s[4],v=s[5],p=s[6],g=s[7],m=s[8],b=s[9],E=s[10],w=s[11],S=s[12],M=s[13],C=s[14],T=s[15];Ut(this.planes[0].normal,f-l,g-d,w-m),this.planes[0].distance=T-S,Ut(this.planes[1].normal,f+l,g+d,w+m),this.planes[1].distance=T+S,Ut(this.planes[2].normal,f+u,g+v,w+b),this.planes[2].distance=T+M,Ut(this.planes[3].normal,f-u,g-v,w-b),this.planes[3].distance=T-M,Ut(this.planes[4].normal,f-h,g-p,w-E),this.planes[4].distance=T-C,Ut(this.planes[5].normal,f+h,g+p,w+E),this.planes[5].distance=T+C,this.planes.forEach(function(k){k.normalize(),k.updatePNVertexFlag()})}}])}(),Gr=function(){function a(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;(0,H.Z)(this,a),this.x=0,this.y=0,this.x=n,this.y=r}return(0,j.Z)(a,[{key:"clone",value:function(){return new a(this.x,this.y)}},{key:"copyFrom",value:function(r){this.x=r.x,this.y=r.y}}])}(),yo=function(){function a(n,r,s,l){(0,H.Z)(this,a),this.x=n,this.y=r,this.width=s,this.height=l,this.left=n,this.right=n+s,this.top=r,this.bottom=r+l}return(0,j.Z)(a,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(r){return new a(r.x,r.y,r.width,r.height)}},{key:"applyTransform",value:function(r,s){var l=fe(r.x,r.y,0,1),u=fe(r.x+r.width,r.y,0,1),h=fe(r.x,r.y+r.height,0,1),f=fe(r.x+r.width,r.y+r.height,0,1),d=ae(),v=ae(),p=ae(),g=ae();mi(d,l,s),mi(v,u,s),mi(p,h,s),mi(g,f,s);var m=Math.min(d[0],v[0],p[0],g[0]),b=Math.min(d[1],v[1],p[1],g[1]),E=Math.max(d[0],v[0],p[0],g[0]),w=Math.max(d[1],v[1],p[1],g[1]);return a.fromRect({x:m,y:b,width:E-m,height:w-b})}}])}(),En="Method not implemented.",Kl="Use document.documentElement instead.",db="Cannot append a destroyed element.";function rl(a){return a===void 0?0:a>360||a<-360?a%360:a}var xh=Xt();function Si(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(a)&&a.length===3?s?On(a):bt(xh,a):(0,tn.Z)(a)?s?pe(a,n,r):Ut(xh,a,n,r):s?pe(a[0],a[1]||n,a[2]||r):Ut(xh,a[0],a[1]||n,a[2]||r)}var B0=Math.PI/180;function pn(a){return a*B0}var zi=180/Math.PI;function nr(a){return a*zi}var vb=.9;function $S(a){return a%=400,a<0&&(a+=400),a*vb}function pd(a){return a/360}function ql(a){return 360*a}var Qc=Math.PI/2;function F0(a,n){var r=n[0],s=n[1],l=n[2],u=n[3],h=r*r,f=s*s,d=l*l,v=u*u,p=h+f+d+v,g=r*u-s*l;return g>.499995*p?(a[0]=Qc,a[1]=2*Math.atan2(s,r),a[2]=0):g<-.499995*p?(a[0]=-Qc,a[1]=2*Math.atan2(s,r),a[2]=0):(a[0]=Math.asin(2*(r*l-u*s)),a[1]=Math.atan2(2*(r*u+s*l),1-2*(d+v)),a[2]=Math.atan2(2*(r*s+l*u),1-2*(f+d))),a}function pb(a,n){var r,s,l=hs(Xt(),n),u=(0,V.Z)(l,3),h=u[0],f=u[1],d=u[2],v=Math.asin(-n[2]/h);return v<Qc?v>-Qc?(r=Math.atan2(n[6]/f,n[10]/d),s=Math.atan2(n[1]/h,n[0]/h)):(s=0,r=-Math.atan2(n[4]/f,n[5]/f)):(s=0,r=Math.atan2(n[4]/f,n[5]/f)),a[0]=r,a[1]=v,a[2]=s,a}function Eh(a,n){return n.length===16?pb(a,n):F0(a,n)}function Ql(a,n,r,s,l){var u=Math.cos(a),h=Math.sin(a);return n1(s*u,l*h,0,-s*h,l*u,0,n,r,1)}function Jc(a,n,r,s,l,u,h){var f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,d=2*u,v=r-n,p=s-l,g=d/v,m=d/p,b=(r+n)/v,E=(s+l)/p,w,S,M=h-u,C=h*u;return f?(w=-h/M,S=-C/M):(w=-(h+u)/M,S=-2*C/M),a[0]=g,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=m,a[6]=0,a[7]=0,a[8]=b,a[9]=E,a[10]=w,a[11]=-1,a[12]=0,a[13]=0,a[14]=S,a[15]=0,a}function z0(a){var n=a[0],r=a[1],s=a[3],l=a[4],u=Math.sqrt(n*n+r*r),h=Math.sqrt(s*s+l*l),f=n*l-r*s;if(f<0&&(n<l?u=-u:h=-h),u){var d=1/u;n*=d,r*=d}if(h){var v=1/h;s*=v,l*=v}var p=Math.atan2(r,n),g=nr(p);return[a[6],a[7],u,h,g]}var Ga=Qe(),ba=Qe(),mo=ae(),ve=[Xt(),Xt(),Xt()],tu=Xt();function gd(a,n,r,s,l,u){if(!wh(Ga,a)||(Na(ba,Ga),ba[3]=0,ba[7]=0,ba[11]=0,ba[15]=1,Math.abs($o(ba))<1e-8))return!1;var h=Ga[3],f=Ga[7],d=Ga[11],v=Ga[12],p=Ga[13],g=Ga[14],m=Ga[15];if(h!==0||f!==0||d!==0){mo[0]=h,mo[1]=f,mo[2]=d,mo[3]=m;var b=Di(ba,ba);if(!b)return!1;oo(ba,ba),mi(l,mo,ba)}else l[0]=l[1]=l[2]=0,l[3]=1;if(n[0]=v,n[1]=p,n[2]=g,gb(ve,Ga),r[0]=rn(ve[0]),_t(ve[0],ve[0]),s[0]=$t(ve[0],ve[1]),Sh(ve[1],ve[1],ve[0],1,-s[0]),r[1]=rn(ve[1]),_t(ve[1],ve[1]),s[0]/=r[1],s[1]=$t(ve[0],ve[2]),Sh(ve[2],ve[2],ve[0],1,-s[1]),s[2]=$t(ve[1],ve[2]),Sh(ve[2],ve[2],ve[1],1,-s[2]),r[2]=rn(ve[2]),_t(ve[2],ve[2]),s[1]/=r[2],s[2]/=r[2],_e(tu,ve[1],ve[2]),$t(ve[0],tu)<0)for(var E=0;E<3;E++)r[E]*=-1,ve[E][0]*=-1,ve[E][1]*=-1,ve[E][2]*=-1;return u[0]=.5*Math.sqrt(Math.max(1+ve[0][0]-ve[1][1]-ve[2][2],0)),u[1]=.5*Math.sqrt(Math.max(1-ve[0][0]+ve[1][1]-ve[2][2],0)),u[2]=.5*Math.sqrt(Math.max(1-ve[0][0]-ve[1][1]+ve[2][2],0)),u[3]=.5*Math.sqrt(Math.max(1+ve[0][0]+ve[1][1]+ve[2][2],0)),ve[2][1]>ve[1][2]&&(u[0]=-u[0]),ve[0][2]>ve[2][0]&&(u[1]=-u[1]),ve[1][0]>ve[0][1]&&(u[2]=-u[2]),!0}function wh(a,n){var r=n[15];if(r===0)return!1;for(var s=1/r,l=0;l<16;l++)a[l]=n[l]*s;return!0}function gb(a,n){a[0][0]=n[0],a[0][1]=n[1],a[0][2]=n[2],a[1][0]=n[4],a[1][1]=n[5],a[1][2]=n[6],a[2][0]=n[8],a[2][1]=n[9],a[2][2]=n[10]}function Sh(a,n,r,s,l){a[0]=n[0]*s+r[0]*l,a[1]=n[1]*s+r[1]*l,a[2]=n[2]*s+r[2]*l}var sn=function(a){return a[a.ORBITING=0]="ORBITING",a[a.EXPLORING=1]="EXPLORING",a[a.TRACKING=2]="TRACKING",a}({}),_h=function(a){return a[a.DEFAULT=0]="DEFAULT",a[a.ROTATIONAL=1]="ROTATIONAL",a[a.TRANSLATIONAL=2]="TRANSLATIONAL",a[a.CINEMATIC=3]="CINEMATIC",a}({}),Zi=function(a){return a[a.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",a[a.PERSPECTIVE=1]="PERSPECTIVE",a}({}),Z0={UPDATED:"updated"},yd=2e-4,gs=function(){function a(){(0,H.Z)(this,a),this.clipSpaceNearZ=Wa.NEGATIVE_ONE,this.eventEmitter=new Ct,this.matrix=Qe(),this.right=pe(1,0,0),this.up=pe(0,1,0),this.forward=pe(0,0,1),this.position=pe(0,0,1),this.focalPoint=pe(0,0,0),this.distanceVector=pe(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Qe(),this.projectionMatrixInverse=Qe(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=sn.EXPLORING,this.trackingMode=_h.DEFAULT,this.projectionMode=Zi.PERSPECTIVE,this.frustum=new D0,this.orthoMatrix=Qe()}return(0,j.Z)(a,[{key:"isOrtho",value:function(){return this.projectionMode===Zi.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(r){this.enableUpdate=r}},{key:"setType",value:function(r,s){return this.type=r,this.type===sn.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===sn.TRACKING&&s!==void 0&&this.setTrackingMode(s),this}},{key:"setProjectionMode",value:function(r){return this.projectionMode=r,this}},{key:"setTrackingMode",value:function(r){if(this.type!==sn.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=r,this}},{key:"setWorldRotation",value:function(r){return this.rotateWorld=r,this._getAngles(),this}},{key:"getViewTransform",value:function(){return Di(Qe(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(r,s){var l=La(Qe(),[r,s,0]);this.jitteredProjectionMatrix=qt(Qe(),l,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(r){return this.matrix=r,this._update(),this}},{key:"setProjectionMatrix",value:function(r){this.projectionMatrix=r}},{key:"setFov",value:function(r){return this.setPerspective(this.near,this.far,r,this.aspect),this}},{key:"setAspect",value:function(r){return this.setPerspective(this.near,this.far,this.fov,r),this}},{key:"setNear",value:function(r){return this.projectionMode===Zi.PERSPECTIVE?this.setPerspective(r,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,r,this.far),this}},{key:"setFar",value:function(r){return this.projectionMode===Zi.PERSPECTIVE?this.setPerspective(this.near,r,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,r),this}},{key:"setViewOffset",value:function(r,s,l,u,h,f){return this.aspect=r/s,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=s,this.view.offsetX=l,this.view.offsetY=u,this.view.width=h,this.view.height=f,this.projectionMode===Zi.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Zi.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(r){return this.zoom=r,this.projectionMode===Zi.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Zi.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(r,s){var l=this.canvas.viewport2Canvas({x:s[0],y:s[1]}),u=l.x,h=l.y,f=this.roll;this.rotate(0,0,-f),this.setPosition(u,h),this.setFocalPoint(u,h),this.setZoom(r),this.rotate(0,0,f);var d=this.canvas.viewport2Canvas({x:s[0],y:s[1]}),v=d.x,p=d.y,g=pe(v-u,p-h,0),m=$t(g,this.right)/rn(this.right),b=$t(g,this.up)/rn(this.up),E=this.getPosition(),w=(0,V.Z)(E,2),S=w[0],M=w[1],C=this.getFocalPoint(),T=(0,V.Z)(C,2),k=T[0],O=T[1];return this.setPosition(S-m,M-b),this.setFocalPoint(k-m,O-b),this}},{key:"setPerspective",value:function(r,s,l,u){var h;this.projectionMode=Zi.PERSPECTIVE,this.fov=l,this.near=r,this.far=s,this.aspect=u;var f=this.near*Math.tan(pn(.5*this.fov))/this.zoom,d=2*f,v=this.aspect*d,p=-.5*v;if((h=this.view)!==null&&h!==void 0&&h.enabled){var g=this.view.fullWidth,m=this.view.fullHeight;p+=this.view.offsetX*v/g,f-=this.view.offsetY*d/m,v*=this.view.width/g,d*=this.view.height/m}return Jc(this.projectionMatrix,p,p+v,f-d,f,r,this.far,this.clipSpaceNearZ===Wa.ZERO),Di(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(r,s,l,u,h,f){var d;this.projectionMode=Zi.ORTHOGRAPHIC,this.rright=s,this.left=r,this.top=l,this.bottom=u,this.near=h,this.far=f;var v=(this.rright-this.left)/(2*this.zoom),p=(this.top-this.bottom)/(2*this.zoom),g=(this.rright+this.left)/2,m=(this.top+this.bottom)/2,b=g-v,E=g+v,w=m+p,S=m-p;if((d=this.view)!==null&&d!==void 0&&d.enabled){var M=(this.rright-this.left)/this.view.fullWidth/this.zoom,C=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=M*this.view.offsetX,E=b+M*this.view.width,w-=C*this.view.offsetY,S=w-C*this.view.height}return this.clipSpaceNearZ===Wa.NEGATIVE_ONE?Zl(this.projectionMatrix,b,E,w,S,h,f):Yu(this.projectionMatrix,b,E,w,S,h,f),Di(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],u=Si(r,s,l);return this._setPosition(u),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],u=pe(0,1,0);if(this.focalPoint=Si(r,s,l),this.trackingMode===_h.CINEMATIC){var h=zt(Xt(),this.focalPoint,this.position);r=h[0],s=h[1],l=h[2];var f=rn(h),d=nr(Math.asin(s/f)),v=90+nr(Math.atan2(l,r)),p=Qe();Nc(p,p,pn(v)),bi(p,p,pn(d)),u=Ve(Xt(),[0,1,0],p)}return Di(this.matrix,Xu(Qe(),this.position,this.focalPoint,u)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(r){if(this.distance===r||r<0)return this;this.distance=r,this.distance<yd&&(this.distance=yd),this.dollyingStep=this.distance/100;var s=Xt();r=this.distance;var l=this.forward,u=this.focalPoint;return s[0]=r*l[0]+u[0],s[1]=r*l[1]+u[1],s[2]=r*l[2]+u[2],this._setPosition(s),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(r){return this.maxDistance=r,this}},{key:"setMinDistance",value:function(r){return this.minDistance=r,this}},{key:"setAzimuth",value:function(r){return this.azimuth=rl(r),this.computeMatrix(),this._getAxes(),this.type===sn.ORBITING||this.type===sn.EXPLORING?this._getPosition():this.type===sn.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(r){return this.elevation=rl(r),this.computeMatrix(),this._getAxes(),this.type===sn.ORBITING||this.type===sn.EXPLORING?this._getPosition():this.type===sn.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(r){return this.roll=rl(r),this.computeMatrix(),this._getAxes(),this.type===sn.ORBITING||this.type===sn.EXPLORING?this._getPosition():this.type===sn.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var r=Ba(Tr(),[0,0,1],pn(this.roll));ni(this.matrix);var s=Ba(Tr(),[1,0,0],pn((this.rotateWorld&&this.type!==sn.TRACKING||this.type===sn.TRACKING?1:-1)*this.elevation)),l=Ba(Tr(),[0,1,0],pn((this.rotateWorld&&this.type!==sn.TRACKING||this.type===sn.TRACKING?1:-1)*this.azimuth)),u=Ds(Tr(),l,s);u=Ds(Tr(),u,r);var h=zl(Qe(),u);this.type===sn.ORBITING||this.type===sn.EXPLORING?(Be(this.matrix,this.matrix,this.focalPoint),qt(this.matrix,this.matrix,h),Be(this.matrix,this.matrix,[0,0,this.distance])):this.type===sn.TRACKING&&(Be(this.matrix,this.matrix,this.position),qt(this.matrix,this.matrix,h))}},{key:"_setPosition",value:function(r,s,l){this.position=Si(r,s,l);var u=this.matrix;u[12]=this.position[0],u[13]=this.position[1],u[14]=this.position[2],u[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){bt(this.right,Si(mi(ae(),[1,0,0,0],this.matrix))),bt(this.up,Si(mi(ae(),[0,1,0,0],this.matrix))),bt(this.forward,Si(mi(ae(),[0,0,1,0],this.matrix))),_t(this.right,this.right),_t(this.up,this.up),_t(this.forward,this.forward)}},{key:"_getAngles",value:function(){var r=this.distanceVector[0],s=this.distanceVector[1],l=this.distanceVector[2],u=rn(this.distanceVector);if(u===0){this.elevation=0,this.azimuth=0;return}this.type===sn.TRACKING?(this.elevation=nr(Math.asin(s/u)),this.azimuth=nr(Math.atan2(-r,-l))):this.rotateWorld?(this.elevation=nr(Math.asin(s/u)),this.azimuth=nr(Math.atan2(-r,-l))):(this.elevation=-nr(Math.asin(s/u)),this.azimuth=-nr(Math.atan2(-r,-l)))}},{key:"_getPosition",value:function(){bt(this.position,Si(mi(ae(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Ee(this.distanceVector,[0,0,-this.distance],t1(vo(),this.matrix)),oe(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=zt(Xt(),this.focalPoint,this.position),this.distance=rn(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===Zi.ORTHOGRAPHIC){var r=this.position,s=Ba(Tr(),[0,0,1],-this.roll*Math.PI/180);ho(this.orthoMatrix,s,pe((this.rright-this.left)/2-r[0],(this.top-this.bottom)/2-r[1],0),pe(this.zoom,this.zoom,1),r)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var r=this.getViewTransform(),s=qt(Qe(),this.getPerspective(),r);this.getFrustum().extractFromVPMatrix(s),this.eventEmitter.emit(Z0.UPDATED)}}},{key:"rotate",value:function(r,s,l){throw new Error(En)}},{key:"pan",value:function(r,s){throw new Error(En)}},{key:"dolly",value:function(r){throw new Error(En)}},{key:"createLandmark",value:function(r,s){throw new Error(En)}},{key:"gotoLandmark",value:function(r,s){throw new Error(En)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(En)}}])}(),W0=function(a){return a[a.Standard=0]="Standard",a}({}),eu=function(a){return a[a.ADDED=0]="ADDED",a[a.REMOVED=1]="REMOVED",a[a.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",a}({}),G0={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new yo(0,0,0,0)},Lt=function(a){return a.COORDINATE="<coordinate>",a.COLOR="<color>",a.PAINT="<paint>",a.NUMBER="<number>",a.ANGLE="<angle>",a.OPACITY_VALUE="<opacity-value>",a.SHADOW_BLUR="<shadow-blur>",a.LENGTH="<length>",a.PERCENTAGE="<percentage>",a.LENGTH_PERCENTAGE="<length> | <percentage>",a.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",a.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",a.LIST_OF_POINTS="<list-of-points>",a.PATH="<path>",a.FILTER="<filter>",a.Z_INDEX="<z-index>",a.OFFSET_DISTANCE="<offset-distance>",a.DEFINED_PATH="<defined-path>",a.MARKER="<marker>",a.TRANSFORM="<transform>",a.TRANSFORM_ORIGIN="<transform-origin>",a.TEXT="<text>",a.TEXT_TRANSFORM="<text-transform>",a}({});function md(a,n,r){a.prototype=n.prototype=r,r.constructor=a}function j0(a,n){var r=Object.create(a.prototype);for(var s in n)r[s]=n[s];return r}function qi(){}var il=.7,Jl=1/il,bo="\\s*([+-]?\\d+)\\s*",xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",de=/^#([0-9a-f]{3,8})$/,Mh=new RegExp(`^rgb\\(${bo},${bo},${bo}\\)$`),bd=new RegExp(`^rgb\\(${_i},${_i},${_i}\\)$`),al=new RegExp(`^rgba\\(${bo},${bo},${bo},${xo}\\)$`),yb=new RegExp(`^rgba\\(${_i},${_i},${_i},${xo}\\)$`),xd=new RegExp(`^hsl\\(${xo},${_i},${_i}\\)$`),$0=new RegExp(`^hsla\\(${xo},${_i},${_i},${xo}\\)$`),qr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};md(qi,nu,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:H0,formatHex:H0,formatHex8:mb,formatHsl:V0,formatRgb:U0,toString:U0});function H0(){return this.rgb().formatHex()}function mb(){return this.rgb().formatHex8()}function V0(){return wd(this).formatHsl()}function U0(){return this.rgb().formatRgb()}function nu(a){var n,r;return a=(a+"").trim().toLowerCase(),(n=de.exec(a))?(r=n[1].length,n=parseInt(n[1],16),r===6?Y0(n):r===3?new _n(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Ch(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Ch(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Mh.exec(a))?new _n(n[1],n[2],n[3],1):(n=bd.exec(a))?new _n(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=al.exec(a))?Ch(n[1],n[2],n[3],n[4]):(n=yb.exec(a))?Ch(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=xd.exec(a))?Ed(n[1],n[2]/100,n[3]/100,1):(n=$0.exec(a))?Ed(n[1],n[2]/100,n[3]/100,n[4]):qr.hasOwnProperty(a)?Y0(qr[a]):a==="transparent"?new _n(NaN,NaN,NaN,0):null}function Y0(a){return new _n(a>>16&255,a>>8&255,a&255,1)}function Ch(a,n,r,s){return s<=0&&(a=n=r=NaN),new _n(a,n,r,s)}function bb(a){return a instanceof qi||(a=nu(a)),a?(a=a.rgb(),new _n(a.r,a.g,a.b,a.opacity)):new _n}function Zs(a,n,r,s){return arguments.length===1?bb(a):new _n(a,n,r,s==null?1:s)}function _n(a,n,r,s){this.r=+a,this.g=+n,this.b=+r,this.opacity=+s}md(_n,Zs,j0(qi,{brighter(a){return a=a==null?Jl:Math.pow(Jl,a),new _n(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=a==null?il:Math.pow(il,a),new _n(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new _n(sl(this.r),sl(this.g),sl(this.b),Ah(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Th,formatHex:Th,formatHex8:xb,formatRgb:Oh,toString:Oh}));function Th(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}`}function xb(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}${ja((isNaN(this.opacity)?1:this.opacity)*255)}`}function Oh(){const a=Ah(this.opacity);return`${a===1?"rgb(":"rgba("}${sl(this.r)}, ${sl(this.g)}, ${sl(this.b)}${a===1?")":`, ${a})`}`}function Ah(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function sl(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function ja(a){return a=sl(a),(a<16?"0":"")+a.toString(16)}function Ed(a,n,r,s){return s<=0?a=n=r=NaN:r<=0||r>=1?a=n=NaN:n<=0&&(a=NaN),new $a(a,n,r,s)}function wd(a){if(a instanceof $a)return new $a(a.h,a.s,a.l,a.opacity);if(a instanceof qi||(a=nu(a)),!a)return new $a;if(a instanceof $a)return a;a=a.rgb();var n=a.r/255,r=a.g/255,s=a.b/255,l=Math.min(n,r,s),u=Math.max(n,r,s),h=NaN,f=u-l,d=(u+l)/2;return f?(n===u?h=(r-s)/f+(r<s)*6:r===u?h=(s-n)/f+2:h=(n-r)/f+4,f/=d<.5?u+l:2-u-l,h*=60):f=d>0&&d<1?0:h,new $a(h,f,d,a.opacity)}function Eb(a,n,r,s){return arguments.length===1?wd(a):new $a(a,n,r,s==null?1:s)}function $a(a,n,r,s){this.h=+a,this.s=+n,this.l=+r,this.opacity=+s}md($a,Eb,j0(qi,{brighter(a){return a=a==null?Jl:Math.pow(Jl,a),new $a(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=a==null?il:Math.pow(il,a),new $a(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,n=isNaN(a)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*n,l=2*r-s;return new _n(Ph(a>=240?a-240:a+120,l,s),Ph(a,l,s),Ph(a<120?a+240:a-120,l,s),this.opacity)},clamp(){return new $a(X0(this.h),kh(this.s),kh(this.l),Ah(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=Ah(this.opacity);return`${a===1?"hsl(":"hsla("}${X0(this.h)}, ${kh(this.s)*100}%, ${kh(this.l)*100}%${a===1?")":`, ${a})`}`}}));function X0(a){return a=(a||0)%360,a<0?a+360:a}function kh(a){return Math.max(0,Math.min(1,a||0))}function Ph(a,n,r){return(a<60?n+(r-n)*a/60:a<180?r:a<240?n+(r-n)*(240-a)/60:n)*255}function fr(a,n){if(typeof a!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");var r=function(){for(var l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];var f=n?n.apply(this,u):u[0],d=r.cache;if(d.has(f))return d.get(f);var v=a.apply(this,u);return r.cache=d.set(f,v)||d,v};return r.cache=new(fr.Cache||Map),fr.cacheList.push(r.cache),r}fr.Cache=Map,fr.cacheList=[],fr.clearCache=function(){fr.cacheList.forEach(function(a){return a.clear()})};var Bt=function(a){return a[a.kUnknown=0]="kUnknown",a[a.kNumber=1]="kNumber",a[a.kPercentage=2]="kPercentage",a[a.kEms=3]="kEms",a[a.kPixels=4]="kPixels",a[a.kRems=5]="kRems",a[a.kDegrees=6]="kDegrees",a[a.kRadians=7]="kRadians",a[a.kGradians=8]="kGradians",a[a.kTurns=9]="kTurns",a[a.kMilliseconds=10]="kMilliseconds",a[a.kSeconds=11]="kSeconds",a[a.kInteger=12]="kInteger",a}({}),Qi=function(a){return a[a.kUNumber=0]="kUNumber",a[a.kUPercent=1]="kUPercent",a[a.kULength=2]="kULength",a[a.kUAngle=3]="kUAngle",a[a.kUTime=4]="kUTime",a[a.kUOther=5]="kUOther",a}({}),K0=function(a){return a[a.kYes=0]="kYes",a[a.kNo=1]="kNo",a}({}),ru=function(a){return a[a.kYes=0]="kYes",a[a.kNo=1]="kNo",a}({}),Sd=[{name:"em",unit_type:Bt.kEms},{name:"px",unit_type:Bt.kPixels},{name:"deg",unit_type:Bt.kDegrees},{name:"rad",unit_type:Bt.kRadians},{name:"grad",unit_type:Bt.kGradians},{name:"ms",unit_type:Bt.kMilliseconds},{name:"s",unit_type:Bt.kSeconds},{name:"rem",unit_type:Bt.kRems},{name:"turn",unit_type:Bt.kTurns}],ol=function(a){return a[a.kUnknownType=0]="kUnknownType",a[a.kUnparsedType=1]="kUnparsedType",a[a.kKeywordType=2]="kKeywordType",a[a.kUnitType=3]="kUnitType",a[a.kSumType=4]="kSumType",a[a.kProductType=5]="kProductType",a[a.kNegateType=6]="kNegateType",a[a.kInvertType=7]="kInvertType",a[a.kMinType=8]="kMinType",a[a.kMaxType=9]="kMaxType",a[a.kClampType=10]="kClampType",a[a.kTransformType=11]="kTransformType",a[a.kPositionType=12]="kPositionType",a[a.kURLImageType=13]="kURLImageType",a[a.kColorType=14]="kColorType",a[a.kUnsupportedColorType=15]="kUnsupportedColorType",a}({}),q0=function(n){return Sd.find(function(r){return r.name===n}).unit_type},Rh=function(n){return n?n==="number"?Bt.kNumber:n==="percent"||n==="%"?Bt.kPercentage:q0(n):Bt.kUnknown},Q0=function(n){switch(n){case Bt.kNumber:case Bt.kInteger:return Qi.kUNumber;case Bt.kPercentage:return Qi.kUPercent;case Bt.kPixels:return Qi.kULength;case Bt.kMilliseconds:case Bt.kSeconds:return Qi.kUTime;case Bt.kDegrees:case Bt.kRadians:case Bt.kGradians:case Bt.kTurns:return Qi.kUAngle;default:return Qi.kUOther}},ys=function(n){switch(n){case Qi.kUNumber:return Bt.kNumber;case Qi.kULength:return Bt.kPixels;case Qi.kUPercent:return Bt.kPercentage;case Qi.kUTime:return Bt.kSeconds;case Qi.kUAngle:return Bt.kDegrees;default:return Bt.kUnknown}},Eo=function(n){var r=1;switch(n){case Bt.kPixels:case Bt.kDegrees:case Bt.kSeconds:break;case Bt.kMilliseconds:r=.001;break;case Bt.kRadians:r=180/Math.PI;break;case Bt.kGradians:r=.9;break;case Bt.kTurns:r=360;break}return r},_d=function(n){switch(n){case Bt.kNumber:case Bt.kInteger:return"";case Bt.kPercentage:return"%";case Bt.kEms:return"em";case Bt.kRems:return"rem";case Bt.kPixels:return"px";case Bt.kDegrees:return"deg";case Bt.kRadians:return"rad";case Bt.kGradians:return"grad";case Bt.kMilliseconds:return"ms";case Bt.kSeconds:return"s";case Bt.kTurns:return"turn"}return""},iu=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"toString",value:function(){return this.buildCSSText(K0.kNo,ru.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=ol.kUnitType&&this.getType()<=ol.kClampType}}],[{key:"isAngle",value:function(r){return r===Bt.kDegrees||r===Bt.kRadians||r===Bt.kGradians||r===Bt.kTurns}},{key:"isLength",value:function(r){return r>=Bt.kEms&&r<Bt.kDegrees}},{key:"isRelativeUnit",value:function(r){return r===Bt.kPercentage||r===Bt.kEms||r===Bt.kRems}},{key:"isTime",value:function(r){return r===Bt.kSeconds||r===Bt.kMilliseconds}}])}(),wb=function(a){function n(r){var s;return(0,H.Z)(this,n),s=(0,$.Z)(this,n),s.colorSpace=r,s}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"getType",value:function(){return ol.kColorType}},{key:"to",value:function(s){return this}}])}(iu),wo=function(a){return a[a.Constant=0]="Constant",a[a.LinearGradient=1]="LinearGradient",a[a.RadialGradient=2]="RadialGradient",a}({}),Nh=function(a){function n(r,s){var l;return(0,H.Z)(this,n),l=(0,$.Z)(this,n),l.type=r,l.value=s,l}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"clone",value:function(){return new n(this.type,this.value)}},{key:"buildCSSText",value:function(s,l,u){return u}},{key:"getType",value:function(){return ol.kColorType}}])}(iu),xa=function(a){function n(r){var s;return(0,H.Z)(this,n),s=(0,$.Z)(this,n),s.value=r,s}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"clone",value:function(){return new n(this.value)}},{key:"getType",value:function(){return ol.kKeywordType}},{key:"buildCSSText",value:function(s,l,u){return u+this.value}}])}(iu),Sb=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s="";return Number.isFinite(n)?s="NaN":n>0?s="infinity":s="-infinity",s+=r},Md=function(n){return ys(Q0(n))},wn=function(a){function n(r){var s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bt.kNumber;(0,H.Z)(this,n),s=(0,$.Z)(this,n);var u;return typeof l=="string"?u=Rh(l):u=l,s.unit=u,s.value=r,s}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"clone",value:function(){return new n(this.value,this.unit)}},{key:"equals",value:function(s){var l=s;return this.value===l.value&&this.unit===l.unit}},{key:"getType",value:function(){return ol.kUnitType}},{key:"convertTo",value:function(s){if(this.unit===s)return new n(this.value,this.unit);var l=Md(this.unit);if(l!==Md(s)||l===Bt.kUnknown)return null;var u=Eo(this.unit)/Eo(s);return new n(this.value*u,s)}},{key:"buildCSSText",value:function(s,l,u){var h;switch(this.unit){case Bt.kUnknown:break;case Bt.kInteger:h=Number(this.value).toFixed(0);break;case Bt.kNumber:case Bt.kPercentage:case Bt.kEms:case Bt.kRems:case Bt.kPixels:case Bt.kDegrees:case Bt.kRadians:case Bt.kGradians:case Bt.kMilliseconds:case Bt.kSeconds:case Bt.kTurns:{var f=-999999,d=999999,v=this.value,p=_d(this.unit);if(v<f||v>d){var g=_d(this.unit);!Number.isFinite(v)||Number.isNaN(v)?h=Sb(v,g):h=v+(g||"")}else h="".concat(v).concat(p)}}return u+=h,u}}])}(iu),Ha=new wn(0,"px");new wn(1,"px");var ll=new wn(0,"deg"),Cd=function(a){function n(r,s,l){var u,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return(0,H.Z)(this,n),u=(0,$.Z)(this,n,["rgb"]),u.r=r,u.g=s,u.b=l,u.alpha=h,u.isNone=f,u}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"clone",value:function(){return new n(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(s,l,u){return"".concat(u,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(wb),J0=new xa("unset"),tp=new xa("initial"),ep=new xa("inherit"),Lh={"":J0,unset:J0,initial:tp,inherit:ep},_b=function(n){return Lh[n]||(Lh[n]=new xa(n)),Lh[n]},np=new Cd(0,0,0,0,!0),rp=new Cd(0,0,0,0),ip=fr(function(a,n,r,s){return new Cd(a,n,r,s)},function(a,n,r,s){return"rgba(".concat(a,",").concat(n,",").concat(r,",").concat(s,")")}),Gn=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bt.kNumber;return new wn(n,r)};new wn(50,"%");function Mb(a){var n=a.type,r=a.value;return n==="hex"?"#".concat(r):n==="literal"?r:n==="rgb"?"rgb(".concat(r.join(","),")"):"rgba(".concat(r.join(","),")")}var Cb=function(){var a={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},n="";function r(st){throw new Error("".concat(n,": ").concat(st))}function s(){var st=l();return n.length>0&&r("Invalid input not EOF"),st}function l(){return T(u)}function u(){return h("linear-gradient",a.linearGradient,d)||h("repeating-linear-gradient",a.repeatingLinearGradient,d)||h("radial-gradient",a.radialGradient,g)||h("repeating-radial-gradient",a.repeatingRadialGradient,g)||h("conic-gradient",a.conicGradient,g)}function h(st,mt,at){return f(mt,function(Et){var It=at();return It&&(rt(a.comma)||r("Missing comma before color stops")),{type:st,orientation:It,colorStops:T(k)}})}function f(st,mt){var at=rt(st);if(at){rt(a.startCall)||r("Missing (");var Et=mt(at);return rt(a.endCall)||r("Missing )"),Et}}function d(){return v()||p()}function v(){return q("directional",a.sideOrCorner,1)}function p(){return q("angular",a.angleValue,1)}function g(){var st,mt=m(),at;return mt&&(st=[],st.push(mt),at=n,rt(a.comma)&&(mt=m(),mt?st.push(mt):n=at)),st}function m(){var st=b()||E();if(st)st.at=S();else{var mt=w();if(mt){st=mt;var at=S();at&&(st.at=at)}else{var Et=M();Et&&(st={type:"default-radial",at:Et})}}return st}function b(){var st=q("shape",/^(circle)/i,0);return st&&(st.style=Y()||w()),st}function E(){var st=q("shape",/^(ellipse)/i,0);return st&&(st.style=W()||w()),st}function w(){return q("extent-keyword",a.extentKeywords,1)}function S(){if(q("position",/^at/,0)){var st=M();return st||r("Missing positioning value"),st}}function M(){var st=C();if(st.x||st.y)return{type:"position",value:st}}function C(){return{x:W(),y:W()}}function T(st){var mt=st(),at=[];if(mt)for(at.push(mt);rt(a.comma);)mt=st(),mt?at.push(mt):r("One extra comma");return at}function k(){var st=O();return st||r("Expected color definition"),st.length=W(),st}function O(){return R()||D()||L()||A()}function A(){return q("literal",a.literalColor,0)}function R(){return q("hex",a.hexColor,1)}function L(){return f(a.rgbColor,function(){return{type:"rgb",value:T(z)}})}function D(){return f(a.rgbaColor,function(){return{type:"rgba",value:T(z)}})}function z(){return rt(a.number)[1]}function W(){return q("%",a.percentageValue,1)||G()||Y()}function G(){return q("position-keyword",a.positionKeywords,1)}function Y(){return q("px",a.pixelValue,1)||q("em",a.emValue,1)}function q(st,mt,at){var Et=rt(mt);if(Et)return{type:st,value:Et[at]}}function rt(st){var mt=/^[\n\r\t\s]+/.exec(n);mt&&yt(mt[0].length);var at=st.exec(n);return at&&yt(at[0].length),at}function yt(st){n=n.substring(st)}return function(st){return n=st,s()}}();function Tb(a,n,r,s){var l=pn(s.value),u=0,h=0,f=u+n/2,d=h+r/2,v=Math.abs(n*Math.cos(l))+Math.abs(r*Math.sin(l)),p=a[0]+f-Math.cos(l)*v/2,g=a[1]+d-Math.sin(l)*v/2,m=a[0]+f+Math.cos(l)*v/2,b=a[1]+d+Math.sin(l)*v/2;return{x1:p,y1:g,x2:m,y2:b}}function Ob(a,n,r,s,l,u){var h=s.value,f=l.value;s.unit===Bt.kPercentage&&(h=s.value/100*n),l.unit===Bt.kPercentage&&(f=l.value/100*r);var d=Math.max(Bi([0,0],[h,f]),Bi([0,r],[h,f]),Bi([n,r],[h,f]),Bi([n,0],[h,f]));return u&&(u instanceof wn?d=u.value:u instanceof xa&&(u.value==="closest-side"?d=Math.min(h,n-h,f,r-f):u.value==="farthest-side"?d=Math.max(h,n-h,f,r-f):u.value==="closest-corner"&&(d=Math.min(Bi([0,0],[h,f]),Bi([0,r],[h,f]),Bi([n,r],[h,f]),Bi([n,0],[h,f]))))),{x:h+a[0],y:f+a[1],r:d}}var Ab=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Ea=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,kb=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ap=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Pb(a){var n,r=a.length;if(a[r-1].length=(n=a[r-1].length)!==null&&n!==void 0?n:{type:"%",value:"100"},r>1){var s;a[0].length=(s=a[0].length)!==null&&s!==void 0?s:{type:"%",value:"0"}}for(var l=0,u=Number(a[0].length.value),h=1;h<r;h++){var f,d=(f=a[h].length)===null||f===void 0?void 0:f.value;if(!(0,le.Z)(d)&&!(0,le.Z)(u)){for(var v=1;v<h-l;v++)a[l+v].length={type:"%",value:"".concat(u+(Number(d)-u)*v/(h-l))};l=h,u=Number(d)}}}var sp={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},Rb=fr(function(a){var n;return a.type==="angular"?n=Number(a.value):n=sp[a.value]||0,Gn(n,"deg")}),Nb=fr(function(a){var n=50,r=50,s="%",l="%";if((a==null?void 0:a.type)==="position"){var u=a.value,h=u.x,f=u.y;(h==null?void 0:h.type)==="position-keyword"&&(h.value==="left"?n=0:h.value==="center"?n=50:h.value==="right"?n=100:h.value==="top"?r=0:h.value==="bottom"&&(r=100)),(f==null?void 0:f.type)==="position-keyword"&&(f.value==="left"?n=0:f.value==="center"?r=50:f.value==="right"?n=100:f.value==="top"?r=0:f.value==="bottom"&&(r=100)),((h==null?void 0:h.type)==="px"||(h==null?void 0:h.type)==="%"||(h==null?void 0:h.type)==="em")&&(s=h==null?void 0:h.type,n=Number(h.value)),((f==null?void 0:f.type)==="px"||(f==null?void 0:f.type)==="%"||(f==null?void 0:f.type)==="em")&&(l=f==null?void 0:f.type,r=Number(f.value))}return{cx:Gn(n,s),cy:Gn(r,l)}}),Lb=fr(function(a){if(a.indexOf("linear")>-1||a.indexOf("radial")>-1){var n=Cb(a);return n.map(function(f){var d=f.type,v=f.orientation,p=f.colorStops;Pb(p);var g=p.map(function(T){return{offset:Gn(Number(T.length.value),"%"),color:Mb(T)}});if(d==="linear-gradient")return new Nh(wo.LinearGradient,{angle:v?Rb(v):ll,steps:g});if(d==="radial-gradient"&&(v||(v=[{type:"shape",value:"circle"}]),v[0].type==="shape"&&v[0].value==="circle")){var m=Nb(v[0].at),b=m.cx,E=m.cy,w;if(v[0].style){var S=v[0].style,M=S.type,C=S.value;M==="extent-keyword"?w=_b(C):w=Gn(C,M)}return new Nh(wo.RadialGradient,{cx:b,cy:E,size:w,steps:g})}})}var r=a[0];if(a[1]==="("||a[2]==="("){if(r==="l"){var s=Ab.exec(a);if(s){var l,u=((l=s[2].match(ap))===null||l===void 0?void 0:l.map(function(f){return f.split(":")}))||[];return[new Nh(wo.LinearGradient,{angle:Gn(parseFloat(s[1]),"deg"),steps:u.map(function(f){var d=(0,V.Z)(f,2),v=d[0],p=d[1];return{offset:Gn(Number(v)*100,"%"),color:p}})})]}}else if(r==="r"){var h=Ib(a);if(h)if((0,xn.Z)(h))a=h;else return[new Nh(wo.RadialGradient,h)]}else if(r==="p")return Td(a)}});function Ib(a){var n=Ea.exec(a);if(n){var r,s=((r=n[4].match(ap))===null||r===void 0?void 0:r.map(function(l){return l.split(":")}))||[];return{cx:Gn(50,"%"),cy:Gn(50,"%"),steps:s.map(function(l){var u=(0,V.Z)(l,2),h=u[0],f=u[1];return{offset:Gn(Number(h)*100,"%"),color:f}})}}return null}function Td(a){var n=kb.exec(a);if(n){var r=n[1],s=n[2];switch(r){case"a":r="repeat";break;case"x":r="repeat-x";break;case"y":r="repeat-y";break;case"n":r="no-repeat";break;default:r="no-repeat"}return{image:s,repetition:r}}return null}function HS(a){return!!a.type&&!!a.value}function cl(a){return a&&!!a.image}function Ih(a){return a&&!(0,le.Z)(a.r)&&!(0,le.Z)(a.g)&&!(0,le.Z)(a.b)}var au=fr(function(a){if(cl(a))return(0,gt.Z)({repetition:"repeat"},a);if((0,le.Z)(a)&&(a=""),a==="transparent")return rp;if(a==="currentColor")a="black";else if(a==="none")return np;var n=Lb(a);if(n)return n;var r=nu(a),s=[0,0,0,0];return r!==null&&(s[0]=r.r||0,s[1]=r.g||0,s[2]=r.b||0,s[3]=r.opacity),ip.apply(void 0,s)});function Db(a,n){if(!(!Ih(a)||!Ih(n)))return[[Number(a.r),Number(a.g),Number(a.b),Number(a.alpha)],[Number(n.r),Number(n.g),Number(n.b),Number(n.alpha)],function(r){var s=r.slice();if(s[3])for(var l=0;l<3;l++)s[l]=Math.round(Le(s[l],0,255));return s[3]=Le(s[3],0,1),"rgba(".concat(s.join(","),")")}]}function su(a,n){if((0,le.Z)(n))return Gn(0,"px");if(n="".concat(n).trim().toLowerCase(),isFinite(Number(n))){if("px".search(a)>=0)return Gn(Number(n),"px");if("deg".search(a)>=0)return Gn(Number(n),"deg")}var r=[];n=n.replace(a,function(l){return r.push(l),"U".concat(l)});var s="U(".concat(a.source,")");return r.map(function(l){return Gn(Number(n.replace(new RegExp("U".concat(l),"g"),"").replace(new RegExp(s,"g"),"*0")),l)})[0]}var op=function(n){return su(new RegExp("px","g"),n)},Bb=fr(op),Fb=function(n){return su(new RegExp("%","g"),n)};fr(Fb);var lp=function(n){return(0,tn.Z)(n)||isFinite(Number(n))?Gn(Number(n)||0,"px"):su(new RegExp("px|%|em|rem","g"),n)},Od=fr(lp),cp=function(n){return su(new RegExp("deg|rad|grad|turn","g"),n)},zb=fr(cp);function Zb(a,n,r,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,u="",h=a.value||0,f=n.value||0,d=Md(a.unit),v=a.convertTo(d),p=n.convertTo(d);return v&&p?(h=v.value,f=p.value,u=_d(a.unit)):(wn.isLength(a.unit)||wn.isLength(n.unit))&&(h=Ji(a,l,r),f=Ji(n,l,r),u="px"),[h,f,function(g){return s&&(g=Math.max(g,0)),g+u}]}function Wi(a){var n=0;return a.unit===Bt.kDegrees?n=a.value:a.unit===Bt.kRadians?n=nr(Number(a.value)):a.unit===Bt.kTurns?n=ql(Number(a.value)):a.value&&(n=a.value),n}function up(a,n){var r;return Array.isArray(a)?r=a.map(function(s){return Number(s)}):(0,xn.Z)(a)?r=a.split(" ").map(function(s){return Number(s)}):(0,tn.Z)(a)&&(r=[a]),n===2?r.length===1?[r[0],r[0]]:[r[0],r[1]]:n===4?r.length===1?[r[0],r[0],r[0],r[0]]:r.length===2?[r[0],r[1],r[0],r[1]]:r.length===3?[r[0],r[1],r[2],r[1]]:[r[0],r[1],r[2],r[3]]:n==="even"&&r.length%2===1?[].concat((0,J.Z)(r),(0,J.Z)(r)):r}function Ji(a,n,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(a.unit===Bt.kPixels)return Number(a.value);if(a.unit===Bt.kPercentage&&r){var l=r.nodeName===lt.GROUP?r.getLocalBounds():r.getGeometryBounds();return(s?l.min[n]:0)+a.value/100*l.halfExtents[n]*2}return 0}var Wb=function(n){return su(/deg|rad|grad|turn|px|%/g,n)},Gb=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function jb(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(a=a.toLowerCase().trim(),a==="none")return[];for(var n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],s,l=0;s=n.exec(a);){if(s.index!==l)return[];if(l=s.index+s[0].length,Gb.indexOf(s[1])>-1&&r.push({name:s[1],params:s[2].split(" ").map(function(u){return Wb(u)||au(u)})}),n.lastIndex===a.length)return r}return[]}function Dh(a){return a.toString()}var Ad=function(n){return typeof n=="number"?Gn(n):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(n)?Gn(Number(n)):Gn(0)},kd=fr(Ad);fr(function(a){return(0,xn.Z)(a)?a.split(" ").map(kd):a.map(kd)});function Pd(a,n){return[a,n,Dh]}function Rd(a,n){return function(r,s){return[r,s,function(l){return Dh(Le(l,a,n))}]}}function hp(a,n){if(a.length===n.length)return[a,n,function(r){return r}]}function Nd(a){return a.parsedStyle.d.totalLength===0&&(a.parsedStyle.d.totalLength=B1(a.parsedStyle.d.absolutePath)),a.parsedStyle.d.totalLength}function $b(a){return a.parsedStyle.points.totalLength===0&&(a.parsedStyle.points.totalLength=ph(a.parsedStyle.points.points)),a.parsedStyle.points.totalLength}function Hb(a){for(var n=0;n<a.length;n++){var r=a[n-1],s=a[n],l=s[0];if(l==="M"&&r){var u=r[0],h=[s[1],s[2]],f=void 0;u==="L"||u==="M"?f=[r[1],r[2]]:(u==="C"||u==="A"||u==="Q")&&(f=[r[r.length-2],r[r.length-1]]),f&&Bh(h,f)&&(a.splice(n,1),n--)}}}function Vb(a){for(var n=!1,r=a.length,s=0;s<r;s++){var l=a[s],u=l[0];if(u==="C"||u==="A"||u==="Q"){n=!0;break}}return n}function fp(a){for(var n=[],r=[],s=[],l=0;l<a.length;l++){var u=a[l],h=u[0];h==="M"?(s.length&&(r.push(s),s=[]),s.push([u[1],u[2]])):h==="Z"?s.length&&(n.push(s),s=[]):s.push([u[1],u[2]])}return s.length>0&&r.push(s),{polygons:n,polylines:r}}function Bh(a,n){return a[0]===n[0]&&a[1]===n[1]}function Fh(a,n){for(var r=[],s=[],l=[],u=0;u<a.length;u++){var h=a[u],f=h.currentPoint,d=h.params,v=h.prePoint,p=void 0;switch(h.command){case"Q":p=ub(v[0],v[1],d[1],d[2],d[3],d[4]);break;case"C":p=ld(v[0],v[1],d[1],d[2],d[3],d[4],d[5],d[6]);break;case"A":var g=h.arcParams;p=hh(g.cx,g.cy,g.rx,g.ry,g.xRotation,g.startAngle,g.endAngle);break;default:r.push(f[0]),s.push(f[1]);break}p&&(h.box=p,r.push(p.x,p.x+p.width),s.push(p.y,p.y+p.height)),n&&(h.command==="L"||h.command==="M")&&h.prePoint&&h.nextPoint&&l.push(h)}r=r.filter(function(k){return!Number.isNaN(k)&&k!==1/0&&k!==-1/0}),s=s.filter(function(k){return!Number.isNaN(k)&&k!==1/0&&k!==-1/0});var m=sh(r),b=sh(s),E=oh(r),w=oh(s);if(l.length===0)return{x:m,y:b,width:E-m,height:w-b};for(var S=0;S<l.length;S++){var M=l[S],C=M.currentPoint,T=void 0;C[0]===m?(T=zh(M,n),m-=T.xExtra):C[0]===E&&(T=zh(M,n),E+=T.xExtra),C[1]===b?(T=zh(M,n),b-=T.yExtra):C[1]===w&&(T=zh(M,n),w+=T.yExtra)}return{x:m,y:b,width:E-m,height:w-b}}function zh(a,n){var r=a.prePoint,s=a.currentPoint,l=a.nextPoint,u=Math.pow(s[0]-r[0],2)+Math.pow(s[1]-r[1],2),h=Math.pow(s[0]-l[0],2)+Math.pow(s[1]-l[1],2),f=Math.pow(r[0]-l[0],2)+Math.pow(r[1]-l[1],2),d=Math.acos((u+h-f)/(2*Math.sqrt(u)*Math.sqrt(h)));if(!d||Math.sin(d)===0||Uc(d,0))return{xExtra:0,yExtra:0};var v=Math.abs(Math.atan2(l[1]-s[1],l[0]-s[0])),p=Math.abs(Math.atan2(l[0]-s[0],l[1]-s[1]));v=v>Math.PI/2?Math.PI-v:v,p=p>Math.PI/2?Math.PI-p:p;var g={xExtra:Math.cos(d/2-v)*(n/2*(1/Math.sin(d/2)))-n/2||0,yExtra:Math.cos(p-d/2)*(n/2*(1/Math.sin(d/2)))-n/2||0};return g}function dp(a,n){return[n[0]+(n[0]-a[0]),n[1]+(n[1]-a[1])]}var vp=function(n,r){var s=n.x*r.x+n.y*r.y,l=Math.sqrt((Math.pow(n.x,2)+Math.pow(n.y,2))*(Math.pow(r.x,2)+Math.pow(r.y,2))),u=n.x*r.y-n.y*r.x<0?-1:1,h=u*Math.acos(s/l);return h},pp=function(n,r,s,l,u,h,f,d){r=Math.abs(r),s=Math.abs(s),l=p0(l,360);var v=pn(l);if(n.x===f.x&&n.y===f.y)return{x:n.x,y:n.y,ellipticalArcAngle:0};if(r===0||s===0)return{x:0,y:0,ellipticalArcAngle:0};var p=(n.x-f.x)/2,g=(n.y-f.y)/2,m={x:Math.cos(v)*p+Math.sin(v)*g,y:-Math.sin(v)*p+Math.cos(v)*g},b=Math.pow(m.x,2)/Math.pow(r,2)+Math.pow(m.y,2)/Math.pow(s,2);b>1&&(r*=Math.sqrt(b),s*=Math.sqrt(b));var E=Math.pow(r,2)*Math.pow(s,2)-Math.pow(r,2)*Math.pow(m.y,2)-Math.pow(s,2)*Math.pow(m.x,2),w=Math.pow(r,2)*Math.pow(m.y,2)+Math.pow(s,2)*Math.pow(m.x,2),S=E/w;S=S<0?0:S;var M=(u!==h?1:-1)*Math.sqrt(S),C={x:M*(r*m.y/s),y:M*(-(s*m.x)/r)},T={x:Math.cos(v)*C.x-Math.sin(v)*C.y+(n.x+f.x)/2,y:Math.sin(v)*C.x+Math.cos(v)*C.y+(n.y+f.y)/2},k={x:(m.x-C.x)/r,y:(m.y-C.y)/s},O=vp({x:1,y:0},k),A={x:(-m.x-C.x)/r,y:(-m.y-C.y)/s},R=vp(k,A);!h&&R>0?R-=2*Math.PI:h&&R<0&&(R+=2*Math.PI),R%=2*Math.PI;var L=O+R*d,D=r*Math.cos(L),z=s*Math.sin(L),W={x:Math.cos(v)*D-Math.sin(v)*z+T.x,y:Math.sin(v)*D+Math.cos(v)*z+T.y,ellipticalArcStartAngle:O,ellipticalArcEndAngle:O+R,ellipticalArcAngle:L,ellipticalArcCenter:T,resultantRx:r,resultantRy:s};return W};function Ub(a){for(var n=[],r=null,s=null,l=null,u=0,h=a.length,f=0;f<h;f++){var d=a[f];s=a[f+1];var v=d[0],p={command:v,prePoint:r,params:d,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(v){case"M":l=[d[1],d[2]],u=f;break;case"A":var g=Yb(r,d);p.arcParams=g;break}if(v==="Z")r=l,s=a[u+1];else{var m=d.length;r=[d[m-2],d[m-1]]}s&&s[0]==="Z"&&(s=a[u],n[u]&&(n[u].prePoint=r)),p.currentPoint=r,n[u]&&Bh(r,n[u].currentPoint)&&(n[u].prePoint=p.prePoint);var b=s?[s[s.length-2],s[s.length-1]]:null;p.nextPoint=b;var E=p.prePoint;if(["L","H","V"].includes(v))p.startTangent=[E[0]-r[0],E[1]-r[1]],p.endTangent=[r[0]-E[0],r[1]-E[1]];else if(v==="Q"){var w=[d[1],d[2]];p.startTangent=[E[0]-w[0],E[1]-w[1]],p.endTangent=[r[0]-w[0],r[1]-w[1]]}else if(v==="T"){var S=n[f-1],M=dp(S.currentPoint,E);S.command==="Q"?(p.command="Q",p.startTangent=[E[0]-M[0],E[1]-M[1]],p.endTangent=[r[0]-M[0],r[1]-M[1]]):(p.command="TL",p.startTangent=[E[0]-r[0],E[1]-r[1]],p.endTangent=[r[0]-E[0],r[1]-E[1]])}else if(v==="C"){var C=[d[1],d[2]],T=[d[3],d[4]];p.startTangent=[E[0]-C[0],E[1]-C[1]],p.endTangent=[r[0]-T[0],r[1]-T[1]],p.startTangent[0]===0&&p.startTangent[1]===0&&(p.startTangent=[C[0]-T[0],C[1]-T[1]]),p.endTangent[0]===0&&p.endTangent[1]===0&&(p.endTangent=[T[0]-C[0],T[1]-C[1]])}else if(v==="S"){var k=n[f-1],O=dp(k.currentPoint,E),A=[d[1],d[2]];k.command==="C"?(p.command="C",p.startTangent=[E[0]-O[0],E[1]-O[1]],p.endTangent=[r[0]-A[0],r[1]-A[1]]):(p.command="SQ",p.startTangent=[E[0]-A[0],E[1]-A[1]],p.endTangent=[r[0]-A[0],r[1]-A[1]])}else if(v==="A"){var R=gp(p,0),L=R.x,D=R.y,z=gp(p,1,!1),W=z.x,G=z.y;p.startTangent=[L,D],p.endTangent=[W,G]}n.push(p)}return n}function gp(a,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=a.arcParams,l=s.rx,u=l===void 0?0:l,h=s.ry,f=h===void 0?0:h,d=s.xRotation,v=s.arcFlag,p=s.sweepFlag,g=pp({x:a.prePoint[0],y:a.prePoint[1]},u,f,d,!!v,!!p,{x:a.currentPoint[0],y:a.currentPoint[1]},n),m=pp({x:a.prePoint[0],y:a.prePoint[1]},u,f,d,!!v,!!p,{x:a.currentPoint[0],y:a.currentPoint[1]},r?n+.005:n-.005),b=m.x-g.x,E=m.y-g.y,w=Math.sqrt(b*b+E*E);return{x:-b/w,y:-E/w}}function Zh(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Ld(a,n){return Zh(a)*Zh(n)?(a[0]*n[0]+a[1]*n[1])/(Zh(a)*Zh(n)):1}function yp(a,n){return(a[0]*n[1]<a[1]*n[0]?-1:1)*Math.acos(Ld(a,n))}function Yb(a,n){var r=n[1],s=n[2],l=p0(pn(n[3]),Math.PI*2),u=n[4],h=n[5],f=a[0],d=a[1],v=n[6],p=n[7],g=Math.cos(l)*(f-v)/2+Math.sin(l)*(d-p)/2,m=-1*Math.sin(l)*(f-v)/2+Math.cos(l)*(d-p)/2,b=g*g/(r*r)+m*m/(s*s);b>1&&(r*=Math.sqrt(b),s*=Math.sqrt(b));var E=r*r*(m*m)+s*s*(g*g),w=E?Math.sqrt((r*r*(s*s)-E)/E):1;u===h&&(w*=-1),isNaN(w)&&(w=0);var S=s?w*r*m/s:0,M=r?w*-s*g/r:0,C=(f+v)/2+Math.cos(l)*S-Math.sin(l)*M,T=(d+p)/2+Math.sin(l)*S+Math.cos(l)*M,k=[(g-S)/r,(m-M)/s],O=[(-1*g-S)/r,(-1*m-M)/s],A=yp([1,0],k),R=yp(k,O);return Ld(k,O)<=-1&&(R=Math.PI),Ld(k,O)>=1&&(R=0),h===0&&R>0&&(R-=2*Math.PI),h===1&&R<0&&(R+=2*Math.PI),{cx:C,cy:T,rx:Bh(a,[v,p])?0:r,ry:Bh(a,[v,p])?0:s,startAngle:A,endAngle:A+R,xRotation:l,arcFlag:u,sweepFlag:h}}function Xb(a,n,r){return a.reduce(function(s,l){var u="";if(l[0]==="M"||l[0]==="L"){var h=vec3.fromValues(l[1],l[2],0);r&&vec3.transformMat4(h,h,r),u="".concat(l[0]).concat(h[0],",").concat(h[1])}else if(l[0]==="Z")u=l[0];else if(l[0]==="C"){var f=vec3.fromValues(l[1],l[2],0),d=vec3.fromValues(l[3],l[4],0),v=vec3.fromValues(l[5],l[6],0);r&&(vec3.transformMat4(f,f,r),vec3.transformMat4(d,d,r),vec3.transformMat4(v,v,r)),u="".concat(l[0]).concat(f[0],",").concat(f[1],",").concat(d[0],",").concat(d[1],",").concat(v[0],",").concat(v[1])}else if(l[0]==="A"){var p=vec3.fromValues(l[6],l[7],0);r&&vec3.transformMat4(p,p,r),u="".concat(l[0]).concat(l[1],",").concat(l[2],",").concat(l[3],",").concat(l[4],",").concat(l[5],",").concat(p[0],",").concat(p[1])}else if(l[0]==="Q"){var g=vec3.fromValues(l[1],l[2],0),m=vec3.fromValues(l[3],l[4],0);r&&(vec3.transformMat4(g,g,r),vec3.transformMat4(m,m,r)),u="".concat(l[0]).concat(l[1],",").concat(l[2],",").concat(l[3],",").concat(l[4],"}")}return s+=u},"")}function Kb(a,n,r,s){return[["M",a,n],["L",r,s]]}function mp(a,n,r,s){var l=(-1+Math.sqrt(2))/3*4,u=a*l,h=n*l,f=r-a,d=r+a,v=s-n,p=s+n;return[["M",f,s],["C",f,s-h,r-u,v,r,v],["C",r+u,v,d,s-h,d,s],["C",d,s+h,r+u,p,r,p],["C",r-u,p,f,s+h,f,s],["Z"]]}function qb(a,n){var r=a.map(function(s,l){return[l===0?"M":"L",s[0],s[1]]});return n&&r.push(["Z"]),r}function Qb(a,n,r,s,l){if(l){var u=_slicedToArray(l,4),h=u[0],f=u[1],d=u[2],v=u[3],p=a>0?1:-1,g=n>0?1:-1,m=p+g!==0?1:0;return[["M",p*h+r,s],["L",a-p*f+r,s],f?["A",f,f,0,0,m,a+r,g*f+s]:null,["L",a+r,n-g*d+s],d?["A",d,d,0,0,m,a+r-p*d,n+s]:null,["L",r+p*v,n+s],v?["A",v,v,0,0,m,r,n+s-g*v]:null,["L",r,g*h+s],h?["A",h,h,0,0,m,p*h+r,s]:null,["Z"]].filter(function(b){return b})}return[["M",r,s],["L",r+a,s],["L",r+a,s+n],["L",r,s+n],["Z"]]}function VS(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.getLocalTransform(),r=[];switch(a.nodeName){case lt.LINE:var s=a.parsedStyle,l=s.x1,u=l===void 0?0:l,h=s.y1,f=h===void 0?0:h,d=s.x2,v=d===void 0?0:d,p=s.y2,g=p===void 0?0:p;r=Kb(u,f,v,g);break;case lt.CIRCLE:{var m=a.parsedStyle,b=m.r,E=b===void 0?0:b,w=m.cx,S=w===void 0?0:w,M=m.cy,C=M===void 0?0:M;r=mp(E,E,S,C);break}case lt.ELLIPSE:{var T=a.parsedStyle,k=T.rx,O=k===void 0?0:k,A=T.ry,R=A===void 0?0:A,L=T.cx,D=L===void 0?0:L,z=T.cy,W=z===void 0?0:z;r=mp(O,R,D,W);break}case lt.POLYLINE:case lt.POLYGON:var G=a.parsedStyle.points;r=qb(G.points,a.nodeName===lt.POLYGON);break;case lt.RECT:var Y=a.parsedStyle,q=Y.width,rt=q===void 0?0:q,yt=Y.height,st=yt===void 0?0:yt,mt=Y.x,at=mt===void 0?0:mt,Et=Y.y,It=Et===void 0?0:Et,Gt=Y.radius,Jt=Gt&&Gt.some(function(te){return te!==0});r=Qb(rt,st,at,It,Jt&&Gt.map(function(te){return clamp(te,0,Math.min(Math.abs(rt)/2,Math.abs(st)/2))}));break;case lt.PATH:var Re=a.parsedStyle.d.absolutePath;r=_toConsumableArray(Re);break}if(r.length)return Xb(r,a,n)}function Jb(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,u=a.map(function(h,f){var d=h[0],v=a[f+1],p=f===0&&(n!==0||r!==0),g=(f===a.length-1||v&&(v[0]==="M"||v[0]==="Z"))&&s!==0&&l!==0,m=p?[n,r]:[0,0],b=_slicedToArray(m,2),E=b[0],w=b[1],S=g?[s,l]:[0,0],M=_slicedToArray(S,2),C=M[0],T=M[1];switch(d){case"M":return"M ".concat(h[1]+E,",").concat(h[2]+w);case"L":return"L ".concat(h[1]+C,",").concat(h[2]+T);case"Q":return"Q ".concat(h[1]," ").concat(h[2],",").concat(h[3]+C," ").concat(h[4]+T);case"C":return"C ".concat(h[1]," ").concat(h[2],",").concat(h[3]," ").concat(h[4],",").concat(h[5]+C," ").concat(h[6]+T);case"A":return"A ".concat(h[1]," ").concat(h[2]," ").concat(h[3]," ").concat(h[4]," ").concat(h[5]," ").concat(h[6]," ").concat(h[7]).concat(g?" L ".concat(h[6]+s,",").concat(h[7]+l):"");case"Z":return"Z";default:return null}}).filter(function(h){return h!==null}).join(" ");return~u.indexOf("NaN")?"":u}var Id=function(n){if(n===""||Array.isArray(n)&&n.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var r;try{r=Hc(n)}catch(b){r=Hc(""),console.error("[g]: Invalid SVG Path definition: ".concat(n))}Hb(r);var s=Vb(r),l=fp(r),u=l.polygons,h=l.polylines,f=Ub(r),d=Fh(f,0),v=d.x,p=d.y,g=d.width,m=d.height;return{absolutePath:r,hasArc:s,segments:f,polygons:u,polylines:h,totalLength:0,rect:{x:Number.isFinite(v)?v:0,y:Number.isFinite(p)?p:0,width:Number.isFinite(g)?g:0,height:Number.isFinite(m)?m:0}}},tx=fr(Id);function bp(a){return(0,xn.Z)(a)?tx(a):Id(a)}function ex(a,n,r){var s=a.curve,l=n.curve;(!s||s.length===0)&&(s=id(a.absolutePath,!1),a.curve=s),(!l||l.length===0)&&(l=id(n.absolutePath,!1),n.curve=l);var u=[s,l];s.length!==l.length&&(u=ya(s,l));var h=m0(u[0])!==m0(u[1])?V1(u[0]):U1(u[0]);return[h,x0(u[1],h),function(f){return f}]}function nx(a,n){var r;return(0,xn.Z)(a)?r=a.split(" ").map(function(s){var l=s.split(","),u=(0,V.Z)(l,2),h=u[0],f=u[1];return[Number(h),Number(f)]}):r=a,{points:r,totalLength:0,segments:[]}}function Wh(a,n){return[a.points,n.points,function(r){return r}]}var rr=null,tc=/\s*(\w+)\(([^)]*)\)/g;function Gi(a){return function(n){var r=0;return a.map(function(s){return s===rr?n[r++]:s})}}function ul(a){return a}var ou={matrix:["NNNNNN",[rr,rr,0,0,rr,rr,0,0,0,0,1,0,rr,rr,0,1],ul],matrix3d:["NNNNNNNNNNNNNNNN",ul],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Gi([rr,rr,new wn(1)]),ul],scaleX:["N",Gi([rr,new wn(1),new wn(1)]),Gi([rr,new wn(1)])],scaleY:["N",Gi([new wn(1),rr,new wn(1)]),Gi([new wn(1),rr])],scaleZ:["N",Gi([new wn(1),new wn(1),rr])],scale3d:["NNN",ul],skew:["Aa",null,ul],skewX:["A",null,Gi([rr,ll])],skewY:["A",null,Gi([ll,rr])],translate:["Tt",Gi([rr,rr,Ha]),ul],translateX:["T",Gi([rr,Ha,Ha]),Gi([rr,Ha])],translateY:["T",Gi([Ha,rr,Ha]),Gi([Ha,rr])],translateZ:["L",Gi([Ha,Ha,rr])],translate3d:["TTL",ul]};function xp(a){for(var n=[],r=a.length,s=0;s<r;s++){var l=a[s],u=l[0],h=l.slice(1);u==="translate"||u==="skew"?h.length===1&&h.push(0):u==="scale"&&h.length===1&&h.push(h[0]);var f=ou[u];if(!f)return[];var d=h.map(function(v){return Gn(v)});n.push({t:u,d})}return n}function Ep(a){if(Array.isArray(a))return xp(a);if(a=(a||"none").trim(),a==="none")return[];var n=[],r,s=0;for(tc.lastIndex=0;r=tc.exec(a);){if(r.index!==s)return[];s=r.index+r[0].length;var l=r[1],u=ou[l];if(!u)return[];var h=r[2].split(","),f=u[0];if(f.length<h.length)return[];for(var d=[],v=0;v<f.length;v++){var p=h[v],g=f[v],m=void 0;if(p?m={A:function(E){return E.trim()==="0"?ll:zb(E)},N:kd,T:Od,L:Bb}[g.toUpperCase()](p):m={a:ll,n:d[0],t:Ha}[g],m===void 0)return[];d.push(m)}if(n.push({t:l,d}),tc.lastIndex===a.length)return n}return[]}function rx(a){if(Array.isArray(a))return xp(a);if(a=(a||"none").trim(),a==="none")return[];var n=[],r,s=0;for(tc.lastIndex=0;r=tc.exec(a);){if(r.index!==s)return[];s=r.index+r[0].length;var l=r[1],u=ou[l];if(!u)return[];var h=r[2].split(","),f=u[0];if(f.length<h.length)return[];for(var d=[],v=0;v<f.length;v++){var p=h[v],g=f[v],m=void 0;if(p?m={A:function(E){return E.trim()==="0"?ll:cp(E)},N:Ad,T:lp,L:op}[g.toUpperCase()](p):m={a:ll,n:d[0],t:Ha}[g],m===void 0)return[];d.push(m)}if(n.push({t:l,d}),tc.lastIndex===a.length)return n}return[]}function ix(a){var n,r,s,l;switch(a.t){case"rotateX":return l=pn(Wi(a.d[0])),[1,0,0,0,0,Math.cos(l),Math.sin(l),0,0,-Math.sin(l),Math.cos(l),0,0,0,0,1];case"rotateY":return l=pn(Wi(a.d[0])),[Math.cos(l),0,-Math.sin(l),0,0,1,0,0,Math.sin(l),0,Math.cos(l),0,0,0,0,1];case"rotate":case"rotateZ":return l=pn(Wi(a.d[0])),[Math.cos(l),Math.sin(l),0,0,-Math.sin(l),Math.cos(l),0,0,0,0,1,0,0,0,0,1];case"rotate3d":n=a.d[0].value,r=a.d[1].value,s=a.d[2].value,l=pn(Wi(a.d[3]));var u=n*n+r*r+s*s;if(u===0)n=1,r=0,s=0;else if(u!==1){var h=Math.sqrt(u);n/=h,r/=h,s/=h}var f=Math.sin(l/2),d=f*Math.cos(l/2),v=f*f;return[1-2*(r*r+s*s)*v,2*(n*r*v+s*d),2*(n*s*v-r*d),0,2*(n*r*v-s*d),1-2*(n*n+s*s)*v,2*(r*s*v+n*d),0,2*(n*s*v+r*d),2*(r*s*v-n*d),1-2*(n*n+r*r)*v,0,0,0,0,1];case"scale":return[a.d[0].value,0,0,0,0,a.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[a.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,a.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,a.d[0].value,0,0,0,0,1];case"scale3d":return[a.d[0].value,0,0,0,0,a.d[1].value,0,0,0,0,a.d[2].value,0,0,0,0,1];case"skew":var p=pn(Wi(a.d[0])),g=pn(Wi(a.d[1]));return[1,Math.tan(g),0,0,Math.tan(p),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return l=pn(Wi(a.d[0])),[1,0,0,0,Math.tan(l),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return l=pn(Wi(a.d[0])),[1,Math.tan(l),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return n=Ji(a.d[0],0,null)||0,r=Ji(a.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,n,r,0,1];case"translateX":return n=Ji(a.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,n,0,0,1];case"translateY":return r=Ji(a.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,r,0,1];case"translateZ":return s=Ji(a.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,s,1];case"translate3d":return n=Ji(a.d[0],0,null)||0,r=Ji(a.d[1],0,null)||0,s=Ji(a.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,n,r,s,1];case"perspective":var m=Ji(a.d[0],0,null)||0,b=m?-1/m:0;return[1,0,0,0,0,1,0,0,0,0,1,b,0,0,0,1];case"matrix":return[a.d[0].value,a.d[1].value,0,0,a.d[2].value,a.d[3].value,0,0,0,0,1,0,a.d[4].value,a.d[5].value,0,1];case"matrix3d":return a.d.map(function(E){return E.value})}}function ax(a,n){return[a[0]*n[0]+a[4]*n[1]+a[8]*n[2]+a[12]*n[3],a[1]*n[0]+a[5]*n[1]+a[9]*n[2]+a[13]*n[3],a[2]*n[0]+a[6]*n[1]+a[10]*n[2]+a[14]*n[3],a[3]*n[0]+a[7]*n[1]+a[11]*n[2]+a[15]*n[3],a[0]*n[4]+a[4]*n[5]+a[8]*n[6]+a[12]*n[7],a[1]*n[4]+a[5]*n[5]+a[9]*n[6]+a[13]*n[7],a[2]*n[4]+a[6]*n[5]+a[10]*n[6]+a[14]*n[7],a[3]*n[4]+a[7]*n[5]+a[11]*n[6]+a[15]*n[7],a[0]*n[8]+a[4]*n[9]+a[8]*n[10]+a[12]*n[11],a[1]*n[8]+a[5]*n[9]+a[9]*n[10]+a[13]*n[11],a[2]*n[8]+a[6]*n[9]+a[10]*n[10]+a[14]*n[11],a[3]*n[8]+a[7]*n[9]+a[11]*n[10]+a[15]*n[11],a[0]*n[12]+a[4]*n[13]+a[8]*n[14]+a[12]*n[15],a[1]*n[12]+a[5]*n[13]+a[9]*n[14]+a[13]*n[15],a[2]*n[12]+a[6]*n[13]+a[10]*n[14]+a[14]*n[15],a[3]*n[12]+a[7]*n[13]+a[11]*n[14]+a[15]*n[15]]}function sx(a){return a.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:a.map(ix).reduce(ax)}function lu(a){var n=[0,0,0],r=[1,1,1],s=[0,0,0],l=[0,0,0,1],u=[0,0,0,1];return gd(sx(a),n,r,s,l,u),[[n,r,s,u,l]]}var ox=function(){function a(s,l){for(var u=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],h=0;h<4;h++)for(var f=0;f<4;f++)for(var d=0;d<4;d++)u[h][f]+=l[h][d]*s[d][f];return u}function n(s){return s[0][2]===0&&s[0][3]===0&&s[1][2]===0&&s[1][3]===0&&s[2][0]===0&&s[2][1]===0&&s[2][2]===1&&s[2][3]===0&&s[3][2]===0&&s[3][3]===1}function r(s,l,u,h,f){for(var d=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],v=0;v<4;v++)d[v][3]=f[v];for(var p=0;p<3;p++)for(var g=0;g<3;g++)d[3][p]+=s[g]*d[g][p];var m=h[0],b=h[1],E=h[2],w=h[3],S=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];S[0][0]=1-2*(b*b+E*E),S[0][1]=2*(m*b-E*w),S[0][2]=2*(m*E+b*w),S[1][0]=2*(m*b+E*w),S[1][1]=1-2*(m*m+E*E),S[1][2]=2*(b*E-m*w),S[2][0]=2*(m*E-b*w),S[2][1]=2*(b*E+m*w),S[2][2]=1-2*(m*m+b*b),d=a(d,S);var M=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];u[2]&&(M[2][1]=u[2],d=a(d,M)),u[1]&&(M[2][1]=0,M[2][0]=u[0],d=a(d,M)),u[0]&&(M[2][0]=0,M[1][0]=u[0],d=a(d,M));for(var C=0;C<3;C++)for(var T=0;T<3;T++)d[C][T]*=l[C];return n(d)?[d[0][0],d[0][1],d[1][0],d[1][1],d[3][0],d[3][1]]:d[0].concat(d[1],d[2],d[3])}return r}();function wp(a){return a.toFixed(6).replace(".000000","")}function Gh(a,n){var r,s;return a.decompositionPair!==n&&(a.decompositionPair=n,r=lu(a)),n.decompositionPair!==a&&(n.decompositionPair=a,s=lu(n)),r[0]===null||s[0]===null?[[!1],[!0],function(l){return l?n[0].d:a[0].d}]:(r[0].push(0),s[0].push(1),[r,s,function(l){var u=Sp(r[0][3],s[0][3],l[5]),h=ox(l[0],l[1],l[2],u,l[4]),f=h.map(wp).join(",");return f}])}function Dd(a,n){for(var r=0,s=0;s<a.length;s++)r+=a[s]*n[s];return r}function Sp(a,n,r){var s=Dd(a,n);s=Le(s,-1,1);var l=[];if(s===1)l=a;else for(var u=Math.acos(s),h=Math.sin(r*u)*1/Math.sqrt(1-s*s),f=0;f<4;f++)l.push(a[f]*(Math.cos(r*u)-s*h)+n[f]*h);return l}function jh(a){return a.replace(/[XY]/,"")}function $h(a){return a.replace(/(X|Y|Z|3d)?$/,"3d")}var _p=function(n,r){return n==="perspective"&&r==="perspective"||(n==="matrix"||n==="matrix3d")&&(r==="matrix"||r==="matrix3d")};function lx(a,n,r){var s=!1;if(!a.length||!n.length){a.length||(s=!0,a=n,n=[]);for(var l=function(){var W=a[u],G=W.t,Y=W.d,q=G.substring(0,5)==="scale"?1:0;n.push({t:G,d:Y.map(function(rt){return typeof rt=="number"?Gn(q):Gn(q,rt.unit)})})},u=0;u<a.length;u++)l()}var h=[],f=[],d=[];if(a.length!==n.length){var v=Gh(a,n);h=[v[0]],f=[v[1]],d=[["matrix",[v[2]]]]}else for(var p=0;p<a.length;p++){var g=a[p].t,m=n[p].t,b=a[p].d,E=n[p].d,w=ou[g],S=ou[m],M=void 0;if(_p(g,m)){var C=Gh([a[p]],[n[p]]);h.push(C[0]),f.push(C[1]),d.push(["matrix",[C[2]]]);continue}else if(g===m)M=g;else if(w[2]&&S[2]&&jh(g)===jh(m))M=jh(g),b=w[2](b),E=S[2](E);else if(w[1]&&S[1]&&$h(g)===$h(m))M=$h(g),b=w[1](b),E=S[1](E);else{var T=Gh(a,n);h=[T[0]],f=[T[1]],d=[["matrix",[T[2]]]];break}for(var k=[],O=[],A=[],R=0;R<b.length;R++){var L=Zb(b[R],E[R],r,!1,R);k[R]=L[0],O[R]=L[1],A.push(L[2])}h.push(k),f.push(O),d.push([M,A])}if(s){var D=h;h=f,f=D}return[h,f,function(z){return z.map(function(W,G){var Y=W.map(function(q,rt){return d[G][1][rt](q)}).join(",");return d[G][0]==="matrix"&&Y.split(",").length===16&&(d[G][0]="matrix3d"),d[G][0]==="matrix3d"&&Y.split(",").length===6&&(d[G][0]="matrix"),"".concat(d[G][0],"(").concat(Y,")")}).join(" ")}]}var cx=fr(function(a){if((0,xn.Z)(a)){if(a==="text-anchor")return[Gn(0,"px"),Gn(0,"px")];var n=a.split(" ");return n.length===1&&(n[0]==="top"||n[0]==="bottom"?(n[1]=n[0],n[0]="center"):n[1]="center"),n.length!==2?null:[Od(Mp(n[0])),Od(Mp(n[1]))]}return[Gn(a[0]||0,"px"),Gn(a[1]||0,"px")]});function Mp(a){return a==="center"?"50%":a==="left"||a==="top"?"0%":a==="right"||a==="bottom"?"100%":a}var ec=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Lt.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Lt.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Lt.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Lt.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Lt.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Lt.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Lt.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Lt.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Lt.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Lt.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Lt.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Lt.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Lt.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Lt.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Lt.FILTER},{n:"clipPath",syntax:Lt.DEFINED_PATH},{n:"textPath",syntax:Lt.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Lt.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Lt.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Lt.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Lt.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Lt.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Lt.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Lt.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Lt.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Lt.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Lt.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Lt.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Lt.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Lt.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Lt.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Lt.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Lt.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Lt.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Lt.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Lt.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Lt.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Lt.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Lt.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Lt.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Lt.NUMBER,d:function(n){return n===lt.PATH||n===lt.POLYGON||n===lt.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Lt.MARKER},{n:"markerEnd",syntax:Lt.MARKER},{n:"markerMid",syntax:Lt.MARKER},{n:"markerStartOffset",syntax:Lt.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Lt.LENGTH,l:!0,int:!0,d:"0"}],Hh=new Set(ec.filter(function(a){return!!a.l}).map(function(a){return a.n})),Cp={},ux=function(){function a(n){var r=this;(0,H.Z)(this,a),this.runtime=n,ec.forEach(function(s){r.registerMetadata(s)})}return(0,j.Z)(a,[{key:"registerMetadata",value:function(r){[r.n].concat((0,J.Z)(r.a||[])).forEach(function(s){Cp[s]=r})}},{key:"getPropertySyntax",value:function(r){return this.runtime.CSSPropertySyntaxFactory[r]}},{key:"processProperties",value:function(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(r.attributes,s);var u=r.parsedStyle.clipPath,h=r.parsedStyle.offsetPath;Bd(r,s);var f=!!l.forceUpdateGeometry;if(!f){for(var d in s)if(Hh.has(d)){f=!0;break}}var v=Fd(r);v.has("fill")&&s.fill&&(r.parsedStyle.fill=au(s.fill)),v.has("stroke")&&s.stroke&&(r.parsedStyle.stroke=au(s.stroke)),v.has("shadowColor")&&s.shadowColor&&(r.parsedStyle.shadowColor=au(s.shadowColor)),v.has("filter")&&s.filter&&(r.parsedStyle.filter=jb(s.filter)),v.has("radius")&&!(0,le.Z)(s.radius)&&(r.parsedStyle.radius=up(s.radius,4)),v.has("lineDash")&&!(0,le.Z)(s.lineDash)&&(r.parsedStyle.lineDash=up(s.lineDash,"even")),v.has("points")&&s.points&&(r.parsedStyle.points=nx(s.points)),v.has("d")&&s.d===""&&(r.parsedStyle.d=(0,gt.Z)({},G0)),v.has("d")&&s.d&&(r.parsedStyle.d=bp(s.d)),v.has("textTransform")&&s.textTransform&&this.runtime.CSSPropertySyntaxFactory[Lt.TEXT_TRANSFORM].calculator(null,null,{value:s.textTransform},r,null),v.has("clipPath")&&!xe(s.clipPath)&&this.runtime.CSSPropertySyntaxFactory[Lt.DEFINED_PATH].calculator("clipPath",u,s.clipPath,r,this.runtime),v.has("offsetPath")&&s.offsetPath&&this.runtime.CSSPropertySyntaxFactory[Lt.DEFINED_PATH].calculator("offsetPath",h,s.offsetPath,r,this.runtime),v.has("transform")&&s.transform&&(r.parsedStyle.transform=Ep(s.transform)),v.has("transformOrigin")&&s.transformOrigin&&(r.parsedStyle.transformOrigin=cx(s.transformOrigin)),v.has("markerStart")&&s.markerStart&&(r.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[Lt.MARKER].calculator(null,s.markerStart,s.markerStart,null,null)),v.has("markerEnd")&&s.markerEnd&&(r.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[Lt.MARKER].calculator(null,s.markerEnd,s.markerEnd,null,null)),v.has("markerMid")&&s.markerMid&&(r.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[Lt.MARKER].calculator("",s.markerMid,s.markerMid,null,null)),v.has("zIndex")&&!(0,le.Z)(s.zIndex)&&this.runtime.CSSPropertySyntaxFactory[Lt.Z_INDEX].postProcessor(r),v.has("offsetDistance")&&!(0,le.Z)(s.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[Lt.OFFSET_DISTANCE].postProcessor(r),v.has("transform")&&s.transform&&this.runtime.CSSPropertySyntaxFactory[Lt.TRANSFORM].postProcessor(r),v.has("transformOrigin")&&s.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[Lt.TRANSFORM_ORIGIN].postProcessor(r),f&&(r.geometry.dirty=!0,r.renderable.boundsDirty=!0,r.renderable.renderBoundsDirty=!0,l.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(r))}},{key:"updateGeometry",value:function(r){var s=r.nodeName,l=this.runtime.geometryUpdaterFactory[s];if(l){var u=r.geometry;u.contentBounds||(u.contentBounds=new en),u.renderBounds||(u.renderBounds=new en);var h=r.parsedStyle,f=l.update(h,r),d=f.cx,v=d===void 0?0:d,p=f.cy,g=p===void 0?0:p,m=f.cz,b=m===void 0?0:m,E=f.hwidth,w=E===void 0?0:E,S=f.hheight,M=S===void 0?0:S,C=f.hdepth,T=C===void 0?0:C,k=[Math.abs(w),Math.abs(M),T],O=h.stroke,A=h.lineWidth,R=A===void 0?1:A,L=h.increasedLineWidthForHitTesting,D=L===void 0?0:L,z=h.shadowType,W=z===void 0?"outer":z,G=h.shadowColor,Y=h.filter,q=Y===void 0?[]:Y,rt=h.transformOrigin,yt=[v,g,b];u.contentBounds.update(yt,k);var st=s===lt.POLYLINE||s===lt.POLYGON||s===lt.PATH?Math.SQRT2:.5,mt=O&&!O.isNone;if(mt){var at=((R||0)+(D||0))*st;k[0]+=at,k[1]+=at}if(u.renderBounds.update(yt,k),G&&W&&W!=="inner"){var Et=u.renderBounds,It=Et.min,Gt=Et.max,Jt=h.shadowBlur,Re=h.shadowOffsetX,te=h.shadowOffsetY,we=Jt||0,cn=Re||0,$e=te||0,qe=It[0]-we+cn,Xe=Gt[0]+we+cn,Ir=It[1]-we+$e,Ze=Gt[1]+we+$e;It[0]=Math.min(It[0],qe),Gt[0]=Math.max(Gt[0],Xe),It[1]=Math.min(It[1],Ir),Gt[1]=Math.max(Gt[1],Ze),u.renderBounds.setMinMax(It,Gt)}q.forEach(function(di){var Rl=di.name,Ni=di.params;if(Rl==="blur"){var Oa=Ni[0].value;u.renderBounds.update(u.renderBounds.center,oe(u.renderBounds.halfExtents,u.renderBounds.halfExtents,[Oa,Oa,0]))}else if(Rl==="drop-shadow"){var We=Ni[0].value,yn=Ni[1].value,He=Ni[2].value,un=u.renderBounds,Tn=un.min,ee=un.max,hn=Tn[0]-He+We,mn=ee[0]+He+We,Vr=Tn[1]-He+yn,bn=ee[1]+He+yn;Tn[0]=Math.min(Tn[0],hn),ee[0]=Math.max(ee[0],mn),Tn[1]=Math.min(Tn[1],Vr),ee[1]=Math.max(ee[1],bn),u.renderBounds.setMinMax(Tn,ee)}}),r.geometry.dirty=!1;var is=w<0,Yi=M<0,Oc=(is?-1:1)*(rt?Ji(rt[0],0,r,!0):0),Ri=(Yi?-1:1)*(rt?Ji(rt[1],1,r,!0):0);(Oc||Ri)&&r.setOrigin(Oc,Ri)}}},{key:"updateSizeAttenuation",value:function(r,s){r.style.isSizeAttenuation?(r.style.rawLineWidth||(r.style.rawLineWidth=r.style.lineWidth),r.style.lineWidth=(r.style.rawLineWidth||1)/s,r.nodeName===lt.CIRCLE&&(r.style.rawR||(r.style.rawR=r.style.r),r.style.r=(r.style.rawR||1)/s)):(r.style.rawLineWidth&&(r.style.lineWidth=r.style.rawLineWidth,delete r.style.rawLineWidth),r.nodeName===lt.CIRCLE&&r.style.rawR&&(r.style.r=r.style.rawR,delete r.style.rawR))}}])}();function Bd(a,n){var r=Fd(a);for(var s in n)r.has(s)&&(a.parsedStyle[s]=n[s])}function Fd(a){return a.constructor.PARSED_STYLE_LIST}var hx=function(){function a(){(0,H.Z)(this,a),this.mixer=Pd}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l,u){return Wi(l)}}])}(),fx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l,u,h){return l instanceof xa&&(l=null),h.sceneGraphService.updateDisplayObjectDependency(r,s,l,u),r==="clipPath"&&u.forEach(function(f){f.childNodes.length===0&&h.sceneGraphService.dirtifyToRoot(f)}),l}}])}(),dx=function(){function a(){(0,H.Z)(this,a),this.parser=au,this.mixer=Db}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l,u){return l instanceof xa?l.value==="none"?np:rp:l}}])}(),vx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l){return l instanceof xa?[]:l}}])}();function Tp(a){var n=a.parsedStyle,r=n.fontSize;return(0,le.Z)(r)?null:r}var zd=function(){function a(){(0,H.Z)(this,a),this.mixer=Pd}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l,u,h){if((0,tn.Z)(l))return l;if(wn.isRelativeUnit(l.unit)){if(l.unit===Bt.kPercentage)return 0;if(l.unit===Bt.kEms){if(u.parentNode){var f=Tp(u.parentNode);if(f)return f*=l.value,f}return 0}if(l.unit===Bt.kRems){var d;if(u!=null&&(d=u.ownerDocument)!==null&&d!==void 0&&d.documentElement){var v=Tp(u.ownerDocument.documentElement);if(v)return v*=l.value,v}return 0}}else return l.value}}])}(),px=function(){function a(){(0,H.Z)(this,a),this.mixer=hp}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l){return l.map(function(u){return u.value})}}])}(),gx=function(){function a(){(0,H.Z)(this,a),this.mixer=hp}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l){return l.map(function(u){return u.value})}}])}(),yx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l,u){var h;l instanceof xa&&(l=null);var f=(h=l)===null||h===void 0?void 0:h.cloneNode(!0);return f&&(f.style.isMarker=!0),f}}])}(),mx=function(){function a(){(0,H.Z)(this,a),this.mixer=Pd}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l){return l.value}}])}(),bx=function(){function a(){(0,H.Z)(this,a),this.mixer=Rd(0,1)}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l){return l.value}},{key:"postProcessor",value:function(r){var s=r.parsedStyle,l=s.offsetPath,u=s.offsetDistance;if(l){var h=l.nodeName;if(h===lt.LINE||h===lt.PATH||h===lt.POLYLINE){var f=l.getPoint(u);f&&r.setLocalPosition(f.x,f.y)}}}}])}(),xx=function(){function a(){(0,H.Z)(this,a),this.mixer=Rd(0,1)}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l){return l.value}}])}(),Va=function(){function a(){(0,H.Z)(this,a),this.parser=bp,this.mixer=ex}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l){return l instanceof xa&&l.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new yo(0,0,0,0)}:l}}])}(),Ex=(0,j.Z)(function a(){(0,H.Z)(this,a),this.mixer=Wh}),wx=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.mixer=Rd(0,1/0),r}return(0,X.Z)(n,a),(0,j.Z)(n)}(zd),hl=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l,u){return l instanceof xa?l.value==="unset"?"":l.value:"".concat(l)}},{key:"postProcessor",value:function(r){r.nodeValue="".concat(r.parsedStyle.text)||""}}])}(),Ae=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l,u){var h=u.getAttribute("text");if(h){var f=h;l.value==="capitalize"?f=h.charAt(0).toUpperCase()+h.slice(1):l.value==="lowercase"?f=h.toLowerCase():l.value==="uppercase"&&(f=h.toUpperCase()),u.parsedStyle.text=f}return l.value}}])}(),US=function(n){return Object.fromEntries(Object.entries(n).filter(function(r){var s=_slicedToArray(r,2),l=s[1];return l!==void 0}))},oi=new WeakMap;function dr(a,n,r){if(a){var s=typeof a=="string"?document.getElementById(a):a;oi.has(s)&&oi.get(s).destroy(r),oi.set(s,n)}}var Zd=typeof window!="undefined"&&typeof window.document!="undefined";function So(a){return!!a.getAttribute}function Sx(a,n){for(var r=0,s=a.length;r<s;){var l=r+s>>>1;Op(a[l],n)<0?r=l+1:s=l}return r}function Op(a,n){var r=Number(a.parsedStyle.zIndex||0),s=Number(n.parsedStyle.zIndex||0);if(r===s){var l=a.parentNode;if(l){var u=l.childNodes||[];return u.indexOf(a)-u.indexOf(n)}}return r-s}function Ap(a){var n=a;do{var r,s=(r=n.parsedStyle)===null||r===void 0?void 0:r.clipPath;if(s)return n;n=n.parentElement}while(n!==null);return null}var kp="px";function _x(a,n,r){Zd&&a.style&&(a.style.width=n+kp,a.style.height=r+kp)}function Vh(a,n){if(Zd)return document.defaultView.getComputedStyle(a,null).getPropertyValue(n)}function Mx(a){var n=Vh(a,"width");return n==="auto"?a.offsetWidth:parseFloat(n)}function Ws(a){var n=Vh(a,"height");return n==="auto"?a.offsetHeight:parseFloat(n)}var Pp=1,Uh={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},jn=typeof performance=="object"&&performance.now?performance:Date;function $n(a){return a.nodeName===lt.FRAGMENT?!0:a.getRootNode().nodeName===lt.FRAGMENT}function _o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,s=!1,l=!1,u=!!n&&!n.isNone,h=!!r&&!r.isNone;return a==="visiblepainted"||a==="painted"||a==="auto"?(s=u,l=h):a==="visiblefill"||a==="fill"?s=!0:a==="visiblestroke"||a==="stroke"?l=!0:(a==="visible"||a==="all")&&(s=!0,l=!0),[s,l]}var Cx=1,Tx=function(){return Cx++},ms=typeof self=="object"&&self.self===self?self:typeof K.g=="object"&&K.g.global===K.g?K.g:{},Ox=Date.now(),Ax=function(){return ms.performance&&typeof ms.performance.now=="function"?ms.performance.now():Date.now()-Ox},cu={},Wd=Date.now(),uu=function(n){if(typeof n!="function")throw new TypeError("".concat(n," is not a function"));var r=Date.now(),s=r-Wd,l=s>16?0:16-s,u=Tx();return cu[u]=n,Object.keys(cu).length>1||setTimeout(function(){Wd=r;var h=cu;cu={},Object.keys(h).forEach(function(f){return h[f](Ax())})},l),u},Gd=function(n){delete cu[n]},kx=["","webkit","moz","ms","o"],jd=function(n){return typeof n!="string"?uu:n===""?ms.requestAnimationFrame:ms["".concat(n,"RequestAnimationFrame")]},Yh=function(n){return typeof n!="string"?Gd:n===""?ms.cancelAnimationFrame:ms["".concat(n,"CancelAnimationFrame")]||ms["".concat(n,"CancelRequestAnimationFrame")]},ta=function(n,r){for(var s=0;n[s]!==void 0;){if(r(n[s]))return n[s];s+=1}},fl=ta(kx,function(a){return!!jd(a)}),$d=jd(fl),Rp=Yh(fl);ms.requestAnimationFrame=$d,ms.cancelAnimationFrame=Rp;var Px=function(){function a(){(0,H.Z)(this,a),this.callbacks=[]}return(0,j.Z)(a,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(r,s){this.callbacks.push(s)}},{key:"promise",value:function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return Promise.all(this.callbacks.map(function(u){return u.apply(void 0,s)}))}}])}(),Rx=function(){function a(){(0,H.Z)(this,a),this.callbacks=[]}return(0,j.Z)(a,[{key:"tapPromise",value:function(r,s){this.callbacks.push(s)}},{key:"promise",value:function(){var n=(0,Or.Z)((0,si.Z)().mark(function s(){var l,u,h,f,d=arguments;return(0,si.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.callbacks.length){p.next=14;break}return p.next=3,(l=this.callbacks)[0].apply(l,d);case 3:u=p.sent,h=0;case 5:if(!(h<this.callbacks.length-1)){p.next=13;break}return f=this.callbacks[h],p.next=9,f(u);case 9:u=p.sent;case 10:h++,p.next=5;break;case 13:return p.abrupt("return",u);case 14:return p.abrupt("return",null);case 15:case"end":return p.stop()}},s,this)}));function r(){return n.apply(this,arguments)}return r}()}])}(),Mi=function(){function a(){(0,H.Z)(this,a),this.callbacks=[]}return(0,j.Z)(a,[{key:"tap",value:function(r,s){this.callbacks.push(s)}},{key:"call",value:function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];var u=arguments;this.callbacks.forEach(function(h){h.apply(void 0,u)})}}])}(),Xh=function(){function a(){(0,H.Z)(this,a),this.callbacks=[]}return(0,j.Z)(a,[{key:"tap",value:function(r,s){this.callbacks.push(s)}},{key:"call",value:function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];if(this.callbacks.length){for(var u=arguments,h=this.callbacks[0].apply(void 0,u),f=0;f<this.callbacks.length-1;f++){var d=this.callbacks[f];h=d(h)}return h}return null}}])}(),Gs=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ie=/([\"\'])[^\'\"]+\1/;function Np(a){for(var n=a.fontSize,r=n===void 0?16:n,s=a.fontFamily,l=s===void 0?"sans-serif":s,u=a.fontStyle,h=u===void 0?"normal":u,f=a.fontVariant,d=f===void 0?"normal":f,v=a.fontWeight,p=v===void 0?"normal":v,g=(0,tn.Z)(r)&&"".concat(r,"px")||"16px",m=l.split(","),b=m.length-1;b>=0;b--){var E=m[b].trim();!Ie.test(E)&&Gs.indexOf(E)<0&&(E='"'.concat(E,'"')),m[b]=E}return"".concat(h," ").concat(d," ").concat(p," ").concat(g," ").concat(m.join(","))}function ji(a,n,r){return ni(a),a[4]=Math.tan(n),a[1]=Math.tan(r),a}var cr=Qe(),Nx=Qe(),gn={scale:function(n){us(cr,[n[0].value,n[1].value,1])},scaleX:function(n){us(cr,[n[0].value,1,1])},scaleY:function(n){us(cr,[1,n[0].value,1])},scaleZ:function(n){us(cr,[1,1,n[0].value])},scale3d:function(n){us(cr,[n[0].value,n[1].value,n[2].value])},translate:function(n){La(cr,[n[0].value,n[1].value,0])},translateX:function(n){La(cr,[n[0].value,0,0])},translateY:function(n){La(cr,[0,n[0].value,0])},translateZ:function(n){La(cr,[0,0,n[0].value])},translate3d:function(n){La(cr,[n[0].value,n[1].value,n[2].value])},rotate:function(n){co(cr,pn(Wi(n[0])))},rotateX:function(n){ju(cr,pn(Wi(n[0])))},rotateY:function(n){Lc(cr,pn(Wi(n[0])))},rotateZ:function(n){co(cr,pn(Wi(n[0])))},rotate3d:function(n){Dl(cr,pn(Wi(n[3])),[n[0].value,n[1].value,n[2].value])},skew:function(n){ji(cr,pn(n[0].value),pn(n[1].value))},skewX:function(n){ji(cr,pn(n[0].value),0)},skewY:function(n){ji(cr,0,pn(n[0].value))},matrix:function(n){da(cr,n[0].value,n[1].value,0,0,n[2].value,n[3].value,0,0,0,0,1,0,n[4].value,n[5].value,0,1)},matrix3d:function(n){da.apply(vt,[cr].concat((0,J.Z)(n.map(function(r){return r.value}))))}},Lx=pe(1,1,1),Lp=Xt(),hu={translate:function(n,r){Mt.sceneGraphService.setLocalScale(n,Lx,!1),Mt.sceneGraphService.setLocalEulerAngles(n,Lp,void 0,void 0,!1),Mt.sceneGraphService.setLocalPosition(n,[r[0].value,r[1].value,0],!1),Mt.sceneGraphService.dirtifyLocal(n,n.transformable)}};function Ip(a,n){if(a.length){if(a.length===1&&hu[a[0].t]){hu[a[0].t](n,a[0].d);return}for(var r=ni(Nx),s=0;s<a.length;s++){var l=a[s],u=l.t,h=l.d,f=gn[u];f&&(f(h),Dc(r,r,cr))}n.setLocalTransform(r)}else n.resetLocalTransform();return n.getLocalTransform()}var Ix=function(){function a(){(0,H.Z)(this,a),this.parser=rx,this.mixer=lx}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l,u){return l instanceof xa?[]:l}},{key:"postProcessor",value:function(r){Ip(r.parsedStyle.transform,r)}}])}(),Dx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"postProcessor",value:function(r){var s=r.parsedStyle.transformOrigin;s[0].unit===Bt.kPixels&&s[1].unit===Bt.kPixels?r.setOrigin(s[0].value,s[1].value):r.getGeometryBounds()}}])}(),Bx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"calculator",value:function(r,s,l,u){return l.value}},{key:"postProcessor",value:function(r){if(r.parentNode){var s=r.parentNode,l=s.renderable,u=s.sortable;l&&(l.dirty=!0),u&&(u.dirty=!0,u.dirtyReason=eu.Z_INDEX_CHANGED)}}}])}(),Fx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"update",value:function(r,s){var l=r.cx,u=l===void 0?0:l,h=r.cy,f=h===void 0?0:h,d=r.r,v=d===void 0?0:d;return{cx:u,cy:f,hwidth:v,hheight:v}}}])}(),zx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"update",value:function(r,s){var l=r.cx,u=l===void 0?0:l,h=r.cy,f=h===void 0?0:h,d=r.rx,v=d===void 0?0:d,p=r.ry,g=p===void 0?0:p;return{cx:u,cy:f,hwidth:v,hheight:g}}}])}(),Zx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"update",value:function(r){var s=r.x1,l=r.y1,u=r.x2,h=r.y2,f=Math.min(s,u),d=Math.max(s,u),v=Math.min(l,h),p=Math.max(l,h),g=d-f,m=p-v,b=g/2,E=m/2;return{cx:f+b,cy:v+E,hwidth:b,hheight:E}}}])}(),Wx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"update",value:function(r){var s=r.d,l=s.rect,u=l.x,h=l.y,f=l.width,d=l.height,v=f/2,p=d/2;return{cx:u+v,cy:h+p,hwidth:v,hheight:p}}}])}(),Gx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"update",value:function(r){if(r.points&&(0,za.Z)(r.points.points)){var s=r.points.points,l=Math.min.apply(Math,(0,J.Z)(s.map(function(m){return m[0]}))),u=Math.max.apply(Math,(0,J.Z)(s.map(function(m){return m[0]}))),h=Math.min.apply(Math,(0,J.Z)(s.map(function(m){return m[1]}))),f=Math.max.apply(Math,(0,J.Z)(s.map(function(m){return m[1]}))),d=u-l,v=f-h,p=d/2,g=v/2;return{cx:l+p,cy:h+g,hwidth:p,hheight:g}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),jx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"update",value:function(r,s){var l=r.x,u=l===void 0?0:l,h=r.y,f=h===void 0?0:h,d=r.src,v=r.width,p=v===void 0?0:v,g=r.height,m=g===void 0?0:g,b=p,E=m;return d&&!(0,xn.Z)(d)&&(b||(b=d.width,r.width=b),E||(E=d.height,r.height=E)),{cx:u+b/2,cy:f+E/2,hwidth:b/2,hheight:E/2}}}])}(),$x=function(){function a(n){(0,H.Z)(this,a),this.globalRuntime=n}return(0,j.Z)(a,[{key:"isReadyToMeasure",value:function(r,s){var l=r.text;return l}},{key:"update",value:function(r,s){var l,u=r.text,h=r.textAlign,f=h===void 0?"start":h,d=r.lineWidth,v=d===void 0?1:d,p=r.textBaseline,g=p===void 0?"alphabetic":p,m=r.dx,b=m===void 0?0:m,E=r.dy,w=E===void 0?0:E,S=r.x,M=S===void 0?0:S,C=r.y,T=C===void 0?0:C;if(!this.isReadyToMeasure(r,s))return r.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var k=(s==null||(l=s.ownerDocument)===null||l===void 0||(l=l.defaultView)===null||l===void 0?void 0:l.getConfig())||{},O=k.offscreenCanvas,A=this.globalRuntime.textService.measureText(u,r,O);r.metrics=A;var R=A.width,L=A.height,D=R/2,z=L/2,W=M+D;f==="center"||f==="middle"?W+=v/2-D:(f==="right"||f==="end")&&(W+=v-D*2);var G=T-z;return g==="middle"?G+=z:g==="top"||g==="hanging"?G+=z*2:g==="alphabetic"||(g==="bottom"||g==="ideographic")&&(G+=0),b&&(W+=b),w&&(G+=w),{cx:W,cy:G,hwidth:D,hheight:z}}}])}(),Hx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"update",value:function(r,s){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Vx=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"update",value:function(r,s){var l=r.x,u=l===void 0?0:l,h=r.y,f=h===void 0?0:h,d=r.width,v=d===void 0?0:d,p=r.height,g=p===void 0?0:p;return{cx:u+v/2,cy:f+g/2,hwidth:v/2,hheight:g/2}}}])}();function Dp(a){return!!a.type}var Kh=function(){function a(n){(0,H.Z)(this,a),this.eventPhase=a.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Gr,this.page=new Gr,this.canvas=new Gr,this.viewport=new Gr,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=n}return(0,j.Z)(a,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(En)}}])}(),qh=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.client=new Gr,r.movement=new Gr,r.offset=new Gr,r.global=new Gr,r.screen=new Gr,r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(s){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(s)}},{key:"initMouseEvent",value:function(){throw new Error(En)}}])}(Kh),Qh=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.width=0,r.height=0,r.isPrimary=!1,r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(qh),Hd=function(a){function n(){return(0,H.Z)(this,n),(0,$.Z)(this,n,arguments)}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(qh),xr=function(a){function n(r,s){var l;return(0,H.Z)(this,n),l=(0,$.Z)(this,n,[null]),l.type=r,l.detail=s,Object.assign(l,s),l}return(0,X.Z)(n,a),(0,j.Z)(n)}(Kh),Ar=new WeakMap,Ci=function(){function a(){(0,H.Z)(this,a),this.emitter=new Ct}return(0,j.Z)(a,[{key:"on",value:function(r,s,l){return this.addEventListener(r,s,l),this}},{key:"addEventListener",value:function(r,s,l){var u=!1,h=!1;if(go(l))u=l;else if(l){var f=l.capture;u=f===void 0?!1:f;var d=l.once;h=d===void 0?!1:d}u&&(r+="capture"),s=(0,re.Z)(s)?s:s.handleEvent;var v=(0,re.Z)(s)?void 0:s;return h?this.emitter.once(r,s,v):this.emitter.on(r,s,v),this}},{key:"off",value:function(r,s,l){return r?this.removeEventListener(r,s,l):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var r;(r=this.emitter)===null||r===void 0||r.removeAllListeners()}},{key:"removeEventListener",value:function(r,s,l){var u;if(!this.emitter)return this;var h=go(l)?l:l==null?void 0:l.capture;h&&(r+="capture"),s=(0,re.Z)(s)?s:(u=s)===null||u===void 0?void 0:u.handleEvent;var f=(0,re.Z)(s)?void 0:s;return this.emitter.off(r,s,f),this}},{key:"emit",value:function(r,s){this.dispatchEvent(new xr(r,s))}},{key:"dispatchEvent",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=Ar.get(this);if(!l){var u;this.document?l=this:this.defaultView?l=this.defaultView:l=(u=this.ownerDocument)===null||u===void 0?void 0:u.defaultView,l&&Ar.set(this,l)}if(l){if(r.manager=l.getEventService(),!r.manager)return!1;r.defaultPrevented=!1,r.path?r.path.length=0:r.page=[],s||(r.target=this),r.manager.dispatchEvent(r,r.type,s)}else this.emitter.emit(r.type,r);return!r.defaultPrevented}}])}(),Yn=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.shadow=!1,r.ownerDocument=null,r.isConnected=!1,r.baseURI="",r.childNodes=[],r.nodeType=0,r.nodeName="",r.nodeValue=null,r.parentNode=null,r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"textContent",get:function(){var s="";this.nodeName===lt.TEXT&&(s+=this.style.text);var l=(0,el.Z)(this.childNodes),u;try{for(l.s();!(u=l.n()).done;){var h=u.value;h.nodeName===lt.TEXT?s+=h.nodeValue:s+=h.textContent}}catch(f){l.e(f)}finally{l.f()}return s},set:function(s){var l=this;this.childNodes.slice().forEach(function(u){l.removeChild(u)}),this.nodeName===lt.TEXT&&(this.style.text="".concat(s))}},{key:"getRootNode",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(s):s.composed&&this.host?this.host.getRootNode(s):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(s){throw new Error(En)}},{key:"lookupNamespaceURI",value:function(s){throw new Error(En)}},{key:"lookupPrefix",value:function(s){throw new Error(En)}},{key:"normalize",value:function(){throw new Error(En)}},{key:"isEqualNode",value:function(s){return this===s}},{key:"isSameNode",value:function(s){return this.isEqualNode(s)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(s){if(s===this)return 0;for(var l=s,u=this,h=[l],f=[u];(d=l.parentNode)!==null&&d!==void 0?d:u.parentNode;){var d;l=l.parentNode?(h.push(l.parentNode),l.parentNode):l,u=u.parentNode?(f.push(u.parentNode),u.parentNode):u}if(l!==u)return n.DOCUMENT_POSITION_DISCONNECTED|n.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|n.DOCUMENT_POSITION_PRECEDING;var v=h.length>f.length?h:f,p=v===h?f:h;if(v[v.length-p.length]===p[0])return v===h?n.DOCUMENT_POSITION_CONTAINED_BY|n.DOCUMENT_POSITION_FOLLOWING:n.DOCUMENT_POSITION_CONTAINS|n.DOCUMENT_POSITION_PRECEDING;for(var g=v.length-p.length,m=p.length-1;m>=0;m--){var b=p[m],E=v[g+m];if(E!==b){var w=b.parentNode.childNodes;return w.indexOf(b)<w.indexOf(E)?p===h?n.DOCUMENT_POSITION_PRECEDING:n.DOCUMENT_POSITION_FOLLOWING:v===h?n.DOCUMENT_POSITION_PRECEDING:n.DOCUMENT_POSITION_FOLLOWING}}return n.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(s){return this.contains(s)}},{key:"contains",value:function(s){for(var l=s;l&&this!==l;)l=l.parentNode;return!!l}},{key:"getAncestor",value:function(s){for(var l=this;s>0&&l;)l=l.parentNode,s--;return l}},{key:"forEach",value:function(s){for(var l=[this];l.length>0;){var u=l.pop(),h=s(u);if(h===!1)break;for(var f=u.childNodes.length-1;f>=0;f--)l.push(u.childNodes[f])}}}],[{key:"isNode",value:function(s){return!!s.childNodes}}])}(Ci);Yn.DOCUMENT_POSITION_DISCONNECTED=1,Yn.DOCUMENT_POSITION_PRECEDING=2,Yn.DOCUMENT_POSITION_FOLLOWING=4,Yn.DOCUMENT_POSITION_CONTAINS=8,Yn.DOCUMENT_POSITION_CONTAINED_BY=16,Yn.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var Ux=2048,Yx=function(){function a(n,r){var s=this;(0,H.Z)(this,a),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Qe(),this.tmpVec3=Xt(),this.onPointerDown=function(l){var u=s.createPointerEvent(l);if(s.dispatchEvent(u,"pointerdown"),u.pointerType==="touch")s.dispatchEvent(u,"touchstart");else if(u.pointerType==="mouse"||u.pointerType==="pen"){var h=u.button===2;s.dispatchEvent(u,h?"rightdown":"mousedown")}var f=s.trackingData(l.pointerId);f.pressTargetsByButton[l.button]=u.composedPath(),s.freeEvent(u)},this.onPointerUp=function(l){var u=jn.now(),h=s.createPointerEvent(l,void 0,void 0,s.context.config.alwaysTriggerPointerEventOnCanvas?s.rootTarget:void 0);if(s.dispatchEvent(h,"pointerup"),h.pointerType==="touch")s.dispatchEvent(h,"touchend");else if(h.pointerType==="mouse"||h.pointerType==="pen"){var f=h.button===2;s.dispatchEvent(h,f?"rightup":"mouseup")}var d=s.trackingData(l.pointerId),v=s.findMountedTarget(d.pressTargetsByButton[l.button]),p=v;if(v&&!h.composedPath().includes(v)){for(var g=v;g&&!h.composedPath().includes(g);){if(h.currentTarget=g,s.notifyTarget(h,"pointerupoutside"),h.pointerType==="touch")s.notifyTarget(h,"touchendoutside");else if(h.pointerType==="mouse"||h.pointerType==="pen"){var m=h.button===2;s.notifyTarget(h,m?"rightupoutside":"mouseupoutside")}Yn.isNode(g)&&(g=g.parentNode)}delete d.pressTargetsByButton[l.button],p=g}if(p){var b,E=s.clonePointerEvent(h,"click");E.target=p,E.path=[],d.clicksByButton[l.button]||(d.clicksByButton[l.button]={clickCount:0,target:E.target,timeStamp:u});var w=s.context.renderingContext.root.ownerDocument.defaultView,S=d.clicksByButton[l.button];S.target===E.target&&u-S.timeStamp<w.getConfig().dblClickSpeed?++S.clickCount:S.clickCount=1,S.target=E.target,S.timeStamp=u,E.detail=S.clickCount,(b=h.detail)!==null&&b!==void 0&&b.preventClick||(!s.context.config.useNativeClickEvent&&(E.pointerType==="mouse"||E.pointerType==="touch")&&s.dispatchEvent(E,"click"),s.dispatchEvent(E,"pointertap")),s.freeEvent(E)}s.freeEvent(h)},this.onPointerMove=function(l){var u=s.createPointerEvent(l,void 0,void 0,s.context.config.alwaysTriggerPointerEventOnCanvas?s.rootTarget:void 0),h=u.pointerType==="mouse"||u.pointerType==="pen",f=s.trackingData(l.pointerId),d=s.findMountedTarget(f.overTargets);if(f.overTargets&&d!==u.target){var v=l.type==="mousemove"?"mouseout":"pointerout",p=s.createPointerEvent(l,v,d||void 0);if(s.dispatchEvent(p,"pointerout"),h&&s.dispatchEvent(p,"mouseout"),!u.composedPath().includes(d)){var g=s.createPointerEvent(l,"pointerleave",d||void 0);for(g.eventPhase=g.AT_TARGET;g.target&&!u.composedPath().includes(g.target);)g.currentTarget=g.target,s.notifyTarget(g),h&&s.notifyTarget(g,"mouseleave"),Yn.isNode(g.target)&&(g.target=g.target.parentNode);s.freeEvent(g)}s.freeEvent(p)}if(d!==u.target){var m=l.type==="mousemove"?"mouseover":"pointerover",b=s.clonePointerEvent(u,m);s.dispatchEvent(b,"pointerover"),h&&s.dispatchEvent(b,"mouseover");for(var E=d&&Yn.isNode(d)&&d.parentNode;E&&E!==(Yn.isNode(s.rootTarget)&&s.rootTarget.parentNode)&&E!==u.target;)E=E.parentNode;var w=!E||E===(Yn.isNode(s.rootTarget)&&s.rootTarget.parentNode);if(w){var S=s.clonePointerEvent(u,"pointerenter");for(S.eventPhase=S.AT_TARGET;S.target&&S.target!==d&&S.target!==(Yn.isNode(s.rootTarget)&&s.rootTarget.parentNode);)S.currentTarget=S.target,s.notifyTarget(S),h&&s.notifyTarget(S,"mouseenter"),Yn.isNode(S.target)&&(S.target=S.target.parentNode);s.freeEvent(S)}s.freeEvent(b)}s.dispatchEvent(u,"pointermove"),u.pointerType==="touch"&&s.dispatchEvent(u,"touchmove"),h&&(s.dispatchEvent(u,"mousemove"),s.cursor=s.getCursor(u.target)),f.overTargets=u.composedPath(),s.freeEvent(u)},this.onPointerOut=function(l){var u=s.trackingData(l.pointerId);if(u.overTargets){var h=l.pointerType==="mouse"||l.pointerType==="pen",f=s.findMountedTarget(u.overTargets),d=s.createPointerEvent(l,"pointerout",f||void 0);s.dispatchEvent(d),h&&s.dispatchEvent(d,"mouseout");var v=s.createPointerEvent(l,"pointerleave",f||void 0);for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==(Yn.isNode(s.rootTarget)&&s.rootTarget.parentNode);)v.currentTarget=v.target,s.notifyTarget(v),h&&s.notifyTarget(v,"mouseleave"),Yn.isNode(v.target)&&(v.target=v.target.parentNode);u.overTargets=null,s.freeEvent(d),s.freeEvent(v)}s.cursor=null},this.onPointerOver=function(l){var u=s.trackingData(l.pointerId),h=s.createPointerEvent(l),f=h.pointerType==="mouse"||h.pointerType==="pen";s.dispatchEvent(h,"pointerover"),f&&s.dispatchEvent(h,"mouseover"),h.pointerType==="mouse"&&(s.cursor=s.getCursor(h.target));var d=s.clonePointerEvent(h,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==(Yn.isNode(s.rootTarget)&&s.rootTarget.parentNode);)d.currentTarget=d.target,s.notifyTarget(d),f&&s.notifyTarget(d,"mouseenter"),Yn.isNode(d.target)&&(d.target=d.target.parentNode);u.overTargets=h.composedPath(),s.freeEvent(h),s.freeEvent(d)},this.onPointerUpOutside=function(l){var u=s.trackingData(l.pointerId),h=s.findMountedTarget(u.pressTargetsByButton[l.button]),f=s.createPointerEvent(l);if(h){for(var d=h;d;)f.currentTarget=d,s.notifyTarget(f,"pointerupoutside"),f.pointerType==="touch"||(f.pointerType==="mouse"||f.pointerType==="pen")&&s.notifyTarget(f,f.button===2?"rightupoutside":"mouseupoutside"),Yn.isNode(d)&&(d=d.parentNode);delete u.pressTargetsByButton[l.button]}s.freeEvent(f)},this.onWheel=function(l){var u=s.createWheelEvent(l);s.dispatchEvent(u),s.freeEvent(u)},this.onClick=function(l){if(s.context.config.useNativeClickEvent){var u=s.createPointerEvent(l);s.dispatchEvent(u),s.freeEvent(u)}},this.onPointerCancel=function(l){var u=s.createPointerEvent(l,void 0,void 0,s.context.config.alwaysTriggerPointerEventOnCanvas?s.rootTarget:void 0);s.dispatchEvent(u),s.freeEvent(u)},this.globalRuntime=n,this.context=r}return(0,j.Z)(a,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var r=this.context.contextService.getBoundingClientRect(),s=1,l=1,u=this.context.contextService.getDomElement();if(u&&r){var h=u.offsetWidth,f=u.offsetHeight;h&&f&&(s=r.width/h,l=r.height/f)}return{scaleX:s,scaleY:l,bbox:r}}},{key:"client2Viewport",value:function(r){var s=this.getScale(),l=s.scaleX,u=s.scaleY,h=s.bbox;return new Gr((r.x-((h==null?void 0:h.left)||0))/l,(r.y-((h==null?void 0:h.top)||0))/u)}},{key:"viewport2Client",value:function(r){var s=this.getScale(),l=s.scaleX,u=s.scaleY,h=s.bbox;return new Gr((r.x+((h==null?void 0:h.left)||0))*l,(r.y+((h==null?void 0:h.top)||0))*u)}},{key:"viewport2Canvas",value:function(r){var s=r.x,l=r.y,u=this.rootTarget.defaultView,h=u.getCamera(),f=this.context.config,d=f.width,v=f.height,p=h.getPerspectiveInverse(),g=h.getWorldTransform(),m=qt(this.tmpMatrix,g,p),b=Ut(this.tmpVec3,s/d*2-1,(1-l/v)*2-1,0);return Ve(b,b,m),new Gr(b[0],b[1])}},{key:"canvas2Viewport",value:function(r){var s=this.rootTarget.defaultView,l=s.getCamera(),u=l.getPerspective(),h=l.getViewTransform(),f=qt(this.tmpMatrix,u,h),d=Ut(this.tmpVec3,r.x,r.y,0);Ve(this.tmpVec3,this.tmpVec3,f);var v=this.context.config,p=v.width,g=v.height;return new Gr((d[0]+1)/2*p,(1-(d[1]+1)/2)*g)}},{key:"setPickHandler",value:function(r){this.pickHandler=r}},{key:"addEventMapping",value:function(r,s){this.mappingTable[r]||(this.mappingTable[r]=[]),this.mappingTable[r].push({fn:s,priority:0}),this.mappingTable[r].sort(function(l,u){return l.priority-u.priority})}},{key:"mapEvent",value:function(r){if(this.rootTarget){var s=this.mappingTable[r.type];if(s)for(var l=0,u=s.length;l<u;l++)s[l].fn(r);else console.warn("[EventService]: Event mapping not defined for ".concat(r.type))}}},{key:"dispatchEvent",value:function(r,s,l){if(!l)r.propagationStopped=!1,r.propagationImmediatelyStopped=!1,this.propagate(r,s);else{r.eventPhase=r.AT_TARGET;var u=this.rootTarget.defaultView||null;r.currentTarget=u,this.notifyListeners(r,s)}}},{key:"propagate",value:function(r,s){if(r.target){var l=r.composedPath();r.eventPhase=r.CAPTURING_PHASE;for(var u=l.length-1;u>=1;u--)if(r.currentTarget=l[u],this.notifyTarget(r,s),r.propagationStopped||r.propagationImmediatelyStopped)return;if(r.eventPhase=r.AT_TARGET,r.currentTarget=r.target,this.notifyTarget(r,s),!(r.propagationStopped||r.propagationImmediatelyStopped)){var h=l.indexOf(r.currentTarget);r.eventPhase=r.BUBBLING_PHASE;for(var f=h+1;f<l.length;f++)if(r.currentTarget=l[f],this.notifyTarget(r,s),r.propagationStopped||r.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(r){var s=[r],l=this.rootTarget.defaultView||null;if(l&&l===r)return s.unshift(l.document),s;for(var u=0;u<Ux&&r!==this.rootTarget;u++)Yn.isNode(r)&&r.parentNode&&(s.push(r.parentNode),r=r.parentNode);return l&&s.push(l),s}},{key:"hitTest",value:function(r){var s=r.viewportX,l=r.viewportY,u=this.context.config,h=u.width,f=u.height,d=u.disableHitTesting;return s<0||l<0||s>h||l>f?null:!d&&this.pickHandler(r)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(r,s){var l,u=s==null?void 0:s.target;if((l=u)!==null&&l!==void 0&&l.shadowRoot&&(u=s.composedPath()[0]),u){if(u===r)return!0;if(r&&r.contains)return r.contains(u)}return s!=null&&s.composedPath?s.composedPath().indexOf(r)>-1:!1}},{key:"getExistedHTML",value:function(r){if(r.nativeEvent.composedPath)for(var s=0,l=r.nativeEvent.composedPath();s<l.length;s++){var u=l[s],h=this.nativeHTMLMap.get(u);if(h)return h}return null}},{key:"pickTarget",value:function(r){return this.hitTest({clientX:r.clientX,clientY:r.clientY,viewportX:r.viewportX,viewportY:r.viewportY,x:r.canvasX,y:r.canvasY})}},{key:"createPointerEvent",value:function(r,s,l,u){var h=this.allocateEvent(Qh);this.copyPointerData(r,h),this.copyMouseData(r,h),this.copyData(r,h),h.nativeEvent=r.nativeEvent,h.originalEvent=r;var f=this.getExistedHTML(h),d=this.context.contextService.getDomElement();return h.target=l!=null?l:f||this.isNativeEventFromCanvas(d,h.nativeEvent)&&this.pickTarget(h)||u,typeof s=="string"&&(h.type=s),h}},{key:"createWheelEvent",value:function(r){var s=this.allocateEvent(Hd);this.copyWheelData(r,s),this.copyMouseData(r,s),this.copyData(r,s),s.nativeEvent=r.nativeEvent,s.originalEvent=r;var l=this.getExistedHTML(s),u=this.context.contextService.getDomElement();return s.target=l||this.isNativeEventFromCanvas(u,s.nativeEvent)&&this.pickTarget(s),s}},{key:"trackingData",value:function(r){return this.mappingState.trackingData[r]||(this.mappingState.trackingData[r]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[r]}},{key:"cloneWheelEvent",value:function(r){var s=this.allocateEvent(Hd);return s.nativeEvent=r.nativeEvent,s.originalEvent=r.originalEvent,this.copyWheelData(r,s),this.copyMouseData(r,s),this.copyData(r,s),s.target=r.target,s.path=r.composedPath().slice(),s.type=r.type,s}},{key:"clonePointerEvent",value:function(r,s){var l=this.allocateEvent(Qh);return l.nativeEvent=r.nativeEvent,l.originalEvent=r.originalEvent,this.copyPointerData(r,l),this.copyMouseData(r,l),this.copyData(r,l),l.target=r.target,l.path=r.composedPath().slice(),l.type=s!=null?s:l.type,l}},{key:"copyPointerData",value:function(r,s){s.pointerId=r.pointerId,s.width=r.width,s.height=r.height,s.isPrimary=r.isPrimary,s.pointerType=r.pointerType,s.pressure=r.pressure,s.tangentialPressure=r.tangentialPressure,s.tiltX=r.tiltX,s.tiltY=r.tiltY,s.twist=r.twist}},{key:"copyMouseData",value:function(r,s){s.altKey=r.altKey,s.button=r.button,s.buttons=r.buttons,s.ctrlKey=r.ctrlKey,s.metaKey=r.metaKey,s.shiftKey=r.shiftKey,s.client.copyFrom(r.client),s.movement.copyFrom(r.movement),s.canvas.copyFrom(r.canvas),s.screen.copyFrom(r.screen),s.global.copyFrom(r.global),s.offset.copyFrom(r.offset)}},{key:"copyWheelData",value:function(r,s){s.deltaMode=r.deltaMode,s.deltaX=r.deltaX,s.deltaY=r.deltaY,s.deltaZ=r.deltaZ}},{key:"copyData",value:function(r,s){s.isTrusted=r.isTrusted,s.timeStamp=jn.now(),s.type=r.type,s.detail=r.detail,s.view=r.view,s.page.copyFrom(r.page),s.viewport.copyFrom(r.viewport)}},{key:"allocateEvent",value:function(r){this.eventPool.has(r)||this.eventPool.set(r,[]);var s=this.eventPool.get(r).pop()||new r(this);return s.eventPhase=s.NONE,s.currentTarget=null,s.path=[],s.target=null,s}},{key:"freeEvent",value:function(r){if(r.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var s=r.constructor;this.eventPool.has(s)||this.eventPool.set(s,[]),this.eventPool.get(s).push(r)}},{key:"notifyTarget",value:function(r,s){s=s!=null?s:r.type;var l=r.eventPhase===r.CAPTURING_PHASE||r.eventPhase===r.AT_TARGET?"".concat(s,"capture"):s;this.notifyListeners(r,l),r.eventPhase===r.AT_TARGET&&this.notifyListeners(r,s)}},{key:"notifyListeners",value:function(r,s){var l=r.currentTarget.emitter,u=l._events[s];if(u)if("fn"in u)u.once&&l.removeListener(s,u.fn,void 0,!0),u.fn.call(r.currentTarget||u.context,r);else for(var h=0;h<u.length&&!r.propagationImmediatelyStopped;h++)u[h].once&&l.removeListener(s,u[h].fn,void 0,!0),u[h].fn.call(r.currentTarget||u[h].context,r)}},{key:"findMountedTarget",value:function(r){if(!r)return null;for(var s=r[r.length-1],l=r.length-2;l>=0;l--){var u=r[l];if(u===this.rootTarget||Yn.isNode(u)&&u.parentNode===s)s=r[l];else break}return s}},{key:"getCursor",value:function(r){for(var s=r;s;){var l=So(s)&&s.getAttribute("cursor");if(l)return l;s=Yn.isNode(s)&&s.parentNode}}}])}(),Jh=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"getOrCreateCanvas",value:function(r,s){if(this.canvas)return this.canvas;if(r||Mt.offscreenCanvas)this.canvas=r||Mt.offscreenCanvas,this.context=this.canvas.getContext("2d",(0,gt.Z)({willReadFrequently:!0},s));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",(0,gt.Z)({willReadFrequently:!0},s)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(l){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",(0,gt.Z)({willReadFrequently:!0},s))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(r,s){return this.context?this.context:(this.getOrCreateCanvas(r,s),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch(r){}try{return document.createElement("canvas")}catch(r){}return null}}])}(),nc=function(a){return a[a.CAMERA_CHANGED=0]="CAMERA_CHANGED",a[a.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",a[a.NONE=2]="NONE",a}({}),Xx=function(){function a(n,r){(0,H.Z)(this,a),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Mi,initAsync:new Px,dirtycheck:new Xh,cull:new Xh,beginFrame:new Mi,beforeRender:new Mi,render:new Mi,afterRender:new Mi,endFrame:new Mi,destroy:new Mi,pick:new Rx,pickSync:new Xh,pointerDown:new Mi,pointerUp:new Mi,pointerMove:new Mi,pointerOut:new Mi,pointerOver:new Mi,pointerWheel:new Mi,pointerCancel:new Mi,click:new Mi},this.globalRuntime=n,this.context=r}return(0,j.Z)(a,[{key:"init",value:function(r){var s=this,l=(0,gt.Z)((0,gt.Z)({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(u){u.apply(l,s.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,r()):this.hooks.initAsync.promise().then(function(){s.inited=!0,r()}).catch(function(u){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var r=this.context.config.renderer,s=r.getConfig(),l=s.enableDirtyRectangleRendering;return!l||this.context.renderingContext.renderReasons.has(nc.CAMERA_CHANGED)}},{key:"render",value:function(r,s,l){var u=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var h=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(h.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),h.renderReasons.size&&this.inited){h.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var f=h.renderReasons.size===1&&h.renderReasons.has(nc.CAMERA_CHANGED),d=!r.disableRenderHooks||!(r.disableRenderHooks&&f);d&&this.renderDisplayObject(h.root,r,h),this.hooks.beginFrame.call(s),d&&h.renderListCurrentFrame.forEach(function(v){u.hooks.beforeRender.call(v),u.hooks.render.call(v),u.hooks.afterRender.call(v)}),this.hooks.endFrame.call(s),h.renderListCurrentFrame=[],h.renderReasons.clear(),l()}}},{key:"renderDisplayObject",value:function(r,s,l){var u=this,h=s.renderer.getConfig(),f=h.enableDirtyCheck,d=h.enableCulling;function v(w){var S=w.renderable,M=w.sortable,C=f?S.dirty||l.dirtyRectangleRenderingDisabled?w:null:w;if(C){var T=d?u.hooks.cull.call(C,u.context.camera):C;T&&(u.stats.rendered+=1,l.renderListCurrentFrame.push(T))}S.dirty=!1,M.renderOrder=u.zIndexCounter,u.zIndexCounter+=1,u.stats.total+=1,M.dirty&&(u.sort(w,M),M.dirty=!1,M.dirtyChildren=[],M.dirtyReason=void 0)}for(var p=[r];p.length>0;){var g,m=p.pop();v(m);for(var b=((g=m.sortable)===null||g===void 0||(g=g.sorted)===null||g===void 0?void 0:g.length)>0?m.sortable.sorted:m.childNodes,E=b.length-1;E>=0;E--)p.push(b[E])}}},{key:"sort",value:function(r,s){var l,u;(s==null||(l=s.sorted)===null||l===void 0?void 0:l.length)>0&&s.dirtyReason!==eu.Z_INDEX_CHANGED?s.dirtyChildren.forEach(function(h){var f=s.sorted.indexOf(h);f>-1&&s.sorted.splice(f,1);var d=r.childNodes.indexOf(h);if(d>-1)if(s.sorted.length===0)s.sorted.push(h);else{var v=Sx(s.sorted,h);s.sorted.splice(v,0,h)}}):s.sorted=r.childNodes.slice().sort(Op),((u=s.sorted)===null||u===void 0?void 0:u.length)>0&&r.childNodes.filter(function(h){return h.parsedStyle.zIndex}).length===0&&(s.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(nc.DISPLAY_OBJECT_CHANGED)}}])}(),Kx=/\[\s*(.*)=(.*)\s*\]/,Bp=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"selectOne",value:function(r,s){var l=this;if(r.startsWith("."))return s.find(function(d){return((d==null?void 0:d.classList)||[]).indexOf(l.getIdOrClassname(r))>-1});if(r.startsWith("#"))return s.find(function(d){return d.id===l.getIdOrClassname(r)});if(r.startsWith("[")){var u=this.getAttribute(r),h=u.name,f=u.value;return h?s.find(function(d){return s!==d&&(h==="name"?d.name===f:l.attributeToString(d,h)===f)}):null}return s.find(function(d){return s!==d&&d.nodeName===r})}},{key:"selectAll",value:function(r,s){var l=this;if(r.startsWith("."))return s.findAll(function(d){return s!==d&&((d==null?void 0:d.classList)||[]).indexOf(l.getIdOrClassname(r))>-1});if(r.startsWith("#"))return s.findAll(function(d){return s!==d&&d.id===l.getIdOrClassname(r)});if(r.startsWith("[")){var u=this.getAttribute(r),h=u.name,f=u.value;return h?s.findAll(function(d){return s!==d&&(h==="name"?d.name===f:l.attributeToString(d,h)===f)}):[]}return s.findAll(function(d){return s!==d&&d.nodeName===r})}},{key:"is",value:function(r,s){if(r.startsWith("."))return s.className===this.getIdOrClassname(r);if(r.startsWith("#"))return s.id===this.getIdOrClassname(r);if(r.startsWith("[")){var l=this.getAttribute(r),u=l.name,h=l.value;return u==="name"?s.name===h:this.attributeToString(s,u)===h}return s.nodeName===r}},{key:"getIdOrClassname",value:function(r){return r.substring(1)}},{key:"getAttribute",value:function(r){var s=r.match(Kx),l="",u="";return s&&s.length>2&&(l=s[1].replace(/"/g,""),u=s[2].replace(/"/g,"")),{name:l,value:u}}},{key:"attributeToString",value:function(r,s){if(!r.getAttribute)return"";var l=r.getAttribute(s);return(0,le.Z)(l)?"":l.toString?l.toString():""}}])}(),De=function(a){return a.ATTR_MODIFIED="DOMAttrModified",a.INSERTED="DOMNodeInserted",a.MOUNTED="DOMNodeInsertedIntoDocument",a.REMOVED="removed",a.UNMOUNTED="DOMNodeRemovedFromDocument",a.REPARENT="reparent",a.DESTROY="destroy",a.BOUNDS_CHANGED="bounds-changed",a.CULLED="culled",a}({}),bs=function(a){function n(r,s,l,u,h,f,d,v){var p;return(0,H.Z)(this,n),p=(0,$.Z)(this,n,[null]),p.relatedNode=s,p.prevValue=l,p.newValue=u,p.attrName=h,p.attrChange=f,p.prevParsedValue=d,p.newParsedValue=v,p.type=r,p}return(0,X.Z)(n,a),(0,j.Z)(n)}(Kh);bs.ADDITION=2,bs.MODIFICATION=1,bs.REMOVAL=3;function Fp(a){var n=a.renderable;n&&(n.renderBoundsDirty=!0,n.boundsDirty=!0)}var zp=new bs(De.REPARENT,null,"","","",0,"",""),Zp=$f(),tf=Xt(),qx=pe(1,1,1),Qx=Qe(),Jx=$f(),ea=Xt(),rc=Qe(),Mo=Tr(),tE=Xt(),eE=Tr(),nE=Xt(),ic=Xt(),Co=Xt(),ef=Qe(),Wp=Tr(),Gp=Tr(),nf=Tr(),Vd={affectChildren:!0},rE=function(){function a(n){(0,H.Z)(this,a),this.pendingEvents=new Map,this.boundsChangedEvent=new xr(De.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=n}return(0,j.Z)(a,[{key:"matches",value:function(r,s){return this.runtime.sceneGraphSelector.is(r,s)}},{key:"querySelector",value:function(r,s){return this.runtime.sceneGraphSelector.selectOne(r,s)}},{key:"querySelectorAll",value:function(r,s){return this.runtime.sceneGraphSelector.selectAll(r,s)}},{key:"attach",value:function(r,s,l){var u,h=!1;r.parentNode&&(h=r.parentNode!==s,this.detach(r));var f=r.nodeName===lt.FRAGMENT,d=$n(s);r.parentNode=s;var v=f?r.childNodes:[r];(0,tn.Z)(l)?v.forEach(function(b){s.childNodes.splice(l,0,b),b.parentNode=s}):v.forEach(function(b){s.childNodes.push(b),b.parentNode=s});var p=s,g=p.sortable;if((g!=null&&(u=g.sorted)!==null&&u!==void 0&&u.length||g.dirty||r.parsedStyle.zIndex)&&(g.dirtyChildren.indexOf(r)===-1&&g.dirtyChildren.push(r),g.dirty=!0,g.dirtyReason=eu.ADDED),!d){if(f)this.dirtifyFragment(r);else{var m=r.transformable;m&&this.dirtifyWorld(r,m)}h&&r.dispatchEvent(zp)}}},{key:"detach",value:function(r){var s,l;if(r.parentNode){var u=r.transformable,h=r.parentNode,f=h.sortable;(f!=null&&(s=f.sorted)!==null&&s!==void 0&&s.length||(l=r.style)!==null&&l!==void 0&&l.zIndex)&&(f.dirtyChildren.indexOf(r)===-1&&f.dirtyChildren.push(r),f.dirty=!0,f.dirtyReason=eu.REMOVED);var d=r.parentNode.childNodes.indexOf(r);d>-1&&r.parentNode.childNodes.splice(d,1),u&&this.dirtifyWorld(r,u),r.parentNode=null}}},{key:"getOrigin",value:function(r){return r.getGeometryBounds(),r.transformable.origin}},{key:"setOrigin",value:function(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof s=="number"&&(s=[s,l,u]);var h=r.transformable;if(!(s[0]===h.origin[0]&&s[1]===h.origin[1]&&s[2]===h.origin[2])){var f=h.origin;f[0]=s[0],f[1]=s[1],f[2]=s[2]||0,this.dirtifyLocal(r,h)}}},{key:"rotate",value:function(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof s=="number"&&(s=pe(s,l,u));var h=r.transformable;if(r.parentNode===null||!r.parentNode.transformable)this.rotateLocal(r,s);else{var f=Mo;zc(f,s[0],s[1],s[2]);var d=this.getRotation(r),v=this.getRotation(r.parentNode);Qu(nf,v),Ei(nf,nf),Ds(f,nf,f),Ds(h.localRotation,f,d),Ju(h.localRotation,h.localRotation),this.dirtifyLocal(r,h)}}},{key:"rotateLocal",value:function(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof s=="number"&&(s=pe(s,l,u));var h=r.transformable;zc(Gp,s[0],s[1],s[2]),Yo(h.localRotation,h.localRotation,Gp),this.dirtifyLocal(r,h)}},{key:"setEulerAngles",value:function(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof s=="number"&&(s=pe(s,l,u));var h=r.transformable;if(r.parentNode===null||!r.parentNode.transformable)this.setLocalEulerAngles(r,s);else{zc(h.localRotation,s[0],s[1],s[2]);var f=this.getRotation(r.parentNode);Qu(Wp,Ei(Mo,f)),Yo(h.localRotation,h.localRotation,Wp),this.dirtifyLocal(r,h)}}},{key:"setLocalEulerAngles",value:function(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof s=="number"&&(s=pe(s,l,u));var f=r.transformable;zc(f.localRotation,s[0],s[1],s[2]),h&&this.dirtifyLocal(r,f)}},{key:"translateLocal",value:function(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof s=="number"&&(s=pe(s,l,u));var h=r.transformable;Ns(s,tf)||(Wn(s,s,h.localRotation),oe(h.localPosition,h.localPosition,s),this.dirtifyLocal(r,h))}},{key:"setPosition",value:function(r,s){var l,u=r.transformable;if(Co[0]=s[0],Co[1]=s[1],Co[2]=(l=s[2])!==null&&l!==void 0?l:0,!Ns(this.getPosition(r),Co)){if(bt(u.position,Co),r.parentNode===null||!r.parentNode.transformable)bt(u.localPosition,Co);else{var h=r.parentNode.transformable;Na(ef,h.worldTransform),Di(ef,ef),Ve(u.localPosition,Co,ef)}this.dirtifyLocal(r,u)}}},{key:"setLocalPosition",value:function(r,s){var l,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=r.transformable;ic[0]=s[0],ic[1]=s[1],ic[2]=(l=s[2])!==null&&l!==void 0?l:0,!Ns(h.localPosition,ic)&&(bt(h.localPosition,ic),u&&this.dirtifyLocal(r,h))}},{key:"scaleLocal",value:function(r,s){var l,u=r.transformable;ce(u.localScale,u.localScale,Ut(ea,s[0],s[1],(l=s[2])!==null&&l!==void 0?l:1)),this.dirtifyLocal(r,u)}},{key:"setLocalScale",value:function(r,s){var l,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=r.transformable;Ut(ea,s[0],s[1],(l=s[2])!==null&&l!==void 0?l:h.localScale[2]),!Ns(ea,h.localScale)&&(bt(h.localScale,ea),u&&this.dirtifyLocal(r,h))}},{key:"translate",value:function(r,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof s=="number"&&(s=Ut(ea,s,l,u)),!Ns(s,tf)&&(oe(ea,this.getPosition(r),s),this.setPosition(r,ea))}},{key:"setRotation",value:function(r,s,l,u,h){var f=r.transformable;if(typeof s=="number"&&(s=m1(s,l,u,h)),r.parentNode===null||!r.parentNode.transformable)this.setLocalRotation(r,s);else{var d=this.getRotation(r.parentNode);Qu(Mo,d),Ei(Mo,Mo),Ds(f.localRotation,Mo,s),Ju(f.localRotation,f.localRotation),this.dirtifyLocal(r,f)}}},{key:"setLocalRotation",value:function(r,s,l,u,h){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof s=="number"&&(s=o0(Mo,s,l,u,h));var d=r.transformable;Qu(d.localRotation,s),f&&this.dirtifyLocal(r,d)}},{key:"setLocalSkew",value:function(r,s,l){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof s=="number"&&(s=th(Jx,s,l));var h=r.transformable;S1(h.localSkew,s),u&&this.dirtifyLocal(r,h)}},{key:"dirtifyLocal",value:function(r,s){$n(r)||s.localDirtyFlag||(s.localDirtyFlag=!0,s.dirtyFlag||this.dirtifyWorld(r,s))}},{key:"dirtifyWorld",value:function(r,s){s.dirtyFlag||this.unfreezeParentToRoot(r),this.dirtifyWorldInternal(r,s),this.dirtifyToRoot(r,!0)}},{key:"dirtifyFragment",value:function(r){var s=r.transformable;s&&(s.frozen=!1,s.dirtyFlag=!0,s.localDirtyFlag=!0);var l=r.renderable;l&&(l.renderBoundsDirty=!0,l.boundsDirty=!0,l.dirty=!0);for(var u=r.childNodes.length,h=0;h<u;h++)this.dirtifyFragment(r.childNodes[h]);r.nodeName===lt.FRAGMENT&&this.pendingEvents.set(r,!1)}},{key:"triggerPendingEvents",value:function(){var r=this,s=new Set,l=function(h,f){!h.isConnected||s.has(h)||h.nodeName===lt.FRAGMENT||(r.boundsChangedEvent.detail=f,r.boundsChangedEvent.target=h,h.isMutationObserved?h.dispatchEvent(r.boundsChangedEvent):h.ownerDocument.defaultView.dispatchEvent(r.boundsChangedEvent,!0),s.add(h))};this.pendingEvents.forEach(function(u,h){h.nodeName!==lt.FRAGMENT&&(Vd.affectChildren=u,u?h.forEach(function(f){l(f,Vd)}):l(h,Vd))}),s.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"dirtifyToRoot",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=r;for(l.renderable&&(l.renderable.dirty=!0);l;)Fp(l),l=l.parentNode;s&&r.forEach(function(u){Fp(u)}),this.informDependentDisplayObjects(r),this.pendingEvents.set(r,s)}},{key:"updateDisplayObjectDependency",value:function(r,s,l,u){if(s&&s!==l){var h=this.displayObjectDependencyMap.get(s);if(h&&h[r]){var f=h[r].indexOf(u);h[r].splice(f,1)}}if(l){var d=this.displayObjectDependencyMap.get(l);d||(this.displayObjectDependencyMap.set(l,{}),d=this.displayObjectDependencyMap.get(l)),d[r]||(d[r]=[]),d[r].push(u)}}},{key:"informDependentDisplayObjects",value:function(r){var s=this,l=this.displayObjectDependencyMap.get(r);l&&Object.keys(l).forEach(function(u){l[u].forEach(function(h){s.dirtifyToRoot(h,!0),h.dispatchEvent(new bs(De.ATTR_MODIFIED,h,s,s,u,bs.MODIFICATION,s,s)),h.isCustomElement&&h.isConnected&&h.attributeChangedCallback&&h.attributeChangedCallback(u,s,s)})})}},{key:"getPosition",value:function(r){var s=r.transformable;return Ho(s.position,this.getWorldTransform(r,s))}},{key:"getRotation",value:function(r){var s=r.transformable;return Fl(s.rotation,this.getWorldTransform(r,s))}},{key:"getScale",value:function(r){var s=r.transformable;return hs(s.scaling,this.getWorldTransform(r,s))}},{key:"getWorldTransform",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.transformable;return!s.localDirtyFlag&&!s.dirtyFlag||(r.parentNode&&r.parentNode.transformable&&this.getWorldTransform(r.parentNode),this.sync(r,s)),s.worldTransform}},{key:"getLocalPosition",value:function(r){return r.transformable.localPosition}},{key:"getLocalRotation",value:function(r){return r.transformable.localRotation}},{key:"getLocalScale",value:function(r){return r.transformable.localScale}},{key:"getLocalSkew",value:function(r){return r.transformable.localSkew}},{key:"calcLocalTransform",value:function(r){var s=r.localSkew[0]!==0||r.localSkew[1]!==0;if(s){ho(r.localTransform,r.localRotation,r.localPosition,pe(1,1,1),r.origin),(r.localSkew[0]!==0||r.localSkew[1]!==0)&&(ni(rc),rc[4]=Math.tan(r.localSkew[0]),rc[1]=Math.tan(r.localSkew[1]),qt(r.localTransform,r.localTransform,rc));var l=ho(rc,o0(Mo,0,0,0,1),Ut(ea,1,1,1),r.localScale,r.origin);qt(r.localTransform,r.localTransform,l)}else{var u=r.localTransform,h=r.localPosition,f=r.localRotation,d=r.localScale,v=r.origin,p=h[0]!==0||h[1]!==0||h[2]!==0,g=f[3]!==1||f[0]!==0||f[1]!==0||f[2]!==0,m=d[0]!==1||d[1]!==1||d[2]!==1,b=v[0]!==0||v[1]!==0||v[2]!==0;!g&&!m&&!b?p?La(u,h):ni(u):ho(u,f,h,d,v)}}},{key:"getLocalTransform",value:function(r){var s=r.transformable;return s.localDirtyFlag&&(this.calcLocalTransform(s),s.localDirtyFlag=!1),s.localTransform}},{key:"setLocalTransform",value:function(r,s){var l=Ho(tE,s),u=Fl(eE,s),h=hs(nE,s);this.setLocalScale(r,h,!1),this.setLocalPosition(r,l,!1),this.setLocalRotation(r,u,void 0,void 0,void 0,!1),this.dirtifyLocal(r,r.transformable)}},{key:"resetLocalTransform",value:function(r){this.setLocalScale(r,qx,!1),this.setLocalPosition(r,tf,!1),this.setLocalEulerAngles(r,tf,void 0,void 0,!1),this.setLocalSkew(r,Zp,void 0,!1),this.dirtifyLocal(r,r.transformable)}},{key:"getTransformedGeometryBounds",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=arguments.length>2?arguments[2]:void 0,u=this.getGeometryBounds(r,s);if(!en.isEmpty(u)){var h=l||new en;return h.setFromTransformedAABB(u,this.getWorldTransform(r)),h}return null}},{key:"getGeometryBounds",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=r,u=l.geometry;u.dirty&&Mt.styleValueRegistry.updateGeometry(r);var h=s?u.renderBounds:u.contentBounds||null;return h||new en}},{key:"getBounds",value:function(r){var s=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=r,h=u.renderable;if(!h.boundsDirty&&!l&&h.bounds)return h.bounds;if(!h.renderBoundsDirty&&l&&h.renderBounds)return h.renderBounds;var f=l?h.renderBounds:h.bounds,d=this.getTransformedGeometryBounds(r,l,f),v=r.childNodes;if(v.forEach(function(m){var b=s.getBounds(m,l);b&&(d?d.add(b):(d=f||new en,d.update(b.center,b.halfExtents)))}),d||(d=new en),l){var p=Ap(r);if(p){var g=p.parsedStyle.clipPath.getBounds(l);d?g&&(d=g.intersection(d)):d.update(g.center,g.halfExtents)}}return l?(h.renderBounds=d,h.renderBoundsDirty=!1):(h.bounds=d,h.boundsDirty=!1),d}},{key:"getLocalBounds",value:function(r){if(r.parentNode){var s=Qx;r.parentNode.transformable&&(s=Di(rc,this.getWorldTransform(r.parentNode)));var l=this.getBounds(r);if(!en.isEmpty(l)){var u=new en;return u.setFromTransformedAABB(l,s),u}}return this.getBounds(r)}},{key:"getBoundingClientRect",value:function(r){var s,l,u=this.getGeometryBounds(r);en.isEmpty(u)||(l=new en,l.setFromTransformedAABB(u,this.getWorldTransform(r)));var h=(s=r.ownerDocument)===null||s===void 0||(s=s.defaultView)===null||s===void 0?void 0:s.getContextService().getBoundingClientRect();if(l){var f=l.getMin(),d=(0,V.Z)(f,2),v=d[0],p=d[1],g=l.getMax(),m=(0,V.Z)(g,2),b=m[0],E=m[1];return new yo(v+((h==null?void 0:h.left)||0),p+((h==null?void 0:h.top)||0),b-v,E-p)}return new yo((h==null?void 0:h.left)||0,(h==null?void 0:h.top)||0,0,0)}},{key:"dirtifyWorldInternal",value:function(r,s){var l=this;if(!s.dirtyFlag){s.dirtyFlag=!0,s.frozen=!1,r.childNodes.forEach(function(f){var d=f.transformable;d.dirtyFlag||l.dirtifyWorldInternal(f,d)});var u=r,h=u.renderable;h&&(h.renderBoundsDirty=!0,h.boundsDirty=!0,h.dirty=!0)}}},{key:"syncHierarchy",value:function(r){var s=r.transformable;if(!s.frozen){s.frozen=!0,(s.localDirtyFlag||s.dirtyFlag)&&this.sync(r,s);for(var l=r.childNodes,u=0;u<l.length;u++)this.syncHierarchy(l[u])}}},{key:"sync",value:function(r,s){if(s.localDirtyFlag&&(this.calcLocalTransform(s),s.localDirtyFlag=!1),s.dirtyFlag){var l=r.parentNode,u=l&&l.transformable;l===null||!u?Na(s.worldTransform,s.localTransform):qt(s.worldTransform,u.worldTransform,s.localTransform),s.dirtyFlag=!1}}},{key:"unfreezeParentToRoot",value:function(r){for(var s=r.parentNode;s;){var l=s.transformable;l&&(l.frozen=!1),s=s.parentNode}}}])}(),dl={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},jp=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,iE=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,aE=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,sE=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,oE=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,lE=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,cE=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,uE=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,hE=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,fE=new RegExp("".concat(iE.source,"|").concat(sE.source,"|").concat(lE.source,"|").concat(uE.source)),dE=new RegExp("".concat(aE.source,"|").concat(oE.source,"|").concat(cE.source,"|").concat(hE.source)),vE=function(){function a(n){var r=this;(0,H.Z)(this,a),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(s,l){return r.isBreakingSpace(l)?!1:!!(s&&(dE.exec(l)||fE.exec(s)))},this.trimByKinsokuShorui=function(s){var l=(0,J.Z)(s),u=l[l.length-2];if(!u)return s;var h=u[u.length-1];return l[l.length-2]=u.slice(0,-1),l[l.length-1]=h+l[l.length-1],l},this.runtime=n}return(0,j.Z)(a,[{key:"measureFont",value:function(r,s){if(this.fontMetricsCache[r])return this.fontMetricsCache[r];var l={ascent:0,descent:0,fontSize:0},u=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(s),h=this.runtime.offscreenCanvasCreator.getOrCreateContext(s,{willReadFrequently:!0});h.font=r;var f=dl.MetricsString+dl.BaselineSymbol,d=Math.ceil(h.measureText(f).width),v=Math.ceil(h.measureText(dl.BaselineSymbol).width),p=dl.HeightMultiplier*v;v=v*dl.BaselineMultiplier|0,u.width=d,u.height=p,h.fillStyle="#f00",h.fillRect(0,0,d,p),h.font=r,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(f,0,v);var g=h.getImageData(0,0,d||1,p||1).data,m=g.length,b=d*4,E=0,w=0,S=!1;for(E=0;E<v;++E){for(var M=0;M<b;M+=4)if(g[w+M]!==255){S=!0;break}if(!S)w+=b;else break}for(l.ascent=v-E,w=m-b,S=!1,E=p;E>v;--E){for(var C=0;C<b;C+=4)if(g[w+C]!==255){S=!0;break}if(!S)w-=b;else break}return l.descent=E-v,l.fontSize=l.ascent+l.descent,this.fontMetricsCache[r]=l,l}},{key:"measureText",value:function(r,s,l){var u=s.fontSize,h=u===void 0?16:u,f=s.wordWrap,d=f===void 0?!1:f,v=s.lineHeight,p=s.lineWidth,g=p===void 0?1:p,m=s.textBaseline,b=m===void 0?"alphabetic":m,E=s.textAlign,w=E===void 0?"start":E,S=s.letterSpacing,M=S===void 0?0:S,C=s.textPath;s.textPathSide,s.textPathStartOffset;var T=s.leading,k=T===void 0?0:T,O=Np(s),A=this.measureFont(O,l);A.fontSize===0&&(A.fontSize=h,A.ascent=h);var R=this.runtime.offscreenCanvasCreator.getOrCreateContext(l);R.font=O,s.isOverflowing=!1;var L=d?this.wordWrap(r,s,l):r,D=L.split(/(?:\r\n|\r|\n)/),z=new Array(D.length),W=0;if(C){C.getTotalLength();for(var G=0;G<D.length;G++)R.measureText(D[G]).width+(D[G].length-1)*M}else{for(var Y=0;Y<D.length;Y++){var q=R.measureText(D[Y]).width+(D[Y].length-1)*M;z[Y]=q,W=Math.max(W,q)}var rt=W+g,yt=v||A.fontSize+g,st=Math.max(yt,A.fontSize+g)+(D.length-1)*(yt+k);yt+=k;var mt=0;return b==="middle"?mt=-st/2:b==="bottom"||b==="alphabetic"||b==="ideographic"?mt=-st:(b==="top"||b==="hanging")&&(mt=0),{font:O,width:rt,height:st,lines:D,lineWidths:z,lineHeight:yt,maxLineWidth:W,fontProperties:A,lineMetrics:z.map(function(at,Et){var It=0;return w==="center"||w==="middle"?It-=at/2:(w==="right"||w==="end")&&(It-=at),new yo(It-g/2,mt+Et*yt,at+g,yt)})}}}},{key:"wordWrap",value:function(r,s,l){var u=this,h=this,f=s.wordWrapWidth,d=f===void 0?0:f,v=s.letterSpacing,p=v===void 0?0:v,g=s.maxLines,m=g===void 0?1/0:g,b=s.textOverflow,E=this.runtime.offscreenCanvasCreator.getOrCreateContext(l),w=d+p,S="";b==="ellipsis"?S="...":b&&b!=="clip"&&(S=b);var M=Array.from(r),C=[],T=0,k=0,O=-1,A={},R=function(mt){return u.getFromCache(mt,p,A,E)},L=R(S);function D(st,mt,at,Et){for(;R(st)<Et&&mt<M.length-1&&!h.isNewline(M[mt+1]);)mt+=1,st+=M[mt];for(;R(st)>Et&&mt>=at;)mt-=1,st=st.slice(0,-1);return{lineTxt:st,txtLastCharIndex:mt}}function z(st,mt){if(!(L<=0||L>w)){if(!C[st]){C[st]=S;return}var at=D(C[st],mt,O+1,w-L);C[st]=at.lineTxt+S}}for(var W=0;W<M.length;W++){var G=M[W],Y=M[W-1],q=M[W+1],rt=R(G);if(this.isNewline(G)){if(T+1>=m){s.isOverflowing=!0,W<M.length-1&&z(T,W-1);break}O=W-1,T+=1,k=0,C[T]="";continue}if(k>0&&k+rt>w){var yt=D(C[T],W-1,O+1,w);if(yt.txtLastCharIndex!==W-1){if(C[T]=yt.lineTxt,yt.txtLastCharIndex===M.length-1)break;W=yt.txtLastCharIndex+1,G=M[W],Y=M[W-1],q=M[W+1],rt=R(G)}if(T+1>=m){s.isOverflowing=!0,z(T,W-1);break}if(O=W-1,T+=1,k=0,C[T]="",this.isBreakingSpace(G))continue;this.canBreakInLastChar(G)||(C=this.trimToBreakable(C),k=this.sumTextWidthByCache(C[T]||"",R)),this.shouldBreakByKinsokuShorui(G,q)&&(C=this.trimByKinsokuShorui(C),k+=R(Y||""))}k+=rt,C[T]=(C[T]||"")+G}return C.join(`
`)}},{key:"isBreakingSpace",value:function(r){return typeof r!="string"?!1:dl.BreakingSpaces.indexOf(r.charCodeAt(0))>=0}},{key:"isNewline",value:function(r){return typeof r!="string"?!1:dl.Newlines.indexOf(r.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(r){var s=(0,J.Z)(r),l=s[s.length-2],u=this.findBreakableIndex(l);if(u===-1||!l)return s;var h=l.slice(u,u+1),f=this.isBreakingSpace(h),d=u+1,v=u+(f?0:1);return s[s.length-1]+=l.slice(d,l.length),s[s.length-2]=l.slice(0,v),s}},{key:"canBreakInLastChar",value:function(r){return!(r&&jp.test(r))}},{key:"sumTextWidthByCache",value:function(r,s){return r.split("").reduce(function(l,u){return l+s(u)},0)}},{key:"findBreakableIndex",value:function(r){for(var s=r.length-1;s>=0;s--)if(!jp.test(r[s]))return s;return-1}},{key:"getFromCache",value:function(r,s,l,u){var h=l[r];if(typeof h!="number"){var f=r.length*s,d=u.measureText(r);h=d.width+f,l[r]=h}return h}}])}(),Mt={},pE=function(a){var n=new jx,r=new Gx;return a={},(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(a,lt.FRAGMENT,null),lt.CIRCLE,new Fx),lt.ELLIPSE,new zx),lt.RECT,n),lt.IMAGE,n),lt.GROUP,new Hx),lt.LINE,new Zx),lt.TEXT,new $x(Mt)),lt.POLYLINE,r),lt.POLYGON,r),(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(a,lt.PATH,new Wx),lt.HTML,new Vx),lt.MESH,null)}(),gE=function(a){var n=new dx,r=new zd;return a={},(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(a,Lt.PERCENTAGE,null),Lt.NUMBER,new mx),Lt.ANGLE,new hx),Lt.DEFINED_PATH,new fx),Lt.PAINT,n),Lt.COLOR,n),Lt.FILTER,new vx),Lt.LENGTH,r),Lt.LENGTH_PERCENTAGE,r),Lt.LENGTH_PERCENTAGE_12,new px),(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(a,Lt.LENGTH_PERCENTAGE_14,new gx),Lt.COORDINATE,new zd),Lt.OFFSET_DISTANCE,new bx),Lt.OPACITY_VALUE,new xx),Lt.PATH,new Va),Lt.LIST_OF_POINTS,new Ex),Lt.SHADOW_BLUR,new wx),Lt.TEXT,new hl),Lt.TEXT_TRANSFORM,new Ae),Lt.TRANSFORM,new Ix),(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(a,Lt.TRANSFORM_ORIGIN,new Dx),Lt.Z_INDEX,new Bx),Lt.MARKER,new yx)}(),yE=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof K.g!="undefined"?K.g:{}};Mt.CameraContribution=gs,Mt.AnimationTimeline=null,Mt.EasingFunction=null,Mt.offscreenCanvasCreator=new Jh,Mt.sceneGraphSelector=new Bp,Mt.sceneGraphService=new rE(Mt),Mt.textService=new vE(Mt),Mt.geometryUpdaterFactory=pE,Mt.CSSPropertySyntaxFactory=gE,Mt.styleValueRegistry=new ux(Mt),Mt.layoutRegistry=null,Mt.globalThis=yE(),Mt.enableStyleSyntax=!0,Mt.enableSizeAttenuation=!1;var $p=0;function YS(){$p=0}var fu=new bs(De.INSERTED,null,"","","",0,"",""),rf=new bs(De.REMOVED,null,"","","",0,"",""),Ud=new xr(De.DESTROY),mE=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.entity=$p++,r.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},r.cullable={strategy:W0.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},r.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},r.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},r.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},r.rBushNode={aabb:void 0},r.namespaceURI="g",r.scrollLeft=0,r.scrollTop=0,r.clientTop=0,r.clientLeft=0,r.destroyed=!1,r.style={},r.computedStyle={},r.parsedStyle={},r.attributes={},r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(s){this.setAttribute("class",s)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(s){return s!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[s+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var s=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[s-1]||null}return null}},{key:"cloneNode",value:function(s){throw new Error(En)}},{key:"appendChild",value:function(s,l){var u;if(s.destroyed)throw new Error(db);return Mt.sceneGraphService.attach(s,this,l),(u=this.ownerDocument)!==null&&u!==void 0&&u.defaultView&&(!$n(this)&&s.nodeName===lt.FRAGMENT?this.ownerDocument.defaultView.mountFragment(s):this.ownerDocument.defaultView.mountChildren(s)),this.isMutationObserved&&(fu.relatedNode=this,s.dispatchEvent(fu)),s}},{key:"insertBefore",value:function(s,l){if(!l)this.appendChild(s);else{s.parentElement&&s.parentElement.removeChild(s);var u=this.childNodes.indexOf(l);u===-1?this.appendChild(s):this.appendChild(s,u)}return s}},{key:"replaceChild",value:function(s,l){var u=this.childNodes.indexOf(l);return this.removeChild(l),this.appendChild(s,u),l}},{key:"removeChild",value:function(s){var l;return rf.relatedNode=this,s.dispatchEvent(rf),(l=s.ownerDocument)!==null&&l!==void 0&&l.defaultView&&s.ownerDocument.defaultView.unmountChildren(s),Mt.sceneGraphService.detach(s),s}},{key:"removeChildren",value:function(){for(var s=this.childNodes.length-1;s>=0;s--){var l=this.childNodes[s];this.removeChild(l)}}},{key:"destroyChildren",value:function(){for(var s=this.childNodes.length-1;s>=0;s--){var l=this.childNodes[s];l.childNodes.length>0&&l.destroyChildren(),l.destroy()}}},{key:"matches",value:function(s){return Mt.sceneGraphService.matches(s,this)}},{key:"getElementById",value:function(s){return Mt.sceneGraphService.querySelector("#".concat(s),this)}},{key:"getElementsByName",value:function(s){return Mt.sceneGraphService.querySelectorAll('[name="'.concat(s,'"]'),this)}},{key:"getElementsByClassName",value:function(s){return Mt.sceneGraphService.querySelectorAll(".".concat(s),this)}},{key:"getElementsByTagName",value:function(s){return Mt.sceneGraphService.querySelectorAll(s,this)}},{key:"querySelector",value:function(s){return Mt.sceneGraphService.querySelector(s,this)}},{key:"querySelectorAll",value:function(s){return Mt.sceneGraphService.querySelectorAll(s,this)}},{key:"closest",value:function(s){var l=this;do{if(Mt.sceneGraphService.matches(s,l))return l;l=l.parentElement}while(l!==null);return null}},{key:"find",value:function(s){var l=this,u=null;return this.forEach(function(h){return h!==l&&s(h)?(u=h,!1):!0}),u}},{key:"findAll",value:function(s){var l=this,u=[];return this.forEach(function(h){h!==l&&s(h)&&u.push(h)}),u}},{key:"after",value:function(){var s=this;if(this.parentNode){for(var l=this.parentNode.childNodes.indexOf(this),u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];h.forEach(function(d,v){var p;return(p=s.parentNode)===null||p===void 0?void 0:p.appendChild(d,l+v+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var s,l=this.parentNode.childNodes.indexOf(this),u=arguments.length,h=new Array(u),f=0;f<u;f++)h[f]=arguments[f];var d=h[0],v=h.slice(1);this.parentNode.appendChild(d,l),(s=d).after.apply(s,(0,J.Z)(v))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var s=this,l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];u.forEach(function(f){return s.appendChild(f)})}},{key:"prepend",value:function(){for(var s=this,l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];u.forEach(function(f,d){return s.appendChild(f,d)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent(Ud),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return Mt.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return Mt.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return Mt.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return Mt.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return Mt.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(s){if(typeof s!="symbol"){var l=this.attributes[s];return l}}},{key:"hasAttribute",value:function(s){return this.getAttributeNames().includes(s)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(s){this.setAttribute(s,null),delete this.attributes[s]}},{key:"setAttribute",value:function(s,l,u,h){this.attributes[s]=l}},{key:"getAttributeNS",value:function(s,l){throw new Error(En)}},{key:"getAttributeNode",value:function(s){throw new Error(En)}},{key:"getAttributeNodeNS",value:function(s,l){throw new Error(En)}},{key:"hasAttributeNS",value:function(s,l){throw new Error(En)}},{key:"removeAttributeNS",value:function(s,l){throw new Error(En)}},{key:"removeAttributeNode",value:function(s){throw new Error(En)}},{key:"setAttributeNS",value:function(s,l,u){throw new Error(En)}},{key:"setAttributeNode",value:function(s){throw new Error(En)}},{key:"setAttributeNodeNS",value:function(s){throw new Error(En)}},{key:"toggleAttribute",value:function(s,l){throw new Error(En)}}])}(Yn);function nn(a){return!!(a!=null&&a.nodeName)}var bE=Mt.globalThis.Proxy?Mt.globalThis.Proxy:function(){},wa=new bs(De.ATTR_MODIFIED,null,null,null,null,bs.MODIFICATION,null,null),du=Xt(),xE=Tr(),Fn=function(a){function n(r){var s;return(0,H.Z)(this,n),s=(0,$.Z)(this,n),s.isCustomElement=!1,s.isMutationObserved=!1,s.activeAnimations=[],s.config=r,s.id=r.id||"",s.name=r.name||"",(r.className||r.class)&&(s.className=r.className||r.class),s.nodeName=r.type||lt.GROUP,r.initialParsedStyle&&Object.assign(s.parsedStyle,r.initialParsedStyle),s.initAttributes(r.style),Mt.enableStyleSyntax&&(s.style=new bE({setProperty:function(u,h){s.setAttribute(u,h)},getPropertyValue:function(u){return s.getAttribute(u)},removeProperty:function(u){s.removeAttribute(u)},item:function(){return""}},{get:function(u,h){return u[h]!==void 0?u[h]:s.getAttribute(h)},set:function(u,h,f){return s.setAttribute(h,f),!0}})),s}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"destroy",value:function(){E0(n,"destroy",this,3)([]),this.getAnimations().forEach(function(s){s.cancel()})}},{key:"cloneNode",value:function(s,l){var u=(0,gt.Z)({},this.attributes);for(var h in u){var f=u[h];nn(f)&&h!=="clipPath"&&h!=="offsetPath"&&h!=="textPath"&&(u[h]=f.cloneNode(s)),l&&(u[h]=l(h,f))}var d=new this.constructor((0,gt.Z)((0,gt.Z)({},this.config),{},{style:u}));return d.setLocalTransform(this.getLocalTransform()),s&&this.children.forEach(function(v){if(!v.style.isMarker){var p=v.cloneNode(s);d.appendChild(p)}}),d}},{key:"initAttributes",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l={forceUpdateGeometry:!0};Mt.styleValueRegistry.processProperties(this,s,l),this.renderable.dirty=!0}},{key:"setAttribute",value:function(s,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;xe(l)||(u||l!==this.attributes[s])&&(this.internalSetAttribute(s,l,{memoize:h}),E0(n,"setAttribute",this,3)([s,l]))}},{key:"internalSetAttribute",value:function(s,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=this.renderable,f=this.attributes[s],d=this.parsedStyle[s];Mt.styleValueRegistry.processProperties(this,(0,Zt.Z)({},s,l),u),h.dirty=!0;var v=this.parsedStyle[s];if(this.isConnected&&(wa.relatedNode=this,wa.prevValue=f,wa.newValue=l,wa.attrName=s,wa.prevParsedValue=d,wa.newParsedValue=v,this.isMutationObserved?this.dispatchEvent(wa):(wa.target=this,this.ownerDocument.defaultView.dispatchEvent(wa,!0))),this.isCustomElement&&this.isConnected||!this.isCustomElement){var p,g;(p=(g=this).attributeChangedCallback)===null||p===void 0||p.call(g,s,f,l,d,v)}}},{key:"getBBox",value:function(){var s=this.getBounds(),l=s.getMin(),u=(0,V.Z)(l,2),h=u[0],f=u[1],d=s.getMax(),v=(0,V.Z)(d,2),p=v[0],g=v[1];return new yo(h,f,p-h,g-f)}},{key:"setOrigin",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Mt.sceneGraphService.setOrigin(this,Si(s,l,u,!1)),this}},{key:"getOrigin",value:function(){return Mt.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Mt.sceneGraphService.setPosition(this,Si(s,l,u,!1)),this}},{key:"setLocalPosition",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Mt.sceneGraphService.setLocalPosition(this,Si(s,l,u,!1)),this}},{key:"translate",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Mt.sceneGraphService.translate(this,Si(s,l,u,!1)),this}},{key:"translateLocal",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Mt.sceneGraphService.translateLocal(this,Si(s,l,u,!1)),this}},{key:"getPosition",value:function(){return Mt.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return Mt.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(s,l,u){return this.scaleLocal(s,l,u)}},{key:"scaleLocal",value:function(s,l,u){return typeof s=="number"&&(l=l||s,u=u||s,s=Si(s,l,u,!1)),Mt.sceneGraphService.scaleLocal(this,s),this}},{key:"setLocalScale",value:function(s,l,u){return typeof s=="number"&&(l=l||s,u=u||s,s=Si(s,l,u,!1)),Mt.sceneGraphService.setLocalScale(this,s),this}},{key:"getLocalScale",value:function(){return Mt.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return Mt.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var s=Eh(du,Mt.sceneGraphService.getWorldTransform(this)),l=(0,V.Z)(s,3),u=l[2];return nr(u)}},{key:"getLocalEulerAngles",value:function(){var s=Eh(du,Mt.sceneGraphService.getLocalRotation(this)),l=(0,V.Z)(s,3),u=l[2];return nr(u)}},{key:"setEulerAngles",value:function(s){return Mt.sceneGraphService.setEulerAngles(this,0,0,s),this}},{key:"setLocalEulerAngles",value:function(s){return Mt.sceneGraphService.setLocalEulerAngles(this,0,0,s),this}},{key:"rotateLocal",value:function(s,l,u){return(0,le.Z)(l)&&(0,le.Z)(u)?Mt.sceneGraphService.rotateLocal(this,0,0,s):Mt.sceneGraphService.rotateLocal(this,s,l,u),this}},{key:"rotate",value:function(s,l,u){return(0,le.Z)(l)&&(0,le.Z)(u)?Mt.sceneGraphService.rotate(this,0,0,s):Mt.sceneGraphService.rotate(this,s,l,u),this}},{key:"setRotation",value:function(s,l,u,h){return Mt.sceneGraphService.setRotation(this,s,l,u,h),this}},{key:"setLocalRotation",value:function(s,l,u,h){return Mt.sceneGraphService.setLocalRotation(this,s,l,u,h),this}},{key:"setLocalSkew",value:function(s,l){return Mt.sceneGraphService.setLocalSkew(this,s,l),this}},{key:"getRotation",value:function(){return Mt.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return Mt.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return Mt.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return Mt.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return Mt.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(s){return Mt.sceneGraphService.setLocalTransform(this,s),this}},{key:"resetLocalTransform",value:function(){Mt.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(s,l){var u,h=(u=this.ownerDocument)===null||u===void 0?void 0:u.timeline;return h?h.play(this,s,l):null}},{key:"isVisible",value:function(){var s;return((s=this.parsedStyle)===null||s===void 0?void 0:s.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(s){this.style.pointerEvents=s?"auto":"none"}},{key:"isInteractive",value:function(){var s;return((s=this.parsedStyle)===null||s===void 0?void 0:s.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,(0,J.Z)(this.parentNode.children.map(function(s){return Number(s.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,(0,J.Z)(this.parentNode.children.map(function(s){return Number(s.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var s=this,l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];var f=u[0],d=u[1];return f?(0,ai.Z)(f)?(Object.keys(f).forEach(function(v){s.setAttribute(v,f[v])}),this):u.length===2?(this.setAttribute(f,d),this):this.attributes[f]:this.attributes}},{key:"getMatrix",value:function(s){var l=s||this.getWorldTransform(),u=Ho(du,l),h=(0,V.Z)(u,2),f=h[0],d=h[1],v=hs(du,l),p=(0,V.Z)(v,2),g=p[0],m=p[1],b=Fl(xE,l),E=Eh(du,b),w=(0,V.Z)(E,3),S=w[0],M=w[2];return Ql(S||M,f,d,g,m)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(s){var l=z0(s),u=(0,V.Z)(l,5),h=u[0],f=u[1],d=u[2],v=u[3],p=u[4];this.setEulerAngles(p).setPosition(h,f).setLocalScale(d,v)}},{key:"setLocalMatrix",value:function(s){var l=z0(s),u=(0,V.Z)(l,5),h=u[0],f=u[1],d=u[2],v=u[3],p=u[4];this.setLocalEulerAngles(p).setLocalPosition(h,f).setLocalScale(d,v)}},{key:"show",value:function(){this.forEach(function(s){s.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(s){s.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(s){return this.children[s]||null}},{key:"add",value:function(s,l){return this.appendChild(s,l)}},{key:"set",value:function(s,l){this.config[s]=l}},{key:"get",value:function(s){return this.config[s]}},{key:"moveTo",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(s,l,u),this}},{key:"move",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(s,l,u),this}},{key:"setZIndex",value:function(s){return this.style.zIndex=s,this}}])}(mE);Fn.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var ur=function(a){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,H.Z)(this,n),(0,$.Z)(this,n,[(0,gt.Z)({type:lt.CIRCLE},r)])}return(0,X.Z)(n,a),(0,j.Z)(n)}(Fn);ur.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(Fn.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var Yd=["style"],Xd=function(a){function n(){var r,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=s.style,u=(0,vs.Z)(s,Yd);return(0,H.Z)(this,n),r=(0,$.Z)(this,n,[(0,gt.Z)({style:l},u)]),r.isCustomElement=!0,r}return(0,X.Z)(n,a),(0,j.Z)(n)}(Fn);Xd.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var vu=function(a){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,H.Z)(this,n),(0,$.Z)(this,n,[(0,gt.Z)({type:lt.ELLIPSE},r)])}return(0,X.Z)(n,a),(0,j.Z)(n)}(Fn);vu.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(Fn.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var EE=function(a){function n(){return(0,H.Z)(this,n),(0,$.Z)(this,n,[{type:lt.FRAGMENT}])}return(0,X.Z)(n,a),(0,j.Z)(n)}(Fn);EE.PARSED_STYLE_LIST=new Set(["class","className"]);var kr=function(a){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,H.Z)(this,n),(0,$.Z)(this,n,[(0,gt.Z)({type:lt.GROUP},r)])}return(0,X.Z)(n,a),(0,j.Z)(n)}(Fn);kr.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Kd=["style"],pu=function(a){function n(){var r,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=s.style,u=(0,vs.Z)(s,Kd);return(0,H.Z)(this,n),r=(0,$.Z)(this,n,[(0,gt.Z)({type:lt.HTML,style:l},u)]),r.cullable.enable=!1,r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var s=Di(Qe(),this.parentNode.getWorldTransform()),l=this.getBounds();if(!en.isEmpty(l)){var u=new en;return u.setFromTransformedAABB(l,s),u}}return this.getBounds()}}])}(Fn);pu.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(Fn.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var vl=function(a){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,H.Z)(this,n),(0,$.Z)(this,n,[(0,gt.Z)({type:lt.IMAGE},r)])}return(0,X.Z)(n,a),(0,j.Z)(n)}(Fn);vl.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(Fn.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var wE=["style"],pl=function(a){function n(){var r,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=s.style,u=(0,vs.Z)(s,wE);(0,H.Z)(this,n),r=(0,$.Z)(this,n,[(0,gt.Z)({type:lt.LINE,style:(0,gt.Z)({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},l)},u)]),r.markerStartAngle=0,r.markerEndAngle=0;var h=r.parsedStyle,f=h.markerStart,d=h.markerEnd;return f&&nn(f)&&(r.markerStartAngle=f.getLocalEulerAngles(),r.appendChild(f)),d&&nn(d)&&(r.markerEndAngle=d.getLocalEulerAngles(),r.appendChild(d)),r.transformMarker(!0),r.transformMarker(!1),r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"attributeChangedCallback",value:function(s,l,u,h,f){s==="x1"||s==="y1"||s==="x2"||s==="y2"||s==="markerStartOffset"||s==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):s==="markerStart"?(h&&nn(h)&&(this.markerStartAngle=0,h.remove()),f&&nn(f)&&(this.markerStartAngle=f.getLocalEulerAngles(),this.appendChild(f),this.transformMarker(!0))):s==="markerEnd"&&(h&&nn(h)&&(this.markerEndAngle=0,h.remove()),f&&nn(f)&&(this.markerEndAngle=f.getLocalEulerAngles(),this.appendChild(f),this.transformMarker(!1)))}},{key:"transformMarker",value:function(s){var l=this.parsedStyle,u=l.markerStart,h=l.markerEnd,f=l.markerStartOffset,d=l.markerEndOffset,v=l.x1,p=l.x2,g=l.y1,m=l.y2,b=s?u:h;if(!(!b||!nn(b))){var E=0,w,S,M,C,T,k;s?(M=v,C=g,w=p-v,S=m-g,T=f||0,k=this.markerStartAngle):(M=p,C=m,w=v-p,S=g-m,T=d||0,k=this.markerEndAngle),E=Math.atan2(S,w),b.setLocalEulerAngles(E*180/Math.PI+k),b.setLocalPosition(M+Math.cos(E)*T,C+Math.sin(E)*T)}}},{key:"getPoint",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=this.parsedStyle,h=u.x1,f=u.y1,d=u.x2,v=u.y2,p=ma(h,f,d,v,s),g=p.x,m=p.y,b=Ve(Xt(),pe(g,m,0),l?this.getWorldTransform():this.getLocalTransform());return new Gr(b[0],b[1])}},{key:"getPointAtLength",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(s/this.getTotalLength(),l)}},{key:"getTotalLength",value:function(){var s=this.parsedStyle,l=s.x1,u=s.y1,h=s.x2,f=s.y2;return M0(l,u,h,f)}}])}(Fn);pl.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(Fn.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var SE=["style"],na=function(a){function n(){var r,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=s.style,u=(0,vs.Z)(s,SE);(0,H.Z)(this,n),r=(0,$.Z)(this,n,[(0,gt.Z)({type:lt.PATH,style:l,initialParsedStyle:{miterLimit:4,d:(0,gt.Z)({},G0)}},u)]),r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var h=r.parsedStyle,f=h.markerStart,d=h.markerEnd,v=h.markerMid;return f&&nn(f)&&(r.markerStartAngle=f.getLocalEulerAngles(),r.appendChild(f)),v&&nn(v)&&r.placeMarkerMid(v),d&&nn(d)&&(r.markerEndAngle=d.getLocalEulerAngles(),r.appendChild(d)),r.transformMarker(!0),r.transformMarker(!1),r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"attributeChangedCallback",value:function(s,l,u,h,f){s==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):s==="markerStartOffset"||s==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):s==="markerStart"?(h&&nn(h)&&(this.markerStartAngle=0,h.remove()),f&&nn(f)&&(this.markerStartAngle=f.getLocalEulerAngles(),this.appendChild(f),this.transformMarker(!0))):s==="markerEnd"?(h&&nn(h)&&(this.markerEndAngle=0,h.remove()),f&&nn(f)&&(this.markerEndAngle=f.getLocalEulerAngles(),this.appendChild(f),this.transformMarker(!1))):s==="markerMid"&&this.placeMarkerMid(f)}},{key:"transformMarker",value:function(s){var l=this.parsedStyle,u=l.markerStart,h=l.markerEnd,f=l.markerStartOffset,d=l.markerEndOffset,v=s?u:h;if(!(!v||!nn(v))){var p=0,g,m,b,E,w,S;if(s){var M=this.getStartTangent(),C=(0,V.Z)(M,2),T=C[0],k=C[1];b=k[0],E=k[1],g=T[0]-k[0],m=T[1]-k[1],w=f||0,S=this.markerStartAngle}else{var O=this.getEndTangent(),A=(0,V.Z)(O,2),R=A[0],L=A[1];b=L[0],E=L[1],g=R[0]-L[0],m=R[1]-L[1],w=d||0,S=this.markerEndAngle}p=Math.atan2(m,g),v.setLocalEulerAngles(p*180/Math.PI+S),v.setLocalPosition(b+Math.cos(p)*w,E+Math.sin(p)*w)}}},{key:"placeMarkerMid",value:function(s){var l=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(p){p.remove()}),s&&nn(s))for(var u=1;u<l.length-1;u++){var h=(0,V.Z)(l[u].currentPoint,2),f=h[0],d=h[1],v=u===1?s:s.cloneNode(!0);this.markerMidList.push(v),this.appendChild(v),v.setLocalPosition(f,d)}}},{key:"getTotalLength",value:function(){return Nd(this)}},{key:"getPointAtLength",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=this.parsedStyle.d.absolutePath,h=X1(u,s),f=h.x,d=h.y,v=Ve(Xt(),pe(f,d,0),l?this.getWorldTransform():this.getLocalTransform());return new Gr(v[0],v[1])}},{key:"getPoint",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(s*Nd(this),l)}},{key:"getStartTangent",value:function(){var s=this.parsedStyle.d.segments,l=[];if(s.length>1){var u=s[0].currentPoint,h=s[1].currentPoint,f=s[1].startTangent;l=[],f?(l.push([u[0]-f[0],u[1]-f[1]]),l.push([u[0],u[1]])):(l.push([h[0],h[1]]),l.push([u[0],u[1]]))}return l}},{key:"getEndTangent",value:function(){var s=this.parsedStyle.d.segments,l=s.length,u=[];if(l>1){var h=s[l-2].currentPoint,f=s[l-1].currentPoint,d=s[l-1].endTangent;u=[],d?(u.push([f[0]-d[0],f[1]-d[1]]),u.push([f[0],f[1]])):(u.push([h[0],h[1]]),u.push([f[0],f[1]]))}return u}}])}(Fn);na.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(Fn.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var Hp=["style"],gl=function(a){function n(){var r,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=s.style,u=(0,vs.Z)(s,Hp);(0,H.Z)(this,n),r=(0,$.Z)(this,n,[(0,gt.Z)({type:lt.POLYGON,style:l,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},u)]),r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var h=r.parsedStyle,f=h.markerStart,d=h.markerEnd,v=h.markerMid;return f&&nn(f)&&(r.markerStartAngle=f.getLocalEulerAngles(),r.appendChild(f)),v&&nn(v)&&r.placeMarkerMid(v),d&&nn(d)&&(r.markerEndAngle=d.getLocalEulerAngles(),r.appendChild(d)),r.transformMarker(!0),r.transformMarker(!1),r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"attributeChangedCallback",value:function(s,l,u,h,f){s==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):s==="markerStartOffset"||s==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):s==="markerStart"?(h&&nn(h)&&(this.markerStartAngle=0,h.remove()),f&&nn(f)&&(this.markerStartAngle=f.getLocalEulerAngles(),this.appendChild(f),this.transformMarker(!0))):s==="markerEnd"?(h&&nn(h)&&(this.markerEndAngle=0,h.remove()),f&&nn(f)&&(this.markerEndAngle=f.getLocalEulerAngles(),this.appendChild(f),this.transformMarker(!1))):s==="markerMid"&&this.placeMarkerMid(f)}},{key:"transformMarker",value:function(s){var l=this.parsedStyle,u=l.markerStart,h=l.markerEnd,f=l.markerStartOffset,d=l.markerEndOffset,v=l.points,p=v||{},g=p.points,m=s?u:h;if(!(!m||!nn(m)||!g)){var b=0,E,w,S,M,C,T;if(S=g[0][0],M=g[0][1],s)E=g[1][0]-g[0][0],w=g[1][1]-g[0][1],C=f||0,T=this.markerStartAngle;else{var k=g.length;this.parsedStyle.isClosed?(E=g[k-1][0]-g[0][0],w=g[k-1][1]-g[0][1]):(S=g[k-1][0],M=g[k-1][1],E=g[k-2][0]-g[k-1][0],w=g[k-2][1]-g[k-1][1]),C=d||0,T=this.markerEndAngle}b=Math.atan2(w,E),m.setLocalEulerAngles(b*180/Math.PI+T),m.setLocalPosition(S+Math.cos(b)*C,M+Math.sin(b)*C)}}},{key:"placeMarkerMid",value:function(s){var l=this.parsedStyle.points,u=l||{},h=u.points;if(this.markerMidList.forEach(function(g){g.remove()}),this.markerMidList=[],s&&nn(s)&&h)for(var f=1;f<(this.parsedStyle.isClosed?h.length:h.length-1);f++){var d=h[f][0],v=h[f][1],p=f===1?s:s.cloneNode(!0);this.markerMidList.push(p),this.appendChild(p),p.setLocalPosition(d,v)}}}])}(Fn);gl.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(Fn.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var _E=["style"],af=function(a){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=r.style,l=(0,vs.Z)(r,_E);return(0,H.Z)(this,n),(0,$.Z)(this,n,[(0,gt.Z)({type:lt.POLYLINE,style:s,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},l)])}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"getTotalLength",value:function(){return $b(this)}},{key:"getPointAtLength",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(s/this.getTotalLength(),l)}},{key:"getPoint",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var h=[],f=0,d,v,p=this.getTotalLength();u.forEach(function(M,C){u[C+1]&&(d=[0,0],d[0]=f/p,v=M0(M[0],M[1],u[C+1][0],u[C+1][1]),f+=v,d[1]=f/p,h.push(d))}),this.parsedStyle.points.segments=h}var g=0,m=0;this.parsedStyle.points.segments.forEach(function(M,C){s>=M[0]&&s<=M[1]&&(g=(s-M[0])/(M[1]-M[0]),m=C)});var b=ma(u[m][0],u[m][1],u[m+1][0],u[m+1][1],g),E=b.x,w=b.y,S=Ve(Xt(),pe(E,w,0),l?this.getWorldTransform():this.getLocalTransform());return new Gr(S[0],S[1])}},{key:"getStartTangent",value:function(){var s=this.parsedStyle.points.points,l=[];return l.push([s[1][0],s[1][1]]),l.push([s[0][0],s[0][1]]),l}},{key:"getEndTangent",value:function(){var s=this.parsedStyle.points.points,l=s.length-1,u=[];return u.push([s[l-1][0],s[l-1][1]]),u.push([s[l][0],s[l][1]]),u}}])}(gl);af.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(gl.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var Pr=function(a){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,H.Z)(this,n),(0,$.Z)(this,n,[(0,gt.Z)({type:lt.RECT},r)])}return(0,X.Z)(n,a),(0,j.Z)(n)}(Fn);Pr.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(Fn.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var qd=["style"],yl=function(a){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=r.style,l=(0,vs.Z)(r,qd);return(0,H.Z)(this,n),(0,$.Z)(this,n,[(0,gt.Z)({type:lt.TEXT,style:(0,gt.Z)({fill:"black"},s)},l)])}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"getComputedTextLength",value:function(){var s;return this.getGeometryBounds(),((s=this.parsedStyle.metrics)===null||s===void 0?void 0:s.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var s;return this.getGeometryBounds(),((s=this.parsedStyle.metrics)===null||s===void 0?void 0:s.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(Fn);yl.PARSED_STYLE_LIST=new Set([].concat((0,J.Z)(Fn.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var ME=function(){function a(){(0,H.Z)(this,a),this.registry={},this.define(lt.CIRCLE,ur),this.define(lt.ELLIPSE,vu),this.define(lt.RECT,Pr),this.define(lt.IMAGE,vl),this.define(lt.LINE,pl),this.define(lt.GROUP,kr),this.define(lt.PATH,na),this.define(lt.POLYGON,gl),this.define(lt.POLYLINE,af),this.define(lt.TEXT,yl),this.define(lt.HTML,pu)}return(0,j.Z)(a,[{key:"define",value:function(r,s){this.registry[r]=s}},{key:"get",value:function(r){return this.registry[r]}}])}(),XS={number:function(n){return new wn(n)},percent:function(n){return new wn(n,"%")},px:function(n){return new wn(n,"px")},em:function(n){return new wn(n,"em")},rem:function(n){return new wn(n,"rem")},deg:function(n){return new wn(n,"deg")},grad:function(n){return new wn(n,"grad")},rad:function(n){return new wn(n,"rad")},turn:function(n){return new wn(n,"turn")},s:function(n){return new wn(n,"s")},ms:function(n){return new wn(n,"ms")},registerProperty:function(n){var r=n.name,s=n.inherits,l=n.interpolable,u=n.initialValue,h=n.syntax;Mt.styleValueRegistry.registerMetadata({n:r,inh:s,int:l,d:u,syntax:h})},registerLayout:function(n,r){Mt.layoutRegistry.registerLayout(n,r)}},Vp=function(a){function n(){var r;(0,H.Z)(this,n),r=(0,$.Z)(this,n),r.defaultView=null,r.ownerDocument=null,r.nodeName="document";try{r.timeline=new Mt.AnimationTimeline(r)}catch(l){}var s={};return ec.forEach(function(l){var u=l.n,h=l.inh,f=l.d;h&&f&&(s[u]=(0,re.Z)(f)?f(lt.GROUP):f)}),r.documentElement=new kr({id:"g-root",style:s}),r.documentElement.ownerDocument=r,r.documentElement.parentNode=r,r.childNodes=[r.documentElement],r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(s,l){if(s==="svg")return this.documentElement;var u=this.defaultView.customElements.get(s);u||(console.warn("Unsupported tagName: ",s),u=s==="tspan"?yl:kr);var h=new u(l);return h.ownerDocument=this,h}},{key:"createElementNS",value:function(s,l,u){return this.createElement(l,u)}},{key:"cloneNode",value:function(s){throw new Error(En)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(s){}}},{key:"elementsFromBBox",value:function(s,l,u,h){var f=this.defaultView.context.rBushRoot,d=f.search({minX:s,minY:l,maxX:u,maxY:h}),v=[];return d.forEach(function(p){var g=p.displayObject,m=g.parsedStyle.pointerEvents,b=m===void 0?"auto":m,E=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(b);(!E||E&&g.isVisible())&&!g.isCulled()&&g.isInteractive()&&v.push(g)}),v.sort(function(p,g){return g.sortable.renderOrder-p.sortable.renderOrder}),v}},{key:"elementFromPointSync",value:function(s,l){var u=this.defaultView.canvas2Viewport({x:s,y:l}),h=u.x,f=u.y,d=this.defaultView.getConfig(),v=d.width,p=d.height;if(h<0||f<0||h>v||f>p)return null;var g=this.defaultView.viewport2Client({x:h,y:f}),m=g.x,b=g.y,E=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:s,y:l,viewportX:h,viewportY:f,clientX:m,clientY:b},picked:[]}),w=E.picked;return w&&w[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var r=(0,Or.Z)((0,si.Z)().mark(function l(u,h){var f,d,v,p,g,m,b,E,w,S,M;return(0,si.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(f=this.defaultView.canvas2Viewport({x:u,y:h}),d=f.x,v=f.y,p=this.defaultView.getConfig(),g=p.width,m=p.height,!(d<0||v<0||d>g||v>m)){T.next=4;break}return T.abrupt("return",null);case 4:return b=this.defaultView.viewport2Client({x:d,y:v}),E=b.x,w=b.y,T.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:u,y:h,viewportX:d,viewportY:v,clientX:E,clientY:w},picked:[]});case 7:return S=T.sent,M=S.picked,T.abrupt("return",M&&M[0]||this.documentElement);case 10:case"end":return T.stop()}},l,this)}));function s(l,u){return r.apply(this,arguments)}return s}()},{key:"elementsFromPointSync",value:function(s,l){var u=this.defaultView.canvas2Viewport({x:s,y:l}),h=u.x,f=u.y,d=this.defaultView.getConfig(),v=d.width,p=d.height;if(h<0||f<0||h>v||f>p)return[];var g=this.defaultView.viewport2Client({x:h,y:f}),m=g.x,b=g.y,E=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:s,y:l,viewportX:h,viewportY:f,clientX:m,clientY:b},picked:[]}),w=E.picked;return w[w.length-1]!==this.documentElement&&w.push(this.documentElement),w}},{key:"elementsFromPoint",value:function(){var r=(0,Or.Z)((0,si.Z)().mark(function l(u,h){var f,d,v,p,g,m,b,E,w,S,M;return(0,si.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(f=this.defaultView.canvas2Viewport({x:u,y:h}),d=f.x,v=f.y,p=this.defaultView.getConfig(),g=p.width,m=p.height,!(d<0||v<0||d>g||v>m)){T.next=4;break}return T.abrupt("return",[]);case 4:return b=this.defaultView.viewport2Client({x:d,y:v}),E=b.x,w=b.y,T.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:u,y:h,viewportX:d,viewportY:v,clientX:E,clientY:w},picked:[]});case 7:return S=T.sent,M=S.picked,M[M.length-1]!==this.documentElement&&M.push(this.documentElement),T.abrupt("return",M);case 11:case"end":return T.stop()}},l,this)}));function s(l,u){return r.apply(this,arguments)}return s}()},{key:"appendChild",value:function(s,l){throw new Error(Kl)}},{key:"insertBefore",value:function(s,l){throw new Error(Kl)}},{key:"removeChild",value:function(s,l){throw new Error(Kl)}},{key:"replaceChild",value:function(s,l,u){throw new Error(Kl)}},{key:"append",value:function(){throw new Error(Kl)}},{key:"prepend",value:function(){throw new Error(Kl)}},{key:"getElementById",value:function(s){return this.documentElement.getElementById(s)}},{key:"getElementsByName",value:function(s){return this.documentElement.getElementsByName(s)}},{key:"getElementsByTagName",value:function(s){return this.documentElement.getElementsByTagName(s)}},{key:"getElementsByClassName",value:function(s){return this.documentElement.getElementsByClassName(s)}},{key:"querySelector",value:function(s){return this.documentElement.querySelector(s)}},{key:"querySelectorAll",value:function(s){return this.documentElement.querySelectorAll(s)}},{key:"find",value:function(s){return this.documentElement.find(s)}},{key:"findAll",value:function(s){return this.documentElement.findAll(s)}}])}(Yn),Up=function(){function a(n){(0,H.Z)(this,a),this.strategies=n}return(0,j.Z)(a,[{key:"apply",value:function(r){var s=r.camera,l=r.renderingService,u=r.renderingContext,h=this.strategies;l.hooks.cull.tap(a.tag,function(f){if(f){var d=f.cullable;return h.length===0?d.visible=u.unculledEntities.indexOf(f.entity)>-1:d.visible=h.every(function(v){return v.isVisible(s,f)}),!f.isCulled()&&f.isVisible()?f:(f.dispatchEvent(new xr(De.CULLED)),null)}return f}),l.hooks.afterRender.tap(a.tag,function(f){f.cullable.visibilityPlaneMask=-1})}}])}();Up.tag="Culling";var Yp=function(){function a(){var n=this;(0,H.Z)(this,a),this.autoPreventDefault=!1,this.rootPointerEvent=new Qh(null),this.rootWheelEvent=new Hd(null),this.onPointerMove=function(r){var s,l=(s=n.context.renderingContext.root)===null||s===void 0||(s=s.ownerDocument)===null||s===void 0?void 0:s.defaultView;if(!(l.supportsTouchEvents&&r.pointerType==="touch")){var u=n.normalizeToPointerEvent(r,l),h=(0,el.Z)(u),f;try{for(h.s();!(f=h.n()).done;){var d=f.value,v=n.bootstrapEvent(n.rootPointerEvent,d,l,r);n.context.eventService.mapEvent(v)}}catch(p){h.e(p)}finally{h.f()}n.setCursor(n.context.eventService.cursor)}},this.onClick=function(r){var s,l=(s=n.context.renderingContext.root)===null||s===void 0||(s=s.ownerDocument)===null||s===void 0?void 0:s.defaultView,u=n.normalizeToPointerEvent(r,l),h=(0,el.Z)(u),f;try{for(h.s();!(f=h.n()).done;){var d=f.value,v=n.bootstrapEvent(n.rootPointerEvent,d,l,r);n.context.eventService.mapEvent(v)}}catch(p){h.e(p)}finally{h.f()}n.setCursor(n.context.eventService.cursor)}}return(0,j.Z)(a,[{key:"apply",value:function(r){var s=this;this.context=r;var l=r.renderingService,u=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(h){var f=s.context.renderingService.hooks.pickSync.call({position:h,picked:[],topmost:!0}),d=f.picked;return d[0]||null}),l.hooks.pointerWheel.tap(a.tag,function(h){var f=s.normalizeWheelEvent(h);s.context.eventService.mapEvent(f)}),l.hooks.pointerDown.tap(a.tag,function(h){if(!(u.supportsTouchEvents&&h.pointerType==="touch")){var f=s.normalizeToPointerEvent(h,u);if(s.autoPreventDefault&&f[0].isNormalized){var d=h.cancelable||!("cancelable"in h);d&&h.preventDefault()}var v=(0,el.Z)(f),p;try{for(v.s();!(p=v.n()).done;){var g=p.value,m=s.bootstrapEvent(s.rootPointerEvent,g,u,h);s.context.eventService.mapEvent(m)}}catch(b){v.e(b)}finally{v.f()}s.setCursor(s.context.eventService.cursor)}}),l.hooks.pointerUp.tap(a.tag,function(h){if(!(u.supportsTouchEvents&&h.pointerType==="touch")){var f=s.context.contextService.getDomElement(),d=s.context.eventService.isNativeEventFromCanvas(f,h),v=d?"":"outside",p=s.normalizeToPointerEvent(h,u),g=(0,el.Z)(p),m;try{for(g.s();!(m=g.n()).done;){var b=m.value,E=s.bootstrapEvent(s.rootPointerEvent,b,u,h);E.type+=v,s.context.eventService.mapEvent(E)}}catch(w){g.e(w)}finally{g.f()}s.setCursor(s.context.eventService.cursor)}}),l.hooks.pointerMove.tap(a.tag,this.onPointerMove),l.hooks.pointerOver.tap(a.tag,this.onPointerMove),l.hooks.pointerOut.tap(a.tag,this.onPointerMove),l.hooks.click.tap(a.tag,this.onClick),l.hooks.pointerCancel.tap(a.tag,function(h){var f=s.normalizeToPointerEvent(h,u),d=(0,el.Z)(f),v;try{for(d.s();!(v=d.n()).done;){var p=v.value,g=s.bootstrapEvent(s.rootPointerEvent,p,u,h);s.context.eventService.mapEvent(g)}}catch(m){d.e(m)}finally{d.f()}s.setCursor(s.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(r,s,l,u){r.view=l,r.originalEvent=null,r.nativeEvent=u,r.pointerId=s.pointerId,r.width=s.width,r.height=s.height,r.isPrimary=s.isPrimary,r.pointerType=s.pointerType,r.pressure=s.pressure,r.tangentialPressure=s.tangentialPressure,r.tiltX=s.tiltX,r.tiltY=s.tiltY,r.twist=s.twist,this.transferMouseData(r,s);var h=this.context.eventService.client2Viewport({x:s.clientX,y:s.clientY}),f=h.x,d=h.y;r.viewport.x=f,r.viewport.y=d;var v=this.context.eventService.viewport2Canvas(r.viewport),p=v.x,g=v.y;return r.canvas.x=p,r.canvas.y=g,r.global.copyFrom(r.canvas),r.offset.copyFrom(r.canvas),r.isTrusted=u.isTrusted,r.type==="pointerleave"&&(r.type="pointerout"),r.type.startsWith("mouse")&&(r.type=r.type.replace("mouse","pointer")),r.type.startsWith("touch")&&(r.type=Uh[r.type]||r.type),r}},{key:"normalizeWheelEvent",value:function(r){var s=this.rootWheelEvent;this.transferMouseData(s,r),s.deltaMode=r.deltaMode,s.deltaX=r.deltaX,s.deltaY=r.deltaY,s.deltaZ=r.deltaZ;var l=this.context.eventService.client2Viewport({x:r.clientX,y:r.clientY}),u=l.x,h=l.y;s.viewport.x=u,s.viewport.y=h;var f=this.context.eventService.viewport2Canvas(s.viewport),d=f.x,v=f.y;return s.canvas.x=d,s.canvas.y=v,s.global.copyFrom(s.canvas),s.offset.copyFrom(s.canvas),s.nativeEvent=r,s.type=r.type,s}},{key:"transferMouseData",value:function(r,s){r.isTrusted=s.isTrusted,r.srcElement=s.srcElement,r.timeStamp=jn.now(),r.type=s.type,r.altKey=s.altKey,r.metaKey=s.metaKey,r.shiftKey=s.shiftKey,r.ctrlKey=s.ctrlKey,r.button=s.button,r.buttons=s.buttons,r.client.x=s.clientX,r.client.y=s.clientY,r.movement.x=s.movementX,r.movement.y=s.movementY,r.page.x=s.pageX,r.page.y=s.pageY,r.screen.x=s.screenX,r.screen.y=s.screenY,r.relatedTarget=null}},{key:"setCursor",value:function(r){this.context.contextService.applyCursorStyle(r||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(r,s){var l=[];if(s.isTouchEvent(r))for(var u=0;u<r.changedTouches.length;u++){var h=r.changedTouches[u];xe(h.button)&&(h.button=0),xe(h.buttons)&&(h.buttons=1),xe(h.isPrimary)&&(h.isPrimary=r.touches.length===1&&r.type==="touchstart"),xe(h.width)&&(h.width=h.radiusX||1),xe(h.height)&&(h.height=h.radiusY||1),xe(h.tiltX)&&(h.tiltX=0),xe(h.tiltY)&&(h.tiltY=0),xe(h.pointerType)&&(h.pointerType="touch"),xe(h.pointerId)&&(h.pointerId=h.identifier||0),xe(h.pressure)&&(h.pressure=h.force||.5),xe(h.twist)&&(h.twist=0),xe(h.tangentialPressure)&&(h.tangentialPressure=0),h.isNormalized=!0,h.type=r.type,l.push(h)}else if(s.isMouseEvent(r)){var f=r;xe(f.isPrimary)&&(f.isPrimary=!0),xe(f.width)&&(f.width=1),xe(f.height)&&(f.height=1),xe(f.tiltX)&&(f.tiltX=0),xe(f.tiltY)&&(f.tiltY=0),xe(f.pointerType)&&(f.pointerType="mouse"),xe(f.pointerId)&&(f.pointerId=Pp),xe(f.pressure)&&(f.pressure=.5),xe(f.twist)&&(f.twist=0),xe(f.tangentialPressure)&&(f.tangentialPressure=0),f.isNormalized=!0,l.push(f)}else l.push(r);return l}}])}();Yp.tag="Event";var CE=[lt.CIRCLE,lt.ELLIPSE,lt.IMAGE,lt.RECT,lt.LINE,lt.POLYLINE,lt.POLYGON,lt.TEXT,lt.PATH,lt.HTML],TE=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"isVisible",value:function(r,s){var l,u=s.cullable;if(!u.enable)return!0;var h=s.getRenderBounds();if(en.isEmpty(h))return!1;var f=r.getFrustum(),d=(l=s.parentNode)===null||l===void 0||(l=l.cullable)===null||l===void 0?void 0:l.visibilityPlaneMask;return u.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(s,h,d||Ki.INDETERMINATE,f.planes),u.visible=u.visibilityPlaneMask!==Ki.OUTSIDE,u.visible}},{key:"computeVisibilityWithPlaneMask",value:function(r,s,l,u){if(l===Ki.OUTSIDE||l===Ki.INSIDE)return l;for(var h=Ki.INSIDE,f=CE.indexOf(r.nodeName)>-1,d=0,v=u.length;d<v;++d){var p=1<<d;if(l&p&&!(f&&(d===4||d===5))){var g=u[d],m=g.normal,b=g.distance;if($t(m,s.getPositiveFarPoint(u[d]))+b<0)return Ki.OUTSIDE;$t(m,s.getNegativeFarPoint(u[d]))+b<0&&(h|=p)}}return h}}])}(),Xp=function(){function a(){(0,H.Z)(this,a),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return(0,j.Z)(a,[{key:"apply",value:function(r){var s=this,l,u=r.renderingService,h=r.renderingContext,f=r.rBushRoot,d=h.root.ownerDocument.defaultView;this.rBush=f;var v=function(w){var S=w.target;S.renderable.dirty=!0,u.dirtify()},p=function(w){s.syncTasks.set(w.target,w.detail.affectChildren),u.dirtify()},g=function(w){var S=w.target;Mt.enableSizeAttenuation&&Mt.styleValueRegistry.updateSizeAttenuation(S,d.getCamera().getZoom())},m=function(w){var S=w.target,M=S.rBushNode;M.aabb&&s.rBush.remove(M.aabb),s.syncTasks.delete(S),Mt.sceneGraphService.dirtifyToRoot(S),u.dirtify()};u.hooks.init.tap(a.tag,function(){d.addEventListener(De.MOUNTED,g),d.addEventListener(De.UNMOUNTED,m),d.addEventListener(De.ATTR_MODIFIED,v),d.addEventListener(De.BOUNDS_CHANGED,p)}),u.hooks.destroy.tap(a.tag,function(){d.removeEventListener(De.MOUNTED,g),d.removeEventListener(De.UNMOUNTED,m),d.removeEventListener(De.ATTR_MODIFIED,v),d.removeEventListener(De.BOUNDS_CHANGED,p),s.syncTasks.clear()});var b=(l=Mt.globalThis.requestIdleCallback)!==null&&l!==void 0?l:$d.bind(Mt.globalThis);u.hooks.endFrame.tap(a.tag,function(){s.isFirstTimeRendering?(s.isFirstTimeRendering=!1,s.syncing=!0,b(function(){s.syncRTree(!0),s.isFirstTimeRenderingFinished=!0})):s.syncRTree()})}},{key:"syncNode",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r.isConnected){var l=r.rBushNode;l.aabb&&this.rBush.remove(l.aabb);var u=r.getRenderBounds();if(u){var h=r.renderable;s&&(h.dirtyRenderBounds||(h.dirtyRenderBounds=new en),h.dirtyRenderBounds.update(u.center,u.halfExtents));var f=u.getMin(),d=(0,V.Z)(f,2),v=d[0],p=d[1],g=u.getMax(),m=(0,V.Z)(g,2),b=m[0],E=m[1];l.aabb||(l.aabb={}),l.aabb.displayObject=r,l.aabb.minX=v,l.aabb.minY=p,l.aabb.maxX=b,l.aabb.maxY=E}if(l.aabb&&!isNaN(l.aabb.maxX)&&!isNaN(l.aabb.maxX)&&!isNaN(l.aabb.minX)&&!isNaN(l.aabb.minY))return l.aabb}}},{key:"syncRTree",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!s&&(this.syncing||this.syncTasks.size===0))){this.syncing=!0;var l=[],u=new Set,h=function(d){if(!u.has(d)&&d.renderable){var v=r.syncNode(d,s);v&&(l.push(v),u.add(d))}};this.syncTasks.forEach(function(f,d){f&&d.forEach(h);for(var v=d;v;)h(v),v=v.parentElement}),this.rBush.load(l),l.length=0,this.syncing=!1}}}])}();Xp.tag="Prepare";function KS(a){return!!a.document}var ra=function(a){return a.READY="ready",a.BEFORE_RENDER="beforerender",a.RERENDER="rerender",a.AFTER_RENDER="afterrender",a.BEFORE_DESTROY="beforedestroy",a.AFTER_DESTROY="afterdestroy",a.RESIZE="resize",a.DIRTY_RECTANGLE="dirtyrectangle",a.RENDERER_CHANGED="rendererchanged",a}({}),Kp=500,OE=.1,AE=1e3,sf=new xr(De.MOUNTED),of=new xr(De.UNMOUNTED),Qd=new xr(ra.BEFORE_RENDER),qp=new xr(ra.RERENDER),Jd=new xr(ra.AFTER_RENDER),tv=function(a){function n(r){var s;(0,H.Z)(this,n),s=(0,$.Z)(this,n),s.Element=Fn,s.inited=!1,s.context={};var l=r.container,u=r.canvas,h=r.renderer,f=r.width,d=r.height,v=r.background,p=r.cursor,g=r.supportsMutipleCanvasesInOneContainer,m=r.cleanUpOnDestroy,b=m===void 0?!0:m,E=r.offscreenCanvas,w=r.devicePixelRatio,S=r.requestAnimationFrame,M=r.cancelAnimationFrame,C=r.createImage,T=r.supportsTouchEvents,k=r.supportsPointerEvents,O=r.isTouchEvent,A=r.isMouseEvent,R=r.dblClickSpeed,L=f,D=d,z=w||Zd&&window.devicePixelRatio||1;return z=z>=1?Math.ceil(z):1,u&&(L=f||Mx(u)||u.width/z,D=d||Ws(u)||u.height/z),s.customElements=new ME,s.devicePixelRatio=z,s.requestAnimationFrame=S!=null?S:$d.bind(Mt.globalThis),s.cancelAnimationFrame=M!=null?M:Rp.bind(Mt.globalThis),s.supportsTouchEvents=T!=null?T:"ontouchstart"in Mt.globalThis,s.supportsPointerEvents=k!=null?k:!!Mt.globalThis.PointerEvent,s.isTouchEvent=O!=null?O:function(W){return s.supportsTouchEvents&&W instanceof Mt.globalThis.TouchEvent},s.isMouseEvent=A!=null?A:function(W){return!Mt.globalThis.MouseEvent||W instanceof Mt.globalThis.MouseEvent&&(!s.supportsPointerEvents||!(W instanceof Mt.globalThis.PointerEvent))},E&&(Mt.offscreenCanvas=E),s.document=new Vp,s.document.defaultView=s,g||dr(l,s,b),s.initRenderingContext((0,gt.Z)((0,gt.Z)({},r),{},{width:L,height:D,background:v!=null?v:"transparent",cursor:p!=null?p:"default",cleanUpOnDestroy:b,devicePixelRatio:z,requestAnimationFrame:s.requestAnimationFrame,cancelAnimationFrame:s.cancelAnimationFrame,supportsTouchEvents:s.supportsTouchEvents,supportsPointerEvents:s.supportsPointerEvents,isTouchEvent:s.isTouchEvent,isMouseEvent:s.isMouseEvent,dblClickSpeed:R!=null?R:200,createImage:C!=null?C:function(){return new window.Image}})),s.initDefaultCamera(L,D,h.clipSpaceNearZ),s.initRenderer(h,!0),s}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"initRenderingContext",value:function(s){this.context.config=s,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(s,l,u){var h=this,f=new Mt.CameraContribution;f.clipSpaceNearZ=u,f.setType(sn.EXPLORING,_h.DEFAULT).setPosition(s/2,l/2,Kp).setFocalPoint(s/2,l/2,0).setOrthographic(s/-2,s/2,l/2,l/-2,OE,AE),f.canvas=this,f.eventEmitter.on(Z0.UPDATED,function(){h.context.renderingContext.renderReasons.add(nc.CAMERA_CHANGED),Mt.enableSizeAttenuation&&h.getConfig().renderer.getConfig().enableSizeAttenuation&&h.updateSizeAttenuation()}),this.context.camera=f}},{key:"updateSizeAttenuation",value:function(){var s=this.getCamera().getZoom();this.document.documentElement.forEach(function(l){Mt.styleValueRegistry.updateSizeAttenuation(l,s)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var s=this;return this.readyPromise||(this.readyPromise=new Promise(function(l){s.resolveReadyPromise=function(){l(s)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,l=arguments.length>1?arguments[1]:void 0;fr.clearCache(),l||this.dispatchEvent(new xr(ra.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var u=this.getRoot();s&&(this.unmountChildren(u),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),l||this.dispatchEvent(new xr(ra.AFTER_DESTROY));var h=function(d){d.currentTarget=null,d.manager=null,d.target=null,d.relatedNode=null};h(sf),h(of),h(Qd),h(qp),h(Jd),h(wa),h(fu),h(rf),h(Ud)}},{key:"changeSize",value:function(s,l){this.resize(s,l)}},{key:"resize",value:function(s,l){var u=this.context.config;u.width=s,u.height=l,this.getContextService().resize(s,l);var h=this.context.camera,f=h.getProjectionMode();h.setPosition(s/2,l/2,Kp).setFocalPoint(s/2,l/2,0),f===Zi.ORTHOGRAPHIC?h.setOrthographic(s/-2,s/2,l/2,l/-2,h.getNear(),h.getFar()):h.setAspect(s/l),this.dispatchEvent(new xr(ra.RESIZE,{width:s,height:l}))}},{key:"appendChild",value:function(s,l){return this.document.documentElement.appendChild(s,l)}},{key:"insertBefore",value:function(s,l){return this.document.documentElement.insertBefore(s,l)}},{key:"removeChild",value:function(s){return this.document.documentElement.removeChild(s)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(s){var l=this;s&&(Qd.detail=s,Jd.detail=s),this.dispatchEvent(Qd);var u=this.getRenderingService();u.render(this.getConfig(),s,function(){l.dispatchEvent(qp)}),this.dispatchEvent(Jd)}},{key:"run",value:function(){var s=this,l=function(h,f){s.render(f),s.frameId=s.requestAnimationFrame(l)};l()}},{key:"initRenderer",value:function(s){var l=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!s)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new N0,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new Yp,new Xp,new Up([new TE])),this.loadRendererContainerModule(s),this.context.contextService=new this.context.ContextService((0,gt.Z)((0,gt.Z)({},Mt),this.context)),this.context.renderingService=new Xx(Mt,this.context),this.context.eventService=new Yx(Mt,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(s,u,!0)):this.context.contextService.initAsync().then(function(){l.initRenderingService(s,u)}).catch(function(h){console.error(h)})}},{key:"initRenderingService",value:function(s){var l=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){l.inited=!0,u?h?l.requestAnimationFrame(function(){l.dispatchEvent(new xr(ra.READY))}):l.dispatchEvent(new xr(ra.READY)):l.dispatchEvent(new xr(ra.RENDERER_CHANGED)),l.readyPromise&&l.resolveReadyPromise(),u||l.getRoot().forEach(function(f){var d=f,v=d.renderable;v&&(v.renderBoundsDirty=!0,v.boundsDirty=!0,v.dirty=!0)}),l.mountChildren(l.getRoot()),s.getConfig().enableAutoRendering&&l.run()})}},{key:"loadRendererContainerModule",value:function(s){var l=this,u=s.getPlugins();u.forEach(function(h){h.context=l.context,h.init(Mt)})}},{key:"setRenderer",value:function(s){var l=this.getConfig();if(l.renderer!==s){var u=l.renderer;l.renderer=s,this.destroy(!1,!0),(0,J.Z)((u==null?void 0:u.getPlugins())||[]).reverse().forEach(function(h){h.destroy(Mt)}),this.initRenderer(s)}}},{key:"setCursor",value:function(s){var l=this.getConfig();l.cursor=s,this.getContextService().applyCursorStyle(s)}},{key:"unmountChildren",value:function(s){var l=this;s.childNodes.forEach(function(u){l.unmountChildren(u)}),this.inited&&(s.isMutationObserved?s.dispatchEvent(of):(of.target=s,this.dispatchEvent(of,!0)),s!==this.document.documentElement&&(s.ownerDocument=null),s.isConnected=!1),s.isCustomElement&&s.disconnectedCallback&&s.disconnectedCallback()}},{key:"mountChildren",value:function(s){var l=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$n(s);this.inited?s.isConnected||(s.ownerDocument=this.document,s.isConnected=!0,u||(s.isMutationObserved?s.dispatchEvent(sf):(sf.target=s,this.dispatchEvent(sf,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",s.nodeName),s.childNodes.forEach(function(h){l.mountChildren(h,u)}),s.isCustomElement&&s.connectedCallback&&s.connectedCallback()}},{key:"mountFragment",value:function(s){this.mountChildren(s,!1)}},{key:"client2Viewport",value:function(s){return this.getEventService().client2Viewport(s)}},{key:"viewport2Client",value:function(s){return this.getEventService().viewport2Client(s)}},{key:"viewport2Canvas",value:function(s){return this.getEventService().viewport2Canvas(s)}},{key:"canvas2Viewport",value:function(s){return this.getEventService().canvas2Viewport(s)}},{key:"getPointByClient",value:function(s,l){return this.client2Viewport({x:s,y:l})}},{key:"getClientByPoint",value:function(s,l){return this.viewport2Client({x:s,y:l})}}])}(Ci);var kE=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.landmarks=[],r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"rotate",value:function(s,l,u){if(this.relElevation=rl(l),this.relAzimuth=rl(s),this.relRoll=rl(u),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===sn.EXPLORING){var h=Ba(Tr(),[1,0,0],pn((this.rotateWorld?1:-1)*this.relElevation)),f=Ba(Tr(),[0,1,0],pn((this.rotateWorld?1:-1)*this.relAzimuth)),d=Ba(Tr(),[0,0,1],pn(this.relRoll)),v=Ds(Tr(),f,h);v=Ds(Tr(),v,d);var p=zl(Qe(),v);Be(this.matrix,this.matrix,[0,0,-this.distance]),qt(this.matrix,this.matrix,p),Be(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===sn.ORBITING||this.type===sn.EXPLORING?this._getPosition():this.type===sn.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(s,l){var u=Si(s,l,0),h=On(this.position);return oe(h,h,hr(Xt(),this.right,u[0])),oe(h,h,hr(Xt(),this.up,u[1])),this._setPosition(h),this.triggerUpdate(),this}},{key:"dolly",value:function(s){var l=this.forward,u=On(this.position),h=s*this.dollyingStep,f=this.distance+s*this.dollyingStep;return h=Math.max(Math.min(f,this.maxDistance),this.minDistance)-this.distance,u[0]+=h*l[0],u[1]+=h*l[1],u[2]+=h*l[2],this._setPosition(u),this.type===sn.ORBITING||this.type===sn.EXPLORING?this._getDistance():this.type===sn.TRACKING&&oe(this.focalPoint,u,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(s){var l,u,h,f,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=d.position,p=v===void 0?this.position:v,g=d.focalPoint,m=g===void 0?this.focalPoint:g,b=d.roll,E=d.zoom,w=new Mt.CameraContribution;w.setType(this.type,void 0),w.setPosition(p[0],(l=p[1])!==null&&l!==void 0?l:this.position[1],(u=p[2])!==null&&u!==void 0?u:this.position[2]),w.setFocalPoint(m[0],(h=m[1])!==null&&h!==void 0?h:this.focalPoint[1],(f=m[2])!==null&&f!==void 0?f:this.focalPoint[2]),w.setRoll(b!=null?b:this.roll),w.setZoom(E!=null?E:this.zoom);var S={name:s,matrix:Go(w.getWorldTransform()),right:On(w.right),up:On(w.up),forward:On(w.forward),position:On(w.getPosition()),focalPoint:On(w.getFocalPoint()),distanceVector:On(w.getDistanceVector()),distance:w.getDistance(),dollyingStep:w.getDollyingStep(),azimuth:w.getAzimuth(),elevation:w.getElevation(),roll:w.getRoll(),relAzimuth:w.relAzimuth,relElevation:w.relElevation,relRoll:w.relRoll,zoom:w.getZoom()};return this.landmarks.push(S),S}},{key:"gotoLandmark",value:function(s){var l=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=(0,xn.Z)(s)?this.landmarks.find(function(W){return W.name===s}):s;if(h){var f=(0,tn.Z)(u)?{duration:u}:u,d=f.easing,v=d===void 0?"linear":d,p=f.duration,g=p===void 0?100:p,m=f.easingFunction,b=m===void 0?void 0:m,E=f.onfinish,w=E===void 0?void 0:E,S=f.onframe,M=S===void 0?void 0:S,C=.01;this.cancelLandmarkAnimation();var T=h.position,k=h.focalPoint,O=h.zoom,A=h.roll,R=b||Mt.EasingFunction(v),L,D=function(){l.setFocalPoint(k),l.setPosition(T),l.setRoll(A),l.setZoom(O),l.computeMatrix(),l.triggerUpdate(),w==null||w()};if(g===0)return D();var z=function(G){L===void 0&&(L=G);var Y=G-L;if(Y>=g){D();return}var q=R(Y/g),rt=Xt(),yt=Xt(),st=1,mt=0;An(rt,l.focalPoint,k,q),An(yt,l.position,T,q),mt=l.roll*(1-q)+A*q,st=l.zoom*(1-q)+O*q,l.setFocalPoint(rt),l.setPosition(yt),l.setRoll(mt),l.setZoom(st);var at=Ls(rt,k)+Ls(yt,T);if(at<=C&&O===void 0&&A===void 0)return D();l.computeMatrix(),l.triggerUpdate(),Y<g&&(M==null||M(q),l.landmarkAnimationID=l.canvas.requestAnimationFrame(z))};this.canvas.requestAnimationFrame(z)}}}])}(gs);Mt.CameraContribution=kE;var y=null,x=0,_=new WeakMap,P=null,I=null,Z,U;function Q(a,n){return Z=new y(a,n)}function nt(a){return U||(U=y.copy(Z),U.oldValue=a,U)}function wt(){Z=U=void 0}function St(a){return a===U||a===Z}function At(a,n){return a===n?a:U&&St(a)?U:null}function Ht(a){a.nodes.forEach(function(n){var r=_.get(n);r&&r.forEach(function(s){s.observer===a&&s.removeTransientObservers()})})}function ie(a,n){for(var r=a;r;r=r.parentNode){var s=_.get(r);if(s)for(var l=0;l<s.length;l++){var u=s[l],h=u.options;if(!(r!==a&&!h.subtree)){var f=n(h);f&&u.enqueue(f)}}}}var ue=!1,Pe=null;function ye(a){Pe.push(a),ue||(ue=!0,typeof runtime.globalThis!="undefined"?runtime.globalThis.setTimeout(ze):ze())}function ze(){ue=!1;var a=Pe;Pe=[],a.sort(function(r,s){return r.uid-s.uid});var n=!1;a.forEach(function(r){var s=r.takeRecords();Ht(r),s.length&&(r.callback(s,r),n=!0)}),n&&ze()}var Ye=function(a){function n(r,s,l,u){var h;return(0,H.Z)(this,n),h=(0,$.Z)(this,n,[r]),h.currentTime=l,h.timelineTime=u,h.target=s,h.type="finish",h.bubbles=!1,h.currentTarget=s,h.defaultPrevented=!1,h.eventPhase=h.AT_TARGET,h.timeStamp=Date.now(),h.currentTime=l,h.timelineTime=u,h}return(0,X.Z)(n,a),(0,j.Z)(n)}(Kh),ia=0,Ti=function(){function a(n,r){var s;(0,H.Z)(this,a),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=n,n.animation=this,this.timeline=r,this.id="".concat(ia++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((s=this.effect)===null||s===void 0?void 0:s.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return(0,j.Z)(a,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var r=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(s,l){r.resolveReadyPromise=function(){s(r)},r.rejectReadyPromise=function(){l(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var r=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(s,l){r.resolveFinishedPromise=function(){s(r)},r.rejectFinishedPromise=function(){l(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(r){if(r=Number(r),!isNaN(r)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var s;this._startTime=Number((s=this.timeline)===null||s===void 0?void 0:s.currentTime)-r/this.playbackRate}this.currentTimePending=!1,this._currentTime!==r&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(r,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(r){if(r!==null){if(this.updatePromises(),r=Number(r),isNaN(r)||this._paused||this._idle)return;this._startTime=r,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(r){if(r!==this._playbackRate){this.updatePromises();var s=this.currentTime;this._playbackRate=r,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),s!==null&&(this.currentTime=s),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var r;if((r=this.effect.target)!==null&&r!==void 0&&r.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var s=this.oldPlayState,l=this.pending?"pending":this.playState;return this.readyPromise&&l!==s&&(l==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):s==="pending"?this.resolveReadyPromise():l==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&l!==s&&(l==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):l==="finished"?this.resolveFinishedPromise():s==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=l,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var r=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var s=new Ye(null,this,this.currentTime,null);setTimeout(function(){r.oncancel(s)})}}},{key:"reverse",value:function(){this.updatePromises();var r=this.currentTime;this.playbackRate*=-1,this.play(),r!==null&&(this.currentTime=r),this.updatePromises()}},{key:"updatePlaybackRate",value:function(r){this.playbackRate=r}},{key:"targetAnimations",value:function(){var r,s=(r=this.effect)===null||r===void 0?void 0:r.target;return s.getAnimations()}},{key:"markTarget",value:function(){var r=this.targetAnimations();r.indexOf(this)===-1&&r.push(this)}},{key:"unmarkTarget",value:function(){var r=this.targetAnimations(),s=r.indexOf(this);s!==-1&&r.splice(s,1)}},{key:"tick",value:function(r,s){!this._idle&&!this._paused&&(this._startTime===null?s&&(this.startTime=r-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((r-this._startTime)*this.playbackRate)),s&&(this.currentTimePending=!1,this.fireEvents(r))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(En)}},{key:"addEventListener",value:function(r,s,l){throw new Error(En)}},{key:"removeEventListener",value:function(r,s,l){throw new Error(En)}},{key:"dispatchEvent",value:function(r){throw new Error(En)}},{key:"commitStyles",value:function(){throw new Error(En)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var r;this._inEffect=!!((r=this.effect)!==null&&r!==void 0&&r.update(-1))}else{var s;this._inEffect=!!((s=this.effect)!==null&&s!==void 0&&s.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(r,s){r!==this._currentTime&&(this._currentTime=r,this._isFinished&&!s&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(r){var s=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var l=new Ye(null,this,this.currentTime,r);setTimeout(function(){s.onfinish&&s.onfinish(l)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var u=new Ye(null,this,this.currentTime,r);this.onframe(u)}this._finishedFlag=!1}}}])}(),aa=4,vr=.001,Ua=1e-7,js=10,ac=11,Qp=1/(ac-1),qA=typeof Float32Array=="function",qS=function(n,r){return 1-3*r+3*n},QS=function(n,r){return 3*r-6*n},JS=function(n){return 3*n},Jp=function(n,r,s){return((qS(r,s)*n+QS(r,s))*n+JS(r))*n},t_=function(n,r,s){return 3*qS(r,s)*n*n+2*QS(r,s)*n+JS(r)},QA=function(n,r,s,l,u){var h,f,d=0;do f=r+(s-r)/2,h=Jp(f,l,u)-n,h>0?s=f:r=f;while(Math.abs(h)>Ua&&++d<js);return f},JA=function(n,r,s,l){for(var u=0;u<aa;++u){var h=t_(r,s,l);if(h===0)return r;var f=Jp(r,s,l)-n;r-=f/h}return r},PE=function(n,r,s,l){if(!(n>=0&&n<=1&&s>=0&&s<=1))throw new Error("bezier x values must be in [0, 1] range");if(n===r&&s===l)return function(d){return d};for(var u=qA?new Float32Array(ac):new Array(ac),h=0;h<ac;++h)u[h]=Jp(h*Qp,n,s);var f=function(v){for(var p=0,g=1,m=ac-1;g!==m&&u[g]<=v;++g)p+=Qp;--g;var b=(v-u[g])/(u[g+1]-u[g]),E=p+b*Qp,w=t_(E,n,s);return w>=vr?JA(v,E,n,s):w===0?E:QA(v,p,p+Qp,n,s)};return function(d){return d===0||d===1?d:Jp(f(d),r,l)}},tk=function(n){return n=n.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())}),n.charAt(0)==="-"?n.substring(1):n},tg=function(n){return Math.pow(n,2)},eg=function(n){return Math.pow(n,3)},ng=function(n){return Math.pow(n,4)},rg=function(n){return Math.pow(n,5)},ig=function(n){return Math.pow(n,6)},ag=function(n){return 1-Math.cos(n*Math.PI/2)},sg=function(n){return 1-Math.sqrt(1-n*n)},og=function(n){return n*n*(3*n-2)},lg=function(n){for(var r,s=4;n<((r=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((r*3-2)/22-n,2)},cg=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=(0,V.Z)(r,2),l=s[0],u=l===void 0?1:l,h=s[1],f=h===void 0?.5:h,d=Le(Number(u),1,10),v=Le(Number(f),.1,2);return n===0||n===1?n:-d*Math.pow(2,10*(n-1))*Math.sin((n-1-v/(Math.PI*2)*Math.asin(1/d))*(Math.PI*2)/v)},ev=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,l=(0,V.Z)(r,4),u=l[0],h=u===void 0?1:u,f=l[1],d=f===void 0?100:f,v=l[2],p=v===void 0?10:v,g=l[3],m=g===void 0?0:g;h=Le(h,.1,1e3),d=Le(d,.1,1e3),p=Le(p,.1,1e3),m=Le(m,.1,1e3);var b=Math.sqrt(d/h),E=p/(2*Math.sqrt(d*h)),w=E<1?b*Math.sqrt(1-E*E):0,S=1,M=E<1?(E*b+-m)/w:-m+b,C=s?s*n/1e3:n;return E<1?C=Math.exp(-C*E*b)*(S*Math.cos(w*C)+M*Math.sin(w*C)):C=(S+M*C)*Math.exp(-C*b),n===0||n===1?n:1-C},RE=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=r,l=(0,V.Z)(s,2),u=l[0],h=u===void 0?10:u,f=l[1],d=f==="start"?Math.ceil:Math.floor;return d(Le(n,0,1)*h)/h},e_=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=(0,V.Z)(r,4),l=s[0],u=s[1],h=s[2],f=s[3];return PE(l,u,h,f)(n)},ug=PE(.42,0,1,1),xs=function(n){return function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0;return 1-n(1-r,s,l)}},Es=function(n){return function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0;return r<.5?n(r*2,s,l)/2:1-n(r*-2+2,s,l)/2}},ws=function(n){return function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0;return r<.5?(1-n(1-r*2,s,l))/2:(n(r*2-1,s,l)+1)/2}},n_={steps:RE,"step-start":function(n){return RE(n,[1,"start"])},"step-end":function(n){return RE(n,[1,"end"])},linear:function(n){return n},"cubic-bezier":e_,ease:function(n){return e_(n,[.25,.1,.25,1])},in:ug,out:xs(ug),"in-out":Es(ug),"out-in":ws(ug),"in-quad":tg,"out-quad":xs(tg),"in-out-quad":Es(tg),"out-in-quad":ws(tg),"in-cubic":eg,"out-cubic":xs(eg),"in-out-cubic":Es(eg),"out-in-cubic":ws(eg),"in-quart":ng,"out-quart":xs(ng),"in-out-quart":Es(ng),"out-in-quart":ws(ng),"in-quint":rg,"out-quint":xs(rg),"in-out-quint":Es(rg),"out-in-quint":ws(rg),"in-expo":ig,"out-expo":xs(ig),"in-out-expo":Es(ig),"out-in-expo":ws(ig),"in-sine":ag,"out-sine":xs(ag),"in-out-sine":Es(ag),"out-in-sine":ws(ag),"in-circ":sg,"out-circ":xs(sg),"in-out-circ":Es(sg),"out-in-circ":ws(sg),"in-back":og,"out-back":xs(og),"in-out-back":Es(og),"out-in-back":ws(og),"in-bounce":lg,"out-bounce":xs(lg),"in-out-bounce":Es(lg),"out-in-bounce":ws(lg),"in-elastic":cg,"out-elastic":xs(cg),"in-out-elastic":Es(cg),"out-in-elastic":ws(cg),spring:ev,"spring-in":ev,"spring-out":xs(ev),"spring-in-out":Es(ev),"spring-out-in":ws(ev)},ek=function(n){return tk(n).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},nk=function(n){return n_[ek(n)]||n_.linear},rk=function(n){return n},ik=1,ak=.5,r_=0;function i_(a,n){return function(r){if(r>=1)return 1;var s=1/a;return r+=n*s,r-r%s}}var hg="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",sk=new RegExp("cubic-bezier\\(".concat(hg,",").concat(hg,",").concat(hg,",").concat(hg,"\\)")),ok=/steps\(\s*(\d+)\s*\)/,lk=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function NE(a){var n=sk.exec(a);if(n)return PE.apply(void 0,(0,J.Z)(n.slice(1).map(Number)));var r=ok.exec(a);if(r)return i_(Number(r[1]),r_);var s=lk.exec(a);return s?i_(Number(s[1]),{start:ik,middle:ak,end:r_}[s[2]]):nk(a)}function ck(a){return Math.abs(uk(a)/(a.playbackRate||1))}function uk(a){var n;return a.duration===0||a.iterations===0?0:(a.duration==="auto"?0:Number(a.duration))*((n=a.iterations)!==null&&n!==void 0?n:1)}var a_=0,LE=1,fg=2,s_=3;function hk(a,n,r){if(n===null)return a_;var s=r.endTime;return n<Math.min(r.delay,s)?LE:n>=Math.min(r.delay+a+r.endDelay,s)?fg:s_}function fk(a,n,r,s,l){switch(s){case LE:return n==="backwards"||n==="both"?0:null;case s_:return r-l;case fg:return n==="forwards"||n==="both"?a:null;case a_:return null}}function dk(a,n,r,s,l){var u=l;return a===0?n!==LE&&(u+=r):u+=s/a,u}function vk(a,n,r,s,l,u){var h=a===1/0?n%1:a%1;return h===0&&r===fg&&s!==0&&(l!==0||u===0)&&(h=1),h}function pk(a,n,r,s){return a===fg&&n===1/0?1/0:r===1?Math.floor(s)-1:Math.floor(s)}function gk(a,n,r){var s=a;if(a!=="normal"&&a!=="reverse"){var l=n;a==="alternate-reverse"&&(l+=1),s="normal",l!==1/0&&l%2!==0&&(s="reverse")}return s==="normal"?r:1-r}function yk(a,n,r){var s=hk(a,n,r),l=fk(a,r.fill,n,s,r.delay);if(l===null)return null;var u=r.duration==="auto"?0:r.duration,h=dk(u,s,r.iterations,l,r.iterationStart),f=vk(h,r.iterationStart,s,r.iterations,l,u),d=pk(s,r.iterations,f,h),v=gk(r.direction,d,f);return r.currentIteration=d,r.progress=v,r.easingFunction(v)}function mk(a,n,r){var s=bk(a,n),l=xk(s,r);return function(u,h){if(h!==null)l.filter(function(d){return h>=d.applyFrom&&h<d.applyTo}).forEach(function(d){var v=h-d.startOffset,p=d.endOffset-d.startOffset,g=p===0?0:v/p;u.setAttribute(d.property,d.interpolation(g),!1,!1)});else for(var f in s)o_(f)&&u.setAttribute(f,null)}}function o_(a){return a!=="offset"&&a!=="easing"&&a!=="composite"&&a!=="computedOffset"}function bk(a,n){for(var r={},s=0;s<a.length;s++)for(var l in a[s])if(o_(l)){var u={offset:a[s].offset,computedOffset:a[s].computedOffset,easing:a[s].easing,easingFunction:NE(a[s].easing)||n.easingFunction,value:a[s][l]};r[l]=r[l]||[],r[l].push(u)}return r}function xk(a,n){var r=[];for(var s in a)for(var l=a[s],u=0;u<l.length-1;u++){var h=u,f=u+1,d=l[h].computedOffset,v=l[f].computedOffset,p=d,g=v;u===0&&(p=-1/0,v===0&&(f=h)),u===l.length-2&&(g=1/0,d===1&&(h=f)),r.push({applyFrom:p,applyTo:g,startOffset:l[h].computedOffset,endOffset:l[f].computedOffset,easingFunction:l[h].easingFunction,property:s,interpolation:Ek(s,l[h].value,l[f].value,n)})}return r.sort(function(m,b){return m.startOffset-b.startOffset}),r}var l_=function(n,r,s){return function(l){var u=c_(n,r,l);return(0,tn.Z)(u)?u:s(u)}};function Ek(a,n,r,s){var l=Cp[a];if(l&&l.syntax&&l.int){var u=Mt.styleValueRegistry.getPropertySyntax(l.syntax);if(u){var h=u.parser,f=h?h(n,s):n,d=h?h(r,s):r,v=u.mixer(f,d,s);if(v){var p=l_.apply(void 0,(0,J.Z)(v));return function(g){return g===0?n:g===1?r:p(g)}}}}return l_(!1,!0,function(g){return g?r:n})}function c_(a,n,r){if(typeof a=="number"&&typeof n=="number")return a*(1-r)+n*r;if(typeof a=="boolean"&&typeof n=="boolean"||typeof a=="string"&&typeof n=="string")return r<.5?a:n;if(Array.isArray(a)&&Array.isArray(n)){for(var s=a.length,l=n.length,u=Math.max(s,l),h=[],f=0;f<u;f++)h.push(c_(a[f<s?f:s-1],n[f<l?f:l-1],r));return h}throw new Error("Mismatched interpolation arguments ".concat(a,":").concat(n))}var wk=function(){function a(){(0,H.Z)(this,a),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=rk,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return(0,j.Z)(a,[{key:"easing",get:function(){return this._easing},set:function(r){this.easingFunction=NE(r),this._easing=r}}])}();function Sk(a){var n=[];for(var r in a)if(!(r in["easing","offset","composite"])){var s=a[r];Array.isArray(s)||(s=[s]);for(var l=s.length,u=0;u<l;u++){if(!n[u]){var h={};"offset"in a&&(h.offset=Number(a.offset)),"easing"in a&&(h.easing=a.easing),"composite"in a&&(h.composite=a.composite),n[u]=h}s[u]!==void 0&&s[u]!==null&&(n[u][r]=s[u])}}return n.sort(function(f,d){return(f.computedOffset||0)-(d.computedOffset||0)}),n}function u_(a,n){if(a===null)return[];Array.isArray(a)||(a=Sk(a));for(var r=a.map(function(d){var v={};n!=null&&n.composite&&(v.composite="auto");for(var p in d){var g=d[p];if(p==="offset"){if(g!==null){if(g=Number(g),!isFinite(g))throw new Error("Keyframe offsets must be numbers.");if(g<0||g>1)throw new Error("Keyframe offsets must be between 0 and 1.");v.computedOffset=g}}else if(p==="composite"&&["replace","add","accumulate","auto"].indexOf(g)===-1)throw new Error("".concat(g," compositing is not supported"));v[p]=g}return v.offset===void 0&&(v.offset=null),v.easing===void 0&&(v.easing=(n==null?void 0:n.easing)||"linear"),v.composite===void 0&&(v.composite="auto"),v}),s=!0,l=-1/0,u=0;u<r.length;u++){var h=r[u].offset;if((0,le.Z)(h))s=!1;else{if(h<l)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");l=h}}r=r.filter(function(d){return Number(d.offset)>=0&&Number(d.offset)<=1});function f(){var d,v=r,p=v.length;if(r[p-1].computedOffset=Number((d=r[p-1].offset)!==null&&d!==void 0?d:1),p>1){var g;r[0].computedOffset=Number((g=r[0].offset)!==null&&g!==void 0?g:0)}for(var m=0,b=Number(r[0].computedOffset),E=1;E<p;E++){var w=r[E].computedOffset;if(!(0,le.Z)(w)&&!(0,le.Z)(b)){for(var S=1;S<E-m;S++)r[m+S].computedOffset=b+(Number(w)-b)*S/(E-m);m=E,b=Number(w)}}}return s||f(),r}var _k="backwards|forwards|both|none".split("|"),Mk="reverse|alternate|alternate-reverse".split("|");function Ck(a,n){var r=new wk;return n&&(r.fill="both",r.duration="auto"),typeof a=="number"&&!isNaN(a)?r.duration=a:a!==void 0&&Object.keys(a).forEach(function(s){if(a[s]!==void 0&&a[s]!==null&&a[s]!=="auto"){if((typeof r[s]=="number"||s==="duration")&&(typeof a[s]!="number"||isNaN(a[s]))||s==="fill"&&_k.indexOf(a[s])===-1||s==="direction"&&Mk.indexOf(a[s])===-1)return;r[s]=a[s]}}),r}function Tk(a,n){return a=Ok(a!=null?a:{duration:"auto"}),Ck(a,n)}function Ok(a){return typeof a=="number"&&(isNaN(a)?a={duration:"auto"}:a={duration:a}),a}var Ak=function(){function a(n,r,s){var l=this;(0,H.Z)(this,a),this.composite="replace",this.iterationComposite="replace",this.target=n,this.timing=Tk(s,!1),this.timing.effect=this,this.timing.activeDuration=ck(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=u_(r,this.timing),this.interpolations=mk(this.normalizedKeyframes,this.timing,this.target);var u=Mt.globalThis.Proxy;this.computedTiming=u?new u(this.timing,{get:function(f,d){return d==="duration"?f.duration==="auto"?0:f.duration:d==="fill"?f.fill==="auto"?"none":f.fill:d==="localTime"?l.animation&&l.animation.currentTime||null:d==="currentIteration"?!l.animation||l.animation.playState!=="running"?null:f.currentIteration||0:d==="progress"?!l.animation||l.animation.playState!=="running"?null:f.progress||0:f[d]},set:function(){return!0}}):this.timing}return(0,j.Z)(a,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(r){return r===null?!1:(this.timeFraction=yk(this.timing.activeDuration,r,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(r){this.normalizedKeyframes=u_(r)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(r){var s=this;Object.keys(r||{}).forEach(function(l){s.timing[l]=r[l]})}}])}();function h_(a,n){return Number(a.id)-Number(n.id)}var kk=function(){function a(n){var r=this;(0,H.Z)(this,a),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(s){r.currentTime=s,r.discardAnimations(),r.animations.length===0?r.timelineTicking=!1:r.requestAnimationFrame(r.webAnimationsNextTick)},this.processRafCallbacks=function(s){var l=r.rafCallbacks;r.rafCallbacks=[],s<Number(r.currentTime)&&(s=Number(r.currentTime)),r.animations.sort(h_),r.animations=r.tick(s,!0,r.animations)[0],l.forEach(function(u){u[1](s)}),r.applyPendingEffects()},this.document=n}return(0,j.Z)(a,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(r,s,l){var u=new Ak(r,s,l),h=new Ti(u,this);return this.animations.push(h),this.restartWebAnimationsNextTick(),h.updatePromises(),h.play(),h.updatePromises(),h}},{key:"applyDirtiedAnimation",value:function(r){var s=this;if(!this.inTick){r.markTarget();var l=r.targetAnimations();l.sort(h_);var u=this.tick(Number(this.currentTime),!1,l.slice())[1];u.forEach(function(h){var f=s.animations.indexOf(h);f!==-1&&s.animations.splice(f,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(r){r==null||r.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(r){return r.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(r){return r.playState!=="finished"&&r.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(r){var s=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([s,r]),s}},{key:"requestAnimationFrame",value:function(r){var s=this;return this.rAF(function(l){s.updateAnimationsPromises(),r(l),s.updateAnimationsPromises()})}},{key:"tick",value:function(r,s,l){var u=this,h,f;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=r,this.ticking=!1;var d=[],v=[],p=[],g=[];return l.forEach(function(m){m.tick(r,s),m._inEffect?(v.push(m.effect),m.markTarget()):(d.push(m.effect),m.unmarkTarget()),m._needsTick&&(u.ticking=!0);var b=m._inEffect||m._needsTick;m._inTimeline=b,b?p.push(m):g.push(m)}),(h=this.pendingEffects).push.apply(h,d),(f=this.pendingEffects).push.apply(f,v),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[p,g]}}])}();Mt.EasingFunction=NE,Mt.AnimationTimeline=kk;var f_=function(a){return(0,le.Z)(a)?"":a.toString()},Pk=function(a){var n=f_(a);return n.charAt(0).toUpperCase()+n.substring(1)},dg=Pk,d_=K(6241),Rk=function(a){return a!==null&&typeof a!="function"&&isFinite(a.length)},nv=Rk,IE=function(a,n){if(a===n)return!0;if(!a||!n||(0,xn.Z)(a)||(0,xn.Z)(n))return!1;if(nv(a)||nv(n)){if(a.length!==n.length)return!1;for(var r=!0,s=0;s<a.length&&(r=IE(a[s],n[s]),!!r);s++);return r}if((0,d_.Z)(a)||(0,d_.Z)(n)){var l=Object.keys(a),u=Object.keys(n);if(l.length!==u.length)return!1;for(var r=!0,s=0;s<l.length&&(r=IE(a[l[s]],n[l[s]]),!!r);s++);return r}return!1},Rr=IE;const Nk={duration:500},Lk={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"},K9={CHANGE:"change"};var ir;(function(a){a.NodeAdded="NodeAdded",a.NodeUpdated="NodeUpdated",a.NodeRemoved="NodeRemoved",a.EdgeAdded="EdgeAdded",a.EdgeUpdated="EdgeUpdated",a.EdgeRemoved="EdgeRemoved",a.ComboAdded="ComboAdded",a.ComboUpdated="ComboUpdated",a.ComboRemoved="ComboRemoved"})(ir||(ir={}));var Sa;(function(a){a.DRAW="draw",a.COLLAPSE="collapse",a.EXPAND="expand",a.TRANSFORM="transform"})(Sa||(Sa={}));var ml;(function(a){a.CLICK="canvas:click",a.DBLCLICK="canvas:dblclick",a.POINTER_OVER="canvas:pointerover",a.POINTER_LEAVE="canvas:pointerleave",a.POINTER_ENTER="canvas:pointerenter",a.POINTER_MOVE="canvas:pointermove",a.POINTER_OUT="canvas:pointerout",a.POINTER_DOWN="canvas:pointerdown",a.POINTER_UP="canvas:pointerup",a.CONTEXT_MENU="canvas:contextmenu",a.DRAG_START="canvas:dragstart",a.DRAG="canvas:drag",a.DRAG_END="canvas:dragend",a.DRAG_ENTER="canvas:dragenter",a.DRAG_OVER="canvas:dragover",a.DRAG_LEAVE="canvas:dragleave",a.DROP="canvas:drop",a.WHEEL="canvas:wheel"})(ml||(ml={}));var gu;(function(a){a.CLICK="combo:click",a.DBLCLICK="combo:dblclick",a.POINTER_OVER="combo:pointerover",a.POINTER_LEAVE="combo:pointerleave",a.POINTER_ENTER="combo:pointerenter",a.POINTER_MOVE="combo:pointermove",a.POINTER_OUT="combo:pointerout",a.POINTER_DOWN="combo:pointerdown",a.POINTER_UP="combo:pointerup",a.CONTEXT_MENU="combo:contextmenu",a.DRAG_START="combo:dragstart",a.DRAG="combo:drag",a.DRAG_END="combo:dragend",a.DRAG_ENTER="combo:dragenter",a.DRAG_OVER="combo:dragover",a.DRAG_LEAVE="combo:dragleave",a.DROP="combo:drop"})(gu||(gu={}));var pt;(function(a){a.CLICK="click",a.DBLCLICK="dblclick",a.POINTER_OVER="pointerover",a.POINTER_LEAVE="pointerleave",a.POINTER_ENTER="pointerenter",a.POINTER_MOVE="pointermove",a.POINTER_OUT="pointerout",a.POINTER_DOWN="pointerdown",a.POINTER_UP="pointerup",a.CONTEXT_MENU="contextmenu",a.DRAG_START="dragstart",a.DRAG="drag",a.DRAG_END="dragend",a.DRAG_ENTER="dragenter",a.DRAG_OVER="dragover",a.DRAG_LEAVE="dragleave",a.DROP="drop",a.KEY_DOWN="keydown",a.KEY_UP="keyup",a.WHEEL="wheel",a.PINCH="pinch"})(pt||(pt={}));var lf;(function(a){a.KEY_DOWN="keydown",a.KEY_UP="keyup"})(lf||(lf={}));var vg;(function(a){a.CLICK="edge:click",a.DBLCLICK="edge:dblclick",a.POINTER_OVER="edge:pointerover",a.POINTER_LEAVE="edge:pointerleave",a.POINTER_ENTER="edge:pointerenter",a.POINTER_MOVE="edge:pointermove",a.POINTER_OUT="edge:pointerout",a.POINTER_DOWN="edge:pointerdown",a.POINTER_UP="edge:pointerup",a.CONTEXT_MENU="edge:contextmenu",a.DRAG_ENTER="edge:dragenter",a.DRAG_OVER="edge:dragover",a.DRAG_LEAVE="edge:dragleave",a.DROP="edge:drop"})(vg||(vg={}));var Pt;(function(a){a.BEFORE_CANVAS_INIT="beforecanvasinit",a.AFTER_CANVAS_INIT="aftercanvasinit",a.BEFORE_SIZE_CHANGE="beforesizechange",a.AFTER_SIZE_CHANGE="aftersizechange",a.BEFORE_ELEMENT_CREATE="beforeelementcreate",a.AFTER_ELEMENT_CREATE="afterelementcreate",a.BEFORE_ELEMENT_UPDATE="beforeelementupdate",a.AFTER_ELEMENT_UPDATE="afterelementupdate",a.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",a.AFTER_ELEMENT_DESTROY="afterelementdestroy",a.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",a.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",a.BEFORE_DRAW="beforedraw",a.AFTER_DRAW="afterdraw",a.BEFORE_RENDER="beforerender",a.AFTER_RENDER="afterrender",a.BEFORE_ANIMATE="beforeanimate",a.AFTER_ANIMATE="afteranimate",a.BEFORE_LAYOUT="beforelayout",a.AFTER_LAYOUT="afterlayout",a.BEFORE_STAGE_LAYOUT="beforestagelayout",a.AFTER_STAGE_LAYOUT="afterstagelayout",a.BEFORE_TRANSFORM="beforetransform",a.AFTER_TRANSFORM="aftertransform",a.BATCH_START="batchstart",a.BATCH_END="batchend",a.BEFORE_DESTROY="beforedestroy",a.AFTER_DESTROY="afterdestroy",a.BEFORE_RENDERER_CHANGE="beforerendererchange",a.AFTER_RENDERER_CHANGE="afterrendererchange"})(Pt||(Pt={}));var sc;(function(a){a.UNDO="undo",a.REDO="redo",a.CANCEL="cancel",a.ADD="add",a.CLEAR="clear",a.CHANGE="change"})(sc||(sc={}));var Ss;(function(a){a.CLICK="node:click",a.DBLCLICK="node:dblclick",a.POINTER_OVER="node:pointerover",a.POINTER_LEAVE="node:pointerleave",a.POINTER_ENTER="node:pointerenter",a.POINTER_MOVE="node:pointermove",a.POINTER_OUT="node:pointerout",a.POINTER_DOWN="node:pointerdown",a.POINTER_UP="node:pointerup",a.CONTEXT_MENU="node:contextmenu",a.DRAG_START="node:dragstart",a.DRAG="node:drag",a.DRAG_END="node:dragend",a.DRAG_ENTER="node:dragenter",a.DRAG_OVER="node:dragover",a.DRAG_LEAVE="node:dragleave",a.DROP="node:drop"})(Ss||(Ss={}));const zn="combo",Ya="tree";var rv;(function(a){a.NODE="node",a.EDGE="edge",a.COMBO="combo",a.THEME="theme",a.PALETTE="palette",a.LAYOUT="layout",a.BEHAVIOR="behavior",a.PLUGIN="plugin",a.ANIMATION="animation",a.TRANSFORM="transform",a.SHAPE="shape"})(rv||(rv={}));const DE={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function bl(a,n){var r;const s=(r=DE[a])===null||r===void 0?void 0:r[n];if(s)return s}function q9(a){return EXTENSION_REGISTRY[a]}const Ik="5.0.49",Dk="G6";function xl(a){return`[${Dk} v${Ik}] ${a}`}const _a={mute:!1,debug:a=>{!_a.mute&&console.debug(xl(a))},info:a=>{!_a.mute&&console.info(xl(a))},warn:a=>{!_a.mute&&console.warn(xl(a))},error:a=>{!_a.mute&&console.error(xl(a))}};function v_(a){const{theme:n}=a;if(!n)return{};const r=bl(rv.THEME,n);return r||(_a.warn(`The theme of ${n} is not registered.`),{})}function BE(a,n){if(Array.isArray(a)&&a.length===0)return null;const r=Array.isArray(a)?a[0]:a,s=Array.isArray(a)?a.slice(1):n||[];return new Proxy(r,{get(l,u){return typeof l[u]=="function"&&!["onframe","onfinish"].includes(u)?(...h)=>{l[u](...h),s.forEach(f=>{var d;return(d=f[u])===null||d===void 0?void 0:d.call(f,...h)})}:u==="finished"?Promise.all([r.finished,...s.map(h=>h.finished)]):Reflect.get(l,u)},set(l,u,h){return["onframe","onfinish"].includes(u)||s.forEach(f=>{f[u]=h}),Reflect.set(l,u,h)}})}function FE(a){const n=a.reduce((s,l)=>(Object.entries(l).forEach(([u,h])=>{s[u]===void 0?s[u]=[h]:s[u].push(h)}),s),{});Object.entries(n).forEach(([s,l])=>{(l.length!==a.length||l.some(u=>(0,le.Z)(u))||l.every(u=>!["sourceNode","targetNode","childrenNode"].includes(s)&&Rr(u,l[0])))&&delete n[s]});const r=Object.entries(n).reduce((s,[l,u])=>(u.forEach((h,f)=>{s[f]?s[f][l]=h:s[f]={[l]:h}}),s),[]);return a.length!==0&&r.length===0&&r.push({_:0},{_:0}),r}function iv(a){switch(a){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function p_(a,n){const{animation:r}=a;if(r===!1||n===!1)return!1;const s=Object.assign({},Nk);return(0,ai.Z)(r)&&Object.assign(s,r),(0,ai.Z)(n)&&Object.assign(s,n),s}function Bk(a){if(typeof a=="string"){const n=bl(rv.ANIMATION,a);return n||(_a.warn(`The animation of ${a} is not registered.`),[])}return a}function Fk(a,n,r,s){var l,u;const{animation:h}=a;if(h===!1||s===!1)return[];const f=(l=a==null?void 0:a[n])===null||l===void 0?void 0:l.animation;if(f===!1)return[];const d=f==null?void 0:f[r];if(d===!1)return[];const v=(u=v_(a)[n])===null||u===void 0?void 0:u.animation,p=(m=[])=>Bk(m).map(b=>Object.assign(Object.assign(Object.assign(Object.assign({},Lk),(0,ai.Z)(h)&&h),b),(0,ai.Z)(s)&&s));if(d)return p(d);if(!v)return[];const g=v[r];return g===!1?[]:p(g)}function g_(a,n,r,s=[]){if(!s&&a===0&&n===0&&r===0)return null;if(Array.isArray(s)){let u=-1;const h=[];for(let f=0;f<s.length;f++){const d=s[f];if(d[0]==="translate"){if(d[1]===a&&d[2]===n)return null;u=f,h.push(["translate",a,n])}else if(d[0]==="translate3d"){if(d[1]===a&&d[2]===n&&d[3]===r)return null;u=f,h.push(["translate3d",a,n,r!=null?r:0])}else h.push(d)}return u===-1&&h.splice(0,0,(0,tn.Z)(r)?["translate3d",a,n,r!=null?r:0]:["translate",a,n]),h.length===0?null:h}const l=s?s.replace(/translate(3d)?\([^)]*\)/g,""):"";return r===0?`translate(${a}, ${n})${l}`:`translate3d(${a}, ${n}, ${r})${l}`}var zk=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};const Zk=(a,n,r)=>{if(!r.length)return null;const[s,l]=n,u=v=>{var p;if(v){const g=a.getShape(v);if(!g)return null;const m=`get${dg(v)}Style`,b=((p=a==null?void 0:a[m])===null||p===void 0?void 0:p.bind(a))||(S=>S),E=(b==null?void 0:b(s))||{},w=(b==null?void 0:b(l))||{};return{shape:g,fromStyle:E,toStyle:w}}else return{shape:a,fromStyle:s,toStyle:l}};let h;const f=r.map(v=>{var{fields:p,shape:g,states:m}=v,b=zk(v,["fields","shape","states"]);const E=u(g);if(!E)return null;const{shape:w,fromStyle:S,toStyle:M}=E,C=[{},{}];if(p.forEach(k=>{var O,A;Object.assign(C[0],{[k]:(O=S[k])!==null&&O!==void 0?O:iv(k)}),Object.assign(C[1],{[k]:(A=M[k])!==null&&A!==void 0?A:iv(k)})}),C.some(k=>Object.keys(k).some(O=>["x","y","z"].includes(O)))){const{x:k=0,y:O=0,z:A,transform:R=""}=w.attributes||{};C.forEach(L=>{var D,z,W;L.transform=g_((D=L.x)!==null&&D!==void 0?D:k,(z=L.y)!==null&&z!==void 0?z:O,(W=L.z)!==null&&W!==void 0?W:A,R)})}const T=w.animate(FE(C),b);return g===void 0&&(h=T),T}).filter(Boolean),d=h||(f==null?void 0:f[0]);return d?BE(d,f.filter(v=>v!==v)):null},Wk=[{fields:["opacity"]}],Gk=[{fields:["x","y"]}],y_=[{fields:["x","y"]}],jk=y_,m_=[{fields:["sourceNode","targetNode"]}],$k=m_,b_=[{fields:["childrenNode","x","y"]}],Hk=b_,Q9=[{fields:["childrenNode","x","y"]}];var Vk=Object.prototype.hasOwnProperty;function Uk(a,n){if(!n||!(0,za.Z)(a))return{};for(var r={},s=(0,re.Z)(n)?n:function(f){return f[n]},l,u=0;u<a.length;u++){var h=a[u];l=s(h),Vk.call(r,l)?r[l].push(h):r[l]=[h]}return r}var pg=Uk,x_=function(a,n,r){var s,l,u,h,f=0;r||(r={});var d=function(){f=r.leading===!1?0:Date.now(),s=null,h=a.apply(l,u),s||(l=u=null)},v=function(){var p=Date.now();!f&&r.leading===!1&&(f=p);var g=n-(p-f);return l=this,u=arguments,g<=0||g>n?(s&&(clearTimeout(s),s=null),f=p,h=a.apply(l,u),s||(l=u=null)):!s&&r.trailing!==!1&&(s=setTimeout(d,g)),h};return v.cancel=function(){clearTimeout(s),f=0,s=l=u=null},v},gg=K(83207);function Yk(a){return"source"in a&&"target"in a}function Xk(a){return a.length===2}function J9(a){return a.length===3}function cf(a){return a instanceof Float32Array?!0:Array.isArray(a)&&(a.length===2||a.length===3)?a.every(n=>typeof n=="number"):!1}function To(a,n,r){return a>=n&&a<=r}function $s(a=0){if(Array.isArray(a)){const[n=0,r=n,s=n,l=r]=a;return[n,r,s,l]}return[a,a,a,a]}function Kk(a=0){const n=$s(a);return n[0]+n[2]}function tz(a=0){const n=$s(a);return n[1]+n[3]}function Oo(a){return a.max[0]-a.min[0]}function Ao(a){return a.max[1]-a.min[1]}function oc(a){return[Oo(a),Ao(a)]}function lc(a,n){const r=cf(a)?zE(a):a.getShape("key").getBounds();return n?cc(r,n):r}function zE(a){const[n,r,s=0]=a,l=new en;return l.setMinMax([n,r,s],[n,r,s]),l}function cc(a,n){const[r,s,l,u]=$s(n),[h,f,d]=a.min,[v,p,g]=a.max,m=new en;return m.setMinMax([h-u,f-r,d],[v+s,p+l,g]),m}function av(a){if(a.length===0)return new en;if(a.length===1)return a[0];const n=new en;n.setMinMax(a[0].min,a[0].max);for(let r=1;r<a.length;r++){const s=a[r];n.setMinMax([Math.min(n.min[0],s.min[0]),Math.min(n.min[1],s.min[1]),Math.min(n.min[2],s.min[2])],[Math.max(n.max[0],s.max[0]),Math.max(n.max[1],s.max[1]),Math.max(n.max[2],s.max[2])])}return n}function qk(a,n){const[r,s]=a.min,[l,u]=a.max,[h,f]=n.min,[d,v]=n.max;return r>=h&&l<=d&&s>=f&&u<=v}function Hs(a,n){return To(a[0],n.min[0],n.max[0])&&To(a[1],n.min[1],n.max[1])}function E_(a,n,r=!1){const{min:[s,l],max:[u,h]}=n,f=(a[1]===l||a[1]===h)&&(r||To(a[0],s,u)),d=(a[0]===s||a[0]===u)&&(r||To(a[1],l,h));return f||d}function Qk(a,n){return!Hs(a,n)}function yg(a,n){const{center:r}=n;return a[0]===r[0]&&a[1]===r[1]}function sv(a,n){const[r,s]=a,[l,u]=n.min,[h,f]=n.max,d=r-l,v=h-r,p=s-u,g=f-s,m=Math.min(d,v,p,g);return m===d?"left":m===v?"right":m===p?"top":m===g?"bottom":"left"}function yu(a,n){const r=(0,gg.Z)(a);if(Hs(a,n))switch(sv(a,n)){case"left":r[0]=n.min[0];break;case"right":r[0]=n.max[0];break;case"top":r[1]=n.min[1];break;case"bottom":r[1]=n.max[1];break}else{const[s,l]=a,[u,h]=n.min,[f,d]=n.max;r[0]=To(s,u,f)?s:s<u?u:f,r[1]=To(l,h,d)?l:l<h?h:d}return r}function Jk(a,n){const{center:r}=a,[s,l]=oc(a),u=n==="up"||n==="down"?r[0]:n==="right"?r[0]-s/6:r[0]+s/6,h=n==="left"||n==="right"?r[1]:n==="down"?r[1]-l/6:r[1]+l/6;return[u,h]}function tP(a,n){let[r,s]=oc(a);return[r,s]=n==="up"||n==="down"?[r,s]:[s,r],(Math.pow(s,2)-Math.pow(Math.sqrt(Math.pow(r/2,2)+Math.pow(s,2))-r/2,2))/(2*s)}function eP(a){const{min:[n,r],max:[s,l]}=a,u=[n,l],h=[s,l],f=[s,r],d=[n,r];return[[u,h],[h,f],[f,d],[d,u]]}var nP=function(n,r){var s=n.nodes,l=n.edges,u=[],h={};if(!s)throw new Error("invalid nodes data!");return s&&s.forEach(function(f,d){h[f.id]=d;var v=[];u.push(v)}),l&&l.forEach(function(f){var d=f.source,v=f.target,p=h[d],g=h[v];!p&&p!==0||!g&&g!==0||(u[p][g]=1,r||(u[g][p]=1))}),u},mg=nP,rP=function(n,r){return n===r},w_=function(){function a(n,r){r===void 0&&(r=null),this.value=n,this.next=r}return a.prototype.toString=function(n){return n?n(this.value):"".concat(this.value)},a}(),iP=function(){function a(n){n===void 0&&(n=rP),this.head=null,this.tail=null,this.compare=n}return a.prototype.prepend=function(n){var r=new w_(n,this.head);return this.head=r,this.tail||(this.tail=r),this},a.prototype.append=function(n){var r=new w_(n);return this.head?(this.tail.next=r,this.tail=r,this):(this.head=r,this.tail=r,this)},a.prototype.delete=function(n){if(!this.head)return null;for(var r=null;this.head&&this.compare(this.head.value,n);)r=this.head,this.head=this.head.next;var s=this.head;if(s!==null)for(;s.next;)this.compare(s.next.value,n)?(r=s.next,s.next=s.next.next):s=s.next;return this.compare(this.tail.value,n)&&(this.tail=s),r},a.prototype.find=function(n){var r=n.value,s=r===void 0?void 0:r,l=n.callback,u=l===void 0?void 0:l;if(!this.head)return null;for(var h=this.head;h;){if(u&&u(h.value)||s!==void 0&&this.compare(h.value,s))return h;h=h.next}return null},a.prototype.deleteTail=function(){var n=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,n;for(var r=this.head;r.next;)r.next.next?r=r.next:r.next=null;return this.tail=r,n},a.prototype.deleteHead=function(){if(!this.head)return null;var n=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),n},a.prototype.fromArray=function(n){var r=this;return n.forEach(function(s){return r.append(s)}),this},a.prototype.toArray=function(){for(var n=[],r=this.head;r;)n.push(r),r=r.next;return n},a.prototype.reverse=function(){for(var n=this.head,r=null,s=null;n;)s=n.next,n.next=r,r=n,n=s;this.tail=this.head,this.head=r},a.prototype.toString=function(n){return n===void 0&&(n=void 0),this.toArray().map(function(r){return r.toString(n)}).toString()},a}(),S_=iP,aP=function(){function a(){this.linkedList=new S_}return a.prototype.isEmpty=function(){return!this.linkedList.head},a.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},a.prototype.enqueue=function(n){this.linkedList.append(n)},a.prototype.dequeue=function(){var n=this.linkedList.deleteHead();return n?n.value:null},a.prototype.toString=function(n){return this.linkedList.toString(n)},a}(),sP=aP,_s=function(n,r,s){r===void 0&&(r=[]);var l=r.filter(function(d){return d.source===n||d.target===n});if(s==="target"){var u=function(v){return v.source===n};return l.filter(u).map(function(d){return d.target})}if(s==="source"){var h=function(v){return v.target===n};return l.filter(h).map(function(d){return d.source})}var f=function(v){return v.source===n?v.target:v.source};return l.map(f)},oP=function(n,r){return r.filter(function(s){return s.source===n})},bg=function(n,r){return r.filter(function(s){return s.source===n||s.target===n})},__=function(n){n===void 0&&(n=0);var r="".concat(Math.random()).split(".")[1].substr(0,5),s="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(n,"-").concat(r).concat(s)};function lP(a){a===void 0&&(a={});var n=a,r=function(){},s=function(){var l={};return function(u){var h=u.next,f=h;return l[f]?!1:(l[f]=!0,!0)}}();return n.allowTraversal=a.allowTraversal||s,n.enter=a.enter||r,n.leave=a.leave||r,n}var cP=function(n,r,s,l){l===void 0&&(l=!0);var u=lP(s),h=new sP,f=n.edges,d=f===void 0?[]:f;h.enqueue(r);for(var v="",p=function(){var m=h.dequeue();u.enter({current:m,previous:v}),_s(m,d,l?"target":void 0).forEach(function(b){u.allowTraversal({previous:v,current:m,next:b})&&h.enqueue(b)}),u.leave({current:m,previous:v}),v=m};!h.isEmpty();)p()},uP=cP,hP=function(n){for(var r=n.nodes,s=r===void 0?[]:r,l=n.edges,u=l===void 0?[]:l,h=[],f={},d=[],v=function b(E){d.push(E),f[E.id]=!0;for(var w=_s(E.id,u),S=function(T){var k=w[T];if(!f[k]){var O=s.filter(function(A){return A.id===k});O.length>0&&b(O[0])}},M=0;M<w.length;++M)S(M)},p=0;p<s.length;p++){var g=s[p];if(!f[g.id]){v(g);for(var m=[];d.length>0;)m.push(d.pop());h.push(m)}}return h},M_=function(n){for(var r=n.nodes,s=r===void 0?[]:r,l=n.edges,u=l===void 0?[]:l,h=[],f={},d={},v={},p=[],g=0,m=function S(M){d[M.id]=g,v[M.id]=g,g+=1,h.push(M),f[M.id]=!0;for(var C=_s(M.id,u,"target").filter(function(R){return s.map(function(L){return L.id}).indexOf(R)>-1}),T=function(L){var D=C[L];if(!d[D]&&d[D]!==0){var z=s.filter(function(W){return W.id===D});z.length>0&&S(z[0]),v[M.id]=Math.min(v[M.id],v[D])}else f[D]&&(v[M.id]=Math.min(v[M.id],d[D]))},k=0;k<C.length;k++)T(k);if(v[M.id]===d[M.id]){for(var O=[];h.length>0;){var A=h.pop();if(f[A.id]=!1,O.push(A),A===M)break}O.length>0&&p.push(O)}},b=0,E=s;b<E.length;b++){var w=E[b];!d[w.id]&&d[w.id]!==0&&m(w)}return p};function C_(a,n){return n?M_(a):hP(a)}var ov=function(n){var r={},s=n.nodes,l=s===void 0?[]:s,u=n.edges,h=u===void 0?[]:u;return l.forEach(function(f){r[f.id]={degree:0,inDegree:0,outDegree:0}}),h.forEach(function(f){r[f.source].degree++,r[f.source].outDegree++,r[f.target].degree++,r[f.target].inDegree++}),r},ZE=ov,fP=function(n,r){var s=ov(n);return s[r]?ov(n)[r].inDegree:0},dP=function(n,r){var s=ov(n);return s[r]?ov(n)[r].outDegree:0};function vP(a){a===void 0&&(a={});var n=a,r=function(){},s=function(){var l={};return function(u){var h=u.next;return l[h]?!1:(l[h]=!0,!0)}}();return n.allowTraversal=a.allowTraversal||s,n.enter=a.enter||r,n.leave=a.leave||r,n}function T_(a,n,r,s,l){l===void 0&&(l=!0),s.enter({current:n,previous:r});var u=a.edges,h=u===void 0?[]:u;_s(n,h,l?"target":void 0).forEach(function(f){s.allowTraversal({previous:r,current:n,next:f})&&T_(a,f,n,s,l)}),s.leave({current:n,previous:r})}function O_(a,n,r,s){s===void 0&&(s=!0),T_(a,n,"",vP(r),s)}var pP=function(n){var r=null,s=n.nodes,l=s===void 0?[]:s,u={},h={},f={},d={};l.forEach(function(g){h[g.id]=g});for(var v={enter:function(m){var b=m.current,E=m.previous;if(f[b]){r={};for(var w=b,S=E;S!==b;)r[w]=S,w=S,S=u[S];r[w]=S}else f[b]=b,delete h[b],u[b]=E},leave:function(m){var b=m.current;d[b]=b,delete f[b]},allowTraversal:function(m){var b=m.next;return r?!1:!d[b]}};Object.keys(h).length;){var p=Object.keys(h)[0];O_(n,p,v)}return r},A_=function(n,r,s){var l,u;s===void 0&&(s=!0);for(var h=[],f=C_(n,!1),d=0,v=f;d<v.length;d++){var p=v[d];if(p.length)for(var g=p[0],m=g.id,b=[g],E=(l={},l[m]=g,l),w=(u={},u[m]=new Set,u);b.length>0;)for(var S=b.pop(),M=S.id,C=_s(M,n.edges),T=function(A){var R,L=C[A],D=n.nodes.find(function(rt){return rt.id===L});if(L===M)h.push((R={},R[L]=S,R));else if(!(L in w))E[L]=S,b.push(D),w[L]=new Set([S]);else if(!w[M].has(D)){for(var z=!0,W=[D,S],G=E[M];w[L].size&&!w[L].has(G)&&(W.push(G),G!==E[G.id]);)G=E[G.id];if(W.push(G),r&&s?(z=!1,W.findIndex(function(rt){return r.indexOf(rt.id)>-1})>-1&&(z=!0)):r&&!s&&W.findIndex(function(rt){return r.indexOf(rt.id)>-1})>-1&&(z=!1),z){for(var Y={},q=1;q<W.length;q+=1)Y[W[q-1].id]=W[q];W.length&&(Y[W[W.length-1].id]=W[0]),h.push(Y)}w[L].add(S)}},k=0;k<C.length;k+=1)T(k)}return h},k_=function(n,r,s){s===void 0&&(s=!0);for(var l=[],u=new Set,h=[],f=[],d={},v={},p=function(G){for(var Y=[G];Y.length>0;){var q=Y.pop();u.has(q)&&(u.delete(q),h[q.id].forEach(function(rt){Y.push(rt)}),h[q.id].clear())}},g=function W(G,Y,q){var rt=!1;if(r&&s===!1&&r.indexOf(G.id)>-1)return rt;l.push(G),u.add(G);for(var yt=q[G.id],st=0;st<yt.length;st+=1){var mt=d[yt[st]];if(mt===Y){for(var at={},Et=1;Et<l.length;Et+=1)at[l[Et-1].id]=l[Et];l.length&&(at[l[l.length-1].id]=l[0]),f.push(at),rt=!0}else u.has(mt)||W(mt,Y,q)&&(rt=!0)}if(rt)p(G);else for(var st=0;st<yt.length;st+=1){var mt=d[yt[st]];h[mt.id].has(G)||h[mt.id].add(G)}return l.pop(),rt},m=n.nodes,b=m===void 0?[]:m,E=0;E<b.length;E+=1){var w=b[E],S=w.id;v[S]=E,d[E]=w}if(r&&s)for(var M=function(G){var Y=r[G];v[b[G].id]=v[Y],v[Y]=0,d[0]=b.find(function(q){return q.id===Y}),d[v[b[G].id]]=b[G]},E=0;E<r.length;E++)M(E);for(var C=function(G){for(var Y,q,rt=1/0,yt=0;yt<G.length;yt+=1)for(var st=G[yt],mt=0;mt<st.length;mt++){var at=v[st[mt].id];at<rt&&(rt=at,q=yt)}for(var Et=G[q],It=[],yt=0;yt<Et.length;yt+=1){var Gt=Et[yt];It[Gt.id]=[];for(var Jt=0,Re=_s(Gt.id,n.edges,"target").filter(function(cn){return Et.map(function($e){return $e.id}).indexOf(cn)>-1});Jt<Re.length;Jt++){var te=Re[Jt];te===Gt.id&&!(s===!1&&r.indexOf(Gt.id)>-1)?f.push((Y={},Y[Gt.id]=Gt,Y)):It[Gt.id].push(v[te])}}return{component:Et,adjList:It,minIdx:rt}},T=0;T<b.length;){var k=b.filter(function(W){return v[W.id]>=T}),O=M_({nodes:k,edges:n.edges}).filter(function(W){return W.length>1});if(O.length===0)break;var A=C(O),R=A.minIdx,L=A.adjList,D=A.component;if(D.length>1){D.forEach(function(W){h[W.id]=new Set});var z=d[R];if(r&&s&&r.indexOf(z.id)===-1)return f;g(z,z,L),T=R+1}else break}return f},gP=function(n,r,s,l){return l===void 0&&(l=!0),r?k_(n,s,l):A_(n,s,l)},P_=pP,yP={}.toString,mP=function(a,n){return yP.call(a)==="[object "+n+"]"},xg=mP,WE=function(a){return xg(a,"Function")},GE=function(a){return Array.isArray?Array.isArray(a):xg(a,"Array")},bP=function(a){var n=typeof a;return a!==null&&n==="object"||n==="function"};function xP(a,n){if(a){var r;if(GE(a))for(var s=0,l=a.length;s<l&&(r=n(a[s],s),r!==!1);s++);else if(bP(a)){for(var u in a)if(a.hasOwnProperty(u)&&(r=n(a[u],u),r===!1))break}}}var R_=xP,ez=Object.keys?function(a){return Object.keys(a)}:function(a){var n=[];return R_(a,function(r,s){WE(a)&&s==="prototype"||n.push(s)}),n},nz=null;function rz(a,n){var r=keys(n),s=r.length;if(isNil(a))return!s;for(var l=0;l<s;l+=1){var u=r[l];if(n[u]!==a[u]||!(u in a))return!1}return!0}var iz=null,az=function(a){if(!isObjectLike(a)||!isType(a,"Object"))return!1;if(Object.getPrototypeOf(a)===null)return!0;for(var n=a;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(a)===n},sz=null;function oz(a,n){if(!isArray(a))return null;var r;if(isFunction(n)&&(r=n),isPlainObject(n)&&(r=function(l){return isMatch(l,n)}),r){for(var s=0;s<a.length;s+=1)if(r(a[s]))return a[s]}return null}var lz=null,cz=function(a,n){for(var r=null,s=0;s<a.length;s++){var l=a[s],u=l[n];if(!isNil(u)){isArray(u)?r=u[0]:r=u;break}}return r},uz=null,hz=function(a){if(!isArray(a))return[];for(var n=[],r=0;r<a.length;r++)n=n.concat(a[r]);return n},fz=null,EP=function(a,n){if(n===void 0&&(n=[]),!isArray(a))n.push(a);else for(var r=0;r<a.length;r+=1)EP(a[r],n);return n},dz=null,vz=function(a){if(isArray(a))return a.reduce(function(n,r){return Math.max(n,r)},a[0])},pz=function(a){if(isArray(a))return a.reduce(function(n,r){return Math.min(n,r)},a[0])},gz=function(a){var n=a.filter(function(h){return!isNaN(h)});if(!n.length)return{min:0,max:0};if(isArray(a[0])){for(var r=[],s=0;s<a.length;s++)r=r.concat(a[s]);n=r}var l=getMax(n),u=getMin(n);return{min:u,max:l}},yz=null,N_=Array.prototype,wP=N_.splice,SP=N_.indexOf,mz=function(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var s=0;s<n.length;s++)for(var l=n[s],u=-1;(u=SP.call(a,l))>-1;)wP.call(a,u,1);return a},bz=null,_P=Array.prototype.splice,xz=function(n,r){if(!isArrayLike(n))return[];for(var s=n?r.length:0,l=s-1;s--;){var u=void 0,h=r[s];(s===l||h!==u)&&(u=h,_P.call(n,h,1))}return n},Ez=null,wz=function(a,n,r){if(!isArray(a)&&!isPlainObject(a))return a;var s=r;return each(a,function(l,u){s=n(s,l,u)}),s},Sz=null,_z=function(a,n){var r=[];if(!isArrayLike(a))return r;for(var s=-1,l=[],u=a.length;++s<u;){var h=a[s];n(h,s,a)&&(r.push(h),l.push(s))}return pullAt(a,l),r},Mz=null,jE=function(a){return xg(a,"String")};function Cz(a,n){var r;if(isFunction(n))r=function(l,u){return n(l)-n(u)};else{var s=[];isString(n)?s.push(n):isArray(n)&&(s=n),r=function(l,u){for(var h=0;h<s.length;h+=1){var f=s[h];if(l[f]>u[f])return 1;if(l[f]<u[f])return-1}return 0}}return a.sort(r),a}var Tz=null;function $E(a,n){n===void 0&&(n=new Map);var r=[];if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var u=a[s];n.has(u)||(r.push(u),n.set(u,!0))}return r}var Oz=function(a,n){for(var r=[],s={},l=0;l<a.length;l++){var u=a[l],h=u[n];if(!isNil(h)){isArray(h)||(h=[h]);for(var f=0;f<h.length;f++){var d=h[f];s[d]||(r.push(d),s[d]=!0)}}}return r};function Az(a,n){return isArray(a)||isString(a)?a[0]===n:!1}var kz=null;function Pz(a,n){return isArray(a)||isString(a)?a[a.length-1]===n:!1}var Rz=null,MP=Object.prototype.hasOwnProperty;function Nz(a,n){if(!n||!isArray(a))return{};for(var r={},s=isFunction(n)?n:function(f){return f[n]},l,u=0;u<a.length;u++){var h=a[u];l=s(h),MP.call(r,l)?r[l].push(h):r[l]=[h]}return r}var Lz=null;function Iz(a,n){if(!n)return{0:a};if(!isFunction(n)){var r=isArray(n)?n:n.replace(/\s+/g,"").split("*");n=function(s){for(var l="_",u=0,h=r.length;u<h;u++)l+=s[r[u]]&&s[r[u]].toString();return l}}return groupBy(a,n)}var Dz=function(a,n){if(!n)return[a];var r=groupToMap(a,n),s=[];for(var l in r)s.push(r[l]);return s},L_={};function Bz(a){var n=L_[a];if(!n){for(var r=a.toString(16),s=r.length;s<6;s++)r="0"+r;n="#"+r,L_[a]=n}return n}var Fz=null;function zz(a){var n=0,r=0,s=0,l=0;return isArray(a)?a.length===1?n=r=s=l=a[0]:a.length===2?(n=s=a[0],r=l=a[1]):a.length===3?(n=a[0],r=l=a[1],s=a[2]):(n=a[0],r=a[1],s=a[2],l=a[3]):n=r=s=l=a,{r1:n,r2:r,r3:s,r4:l}}var Zz=null,CP=function(a){return xg(a,"Number")},TP=CP,Wz=function(a){return isNumber(a)&&a%1!==0},Gz=null,jz=function(a){return isNumber(a)&&a%2===0},$z=null,Hz=Number.isInteger?Number.isInteger:function(a){return TP(a)&&a%1===0},Vz=null,Uz=function(a){return isNumber(a)&&a<0},Yz=null,Xz=function(a){return isNumber(a)&&a%2!==0},Kz=null,qz=function(a){return isNumber(a)&&a>0},Qz=null,Jz=function(a,n){if(isArray(a)){for(var r,s=-1/0,l=0;l<a.length;l++){var u=a[l],h=isFunction(n)?n(u):u[n];h>s&&(r=u,s=h)}return r}},tZ=function(a,n){if(isArray(a)){for(var r,s=1/0,l=0;l<a.length;l++){var u=a[l],h=isFunction(n)?n(u):u[n];h<s&&(r=u,s=h)}return r}},OP=180/Math.PI,eZ=function(a){return OP*a},nZ=null,AP=Math.PI/180,rZ=function(a){return AP*a},iZ=null,aZ=null,kP=Object.values?function(a){return Object.values(a)}:function(a){var n=[];return R_(a,function(r,s){WE(a)&&s==="prototype"||n.push(r)}),n},PP=kP,sZ=function(a,n){return contains(values(a),n)},RP={}.toString,oZ=function(a){return RP.call(a).replace(/^\[object /,"").replace(/]$/,"")},lZ=null,cZ=function(a){return isType(a,"Arguments")},uZ=null,hZ=function(a){return isType(a,"Boolean")},fZ=null,dZ=function(a){return isType(a,"Date")},vZ=null,pZ=function(a){return isType(a,"Error")},gZ=null;function yZ(a){return isNumber(a)&&isFinite(a)}var NP=Object.prototype,mZ=function(a){var n=a&&a.constructor,r=typeof n=="function"&&n.prototype||NP;return a===r},bZ=null,xZ=function(a){return isType(a,"RegExp")},EZ=null,wZ=function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];for(var r=a[0],s=1;s<a.length;s++){var l=a[s];isFunction(l)&&(l=l.prototype),mix(r.prototype,l)}},SZ=null,HE=function(a){if(typeof a!="object"||a===null)return a;var n;if(GE(a)){n=[];for(var r=0,s=a.length;r<s;r++)typeof a[r]=="object"&&a[r]!=null?n[r]=HE(a[r]):n[r]=a[r]}else{n={};for(var l in a)typeof a[l]=="object"&&a[l]!=null?n[l]=HE(a[l]):n[l]=a[l]}return n},lv=HE,LP=function(a,n){if(!WE(a))throw new TypeError("Expected a function");var r=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var u=n?n.apply(this,s):s[0],h=r.cache;if(h.has(u))return h.get(u);var f=a.apply(this,s);return h.set(u,f),f};return r.cache=new Map,r},IP=5;function I_(a,n,r,s){r=r||0,s=s||IP;for(var l in n)if(n.hasOwnProperty(l)){var u=n[l];u!==null&&isPlainObject(u)?(isPlainObject(a[l])||(a[l]={}),r<s?I_(a[l],u,r+1,s):a[l]=n[l]):isArray(u)?(a[l]=[],a[l]=a[l].concat(u)):u!==void 0&&(a[l]=u)}}var _Z=function(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var s=0;s<n.length;s+=1)I_(a,n[s]);return a},MZ=null,CZ=function(a,n,r,s){isFunction(n)||(r=n,n=a,a=function(){});var l=Object.create?function(h,f){return Object.create(h,{constructor:{value:f}})}:function(h,f){function d(){}d.prototype=h;var v=new d;return v.constructor=f,v},u=l(n.prototype,a);return a.prototype=mix(u,a.prototype),a.superclass=l(n.prototype,n),mix(u,r),mix(a,s),a},TZ=null,DP=Object.prototype.hasOwnProperty;function OZ(a){if(isNil(a))return!0;if(isArrayLike(a))return!a.length;var n=getType(a);if(n==="Map"||n==="Set")return!a.size;if(isPrototype(a))return!Object.keys(a).length;for(var r in a)if(DP.call(a,r))return!1;return!0}var AZ=null,BP=function(a){return typeof a=="object"&&a!==null},D_=BP,FP=function(a){return a!==null&&typeof a!="function"&&isFinite(a.length)},B_=FP,VE=function(a,n){if(a===n)return!0;if(!a||!n||jE(a)||jE(n))return!1;if(B_(a)||B_(n)){if(a.length!==n.length)return!1;for(var r=!0,s=0;s<a.length&&(r=VE(a[s],n[s]),!!r);s++);return r}if(D_(a)||D_(n)){var l=Object.keys(a),u=Object.keys(n);if(l.length!==u.length)return!1;for(var r=!0,s=0;s<l.length&&(r=VE(a[l[s]],n[l[s]]),!!r);s++);return r}return!1},zP=VE,kZ=function(a,n,r){return isFunction(r)?!!r(a,n):isEqual(a,n)},PZ=function(a,n,r){for(var s=0,l=isString(n)?n.split("."):n;a&&s<l.length;)a=a[l[s++]];return a===void 0||s<l.length?r:a},RZ=function(a,n,r){var s=a,l=isString(n)?n.split("."):n;return l.forEach(function(u,h){h<l.length-1?(isObject(s[u])||(s[u]=isNumber(l[h+1])?[]:{}),s=s[u]):s[u]=r}),a},ZP=Object.prototype.hasOwnProperty,NZ=function(a,n){if(a===null||!isPlainObject(a))return{};var r={};return each(n,function(s){ZP.call(a,s)&&(r[s]=a[s])}),r},LZ=function(a,n){return reduce(a,function(r,s,l){return n.includes(l)||(r[l]=s),r},{})},Eg={},IZ=function(a){return a=a||"g",Eg[a]?Eg[a]+=1:Eg[a]=1,a+Eg[a]},wg,DZ=LP(function(a,n){n===void 0&&(n={});var r=n.fontSize,s=n.fontFamily,l=n.fontWeight,u=n.fontStyle,h=n.fontVariant;return wg||(wg=document.createElement("canvas").getContext("2d")),wg.font=[u,h,l,r+"px",s].join(" "),wg.measureText(jE(a)?a:"").width},function(a,n){return n===void 0&&(n={}),(0,N.pr)([a],PP(n)).join("")}),BZ=function(a,n,r,s){s===void 0&&(s="...");var l=16,u=measureTextWidth(s,r),h=isString(a)?a:toString(a),f=n,d=[],v,p;if(measureTextWidth(a,r)<=n)return a;for(;v=h.substr(0,l),p=measureTextWidth(v,r),!(p+u>f&&p>f);)if(d.push(v),f-=p,h=h.substr(l),!h)return d.join("");for(;v=h.substr(0,1),p=measureTextWidth(v,r),!(p+u>f);)if(d.push(v),f-=p,h=h.substr(1),!h)return d.join("");return""+d.join("")+s},FZ=function(){function a(){this.map={}}return a.prototype.has=function(n){return this.map[n]!==void 0},a.prototype.get=function(n,r){var s=this.map[n];return s===void 0?r:s},a.prototype.set=function(n,r){this.map[n]=r},a.prototype.clear=function(){this.map={}},a.prototype.delete=function(n){delete this.map[n]},a.prototype.size=function(){return Object.keys(this.map).length},a}(),zZ=null,WP=function(n,r,s){for(var l=1/0,u,h=0;h<r.length;h++){var f=r[h].id;!s[f]&&n[f]<=l&&(l=n[f],u=r[h])}return u},GP=function(n,r,s,l){var u=n.nodes,h=u===void 0?[]:u,f=n.edges,d=f===void 0?[]:f,v=[],p={},g={},m={};h.forEach(function(T,k){var O=T.id;v.push(O),g[O]=1/0,O===r&&(g[O]=0)});for(var b=h.length,E=function(k){var O=WP(g,h,p),A=O.id;if(p[A]=!0,g[A]===1/0)return"continue";var R=[];s?R=oP(A,d):R=bg(A,d),R.forEach(function(L){var D=L.target,z=L.source,W=D===A?z:D,G=l&&L[l]?L[l]:1;g[W]>g[O.id]+G?(g[W]=g[O.id]+G,m[W]=[O.id]):g[W]===g[O.id]+G&&m[W].push(O.id)})},w=0;w<b;w++)E(w);m[r]=[r];var S={};for(var M in g)g[M]!==1/0&&F_(r,M,m,S);var C={};for(var M in S)C[M]=S[M][0];return{length:g,path:C,allPath:S}},Sg=GP;function F_(a,n,r,s){if(a===n)return[a];if(s[n])return s[n];for(var l=[],u=0,h=r[n];u<h.length;u++){var f=h[u],d=F_(a,f,r,s);if(!d)return;for(var v=0,p=d;v<p.length;v++){var g=p[v];GE(g)?l.push((0,N.ev)((0,N.ev)([],g,!0),[n],!1)):l.push([g,n])}}return s[n]=l,s[n]}var UE=function(n,r,s,l,u){var h=Sg(n,r,l,u),f=h.length,d=h.path,v=h.allPath;return{length:f[s],path:d[s],allPath:v[s]}},jP=function(n,r,s,l){var u;if(r===s)return[[r]];var h=n.edges,f=h===void 0?[]:h,d=[r],v=(u={},u[r]=!0,u),p=[],g=[],m=l?_s(r,f,"target"):_s(r,f);for(p.push(m);d.length>0&&p.length>0;){var b=p[p.length-1];if(b.length){var E=b.shift();E&&(d.push(E),v[E]=!0,m=l?_s(E,f,"target"):_s(E,f),p.push(m.filter(function(M){return!v[M]})))}else{var w=d.pop();v[w]=!1,p.pop();continue}if(d[d.length-1]===s){var S=d.map(function(C){return C});g.push(S);var w=d.pop();v[w]=!1,p.pop()}}return g},$P=function(n,r){for(var s=mg(n,r),l=[],u=s.length,h=0;h<u;h+=1){l[h]=[];for(var f=0;f<u;f+=1)h===f?l[h][f]=0:s[h][f]===0||!s[h][f]?l[h][f]=1/0:l[h][f]=s[h][f]}for(var d=0;d<u;d+=1)for(var h=0;h<u;h+=1)for(var f=0;f<u;f+=1)l[h][f]>l[h][d]+l[d][f]&&(l[h][f]=l[h][d]+l[d][f]);return l},YE=$P,HP=function(n,r,s,l){r===void 0&&(r=!1),s===void 0&&(s="weight"),l===void 0&&(l=1e3);var u=n.nodes,h=u===void 0?[]:u,f=n.edges,d=f===void 0?[]:f,v={},p={};h.forEach(function(k,O){var A=__();k.clusterId=A,v[A]={id:A,nodes:[k]},p[k.id]={node:k,idx:O}});var g=mg(n,r),m=[],b={};g.forEach(function(k,O){var A=0,R=h[O].id;b[R]={},k.forEach(function(L,D){if(L){A+=L;var z=h[D].id;b[R][z]=L}}),m.push(A)});for(var E=0,w=function(){var O=!1;if(h.forEach(function(A){var R={};Object.keys(b[A.id]).forEach(function(rt){var yt=b[A.id][rt],st=p[rt].node,mt=st.clusterId;R[mt]||(R[mt]=0),R[mt]+=yt});var L=-1/0,D=[];if(Object.keys(R).forEach(function(rt){L<R[rt]?(L=R[rt],D=[rt]):L===R[rt]&&D.push(rt)}),!(D.length===1&&D[0]===A.clusterId)){var z=D.indexOf(A.clusterId);if(z>=0&&D.splice(z,1),D&&D.length){O=!0;var W=v[A.clusterId],G=W.nodes.indexOf(A);W.nodes.splice(G,1);var Y=Math.floor(Math.random()*D.length),q=v[D[Y]];q.nodes.push(A),A.clusterId=q.id}}}),!O)return"break";E++};E<l;){var S=w();if(S==="break")break}Object.keys(v).forEach(function(k){var O=v[k];(!O.nodes||!O.nodes.length)&&delete v[k]});var M=[],C={};d.forEach(function(k){var O=k.source,A=k.target,R=k[s]||1,L=p[O].node.clusterId,D=p[A].node.clusterId,z="".concat(L,"---").concat(D);if(C[z])C[z].weight+=R,C[z].count++;else{var W={source:L,target:D,weight:R,count:1};C[z]=W,M.push(W)}});var T=[];return Object.keys(v).forEach(function(k){T.push(v[k])}),{clusters:T,clusterEdges:M}},VP=HP,UP=function(){function a(n){this.arr=n}return a.prototype.getArr=function(){return this.arr||[]},a.prototype.add=function(n){var r,s=n.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new a(s);if(!(s!=null&&s.length))return new a(this.arr);if(this.arr.length===s.length){var l=[];for(var u in this.arr)l[u]=this.arr[u]+s[u];return new a(l)}},a.prototype.subtract=function(n){var r,s=n.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length))return new a(s);if(!(s!=null&&s.length))return new a(this.arr);if(this.arr.length===s.length){var l=[];for(var u in this.arr)l[u]=this.arr[u]-s[u];return new a(l)}},a.prototype.avg=function(n){var r=[];if(n!==0)for(var s in this.arr)r[s]=this.arr[s]/n;return new a(r)},a.prototype.negate=function(){var n=[];for(var r in this.arr)n[r]=-this.arr[r];return new a(n)},a.prototype.squareEuclideanDistance=function(n){var r,s=n.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(s!=null&&s.length))return 0;if(this.arr.length===s.length){var l=0;for(var u in this.arr)l+=Math.pow(this.arr[u]-n.arr[u],2);return l}},a.prototype.euclideanDistance=function(n){var r,s=n.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(s!=null&&s.length))return 0;if(this.arr.length===s.length){var l=0;for(var u in this.arr)l+=Math.pow(this.arr[u]-n.arr[u],2);return Math.sqrt(l)}else console.error("The two vectors are unequal in length.")},a.prototype.normalize=function(){var n=[],r=lv(this.arr);r.sort(function(h,f){return h-f});var s=r[r.length-1],l=r[0];for(var u in this.arr)n[u]=(this.arr[u]-l)/(s-l);return new a(n)},a.prototype.norm2=function(){var n;if(!(!((n=this.arr)===null||n===void 0)&&n.length))return 0;var r=0;for(var s in this.arr)r+=Math.pow(this.arr[s],2);return Math.sqrt(r)},a.prototype.dot=function(n){var r,s=n.arr;if(!(!((r=this.arr)===null||r===void 0)&&r.length)||!(s!=null&&s.length))return 0;if(this.arr.length===s.length){var l=0;for(var u in this.arr)l+=this.arr[u]*n.arr[u];return l}else console.error("The two vectors are unequal in length.")},a.prototype.equal=function(n){var r,s=n.arr;if(((r=this.arr)===null||r===void 0?void 0:r.length)!==(s==null?void 0:s.length))return!1;for(var l in this.arr)if(this.arr[l]!==s[l])return!1;return!0},a}(),Ms=UP,YP=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,XP=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,z_=function(n,r){n===void 0&&(n=[]),r===void 0&&(r=100);var s={};n.forEach(function(u){u.properties&&Object.keys(u.properties).forEach(function(h){if(h==="id"||!"".concat(u.properties[h]).match(YP)&&!"".concat(u.properties[h]).match(XP)&&isNaN(Number(u.properties[h]))){s.hasOwnProperty(h)&&delete s[h];return}s.hasOwnProperty(h)?s[h]+=1:s[h]=1})});var l=Object.keys(s).sort(function(u,h){return s[h]-s[u]});return l.length<r?l:l.slice(0,r)},KP=function(n,r){return r.map(function(s){return n.hasOwnProperty(s)?n[s]:0})},qP=function(n){for(var r=z_(n),s=[],l=0;l<n.length;l++)s[l]=KP(n[l].properties,r);return s},_g=function(n,r){r===void 0&&(r=void 0);var s=[];return n.forEach(function(l){r===void 0&&s.push(l),l[r]!==void 0&&s.push(l[r])}),s},ZZ={getAllSortProperties:z_,getPropertyWeight:qP,getAllProperties:_g},Vs;(function(a){a.EuclideanDistance="euclideanDistance"})(Vs||(Vs={}));var Z_=function(n,r,s){var l=[];r!=null&&r.length?l=r:(n.forEach(function(h){l=l.concat(Object.keys(h))}),l=$E(l));var u={};return l.forEach(function(h){var f=[];n.forEach(function(d){d[h]!==void 0&&d[h]!==""&&f.push(d[h])}),f.length&&!(s!=null&&s.includes(h))&&(u[h]=$E(f))}),u},Mg=function(n,r,s){var l=Z_(n,r,s),u=[];if(!Object.keys(l).length)return u;var h=Object.values(l),f=h.every(function(d){return d.every(function(v){return typeof v=="number"})});return n.forEach(function(d,v){var p=[];Object.keys(l).forEach(function(g){var m=d[g],b=l[g],E=b.findIndex(function(M){return m===M}),w=[];if(f)w.push(m);else for(var S=0;S<b.length;S++)S===E?w.push(1):w.push(0);p=p.concat(w)}),u[v]=p}),u},XE=function(n,r,s,l){s===void 0&&(s=Vs.EuclideanDistance);var u=0;switch(s){case Vs.EuclideanDistance:u=new Ms(n).euclideanDistance(new Ms(r));break;default:break}return u},WZ={getAllKeyValueMap:Z_,oneHot:Mg,getDistance:XE},W_=function(n,r,s,l){for(var u=r.length,h=2*l,f=0,d=0;d<u;d++)for(var v=n[d].clusterId,p=0;p<u;p++){var g=n[p].clusterId;if(v===g){var m=r[d][p]||0,b=s[d]||0,E=s[p]||0;f+=m-b*E/h}}return f*=1/h,f},KE=function(n,r){n===void 0&&(n=[]);for(var s=n.length,l=new Ms([]),u=0;u<s;u++)l=l.add(new Ms(r[u]));var h=l.avg(s);h.normalize();for(var f=0,u=0;u<s;u++){var d=new Ms(r[u]),v=d.squareEuclideanDistance(h);f+=v}var p=[];n.forEach(function(){p.push([])});for(var u=0;u<s;u++){var d=new Ms(r[u]);n[u].clusterInertial=0;for(var g=0;g<s;g++){if(u===g){p[u][g]=0;continue}var m=new Ms(r[g]);p[u][g]=d.squareEuclideanDistance(m),n[u].clusterInertial+=p[u][g]}}for(var b=0,E=2*s*f,u=0;u<s;u++)for(var w=n[u].clusterId,g=0;g<s;g++){var S=n[g].clusterId;if(!(u===g||w!==S)){var M=n[u].clusterInertial*n[g].clusterInertial/Math.pow(E,2)-p[u][g]/E;b+=M}}return Number(b.toFixed(4))},QP=function(n,r,s,l,u,h,f,d,v){r===void 0&&(r=!1),s===void 0&&(s="weight"),l===void 0&&(l=1e-4),u===void 0&&(u=!1),h===void 0&&(h=void 0),f===void 0&&(f=[]),d===void 0&&(d=["id"]),v===void 0&&(v=1);var p=n.nodes,g=p===void 0?[]:p,m=n.edges,b=m===void 0?[]:m,E=[];if(u){g.forEach(function(at,Et){at.properties=at.properties||{},at.originIndex=Et});var w=[];g.every(function(at){return at.hasOwnProperty("nodeType")})&&(w=Array.from(new Set(g.map(function(at){return at.nodeType}))),g.forEach(function(at){at.properties.nodeType=w.findIndex(function(Et){return Et===at.nodeType})}));var S=_g(g,h);E=Mg(S,f,d)}var M=1,C={},T={};g.forEach(function(at,Et){var It=String(M++);at.clusterId=It,C[It]={id:It,nodes:[at]},T[at.id]={node:at,idx:Et}});var k=mg(n,r),O=[],A={},R=0;k.forEach(function(at,Et){var It=0,Gt=g[Et].id;A[Gt]={},at.forEach(function(Jt,Re){if(Jt){It+=Jt;var te=g[Re].id;A[Gt][te]=Jt,R+=Jt}}),O.push(It)}),R/=2;for(var L=1/0,D=1/0,z=0,W=[],G={};;){u&&g.every(function(at){return at.hasOwnProperty("properties")})?L=W_(g,k,O,R)+KE(g,E)*v:L=W_(g,k,O,R),z===0&&(D=L,W=g,G=C);var Y=L>0&&L>D&&L-D<l;if(L>D&&(W=g.map(function(at){return{node:at,clusterId:at.clusterId}}),G=lv(C),D=L),Y||z>100)break;z++,Object.keys(C).forEach(function(at){var Et=0;b.forEach(function(It){var Gt=It.source,Jt=It.target,Re=T[Gt].node.clusterId,te=T[Jt].node.clusterId;(Re===at&&te!==at||te===at&&Re!==at)&&(Et=Et+(It[s]||1))}),C[at].sumTot=Et}),g.forEach(function(at,Et){var It=C[at.clusterId],Gt=0,Jt,Re=O[Et]/(2*R),te=0,we=It.nodes;we.forEach(function(Ri){var di=T[Ri.id].idx;te+=k[Et][di]||0});var cn=te-It.sumTot*Re,$e=we.filter(function(Ri){return Ri.id!==at.id}),qe=[];$e.forEach(function(Ri,di){qe[di]=E[Ri.originIndex]});var Xe=KE($e,E)*v,Ir=A[at.id];if(Object.keys(Ir).forEach(function(Ri){var di=T[Ri].node,Rl=di.clusterId;if(Rl!==at.clusterId){var Ni=C[Rl],Oa=Ni.nodes;if(!(!Oa||!Oa.length)){var We=0;Oa.forEach(function(hn){var mn=T[hn.id].idx;We+=k[Et][mn]||0});var yn=We-Ni.sumTot*Re,He=Oa.concat([at]),un=[];He.forEach(function(hn,mn){un[mn]=E[hn.originIndex]});var Tn=KE(He,E)*v,ee=yn-cn;u&&(ee=yn+Tn-(cn+Xe)),ee>Gt&&(Gt=ee,Jt=Ni)}}}),Gt>0){Jt.nodes.push(at);var Ze=at.clusterId;at.clusterId=Jt.id;var is=It.nodes.indexOf(at);It.nodes.splice(is,1);var Yi=0,Oc=0;b.forEach(function(Ri){var di=Ri.source,Rl=Ri.target,Ni=T[di].node.clusterId,Oa=T[Rl].node.clusterId;(Ni===Jt.id&&Oa!==Jt.id||Oa===Jt.id&&Ni!==Jt.id)&&(Yi=Yi+(Ri[s]||1)),(Ni===Ze&&Oa!==Ze||Oa===Ze&&Ni!==Ze)&&(Oc=Oc+(Ri[s]||1))}),Jt.sumTot=Yi,It.sumTot=Oc}})}var q={},rt=0;Object.keys(G).forEach(function(at){var Et=G[at];if(!Et.nodes||!Et.nodes.length){delete G[at];return}var It=String(rt+1);It!==at&&(Et.id=It,Et.nodes=Et.nodes.map(function(Gt){return{id:Gt.id,clusterId:It}}),G[It]=Et,q[at]=It,delete G[at],rt++)}),W.forEach(function(at){var Et=at.node,It=at.clusterId;Et&&(Et.clusterId=It,Et.clusterId&&q[Et.clusterId]&&(Et.clusterId=q[Et.clusterId]))});var yt=[],st={};b.forEach(function(at){var Et=at.source,It=at.target,Gt=at[s]||1,Jt=T[Et].node.clusterId,Re=T[It].node.clusterId;if(!(!Jt||!Re)){var te="".concat(Jt,"---").concat(Re);if(st[te])st[te].weight+=Gt,st[te].count++;else{var we={source:Jt,target:Re,weight:Gt,count:1};st[te]=we,yt.push(we)}}});var mt=[];return Object.keys(G).forEach(function(at){mt.push(G[at])}),{clusters:mt,clusterEdges:yt}},G_=QP,JP=function(n,r,s,l,u,h,f,d){return r===void 0&&(r=!1),s===void 0&&(s="weight"),l===void 0&&(l=1e-4),u===void 0&&(u=void 0),h===void 0&&(h=[]),f===void 0&&(f=["id"]),d===void 0&&(d=1),G_(n,r,s,l,!0,u,h,f,d)},t3=JP,e3=function(n,r){var s;r===void 0&&(r=1);for(var l=lv(n),u=l.nodes,h=u===void 0?[]:u,f=l.edges,d=f===void 0?[]:f,v=function(){var m=ZE({nodes:h,edges:d}),b=Object.keys(m);b.sort(function(S,M){var C,T;return((C=m[S])===null||C===void 0?void 0:C.degree)-((T=m[M])===null||T===void 0?void 0:T.degree)});var E=b[0];if(!h.length||((s=m[E])===null||s===void 0?void 0:s.degree)>=r)return"break";var w=h.findIndex(function(S){return S.id===E});h.splice(w,1),d=d.filter(function(S){return!(S.source===E||S.target===E)})};;){var p=v();if(p==="break")break}return{nodes:h,edges:d}},n3=e3,j_=function(n,r,s){var l=[];switch(n){case Vs.EuclideanDistance:l=r[s];break;default:l=[];break}return l},r3=function(n,r,s,l,u,h){r===void 0&&(r=3),s===void 0&&(s=void 0),l===void 0&&(l=[]),u===void 0&&(u=["id"]),h===void 0&&(h=Vs.EuclideanDistance);var f=n.nodes,d=f===void 0?[]:f,v=n.edges,p=v===void 0?[]:v,g={clusters:[{id:"0",nodes:d}],clusterEdges:[]};if(h===Vs.EuclideanDistance&&!d.every(function(It){return It.hasOwnProperty(s)}))return g;var m=[],b=[];if(h===Vs.EuclideanDistance&&(m=_g(d,s),b=Mg(m,l,u)),!b.length)return g;for(var E=$E(b.map(function(It){return It.join("")})),w=Math.min(r,d.length,E.length),S=0;S<d.length;S++)d[S].originIndex=S;for(var M=[],C=[],T=[],S=0;S<w;S++)if(S===0){var k=Math.floor(Math.random()*d.length);switch(h){case Vs.EuclideanDistance:M[S]=b[k];break;default:M[S]=[];break}C.push(k),T[S]=[d[k]],d[k].clusterId=String(S)}else{for(var O=-1/0,A=0,R=function(Jt){if(!C.includes(Jt)){for(var Re=0,te=0;te<M.length;te++){var we=0;switch(h){case Vs.EuclideanDistance:we=XE(b[d[Jt].originIndex],M[te],h);break;default:break}Re+=we}var cn=Re/M.length;cn>O&&!M.find(function($e){return zP($e,j_(h,b,d[Jt].originIndex))})&&(O=cn,A=Jt)}},L=0;L<d.length;L++)R(L);M[S]=j_(h,b,A),C.push(A),T[S]=[d[A]],d[A].clusterId=String(S)}for(var D=0;;){for(var S=0;S<d.length;S++){var z=0,W=1/0;if(!(D===0&&C.includes(S))){for(var G=0;G<M.length;G++){var Y=0;switch(h){case Vs.EuclideanDistance:Y=XE(b[S],M[G],h);break;default:break}Y<W&&(W=Y,z=G)}if(d[S].clusterId!==void 0)for(var q=T[Number(d[S].clusterId)].length-1;q>=0;q--)T[Number(d[S].clusterId)][q].id===d[S].id&&T[Number(d[S].clusterId)].splice(q,1);d[S].clusterId=String(z),T[z].push(d[S])}}for(var rt=!1,S=0;S<T.length;S++){for(var yt=T[S],st=new Ms([]),G=0;G<yt.length;G++)st=st.add(new Ms(b[yt[G].originIndex]));var mt=st.avg(yt.length);mt.equal(new Ms(M[S]))||(rt=!0,M[S]=mt.getArr())}if(D++,d.every(function(It){return It.clusterId!==void 0})&&rt||D>=1e3)break}var at=[],Et={};return p.forEach(function(It){var Gt,Jt,Re=It.source,te=It.target,we=(Gt=d.find(function(Xe){return Xe.id===Re}))===null||Gt===void 0?void 0:Gt.clusterId,cn=(Jt=d.find(function(Xe){return Xe.id===te}))===null||Jt===void 0?void 0:Jt.clusterId,$e="".concat(we,"---").concat(cn);if(Et[$e])Et[$e].count++;else{var qe={source:we,target:cn,count:1};Et[$e]=qe,at.push(qe)}}),{clusters:T,clusterEdges:at}},i3=r3,a3=function(n,r){var s=new Ms(r),l=s.norm2(),u=new Ms(n),h=u.norm2(),f=s.dot(u),d=l*h,v=d?f/d:0;return v},$_=a3,s3=function(n,r,s,l,u){n===void 0&&(n=[]),s===void 0&&(s=void 0),l===void 0&&(l=[]),u===void 0&&(u=[]);var h=lv(n.filter(function(m){return m.id!==r.id})),f=n.findIndex(function(m){return m.id===r.id}),d=_g(n,s),v=Mg(d,l,u),p=v[f],g=[];return h.forEach(function(m,b){if(m.id!==r.id){var E=v[b],w=$_(E,p);g.push(w),m.cosineSimilarity=w}}),h.sort(function(m,b){return b.cosineSimilarity-m.cosineSimilarity}),{allCosineSimilarity:g,similarNodes:h}},o3=s3,l3=function(){function a(n){this.count=n.length,this.parent={};for(var r=0,s=n;r<s.length;r++){var l=s[r];this.parent[l]=l}}return a.prototype.find=function(n){for(;this.parent[n]!==n;)n=this.parent[n];return n},a.prototype.union=function(n,r){var s=this.find(n),l=this.find(r);s!==l&&(s<l?(this.parent[r]!==r&&this.union(this.parent[r],n),this.parent[r]=this.parent[n]):(this.parent[n]!==n&&this.union(this.parent[n],r),this.parent[n]=this.parent[r]))},a.prototype.connected=function(n,r){return this.find(n)===this.find(r)},a}(),c3=l3,u3=function(n,r){return n-r},h3=function(){function a(n){n===void 0&&(n=u3),this.compareFn=n,this.list=[]}return a.prototype.getLeft=function(n){return 2*n+1},a.prototype.getRight=function(n){return 2*n+2},a.prototype.getParent=function(n){return n===0?null:Math.floor((n-1)/2)},a.prototype.isEmpty=function(){return this.list.length<=0},a.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},a.prototype.delMin=function(){var n=this.top(),r=this.list.pop();return this.list.length>0&&(this.list[0]=r,this.moveDown(0)),n},a.prototype.insert=function(n){if(n!==null){this.list.push(n);var r=this.list.length-1;return this.moveUp(r),!0}return!1},a.prototype.moveUp=function(n){for(var r=this.getParent(n);n&&n>0&&this.compareFn(this.list[r],this.list[n])>0;){var s=this.list[r];this.list[r]=this.list[n],this.list[n]=s,n=r,r=this.getParent(n)}},a.prototype.moveDown=function(n){var r,s=n,l=this.getLeft(n),u=this.getRight(n),h=this.list.length;l!==null&&l<h&&this.compareFn(this.list[s],this.list[l])>0?s=l:u!==null&&u<h&&this.compareFn(this.list[s],this.list[u])>0&&(s=u),n!==s&&(r=[this.list[s],this.list[n]],this.list[n]=r[0],this.list[s]=r[1],this.moveDown(s))},a}(),f3=h3,d3=function(n,r){var s=[],l=n.nodes,u=l===void 0?[]:l,h=n.edges,f=h===void 0?[]:h;if(u.length===0)return s;var d=u[0],v=new Set;v.add(d);var p=function(S,M){return r?S.weight-M.weight:0},g=new f3(p);for(bg(d.id,f).forEach(function(w){g.insert(w)});!g.isEmpty();){var m=g.delMin(),b=m.source,E=m.target;v.has(b)&&v.has(E)||(s.push(m),v.has(b)||(v.add(b),bg(b,f).forEach(function(w){g.insert(w)})),v.has(E)||(v.add(E),bg(E,f).forEach(function(w){g.insert(w)})))}return s},H_=function(n,r){var s=[],l=n.nodes,u=l===void 0?[]:l,h=n.edges,f=h===void 0?[]:h;if(u.length===0)return s;var d=f.map(function(b){return b});r&&d.sort(function(b,E){return b.weight-E.weight});for(var v=new c3(u.map(function(b){return b.id}));d.length>0;){var p=d.shift(),g=p.source,m=p.target;v.connected(g,m)||(s.push(p),v.union(g,m))}return s},v3=function(n,r,s){var l={prim:d3,kruskal:H_};return s?l[s](n,r):H_(n,r)},p3=v3,g3=function(n,r,s){typeof r!="number"&&(r=1e-6),typeof s!="number"&&(s=.85);for(var l=1,u=0,h=1e3,f=n.nodes,d=f===void 0?[]:f,v=n.edges,p=v===void 0?[]:v,g=d.length,m,b={},E={},w=0;w<g;++w){var S=d[w],M=S.id;b[M]=1/g,E[M]=1/g}for(var C=ZE(n);h>0&&l>r;){u=0;for(var w=0;w<g;++w){var S=d[w],M=S.id;if(m=0,C[S.id].inDegree===0)b[M]=0;else{for(var T=_s(M,p,"source"),k=0;k<T.length;++k){var O=T[k],A=C[O].outDegree;A>0&&(m+=E[O]/A)}b[M]=s*m,u+=b[M]}}u=(1-u)/g,l=0;for(var w=0;w<g;++w){var S=d[w],M=S.id;m=b[M]+u,l+=Math.abs(m-E[M]),E[M]=m}h-=1}return E},V_=g3,y3=-1,Cg=-1,U_="-1",ko="-1",Y_=-1,GZ="-1",X_=function(){function a(n,r,s,l){n===void 0&&(n=y3),r===void 0&&(r=Cg),s===void 0&&(s=Cg),l===void 0&&(l=U_),this.id=n,this.from=r,this.to=s,this.label=l}return a}(),m3=function(){function a(n,r){n===void 0&&(n=Cg),r===void 0&&(r=ko),this.id=n,this.label=r,this.edges=[],this.edgeMap={}}return a.prototype.addEdge=function(n){this.edges.push(n),this.edgeMap[n.id]=n},a}(),K_=function(){function a(n,r,s){n===void 0&&(n=Cg),r===void 0&&(r=!0),s===void 0&&(s=!1),this.id=n,this.edgeIdAutoIncrease=r,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=s}return a.prototype.getNodeNum=function(){return this.nodes.length},a.prototype.addNode=function(n,r){if(!this.nodeMap[n]){var s=new m3(n,r);this.nodes.push(s),this.nodeMap[n]=s,this.nodeLabelMap[r]||(this.nodeLabelMap[r]=[]),this.nodeLabelMap[r].push(n)}},a.prototype.addEdge=function(n,r,s,l){if((this.edgeIdAutoIncrease||n===void 0)&&(n=this.counter++),!(this.nodeMap[r]&&this.nodeMap[s]&&this.nodeMap[s].edgeMap[n])){var u=new X_(n,r,s,l);if(this.edges.push(u),this.edgeMap[n]=u,this.nodeMap[r].addEdge(u),this.edgeLabelMap[l]||(this.edgeLabelMap[l]=[]),this.edgeLabelMap[l].push(u),!this.directed){var h=new X_(n,s,r,l);this.nodeMap[s].addEdge(h),this.edgeLabelMap[l].push(h)}}},a}(),mu=function(){function a(n,r,s,l,u){this.fromNode=n,this.toNode=r,this.nodeEdgeNodeLabel={nodeLabel1:s||ko,edgeLabel:l||U_,nodeLabel2:u||ko}}return a.prototype.equalTo=function(n){return this.fromNode===n.formNode&&this.toNode===n.toNode&&this.nodeEdgeNodeLabel===n.nodeEdgeNodeLabel},a.prototype.notEqualTo=function(n){return!this.equalTo(n)},a}(),q_=function(){function a(){this.rmpath=[],this.dfsEdgeList=[]}return a.prototype.equalTo=function(n){var r=this.dfsEdgeList.length,s=n.length;if(r!==s)return!1;for(var l=0;l<r;l++)if(this.dfsEdgeList[l]!==n[l])return!1;return!0},a.prototype.notEqualTo=function(n){return!this.equalTo(n)},a.prototype.pushBack=function(n,r,s,l,u){return this.dfsEdgeList.push(new mu(n,r,s,l,u)),this.dfsEdgeList},a.prototype.toGraph=function(n,r){n===void 0&&(n=Y_),r===void 0&&(r=!1);var s=new K_(n,!0,r);return this.dfsEdgeList.forEach(function(l){var u=l.fromNode,h=l.toNode,f=l.nodeEdgeNodeLabel,d=f.nodeLabel1,v=f.edgeLabel,p=f.nodeLabel2;d!==ko&&s.addNode(u,d),p!==ko&&s.addNode(h,p),d!==ko&&p!==d&&s.addEdge(void 0,u,h,v)}),s},a.prototype.buildRmpath=function(){this.rmpath=[];for(var n=void 0,r=this.dfsEdgeList.length,s=r-1;s>=0;s--){var l=this.dfsEdgeList[s],u=l.fromNode,h=l.toNode;u<h&&(n===void 0||h===n)&&(this.rmpath.push(s),n=u)}return this.rmpath},a.prototype.getNodeNum=function(){var n={};return this.dfsEdgeList.forEach(function(r){n[r.fromNode]||(n[r.fromNode]=!0),n[r.toNode]||(n[r.toNode]=!0)}),Object.keys(n).length},a}(),Tg=function(){function a(n){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!n){for(;n;){var r=n.edge;this.edges.push(r),this.nodesUsed[r.from]=1,this.nodesUsed[r.to]=1,this.edgesUsed[r.id]=1,n=n.preNode}this.edges=this.edges.reverse()}}return a.prototype.hasNode=function(n){return this.nodesUsed[n.id]===1},a.prototype.hasEdge=function(n){return this.edgesUsed[n.id]===1},a}(),b3=function(){function a(n){var r=n.graphs,s=n.minSupport,l=s===void 0?2:s,u=n.minNodeNum,h=u===void 0?1:u,f=n.maxNodeNum,d=f===void 0?4:f,v=n.top,p=v===void 0?10:v,g=n.directed,m=g===void 0?!1:g,b=n.verbose,E=b===void 0?!1:b;this.graphs=r,this.dfsCode=new q_,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=l,this.top=p,this.directed=m,this.counter=0,this.maxNodeNum=d,this.minNodeNum=h,this.verbose=E,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return a.prototype.findForwardRootEdges=function(n,r){var s=this,l=[],u=n.nodeMap;return r.edges.forEach(function(h){(s.directed||r.label<=u[h.to].label)&&l.push(h)}),l},a.prototype.findBackwardEdge=function(n,r,s,l){if(!this.directed&&r===s)return null;for(var u=n.nodeMap,h=u[s.to],f=h.edges,d=f.length,v=0;v<d;v++){var p=f[v];if(!(l.hasEdge(p)||p.to!==r.from)){if(this.directed){if(u[r.from].label<u[s.to].label||u[r.from].label===u[s.to].label&&r.label<=p.label)return p}else if(r.label<p.label||r.label===p.label&&u[r.to].label<=u[s.to].label)return p}}return null},a.prototype.findForwardPureEdges=function(n,r,s,l){for(var u=[],h=r.to,f=n.nodeMap[h].edges,d=f.length,v=0;v<d;v++){var p=f[v],g=n.nodeMap[p.to];s<=g.label&&!l.hasNode(g)&&u.push(p)}return u},a.prototype.findForwardRmpathEdges=function(n,r,s,l){for(var u=[],h=n.nodeMap,f=h[r.to].label,d=h[r.from],v=d.edges,p=v.length,g=0;g<p;g++){var m=v[g],b=h[m.to].label;r.to===m.to||s>b||l.hasNode(h[m.to])||(r.label<m.label||r.label===m.label&&f<=b)&&u.push(m)}return u},a.prototype.getSupport=function(n){var r={};return n.forEach(function(s){r[s.graphId]||(r[s.graphId]=!0)}),Object.keys(r).length},a.prototype.findMinLabel=function(n){var r=void 0;return Object.keys(n).forEach(function(s){var l=n[s],u=l.nodeLabel1,h=l.edgeLabel,f=l.nodeLabel2;if(!r){r={nodeLabel1:u,edgeLabel:h,nodeLabel2:f};return}(u<r.nodeLabel1||u===r.nodeLabel1&&h<r.edgeLabel||u===r.nodeLabel1&&h===r.edgeLabel&&f<r.nodeLabel2)&&(r={nodeLabel1:u,edgeLabel:h,nodeLabel2:f})}),r},a.prototype.isMin=function(){var n=this,r=this.dfsCode;if(this.verbose&&console.log("isMin checking",r),r.dfsEdgeList.length===1)return!0;var s=this.directed,l=r.toGraph(Y_,s),u=l.nodeMap,h=new q_,f={};l.nodes.forEach(function(g){var m=n.findForwardRootEdges(l,g);m.forEach(function(b){var E=u[b.to],w="".concat(g.label,"-").concat(b.label,"-").concat(E.label);f[w]||(f[w]={projected:[],nodeLabel1:g.label,edgeLabel:b.label,nodeLabel2:E.label});var S={graphId:l.id,edge:b,preNode:null};f[w].projected.push(S)})});var d=this.findMinLabel(f);if(d){h.dfsEdgeList.push(new mu(0,1,d.nodeLabel1,d.edgeLabel,d.nodeLabel2));var v=function g(m){for(var b=h.buildRmpath(),E=h.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,w=h.dfsEdgeList[b[0]].toNode,S={},M=!1,C=0,T=s?-1:0,k=function(st){if(M)return"break";m.forEach(function(mt){var at=new Tg(mt),Et=n.findBackwardEdge(l,at.edges[b[st]],at.edges[b[0]],at);Et&&(S[Et.label]||(S[Et.label]={projected:[],edgeLabel:Et.label}),S[Et.label].projected.push({graphId:l.id,edge:S,preNode:mt}),C=h.dfsEdgeList[b[st]].fromNode,M=!0)})},O=b.length-1;O>T;O--){var A=k(O);if(A==="break")break}if(M){var R=n.findMinLabel(S);h.dfsEdgeList.push(new mu(w,C,ko,R.edgeLabel,ko));var L=h.dfsEdgeList.length-1;return n.dfsCode.dfsEdgeList[L]!==h.dfsEdgeList[L]?!1:g(S[R.edgeLabel].projected)}var D={};M=!1;var z=0;m.forEach(function(yt){var st=new Tg(yt),mt=n.findForwardPureEdges(l,st.edges[b[0]],E,st);mt.length>0&&(M=!0,z=w,mt.forEach(function(at){var Et="".concat(at.label,"-").concat(u[at.to].label);D[Et]||(D[Et]={projected:[],edgeLabel:at.label,nodeLabel2:u[at.to].label}),D[Et].projected.push({graphId:l.id,edge:at,preNode:yt})}))});for(var W=b.length,G=function(st){if(M)return"break";var mt=b[st];m.forEach(function(at){var Et=new Tg(at),It=n.findForwardRmpathEdges(l,Et.edges[mt],E,Et);It.length>0&&(M=!0,z=h.dfsEdgeList[mt].fromNode,It.forEach(function(Gt){var Jt="".concat(Gt.label,"-").concat(u[Gt.to].label);D[Jt]||(D[Jt]={projected:[],edgeLabel:Gt.label,nodeLabel2:u[Gt.to].label}),D[Jt].projected.push({graphId:l.id,edge:Gt,preNode:at})}))})},O=0;O<W;O++){var Y=G(O);if(Y==="break")break}if(!M)return!0;var q=n.findMinLabel(D);h.dfsEdgeList.push(new mu(z,w+1,ko,q.edgeLabel,q.nodeLabel2));var rt=h.dfsEdgeList.length-1;return r.dfsEdgeList[rt]!==h.dfsEdgeList[rt]?!1:g(D["".concat(q.edgeLabel,"-").concat(q.nodeLabel2)].projected)},p="".concat(d.nodeLabel1,"-").concat(d.edgeLabel,"-").concat(d.nodeLabel2);return v(f[p].projected)}},a.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var n=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(lv(n))}},a.prototype.subGraphMining=function(n){var r=this,s=this.getSupport(n);if(!(s<this.minSupport)&&this.isMin()){this.report();var l=this.dfsCode.getNodeNum(),u=this.dfsCode.buildRmpath(),h=this.dfsCode.dfsEdgeList[u[0]].toNode,f=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,d={},v={};n.forEach(function(p){for(var g=r.graphs[p.graphId],m=g.nodeMap,b=new Tg(p),E=u.length-1;E>=0;E--){var w=r.findBackwardEdge(g,b.edges[u[E]],b.edges[u[0]],b);if(w){var S="".concat(r.dfsCode.dfsEdgeList[u[E]].fromNode,"-").concat(w.label);v[S]||(v[S]={projected:[],toNodeId:r.dfsCode.dfsEdgeList[u[E]].fromNode,edgeLabel:w.label}),v[S].projected.push({graphId:p.graphId,edge:w,preNode:p})}}if(!(l>=r.maxNodeNum)){var M=r.findForwardPureEdges(g,b.edges[u[0]],f,b);M.forEach(function(T){var k="".concat(h,"-").concat(T.label,"-").concat(m[T.to].label);d[k]||(d[k]={projected:[],fromNodeId:h,edgeLabel:T.label,nodeLabel2:m[T.to].label}),d[k].projected.push({graphId:p.graphId,edge:T,preNode:p})});for(var C=function(k){var O=r.findForwardRmpathEdges(g,b.edges[u[k]],f,b);O.forEach(function(A){var R="".concat(r.dfsCode.dfsEdgeList[u[k]].fromNode,"-").concat(A.label,"-").concat(m[A.to].label);d[R]||(d[R]={projected:[],fromNodeId:r.dfsCode.dfsEdgeList[u[k]].fromNode,edgeLabel:A.label,nodeLabel2:m[A.to].label}),d[R].projected.push({graphId:p.graphId,edge:A,preNode:p})})},E=0;E<u.length;E++)C(E)}}),Object.keys(v).forEach(function(p){var g=v[p],m=g.toNodeId,b=g.edgeLabel;r.dfsCode.dfsEdgeList.push(new mu(h,m,"-1",b,"-1")),r.subGraphMining(v[p].projected),r.dfsCode.dfsEdgeList.pop()}),Object.keys(d).forEach(function(p){var g=d[p],m=g.fromNodeId,b=g.edgeLabel,E=g.nodeLabel2;r.dfsCode.dfsEdgeList.push(new mu(m,h+1,ko,b,E)),r.subGraphMining(d[p].projected),r.dfsCode.dfsEdgeList.pop()})}},a.prototype.generate1EdgeFrequentSubGraphs=function(){var n=this.graphs,r=this.directed,s=this.minSupport,l=this.frequentSize1Subgraphs,u={},h={},f={},d={};return Object.keys(n).forEach(function(v){var p=n[v],g=p.nodeMap;p.nodes.forEach(function(m,b){var E=m.label,w="".concat(v,"-").concat(E);if(!f[w]){var S=u[E]||0;S++,u[E]=S}f[w]={graphKey:v,label:E},m.edges.forEach(function(M){var C=E,T=g[M.to].label;if(!r&&C>T){var k=T;T=C,C=k}var O=M.label,A="".concat(v,"-").concat(C,"-").concat(O,"-").concat(T),R="".concat(C,"-").concat(O,"-").concat(T);if(!h[R]){var L=h[R]||0;L++,h[R]=L}d[A]={graphId:v,nodeLabel1:C,edgeLabel:O,nodeLabel2:T}})})}),Object.keys(u).forEach(function(v){var p=u[v];if(!(p<s)){var g={nodes:[],edges:[]};g.nodes.push({id:"0",label:v}),l.push(g)}}),l},a.prototype.run=function(){var n=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var r=this.graphs,s=this.directed,l={};Object.keys(r).forEach(function(u){var h=r[u],f=h.nodeMap;h.nodes.forEach(function(d){var v=n.findForwardRootEdges(h,d);v.forEach(function(p){var g=f[p.to],m="".concat(d.label,"-").concat(p.label,"-").concat(g.label);l[m]||(l[m]={projected:[],nodeLabel1:d.label,edgeLabel:p.label,nodeLabel2:g.label});var b={graphId:u,edge:p,preNode:null};l[m].projected.push(b)})})}),Object.keys(l).forEach(function(u){var h=l[u],f=h.projected,d=h.nodeLabel1,v=h.edgeLabel,p=h.nodeLabel2;n.dfsCode.dfsEdgeList.push(new mu(0,1,d,v,p)),n.subGraphMining(f),n.dfsCode.dfsEdgeList.pop()})}},a}(),x3=function(n,r,s,l){var u={};return Object.keys(n).forEach(function(h,f){var d=n[h],v=new K_(f,!0,r),p={};d.nodes.forEach(function(g,m){v.addNode(m,g[s]),p[g.id]=m}),d.edges.forEach(function(g,m){var b=p[g.source],E=p[g.target];v.addEdge(-1,b,E,g[l])}),v&&v.getNodeNum()&&(u[v.id]=v)}),u},E3=function(n,r,s){var l=[];return n.forEach(function(u){var h={nodes:[],edges:[]};u.nodes.forEach(function(f){var d;h.nodes.push((d={id:"".concat(f.id)},d[r]=f.label,d))}),u.edges.forEach(function(f){var d;h.edges.push((d={source:"".concat(f.from),target:"".concat(f.to)},d[s]=f.label,d))}),l.push(h)}),l},Q_="cluster",w3=function(n){var r=n.graphs,s=n.directed,l=s===void 0?!1:s,u=n.nodeLabelProp,h=u===void 0?Q_:u,f=n.edgeLabelProp,d=f===void 0?Q_:f,v=x3(r,l,h,d),p=n.minSupport,g=n.maxNodeNum,m=n.minNodeNum,b=n.verbose,E=n.top,w={graphs:v,minSupport:p,maxNodeNum:g,minNodeNum:m,top:E,verbose:b,directed:l},S=new b3(w);S.run();var M=E3(S.frequentSubgraphs,h,d);return M},S3=w3,J_=function(n,r,s,l){s===void 0&&(s="cluster"),l===void 0&&(l=2);var u=[],h=n.nodes;return r.forEach(function(f,d){u.push(tM(h,f,d,s,l))}),u},tM=function(n,r,s,l,u){var h=[s],f=[],d={};return r.forEach(function(v,p){if(v<=u&&s!==p){h.push(p),f.push(n[p]);var g=n[p][l];d[g]?(d[g].count++,d[g].dists.push(v)):d[g]={count:1,dists:[v]}}}),Object.keys(d).forEach(function(v){d[v].dists=d[v].dists.sort(function(p,g){return p-g})}),{nodeIdx:s,nodeId:n[s].id,nodeIdxs:h,neighbors:f,neighborNum:h.length-1,nodeLabelCountMap:d}},_3=function(n,r,s,l,u){var h=Math.ceil(s/r),f={},d=0;return l.forEach(function(v,p){for(var g=0,m=0,b=v.nodeIdxs,E=v.neighborNum-1;g<h;){for(var w=b[1+Math.floor(Math.random()*E)],S=0;(f["".concat(p,"-").concat(w)]||f["".concat(w,"-").concat(p)])&&(w=Math.floor(Math.random()*r),S++,!(S>2*r)););if(S<2*r&&(f["".concat(p,"-").concat(w)]={start:p,end:w,distance:u[p][w]},g++,d++,d>=s))return f;if(m++,m>2*r)break}if(g<h){var M=h-g;h=(h+M)/(r-p-1)}}),f},Og=function(n,r,s,l){var u=s.nodes;return l||(l={}),Object.keys(n).forEach(function(h){var f,d;if(!(l&&l[h])){l[h]={nodes:[],edges:[]};var v=n[h],p=(f=r[v.start])===null||f===void 0?void 0:f.nodeIdxs,g=(d=r[v.end])===null||d===void 0?void 0:d.nodeIdxs;if(!(!p||!g)){var m=new Set(g),b=p.filter(function(C){return m.has(C)});if(!(!b||!b.length)){for(var E={},w=b.length,S=0;S<w;S++){var M=u[b[S]];l[h].nodes.push(M),E[M.id]=!0}s.edges.forEach(function(C){E[C.source]&&E[C.target]&&l[h].edges.push(C)})}}}}),l},Ag=function(n,r,s,l){var u,h,f={};n.nodes.forEach(function(v){f[v.id]=v});var d=0;return!(!((u=r==null?void 0:r.edges)===null||u===void 0)&&u.length)||((h=r==null?void 0:r.nodes)===null||h===void 0?void 0:h.length)<2?0:(n.edges.forEach(function(v){var p=f[v.source][s],g=f[v.target][s],m=r==null?void 0:r.nodes[0][s],b=r==null?void 0:r.nodes[1][s],E=r==null?void 0:r.edges[0][l];v[l]===E&&(p===m&&g===b||p===b&&g===m)&&d++}),d)},M3=function(n,r,s){for(var l=1/0,u=0,h=function(v){var p=n[v],g=Object.keys(p).sort(function(C,T){return p[C]-p[T]}),m=10,b=[];g.forEach(function(C,T){b[T%m]||(b[T%m]={graphs:[],totalCount:0,aveCount:0}),b[T%m].graphs.push(C),b[T%m].totalCount+=p[C]});var E=0,w=[];b.forEach(function(C){var T=C.totalCount/C.graphs.length;C.aveCount=T,w.push(T);var k=0,O=C.length;C.graphs.forEach(function(A,R){var L=p[A];C.graphs.forEach(function(D,z){R!==z&&(k+=Math.abs(L-p[D]))})}),k/=O*(O-1)/2,E+=k}),E/=b.length;var S=0;w.forEach(function(C,T){w.forEach(function(k,O){T!==O&&(S+=Math.abs(C-k))}),S/=w.length*(w.length-1)/2});var M=S-E;l<M&&(l=M,u=v)},f=0;f<r;f++)h(f);return{structure:s[u],structureCountMap:n[u]}},eM=function(n,r){var s={},l={};return n.forEach(function(u,h){s[u.id]={idx:h,node:u,degree:0,inDegree:0,outDegree:0};var f=u[r];l[f]||(l[f]=[]),l[f].push(u)}),{nodeMap:s,nodeLabelMap:l}},nM=function(n,r,s){var l={},u={};return n.forEach(function(h,f){l["".concat(__)]={idx:f,edge:h};var d=h[r];u[d]||(u[d]=[]),u[d].push(h);var v=s[h.source];v&&(v.degree++,v.outDegree++);var p=s[h.target];p&&(p.degree++,p.inDegree++)}),{edgeMap:l,edgeLabelMap:u}},rM=function(n,r,s){var l=r.length,u={};return r.forEach(function(h,f){for(var d=s?0:f+1,v=n[f].id,p=d;p<l;p++)if(f!==p){var g=n[p].id,m=h[p];u["".concat(v,"-").concat(g)]=m,s||(u["".concat(g,"-").concat(v)]=m)}}),u},C3=function(n,r,s,l,u,h,f,d,v,p,g){var m,b="".concat(r.id,"-").concat(s.id);if(p&&p[b])return p[b];var E=g?g[b]:void 0;if(!E){var w=(m={},m[b]={start:l[r.id].idx,end:l[s.id].idx,distance:u},m);g=Og(w,h,n,g),E=g[b]}return Ag(E,f,d,v)},iM=function(n,r,s,l){var u,h,f,d=(u=n[r])===null||u===void 0?void 0:u.degree,v=(h=n[r])===null||h===void 0?void 0:h.inDegree,p=(f=n[r])===null||f===void 0?void 0:f.outDegree;return n[r]===void 0&&(d=1/0,v=1/0,p=1/0,l[r].forEach(function(g){var m=s[g.id].degree;d>m&&(d=m);var b=s[g.id].inDegree;v>b&&(v=b);var E=s[g.id].outDegree;p>E&&(p=E)}),n[r]={degree:d,inDegree:v,outDegree:p}),{minPatternNodeLabelDegree:d,minPatternNodeLabelInDegree:v,minPatternNodeLabelOutDegree:p}},T3=function(n,r,s,l,u,h,f){var d;if(s===void 0&&(s=!1),h===void 0&&(h="cluster"),f===void 0&&(f="cluster"),!(!n||!n.nodes)){var v=n.nodes.length;if(v){var p=YE(n,s),g=YE(r,s),m=rM(n.nodes,p,s),b=rM(r.nodes,g,s),E=eM(n.nodes,h),w=E.nodeMap,S=E.nodeLabelMap,M=eM(r.nodes,h),C=M.nodeMap,T=M.nodeLabelMap;nM(n.edges,f,w);var k=nM(r.edges,f,C).edgeLabelMap,O=[];g==null||g.forEach(function(We){O=O.concat(We)}),u||(u=Math.max.apply(Math,(0,N.ev)((0,N.ev)([],O,!1),[2],!1))),l||(l=u);var A=J_(n,p,h,l),R=J_(r,g,h,l),L=Math.min(100,v*(v-1)/2),D=_3(l,v,L,A,p),z=Og(D,A,n),W=10,G=1,Y=1,q=4,rt={graphs:z,nodeLabelProp:h,edgeLabelProp:f,minSupport:G,minNodeNum:Y,maxNodeNum:q,directed:s},yt=S3(rt).slice(0,W),st=yt.length,mt=[];yt.forEach(function(We,yn){mt[yn]={},Object.keys(z).forEach(function(He){var un=z[He],Tn=Ag(un,We,h,f);mt[yn][He]=Tn})});var at=M3(mt,st,yt),Et=at.structure,It=at.structureCountMap,Gt=r.nodes[0],Jt=[],Re=(d=r.nodes[0])===null||d===void 0?void 0:d[h],te=-1/0;r.nodes.forEach(function(We){var yn=We[h],He=S[yn];(He==null?void 0:He.length)>te&&(te=He.length,Jt=He,Re=yn,Gt=We)});var we={},cn={},$e={},qe={},Xe={},Ir={};Object.keys(T).forEach(function(We,yn){Xe[We]=[],s&&(Ir[We]=[]);var He=-1/0,un=T[We],Tn={};un.forEach(function(bn){var fn=b["".concat(Gt.id,"-").concat(bn.id)];if(fn&&Xe[We].push(fn),He<fn&&(He=fn),Tn["".concat(Gt.id,"-").concat(bn.id)]={start:0,end:C[bn.id].idx,distance:fn},s){var Mr=b["".concat(bn.id,"-").concat(Gt.id)];Mr&&Ir[We].push(Mr)}}),Xe[We]=Xe[We].sort(function(bn,fn){return bn-fn}),s&&(Ir[We]=Ir[We].sort(function(bn,fn){return bn-fn})),cn=Og(Tn,R,r,cn);var ee=[];if(Object.keys(Tn).forEach(function(bn){if($e[bn]){ee.push($e[bn]);return}var fn=cn[bn];$e[bn]=Ag(fn,Et,h,f),ee.push($e[bn])}),ee=ee.sort(function(bn,fn){return fn-bn}),qe["".concat(Gt.id,"-").concat(We)]=ee,We!==Re)for(var hn=(Jt==null?void 0:Jt.length)||0,mn=function(fn){var Mr=Jt[fn],as=A[w[Mr.id].idx],Dr=as.nodeLabelCountMap[We],zu=T[We].length;if(!Dr||Dr.count<zu)return Jt.splice(fn,1),"continue";for(var Df=!1,la=0;la<zu;la++)if(Dr.dists[la]>Xe[We][la]){Df=!0;break}if(Df)return Jt.splice(fn,1),"continue";var ks={};as.neighbors.forEach(function(ca){var no=m["".concat(Mr.id,"-").concat(ca.id)];ks["".concat(Mr.id,"-").concat(ca.id)]={start:w[Mr.id].idx,end:w[ca.id].idx,distance:no}}),z=Og(ks,A,n,z);var Fo=[];Object.keys(ks).forEach(function(ca){if(It[ca]){Fo.push(It[ca]);return}var no=z[ca];It[ca]=Ag(no,Et,h,f),Fo.push(It[ca])}),Fo=Fo.sort(function(ca,no){return no-ca});for(var Ac=!1,la=0;la<zu;la++)if(Fo[la]<ee[la]){Ac=!0;break}if(Ac)return Jt.splice(fn,1),"continue"},Vr=hn-1;Vr>=0;Vr--)mn(Vr)});var Ze=[];Jt==null||Jt.forEach(function(We){for(var yn=w[We.id].idx,He=tM(n.nodes,p[yn],yn,h,u),un=He.neighbors,Tn=un.length,ee=!1,hn=Tn-1;hn>=0;hn--){if(un.length+1<r.nodes.length){ee=!0;return}var mn=un[hn],Vr=mn[h];if(!T[Vr]||!T[Vr].length){un.splice(hn,1);continue}if(!Xe[Vr]||!Xe[Vr].length){un.splice(hn,1);continue}var bn="".concat(We.id,"-").concat(mn.id),fn=m[bn],Mr=Xe[Vr].length-1,as=Xe[Vr][Mr];if(fn>as){un.splice(hn,1);continue}if(s){var Dr="".concat(mn.id,"-").concat(We.id),zu=m[Dr];Mr=Ir[Vr].length-1;var Df=Ir[Vr][Mr];if(zu>Df){un.splice(hn,1);continue}}var la=It[bn]?It[bn]:C3(n,We,mn,w,fn,A,Et,h,f,It,z),ks="".concat(Gt.id,"-").concat(Vr),Fo=qe[ks][qe[ks].length-1];if(la<Fo){un.splice(hn,1);continue}var Ac=iM(we,Vr,C,T),ca=Ac.minPatternNodeLabelDegree,no=Ac.minPatternNodeLabelInDegree,Nl=Ac.minPatternNodeLabelOutDegree;if(w[mn.id].degree<ca){un.splice(hn,1);continue}}ee||Ze.push({nodes:[We].concat(un)})});var is=Sg(r,Gt.id,!1).length,Yi={};s?(Object.keys(is).forEach(function(We){var yn=C[We].node[h];Yi[yn]?Yi[yn].push(is[We]):Yi[yn]=[is[We]]}),Object.keys(Yi).forEach(function(We){Yi[We].sort(function(yn,He){return yn-He})})):Yi=Xe;for(var Oc=Ze.length,Ri=function(yn){var He=Ze[yn],un=He.nodes[0],Tn={},ee={};He.nodes.forEach(function(Kn,ss){ee[Kn.id]={idx:ss,node:Kn,degree:0,inDegree:0,outDegree:0};var Jr=Kn[h];Tn[Jr]?Tn[Jr]++:Tn[Jr]=1});var hn=[],mn={};n.edges.forEach(function(Kn){ee[Kn.source]&&ee[Kn.target]&&(hn.push(Kn),mn[Kn[f]]?mn[Kn[f]]++:mn[Kn[f]]=1,ee[Kn.source].degree++,ee[Kn.target].degree++,ee[Kn.source].outDegree++,ee[Kn.target].inDegree++)});for(var Vr=Object.keys(k).length,bn=!1,fn=0;fn<Vr;fn++){var Mr=Object.keys(k)[fn];if(!mn[Mr]||mn[Mr]<k[Mr].length){bn=!0;break}}if(bn)return Ze.splice(yn,1),"continue";var as=hn.length;if(as<r.edges.length)return Ze.splice(yn,1),"break";for(var Dr=!1,zu=function(ss){var Jr=hn[ss],zo=Jr[f],Zu=k[zo];if(!Zu||!Zu.length)return mn[zo]--,Zu&&mn[zo]<Zu.length?(Dr=!0,"break"):(hn.splice(ss,1),ee[Jr.source].degree--,ee[Jr.target].degree--,ee[Jr.source].outDegree--,ee[Jr.target].inDegree--,"continue");var jA=ee[Jr.source].node[h],$A=ee[Jr.target].node[h],gS=!1;if(Zu.forEach(function(HA){var VA=C[HA.source].node,UA=C[HA.target].node;VA[h]===jA&&UA[h]===$A&&(gS=!0),!s&&VA[h]===$A&&UA[h]===jA&&(gS=!0)}),!gS)return mn[zo]--,Zu&&mn[zo]<Zu.length?(Dr=!0,"break"):(hn.splice(ss,1),ee[Jr.source].degree--,ee[Jr.target].degree--,ee[Jr.source].outDegree--,ee[Jr.target].inDegree--,"continue")},fn=as-1;fn>=0;fn--){var Df=zu(fn);if(Df==="break")break}if(Dr)return Ze.splice(yn,1),"continue";He.edges=hn;var la=Sg(He,He.nodes[0].id,!1).length;if(Object.keys(la).reverse().forEach(function(Kn){if(!(Kn===He.nodes[0].id||Dr)){if(la[Kn]===1/0){var ss=ee[Kn].node[h];if(Tn[ss]--,Tn[ss]<T[ss].length){Dr=!0;return}var Jr=He.nodes.indexOf(ee[Kn].node);He.nodes.splice(Jr,1),ee[Kn]=void 0;return}var zo=w[Kn].node[h];if(!Yi[zo]||!Yi[zo].length||la[Kn]>Yi[zo][Yi[zo].length-1]){var ss=ee[Kn].node[h];if(Tn[ss]--,Tn[ss]<T[ss].length){Dr=!0;return}var Jr=He.nodes.indexOf(ee[Kn].node);He.nodes.splice(Jr,1),ee[Kn]=void 0}}}),Dr)return Ze.splice(yn,1),"continue";for(var ks=!0,Fo=0;ks&&!Dr;){ks=!1;var Ac=s?ee[un.id].degree<C[Gt.id].degree||ee[un.id].inDegree<C[Gt.id].inDegree||ee[un.id].outDegree<C[Gt.id].outDegree:ee[un.id].degree<C[Gt.id].degree;if(Ac){Dr=!0;break}if(Tn[un[h]]<T[un[h]].length){Dr=!0;break}for(var ca=He.nodes.length,no=ca-1;no>=0;no--){var Nl=He.nodes[no],WA=ee[Nl.id].degree,W9=ee[Nl.id].inDegree,G9=ee[Nl.id].outDegree,j9=Nl[h],pS=iM(we,j9,C,T),GA=pS.minPatternNodeLabelDegree,$9=pS.minPatternNodeLabelInDegree,H9=pS.minPatternNodeLabelOutDegree,V9=s?WA<GA||W9<$9||G9<H9:WA<GA;if(V9){if(Tn[Nl[h]]--,Tn[Nl[h]]<T[Nl[h]].length){Dr=!0;break}He.nodes.splice(no,1),ee[Nl.id]=void 0,ks=!0}}if(Dr||!ks&&Fo!==0)break;as=hn.length;for(var qm=as-1;qm>=0;qm--){var Ll=hn[qm];if(!ee[Ll.source]||!ee[Ll.target]){hn.splice(qm,1);var Qm=Ll[f];if(mn[Qm]--,ee[Ll.source]&&(ee[Ll.source].degree--,ee[Ll.source].outDegree--),ee[Ll.target]&&(ee[Ll.target].degree--,ee[Ll.target].inDegree--),k[Qm]&&mn[Qm]<k[Qm].length){Dr=!0;break}ks=!0}}Fo++}if(Dr||Dr||He.nodes.length<r.nodes.length||hn.length<r.edges.length)return Ze.splice(yn,1),"continue"},di=Oc-1;di>=0;di--){var Rl=Ri(di);if(Rl==="break")break}for(var Ni=Ze.length,Oa=function(yn){var He=Ze[yn],un={};He.edges.forEach(function(hn){var mn="".concat(hn.source,"-").concat(hn.target,"-").concat(hn.label);un[mn]?un[mn]++:un[mn]=1});for(var Tn=function(mn){var Vr=Ze[mn],bn={};Vr.edges.forEach(function(Mr){var as="".concat(Mr.source,"-").concat(Mr.target,"-").concat(Mr.label);bn[as]?bn[as]++:bn[as]=1});var fn=!0;Object.keys(bn).length!==Object.keys(un).length?fn=!1:Object.keys(un).forEach(function(Mr){bn[Mr]!==un[Mr]&&(fn=!1)}),fn&&Ze.splice(mn,1)},ee=Ni-1;ee>yn;ee--)Tn(ee);Ni=Ze.length},di=0;di<=Ni-1;di++)Oa(di);return Ze}}},O3=T3,A3=function(){function a(n){n===void 0&&(n=10),this.linkedList=new S_,this.maxStep=n}return Object.defineProperty(a.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),a.prototype.isEmpty=function(){return!this.linkedList.head},a.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},a.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},a.prototype.push=function(n){this.linkedList.prepend(n),this.length>this.maxStep&&this.linkedList.deleteTail()},a.prototype.pop=function(){var n=this.linkedList.deleteHead();return n?n.value:null},a.prototype.toArray=function(){return this.linkedList.toArray().map(function(n){return n.value})},a.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},a}(),k3=A3,P3=P_,jZ={getAdjMatrix:mg,breadthFirstSearch:uP,connectedComponent:C_,getDegree:ZE,getInDegree:fP,getOutDegree:dP,detectCycle:P_,detectDirectedCycle:P3,detectAllCycles:gP,detectAllDirectedCycle:k_,detectAllUndirectedCycle:A_,depthFirstSearch:O_,dijkstra:Sg,findAllPath:jP,findShortestPath:UE,floydWarshall:YE,labelPropagation:VP,louvain:G_,iLouvain:t3,kCore:n3,kMeans:i3,cosineSimilarity:$_,nodesCosineSimilarity:o3,minimumSpanningTree:p3,pageRank:V_,getNeighbors:_s,Stack:k3,GADDI:O3};function tt(a){if(a.id!==void 0)return a.id;if(a.source!==void 0&&a.target!==void 0)return`${a.source}-${a.target}`;throw new Error(xl("The datum does not have available id."))}function kg(a){return a.combo}function aM(a,n){const r={nodes:(a.nodes||[]).map(tt),edges:(a.edges||[]).map(tt),combos:(a.combos||[]).map(tt)};return n?Object.values(r).flat():r}const sM=(a,n,r)=>{var s;switch(r.type){case"degree":{const l=new Map;return(s=a.nodes)===null||s===void 0||s.forEach(u=>{const h=n(tt(u),r.direction).length;l.set(tt(u),h)}),l}case"betweenness":return R3(a,r.directed,r.weightPropertyName);case"closeness":return N3(a,r.directed,r.weightPropertyName);case"eigenvector":return I3(a,r.directed);case"pagerank":return L3(a,r.epsilon,r.linkProb);default:return oM(a)}},oM=a=>{var n;const r=new Map;return(n=a.nodes)===null||n===void 0||n.forEach(s=>{r.set(tt(s),0)}),r},R3=(a,n,r)=>{const s=oM(a),{nodes:l=[]}=a;return l.forEach(u=>{l.forEach(h=>{if(u!==h){const{allPath:f}=UE(a,tt(u),tt(h),n,r),d=f.length;f.flat().forEach(v=>{v!==tt(u)&&v!==tt(h)&&s.set(v,s.get(v)+1/d)})}})}),s},N3=(a,n,r)=>{const s=new Map,{nodes:l=[]}=a;return l.forEach(u=>{const h=l.reduce((f,d)=>{if(u!==d){const{length:v}=UE(a,tt(u),tt(d),n,r);f+=v}return f},0);s.set(tt(u),1/h)}),s},L3=(a,n,r)=>{var s;const l=new Map,u=V_(a,n,r);return(s=a.nodes)===null||s===void 0||s.forEach(h=>{l.set(tt(h),u[tt(h)])}),l},I3=(a,n)=>{const{nodes:r=[]}=a,s=D3(a,n),l=B3(s,r.length),u=new Map;return r.forEach((h,f)=>{u.set(tt(h),l[f])}),u},D3=(a,n)=>{const{nodes:r=[],edges:s=[]}=a,l=Array(r.length).fill(null).map(()=>Array(r.length).fill(0));return s.forEach(({source:u,target:h})=>{const f=r.findIndex(v=>tt(v)===u),d=r.findIndex(v=>tt(v)===h);n?l[f][d]=1:(l[f][d]=1,l[d][f]=1)}),l},B3=(a,n,r=100,s=1e-6)=>{let l=Array(n).fill(1),u=1/0;for(let h=0;h<r&&u>s;h++){const f=Array(n).fill(0);for(let v=0;v<n;v++)for(let p=0;p<n;p++)f[v]+=a[v][p]*l[p];const d=Math.sqrt(f.reduce((v,p)=>v+p*p,0));for(let v=0;v<n;v++)f[v]/=d;u=Math.sqrt(f.reduce((v,p,g)=>v+(p-l[g])*p,0)),l=f}return l};function uc(a,n,r,s=Rr){const l=new Map(a.map(m=>[r(m),m])),u=new Map(n.map(m=>[r(m),m])),h=new Set(l.keys()),f=new Set(u.keys()),d=[],v=[],p=[],g=[];return f.forEach(m=>{h.has(m)?s(l.get(m),u.get(m))?g.push(u.get(m)):v.push(u.get(m)):d.push(u.get(m))}),h.forEach(m=>{f.has(m)||p.push(l.get(m))}),{enter:d,exit:p,keep:g,update:v}}function bu(a,n,r){const s=l=>{r&&!r(l)||(l.style.visibility=n)};a.forEach(l=>{s(l)})}function F3(a,n,r){const s={},l=u=>(u in s||(s[u]=0),`${n}-${u}-${s[u]++}`);return r.map(u=>typeof u=="string"?{type:u,key:l(u)}:typeof u=="function"?u.call(a):u.key?u:Object.assign(Object.assign({},u),{key:l(u.type)}))}class qE{constructor(n){this.extensions=[],this.extensionMap={},this.context=n}setExtensions(n){const r=F3(this.context.graph,this.category,n),{enter:s,update:l,exit:u,keep:h}=uc(this.extensions,r,f=>f.key);this.createExtensions(s),this.updateExtensions([...l,...h]),this.destroyExtensions(u),this.extensions=r}createExtension(n){const{category:r}=this,{key:s,type:l}=n,u=bl(r,l);if(!u)return _a.warn(`The extension ${l} of ${r} is not registered.`);const h=new u(this.context,n);h.initialized=!0,this.extensionMap[s]=h}createExtensions(n){n.forEach(r=>this.createExtension(r))}updateExtension(n){const{key:r}=n,s=this.extensionMap[r];s&&s.update(n)}updateExtensions(n){n.forEach(r=>this.updateExtension(r))}destroyExtension(n){const r=this.extensionMap[n];r&&(r.initialized&&!r.destroyed&&r.destroy(),delete this.extensionMap[n])}destroyExtensions(n){n.forEach(({key:r})=>this.destroyExtension(r))}destroy(){this.destroyExtensions(this.extensions),this.context={},this.extensions=[],this.extensionMap={}}}class QE{constructor(n,r){this.events=[],this.initialized=!1,this.destroyed=!1,this.context=n,this.options=r}update(n){this.options=Object.assign(this.options,n)}destroy(){this.context={},this.options={},this.destroyed=!0}}class Xa extends QE{}class Pg extends Xa{constructor(n,r){super(n,Object.assign({},Pg.defaultOptions,r)),this.isOverlapping=(s,l)=>l.some(u=>s.intersects(u)),this.occupiedBounds=[],this.detectLabelCollision=s=>{const l=this.context.viewport,u={show:[],hide:[]};return this.occupiedBounds=[],s.forEach(h=>{const f=h.getShape("label").getRenderBounds();l.isInViewport(f,!0)&&!this.isOverlapping(f,this.occupiedBounds)?(u.show.push(h),this.occupiedBounds.push(cc(f,this.options.padding))):u.hide.push(h)}),u},this.hideLabelIfExceedViewport=(s,l)=>{const{exit:u}=uc(s,l,h=>h.id);u==null||u.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(s,l)=>{const{model:u}=this.context,h=u.getData(),f=u.getRelatedEdgesData.bind(u);return s.map(v=>(this.nodeCentralities.has(v.id)||(this.nodeCentralities=sM(h,f,l)),{node:v,centrality:this.nodeCentralities.get(v.id)})).sort((v,p)=>p.centrality-v.centrality).map(v=>v.node)},this.sortLabelElementsInView=s=>{const{sort:l,sortNode:u,sortCombo:h,sortEdge:f}=this.options,{model:d}=this.context;if((0,re.Z)(l))return s.sort((w,S)=>l(d.getElementDataById(w.id),d.getElementDataById(S.id)));const{node:v=[],edge:p=[],combo:g=[]}=pg(s,w=>w.type),m=(0,re.Z)(h)?g.sort((w,S)=>h(...d.getComboData([w.id,S.id]))):g,b=(0,re.Z)(u)?v.sort((w,S)=>u(...d.getNodeData([w.id,S.id]))):this.sortNodesByCentrality(v,u),E=(0,re.Z)(f)?p.sort((w,S)=>f(...d.getEdgeData([w.id,S.id]))):p;return[...m,...b,...E]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=s=>{var l;if(((l=s.data)===null||l===void 0?void 0:l.stage)==="zIndex")return;if(!this.validate(s)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return}const u=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,u),this.labelElementsInView=u;const h=this.sortLabelElementsInView(this.labelElementsInView),{show:f,hide:d}=this.detectLabelCollision(h);for(let v=f.length-1;v>=0;v--)this.showLabel(f[v]);d.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=s=>{const l=s.getShape("label");l&&bu(l,"hidden"),this.hiddenElements.set(s.id,s)},this.showLabel=s=>{const l=s.getShape("label");l&&bu(l,"visible"),s.toFront(),this.hiddenElements.delete(s.id)},this.onTransform=x_(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=s=>{this.enableToggle&&this.onToggleVisibility(s)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=s=>{this.onToggleVisibility(s),this.enableToggle=!0},this.bindEvents()}update(n){this.unbindEvents(),super.update(n),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){const{elementMap:n}=this.context.element,r=[];for(const s in n){const l=n[s];l.isVisible()&&l.getShape("label")&&r.push(l)}return r}getLabelElementsInView(){const n=this.context.viewport;return this.getLabelElements().filter(r=>n.isInViewport(r.getShape("key").getRenderBounds()))}bindEvents(){const{graph:n}=this.context;n.on(Pt.BEFORE_RENDER,this.onBeforeRender),n.on(Pt.AFTER_RENDER,this.onAfterRender),n.on(Pt.AFTER_DRAW,this.toggle),n.on(Pt.AFTER_LAYOUT,this.toggle),n.on(Pt.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:n}=this.context;n.off(Pt.BEFORE_RENDER,this.onBeforeRender),n.off(Pt.AFTER_RENDER,this.onAfterRender),n.off(Pt.AFTER_DRAW,this.toggle),n.off(Pt.AFTER_LAYOUT,this.toggle),n.off(Pt.AFTER_TRANSFORM,this.onTransform)}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}destroy(){this.unbindEvents(),super.destroy()}}Pg.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};var Ka=K(83787);const lM=[0,0,0];function Ce(a,n){return a.map((r,s)=>r+n[s])}function Nn(a,n){return a.map((r,s)=>r-n[s])}function Us(a,n){return typeof n=="number"?a.map(r=>r*n):a.map((r,s)=>r*n[s])}function Ys(a,n){return typeof n=="number"?a.map(r=>r/n):a.map((r,s)=>r/n[s])}function z3(a,n){return a.reduce((r,s,l)=>r+s*n[l],0)}function Z3(a,n){const r=cv(a),s=cv(n);return[r[1]*s[2]-r[2]*s[1],r[2]*s[0]-r[0]*s[2],r[0]*s[1]-r[1]*s[0]]}function hc(a,n){return a.map(r=>r*n)}function Xn(a,n){return Math.sqrt(a.reduce((r,s,l)=>r+Math.pow(s-n[l]||0,2),0))}function Rg(a,n){return a.reduce((r,s,l)=>r+Math.abs(s-n[l]),0)}function El(a){const n=a.reduce((r,s)=>r+Math.pow(s,2),0);return a.map(r=>r/Math.sqrt(n))}function JE(a,n,r=!1){const s=a[0]*n[1]-a[1]*n[0];let l=Math.acos(Us(a,n).reduce((u,h)=>u+h,0)/(Xn(a,lM)*Xn(n,lM)));return r&&s<0&&(l=2*Math.PI-l),l}function $Z(a,n){return a.every((r,s)=>r===n[s])}function Ng(a,n=!0){return n?[-a[1],a[0]]:[a[1],-a[0]]}function t2(a,n){return a.map(r=>r%n)}function xu(a){return[a[0],a[1]]}function cv(a){return Xk(a)?[a[0],a[1],0]:a}function cM(a){const[n,r]=a;return!n&&!r?0:Math.atan2(r,n)}function uM(a,n){const[r,s]=a,[l,u]=n,h=Nn(r,s),f=Nn(l,u);return Z3(h,f).every(d=>d===0)}function e2(a,n,r=!1){if(uM(a,n))return;const[s,l]=a,[u,h]=n,f=((s[0]-u[0])*(u[1]-h[1])-(s[1]-u[1])*(u[0]-h[0]))/((s[0]-l[0])*(u[1]-h[1])-(s[1]-l[1])*(u[0]-h[0])),d=h[0]-u[0]?(s[0]-u[0]+f*(l[0]-s[0]))/(h[0]-u[0]):(s[1]-u[1]+f*(l[1]-s[1]))/(h[1]-u[1]);if(!(!r&&(!To(f,0,1)||!To(d,0,1))))return[s[0]+f*(l[0]-s[0]),s[1]+f*(l[1]-s[1])]}function hM(a){if(Array.isArray(a))return To(a[0],0,1)&&To(a[1],0,1)?a:[.5,.5];const n=a.split("-"),r=n.includes("left")?0:n.includes("right")?1:.5,s=n.includes("top")?0:n.includes("bottom")?1:.5;return[r,s]}function pr(a){const{x:n=0,y:r=0,z:s=0}=a.style||{};return[+n,+r,+s]}function W3(a){const{x:n,y:r,z:s}=a.style||{};return n!==void 0||r!==void 0||s!==void 0}function fM(a,n){const[r,s]=n,{min:l,max:u}=a;return[l[0]+r*(u[0]-l[0]),l[1]+s*(u[1]-l[1])]}function wl(a,n="center"){const r=hM(n);return fM(a,r)}function HZ(a,n){const r=parseAnchor(n);return fM(a,r)}const VZ=a=>{const[n,r]=a;return{left:Math.min(n[0],r[0]),right:Math.max(n[0],r[0]),top:Math.min(n[1],r[1]),bottom:Math.max(n[1],r[1])}};function Oi(a){var n;return[a.x,a.y,(n=a.z)!==null&&n!==void 0?n:0]}function Xs(a){var n;return{x:a[0],y:a[1],z:(n=a[2])!==null&&n!==void 0?n:0}}function UZ(a){return a.sort((n,r)=>n[0]-r[0]||n[1]-r[1])}function YZ(a){const n=new Set;return a.filter(r=>{const s=r.join(",");return n.has(s)?!1:(n.add(s),!0)})}function uv(a,n=0){return a.map(r=>parseFloat(r.toFixed(n)))}function fc(a,n,r,s=!1){if(Rr(a,n))return a;const l=s?Nn(a,n):Nn(n,a),u=El(l),h=[u[0]*r,u[1]*r];return Ce(xu(a),h)}function dM(a,n){return a[1]===n[1]}function G3(a,n){return a[0]===n[0]}function j3(a,n){return dM(a,n)||G3(a,n)}function vM(a,n,r){return uM([a,n],[n,r])}function pM(a,n){return[2*n[0]-a[0],2*n[1]-a[1]]}function gM(a,n,r,s=!0,l=!1){for(let u=0;u<r.length;u++){let h=r[u],f=r[(u+1)%r.length];s&&(h=Ce(n,h),f=Ce(n,f));const d=l?pM(a,n):a,v=e2([n,d],[h,f]);if(v)return{point:v,line:[h,f]}}return{point:n,line:void 0}}function $3(a,n,r,s){const l=a[0],u=a[1];let h=!1;r===void 0&&(r=0),s===void 0&&(s=n.length);const f=s-r;for(let d=0,v=f-1;d<f;v=d++){const p=n[d+r][0],g=n[d+r][1],m=n[v+r][0],b=n[v+r][1];g>u!=b>u&&l<(m-p)*(u-g)/(b-g)+p&&(h=!h)}return h}function H3(a,n,r=!1){const s=wl(n,"center"),l=[wl(n,"left-top"),wl(n,"right-top"),wl(n,"right-bottom"),wl(n,"left-bottom")];return gM(a,s,l,!1,r).point}function Lg(a,n,r=!1){const s=n.center,l=r?pM(a,s):a,u=Nn(l,n.center),h=Math.atan2(u[1],u[0]);if(isNaN(h))return s;const f=Oo(n)/2,d=Ao(n)/2,v=s[0]+f*Math.cos(h),p=s[1]+d*Math.sin(h);return[v,p]}function V3(a,n){let r=1/0,s=[a[0],n[0]];return a.forEach(l=>{n.forEach(u=>{const h=Xn(l,u);h<r&&(r=h,s=[l,u])})}),s}function U3(a,n){let r=1/0,s=[[0,0],[0,0]];return n.forEach(l=>{const u=Y3(a,l);u<r&&(r=u,s=l)}),s}function Y3(a,n){const r=yM(a,n);return Xn(a,r)}function yM(a,n){const[r,s]=n[0],[l,u]=n[1],[h,f]=a,d=l-r,v=u-s;if(d===0&&v===0)return[r,s];let p=((h-r)*d+(f-s)*v)/(d*d+v*v);p>1?p=1:p<0&&(p=0);const g=r+p*d,m=s+p*v;return[g,m]}function X3(a){const n=a.reduce((r,s)=>Ce(r,s),[0,0]);return Ys(n,a.length)}function n2(a,n=!0){const r=X3(a);return a.sort(([s,l],[u,h])=>{const f=Math.atan2(l-r[1],s-r[0]),d=Math.atan2(h-r[1],u-r[0]);return n?d-f:f-d})}function mM(a,n){return[a,[a[0],n[1]],n,[n[0],a[1]]]}class Nr{constructor(n,r,s){if(this.phase=r,this.pointerByTouch=[],this.initialDistance=null,this.emitter=n,Nr.instance)return Nr.callbacks[this.phase].push(s),Nr.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),Nr.instance=this,Nr.callbacks[this.phase].push(s)}bindEvents(){const{emitter:n}=this;n.on(pt.POINTER_DOWN,this.onPointerDown),n.on(pt.POINTER_MOVE,this.onPointerMove),n.on(pt.POINTER_UP,this.onPointerUp)}updatePointerPosition(n,r,s){const l=this.pointerByTouch.findIndex(u=>u.pointerId===n);l>=0&&(this.pointerByTouch[l]={x:r,y:s,pointerId:n})}onPointerDown(n){const{x:r,y:s}=n.client||{};if(!(r===void 0||s===void 0)&&(this.pointerByTouch.push({x:r,y:s,pointerId:n.pointerId}),n.pointerType==="touch"&&this.pointerByTouch.length===2)){Nr.isPinching=!0;const l=this.pointerByTouch[0].x-this.pointerByTouch[1].x,u=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(l*l+u*u),Nr.callbacks.pinchstart.forEach(h=>h(n,{scale:0}))}}onPointerMove(n){if(this.pointerByTouch.length!==2||this.initialDistance===null)return;const{x:r,y:s}=n.client||{};if(r===void 0||s===void 0)return;this.updatePointerPosition(n.pointerId,r,s);const l=this.pointerByTouch[0].x-this.pointerByTouch[1].x,u=this.pointerByTouch[0].y-this.pointerByTouch[1].y,f=Math.sqrt(l*l+u*u)/this.initialDistance;Nr.callbacks.pinchmove.forEach(d=>d(n,{scale:(f-1)*5}))}onPointerUp(n){var r;Nr.callbacks.pinchend.forEach(s=>s(n,{scale:0})),Nr.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],(r=Nr.instance)===null||r===void 0||r.tryDestroy()}destroy(){this.emitter.off(pt.POINTER_DOWN,this.onPointerDown),this.emitter.off(pt.POINTER_MOVE,this.onPointerMove),this.emitter.off(pt.POINTER_UP,this.onPointerUp),Nr.instance=null}off(n,r){const s=Nr.callbacks[n].indexOf(r);s>-1&&Nr.callbacks[n].splice(s,1),this.tryDestroy()}tryDestroy(){Object.values(Nr.callbacks).every(n=>n.length===0)&&this.destroy()}}Nr.isPinching=!1,Nr.instance=null,Nr.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};const bM=a=>a.map(n=>(0,xn.Z)(n)?n.toLocaleLowerCase():n);class uf{constructor(n){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=r=>{r!=null&&r.key&&(this.recordKey.add(r.key),this.trigger(r))},this.onKeyUp=r=>{r!=null&&r.key&&this.recordKey.delete(r.key)},this.onWheel=r=>{this.triggerExtendKey(pt.WHEEL,r)},this.onDrag=r=>{this.triggerExtendKey(pt.DRAG,r)},this.handlePinch=(r,s)=>{this.triggerExtendKey(pt.PINCH,Object.assign(Object.assign({},r),s))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=n,this.bindEvents()}bind(n,r){n.length!==0&&(n.includes(pt.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new Nr(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(n,r))}unbind(n,r){this.map.forEach((s,l)=>{Rr(l,n)&&(!r||r===s)&&this.map.delete(l)})}unbindAll(){this.map.clear()}match(n){const r=bM(Array.from(this.recordKey)).sort(),s=bM(n).sort();return Rr(r,s)}bindEvents(){var n;const{emitter:r}=this;r.on(pt.KEY_DOWN,this.onKeyDown),r.on(pt.KEY_UP,this.onKeyUp),r.on(pt.WHEEL,this.onWheel),r.on(pt.DRAG,this.onDrag),(n=globalThis.addEventListener)===null||n===void 0||n.call(globalThis,"focus",this.onFocus)}trigger(n){this.map.forEach((r,s)=>{this.match(s)&&r(n)})}triggerExtendKey(n,r){this.map.forEach((s,l)=>{l.includes(n)&&Rr(Array.from(this.recordKey),l.filter(u=>u!==n))&&s(r)})}destroy(){var n,r;this.unbindAll(),this.emitter.off(pt.KEY_DOWN,this.onKeyDown),this.emitter.off(pt.KEY_UP,this.onKeyUp),this.emitter.off(pt.WHEEL,this.onWheel),this.emitter.off(pt.DRAG,this.onDrag),(n=this.pinchHandler)===null||n===void 0||n.off("pinchmove",this.boundHandlePinch),(r=globalThis.removeEventListener)===null||r===void 0||r.call(globalThis,"blur",this.onFocus)}}class hv extends Xa{constructor(n,r){super(n,(0,Ka.Z)({},hv.defaultOptions,r)),this.shortcut=new uf(n.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(n){if(!this.validate(n)||!this.isKeydown()||this.startPoint)return;const{canvas:r,graph:s}=this.context,l=Object.assign({},this.options.style);this.options.style.lineWidth&&(l.lineWidth=+this.options.style.lineWidth/s.getZoom()),this.rectShape=new Pr({id:"g6-brush-select",style:l}),r.appendChild(this.rectShape),this.startPoint=[n.canvas.x,n.canvas.y]}onPointerMove(n){var r;if(!this.startPoint)return;const{immediately:s,mode:l}=this.options;this.endPoint=Ig(n),(r=this.rectShape)===null||r===void 0||r.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),s&&l==="default"&&this.updateElementsStates(mM(this.startPoint,this.endPoint))}onPointerUp(n){if(this.startPoint){if(!this.endPoint){this.clearBrush();return}this.endPoint=Ig(n),this.updateElementsStates(mM(this.startPoint,this.endPoint)),this.clearBrush()}}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){const{graph:n}=this.context,r=Object.values(n.getData()).reduce((s,l)=>Object.assign({},s,l.reduce((u,h)=>{var f;const d=(f=h.states||[])===null||f===void 0?void 0:f.filter(v=>v!==this.options.state);return u[tt(h)]=d,u},{})),{});n.setElementState(r,this.options.animation)}updateElementsStates(n){const{graph:r}=this.context,{enableElements:s,state:l,mode:u,onSelect:h}=this.options,f=this.selector(r,n,s);let d={};switch(u){case"union":f.forEach(v=>{d[v]=[...r.getElementState(v),l]});break;case"diff":f.forEach(v=>{const p=r.getElementState(v);d[v]=p.includes(l)?p.filter(g=>g!==l):[...p,l]});break;case"intersect":f.forEach(v=>{const p=r.getElementState(v);d[v]=p.includes(l)?[l]:[]});break;case"default":default:f.forEach(v=>{d[v]=[l]});break}(0,re.Z)(h)&&(d=h(d)),r.setElementState(d,this.options.animation)}selector(n,r,s){if(!s||s.length===0)return[];const l=[],u=n.getData();if(s.forEach(h=>{u[`${h}s`].forEach(f=>{const d=tt(f);n.getElementVisibility(d)!=="hidden"&&$3(n.getElementPosition(d),r)&&l.push(d)})}),s.includes("edge")){const h=u.edges;h==null||h.forEach(f=>{const{source:d,target:v}=f;l.includes(d)&&l.includes(v)&&l.push(tt(f))})}return l}clearBrush(){var n;(n=this.rectShape)===null||n===void 0||n.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){const{trigger:n}=this.options,r=Array.isArray(n)?n:[n];return this.shortcut.match(r.filter(s=>s!=="drag"))}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}bindEvents(){const{graph:n}=this.context;n.on(pt.POINTER_DOWN,this.onPointerDown),n.on(pt.POINTER_MOVE,this.onPointerMove),n.on(pt.POINTER_UP,this.onPointerUp),n.on(ml.CLICK,this.clearStates)}unbindEvents(){const{graph:n}=this.context;n.off(pt.POINTER_DOWN,this.onPointerDown),n.off(pt.POINTER_MOVE,this.onPointerMove),n.off(pt.POINTER_UP,this.onPointerUp),n.off(ml.CLICK,this.clearStates)}update(n){this.unbindEvents(),this.options=(0,Ka.Z)(this.options,n),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}hv.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};const Ig=a=>[a.canvas.x,a.canvas.y],Sl=.8,Eu=["node","edge","combo"];function wu(a,n,r,s,l=0){s==="TB"&&n(a,l);const u=r(a);if(u)for(const h of u)wu(h,n,r,s,l+1);s==="BT"&&n(a,l)}function K3(a,n,r){const s=[[a,0]];for(;s.length;){const[l,u]=s.shift();n(l,u);const h=r(l);if(h)for(const f of h)s.push([f,u+1])}}function xM(a,n,r,s,l="both"){if(n==="combo"||n==="node")return r2(a,r,s,l);const u=a.getEdgeData(r);if(!u)return[];const h=r2(a,u.source,s-1,l),f=r2(a,u.target,s-1,l);return Array.from(new Set([...h,...f,r]))}function r2(a,n,r,s="both"){const l=new Set,u=new Set,h=new Set;return K3(n,(f,d)=>{d>r||(h.add(f),a.getRelatedEdgesData(f,s).forEach(v=>{const p=tt(v);!u.has(p)&&d<r&&(h.add(p),u.add(p))}))},f=>a.getRelatedEdgesData(f,s).map(d=>d.source===f?d.target:d.source).filter(d=>l.has(d)?!1:(l.add(d),!0))),Array.from(h)}function i2(a){return a.states||[]}var Dg=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class Bg extends Xa{constructor(n,r){super(n,Object.assign({},Bg.defaultOptions,r)),this.onClickSelect=s=>Dg(this,void 0,void 0,function*(){var l,u;this.validate(s)&&(yield this.updateState(s),(u=(l=this.options).onClick)===null||u===void 0||u.call(l,s))}),this.onClickCanvas=s=>Dg(this,void 0,void 0,function*(){var l,u;this.validate(s)&&(yield this.clearState(),(u=(l=this.options).onClick)===null||u===void 0||u.call(l,s))}),this.shortcut=new uf(n.graph),this.bindEvents()}bindEvents(){const{graph:n}=this.context;this.unbindEvents(),Eu.forEach(r=>{n.on(`${r}:${pt.CLICK}`,this.onClickSelect)}),n.on(ml.CLICK,this.onClickCanvas)}get isMultipleSelect(){const{multiple:n,trigger:r}=this.options;return n&&this.shortcut.match(r)}getNeighborIds(n){const{target:r,targetType:s}=n,{graph:l}=this.context,{degree:u}=this.options;return xM(l,s,r.id,typeof u=="function"?u(n):u).filter(h=>h!==r.id)}updateState(n){return Dg(this,void 0,void 0,function*(){const{state:r,unselectedState:s,neighborState:l,animation:u}=this.options;if(!r&&!l&&!s)return;const{target:h}=n,{graph:f}=this.context,d=f.getElementData(h.id),v=i2(d).includes(r)?"unselect":"select",p={},g=this.isMultipleSelect,m=[h.id],b=this.getNeighborIds(n);if(g)if(Object.assign(p,this.getDataStates()),v==="select"){const E=(w,S)=>{w.forEach(M=>{const C=new Set(f.getElementState(M));C.add(S),C.delete(s),p[M]=Array.from(C)})};E(m,r),E(b,l),s&&Object.keys(p).forEach(w=>{const S=p[w];!S.includes(r)&&!S.includes(l)&&!S.includes(s)&&p[w].push(s)})}else{const E=p[h.id];p[h.id]=E.filter(w=>w!==r&&w!==l),E.includes(s)||p[h.id].push(s),b.forEach(w=>{p[w]=p[w].filter(S=>S!==l),p[w].includes(r)||p[w].push(s)})}else if(v==="select"){Object.assign(p,this.getClearStates(!!s));const E=(w,S)=>{w.forEach(M=>{p[M]||(p[M]=f.getElementState(M)),p[M].push(S)})};E(m,r),E(b,l),s&&Object.keys(p).forEach(w=>{!m.includes(w)&&!b.includes(w)&&p[w].push(s)})}else Object.assign(p,this.getClearStates());yield f.setElementState(p,u)})}getDataStates(){const{graph:n}=this.context,{nodes:r,edges:s,combos:l}=n.getData(),u={};return[...r,...s,...l].forEach(h=>{u[tt(h)]=i2(h)}),u}getClearStates(n=!1){const{graph:r}=this.context,{state:s,unselectedState:l,neighborState:u}=this.options,h=new Set([s,l,u]),{nodes:f,edges:d,combos:v}=r.getData(),p={};return[...f,...d,...v].forEach(g=>{const m=i2(g),b=m.filter(E=>!h.has(E));(n||b.length!==m.length)&&(p[tt(g)]=b)}),p}clearState(){return Dg(this,void 0,void 0,function*(){const{graph:n}=this.context;yield n.setElementState(this.getClearStates(),this.options.animation)})}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}unbindEvents(){const{graph:n}=this.context;Eu.forEach(r=>{n.off(`${r}:${pt.CLICK}`,this.onClickSelect)}),n.off(ml.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}}Bg.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};function Ma(a){var n;return!!(!((n=a.style)===null||n===void 0)&&n.collapsed)}var Ca=function(a,n,r){for(var s=0,l=(0,xn.Z)(n)?n.split("."):n;a&&s<l.length;)a=a[l[s++]];return a===void 0||s<l.length?r:a},fv=function(a,n,r){var s=a,l=(0,xn.Z)(n)?n.split("."):n;return l.forEach(function(u,h){h<l.length-1?((0,ai.Z)(s[u])||(s[u]=(0,tn.Z)(l[h+1])?[]:{}),s=s[u]):s[u]=r}),a},q3=function(a){var n=f_(a);return n.charAt(0).toLowerCase()+n.substring(1)},Q3=q3;function dv(a,n){if(!a.startsWith(n))return!1;const r=a[n.length];return r>="A"&&r<="Z"}function EM(a,n){return`${n}${dg(a)}`}function wM(a,n,r=!0){if(!n||!dv(a,n))return a;const s=a.slice(n.length);return r?Q3(s):s}function jr(a,n){const r=Object.entries(a).reduce((s,[l,u])=>(l==="className"||l==="class"||dv(l,n)&&Object.assign(s,{[wM(l,n)]:u}),s),{});if("opacity"in a){const s=EM("opacity",n),l=a.opacity;if(s in a){const u=a[s];Object.assign(r,{opacity:l*u})}else Object.assign(r,{opacity:l})}return r}function a2(a,n){const r=n.length;return Object.keys(a).reduce((s,l)=>{if(l.startsWith(n)){const u=l.slice(r);s[u]=a[l]}return s},{})}function SM(a,n){const r=typeof n=="string"?[n]:n,s={};return Object.keys(a).forEach(l=>{r.find(u=>l.startsWith(u))||(s[l]=a[l])}),s}function XZ(a,n,r){return Object.entries(a).reduce((s,[l,u])=>(dv(l,n)?s[EM(wM(l,n,!1),r)]=u:s[l]=u,s),{})}function Ta(a=0){if(typeof a=="number")return[a,a,a];const[n,r=n,s=n]=a;return[n,r,s]}var J3=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};function _M(a,n){const{datum:r,graph:s}=n;return typeof a=="function"?a.call(s,r):Object.fromEntries(Object.entries(a).map(([l,u])=>typeof u=="function"?[l,u.call(s,r)]:[l,u]))}function li(a,n){const r=(a==null?void 0:a.style)||{},s=(n==null?void 0:n.style)||{};for(const l in r)l in s||(s[l]=r[l]);return Object.assign({},a,n,{style:s})}function tR(a){const{x:n,y:r,z:s,class:l,className:u,transform:h,transformOrigin:f,zIndex:d,visibility:v}=a;return J3(a,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}function eR(a,n){const r=Ta(a);let s={};return n.text&&!n.fontSize&&(s={fontSize:Math.min(...r)*.5}),n.src&&(!n.width||!n.height)&&(s={width:r[0]*.5,height:r[1]*.5}),s}function MM(a){if(a)return typeof a=="string"||typeof a=="function"||Array.isArray(a)?{type:"group",field:n=>n.id,color:a,invert:!1}:a}function nR(a,n){if(!n)return{};const{type:r,color:s,field:l,invert:u}=n,h=d=>{const v=typeof s=="string"?bl("palette",s):s;if(typeof v=="function"){const p={};return d.forEach(([g,m])=>{p[g]=v(u?1-m:m)}),p}else if(Array.isArray(v)){const p=u?[...v].reverse():v,g={};return d.forEach(([m,b])=>{g[m]=p[b%v.length]}),g}return{}},f=(d,v)=>{var p;return typeof d=="string"?(p=v.data)===null||p===void 0?void 0:p[d]:d==null?void 0:d(v)};if(r==="group"){const d=pg(a,m=>{if(!l)return"default";const b=f(l,m);return b?String(b):"default"}),v=Object.keys(d),p=h(v.map((m,b)=>[m,b])),g={};return Object.entries(d).forEach(([m,b])=>{b.forEach(E=>{g[tt(E)]=p[m]})}),g}else if(r==="value"){const[d,v]=a.reduce(([g,m],b)=>{const E=f(l,b);if(typeof E!="number")throw new Error(xl(`Palette field ${l} is not a number`));return[Math.min(g,E),Math.max(m,E)]},[1/0,-1/0]),p=v-d;return h(a.map(g=>[g.id,(f(l,g)-d)/p]))}}function CM(a){const n=typeof a=="string"?bl("palette",a):a;if(typeof n!="function")return n}function TM(a,n){let r=2*a;return typeof n=="string"?r=a*Number(n.replace("%",""))/100:typeof n=="number"&&(r=n),isNaN(r)&&(r=2*a),r}function OM(a,n,r=1,s=!1){const l=s?r:1,u=(a.max[0]-a.min[0])*l;return TM(u,n)}function rR(a,n,r=1){const s=Xn(a[0],a[1])*r;return TM(s,n)}var iR={}.toString,aR=function(a){return iR.call(a).replace(/^\[object /,"").replace(/]$/,"")},sR=aR,oR=Object.prototype,lR=function(a){var n=a&&a.constructor,r=typeof n=="function"&&n.prototype||oR;return a===r},cR=lR,uR=Object.prototype.hasOwnProperty;function hR(a){if((0,le.Z)(a))return!0;if(nv(a))return!a.length;var n=sR(a);if(n==="Map"||n==="Set")return!a.size;if(cR(a))return!Object.keys(a).length;for(var r in a)if(uR.call(a,r))return!1;return!0}var Po=hR;class vv extends Xd{constructor(n){AM(n.style),super(n),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(n,r,s,l,u){var h,f,d,v,p,g,m,b;const E=this.shapeMap[n];if(s===!1){E&&((h=u==null?void 0:u.beforeDestroy)===null||h===void 0||h.call(u,E),l.removeChild(E),delete this.shapeMap[n],(f=u==null?void 0:u.afterDestroy)===null||f===void 0||f.call(u,E));return}const w=typeof r=="string"?bl(rv.SHAPE,r):r;if(!w)throw new Error(xl(`Shape ${r} not found`));if(!E||E.destroyed||!(E instanceof w)){E&&((d=u==null?void 0:u.beforeDestroy)===null||d===void 0||d.call(u,E),E==null||E.destroy(),(v=u==null?void 0:u.afterDestroy)===null||v===void 0||v.call(u,E)),(p=u==null?void 0:u.beforeCreate)===null||p===void 0||p.call(u);const S=new w({className:n,style:s});return l.appendChild(S),this.shapeMap[n]=S,(g=u==null?void 0:u.afterCreate)===null||g===void 0||g.call(u,S),S}return(m=u==null?void 0:u.beforeUpdate)===null||m===void 0||m.call(u,E),T2(E,s),(b=u==null?void 0:u.afterUpdate)===null||b===void 0||b.call(u,E),E}update(n={}){const r=Object.assign({},this.attributes,n);AM(r),uL(this,r),this.render(r,this),this.setVisibility()}bindEvents(){}getGraphicStyle(n){return tR(n)}get compositeShapes(){return[["badges","badge-"],["ports","port-"]]}animate(n,r){if(n.length===0)return null;const s=[];if(n[0].x!==void 0||n[0].y!==void 0||n[0].z!==void 0){const{x:u=0,y:h=0,z:f=0}=this.attributes;n.forEach(d=>{const{x:v=u,y:p=h,z:g=f}=d;Object.assign(d,{transform:g?[["translate3d",v,p,g]]:[["translate",v,p]]})})}const l=super.animate(n,r);if(l&&(s2(this,l),s.push(l)),Array.isArray(n)&&n.length>0){const u=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(n[0]).some(h=>!u.includes(h))){Object.entries(this.shapeMap).forEach(([f,d])=>{const v=`get${dg(f)}Style`,p=this[v];if((0,re.Z)(p)){const g=n.map(b=>p.call(this,Object.assign(Object.assign({},this.attributes),b))),m=d.animate(FE(g),r);m&&(s2(d,m),s.push(m))}});const h=(f,d)=>{if(!Po(f)){const v=`get${dg(d)}Style`,p=this[v];if((0,re.Z)(p)){const g=n.map(m=>p.call(this,Object.assign(Object.assign({},this.attributes),m)));Object.entries(g[0]).map(([m])=>{const b=g.map(w=>w[m]),E=f[m];if(E){const w=E.animate(FE(b),r);w&&(s2(E,w),s.push(w))}})}}};this.compositeShapes.forEach(([f,d])=>{const v=a2(this.shapeMap,d);h(v,f)})}}return BE(s)}getShape(n){return this.shapeMap[n]}setVisibility(){const{visibility:n}=this.attributes;bu(this,n)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}}function s2(a,n){n==null||n.finished.then(()=>{const r=a.activeAnimations.findIndex(s=>s===n);r>-1&&a.activeAnimations.splice(r,1)})}function AM(a){if(!a)return{};if("x"in a||"y"in a||"z"in a){const{x:n=0,y:r=0,z:s,transform:l}=a,u=g_(n,r,s,l);u&&(a.transform=u)}return a}var fR=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class dc extends vv{constructor(n){super(li({style:dc.defaultStyleProps},n))}isTextStyle(n){return dv(n,"label")}isBackgroundStyle(n){return dv(n,"background")}getTextStyle(n){const r=this.getGraphicStyle(n),{padding:s}=r,l=fR(r,["padding"]);return SM(l,"background")}getBackgroundStyle(n){if(n.background===!1)return!1;const r=this.getGraphicStyle(n),{wordWrap:s,wordWrapWidth:l,padding:u}=r,h=jr(r,"background"),{min:[f,d],center:[v,p],halfExtents:[g,m]}=this.shapeMap.text.getGeometryBounds(),[b,E,w,S]=$s(u),M=g*2+S+E,{width:C,height:T}=h;C&&T?Object.assign(h,{x:v-Number(C)/2,y:p-Number(T)/2}):Object.assign(h,{x:f-S,y:d-b,width:s?Math.min(M,l+S+E):M,height:m*2+b+w});const{radius:k}=h;if(typeof k=="string"&&k.endsWith("%")){const O=Number(k.replace("%",""))/100;h.radius=Math.min(+h.width,+h.height)*O}return h}render(n=this.parsedAttributes,r=this){this.upsert("text",yl,this.getTextStyle(n),r),this.upsert("background",Pr,this.getBackgroundStyle(n),r)}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}dc.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};class hf extends vv{constructor(n){super(li({style:hf.defaultStyleProps},n))}getBadgeStyle(n){return this.getGraphicStyle(n)}render(n=this.parsedAttributes,r=this){this.upsert("label",dc,this.getBadgeStyle(n),r)}getGeometryBounds(){const n=this.getShape("label");return(n.getShape("background")||n.getShape("text")).getGeometryBounds()}}hf.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};function dR(a,n=!0){const r=[];return a.forEach((s,l)=>{r.push([l===0?"M":"L",...s])}),n&&r.push(["Z"]),r}const kM={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function vR(a){const n=a.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),r=[];let s="",l={};for(;n.length>0;){let u=n.shift();u in kM?s=u:n.unshift(u),l={type:s},kM[s].forEach(d=>{u=n.shift(),l[d]=u}),s==="M"?s="L":s==="m"&&(s="l");const[h,...f]=Object.values(l);r.push([h,...f.map(Number)])}return r}function pR(a){const n=[];return(typeof a=="string"?vR(a):a).forEach(s=>{const l=s[0];if(l==="Z"){n.push(n[0]);return}if(l!=="A")for(let u=1;u<s.length;u=u+2)n.push([s[u],s[u+1],0]);else{const u=s.length;n.push([s[u-2],s[u-1],0])}}),n}const PM=a=>{if(a.length<2)return[["M",0,0],["L",0,0]];const n=a[0],r=a[1],s=a[a.length-1],l=a[a.length-2];a.unshift(l,s),a.push(n,r);const u=[["M",s[0],s[1]]];for(let h=1;h<a.length-2;h+=1){const[f,d]=a[h-1],[v,p]=a[h],[g,m]=a[h+1],[b,E]=h!==a.length-2?a[h+2]:[g,m],w=v+(g-f)/6,S=p+(m-d)/6,M=g-(b-v)/6,C=m-(E-p)/6;u.push(["C",w,S,M,C,g,m])}return u};function gR(a,n,r,s,l,u,h){const[f,d]=wl(a,n),v={textAlign:n==="left"?"right":n==="right"?"left":"center",textBaseline:n==="top"?"bottom":n==="bottom"?"top":"middle",transform:[["translate",f+r,d+s]]};if(n==="center"||!l)return v;const p=pR(u);if(!p||p.length<=3)return v;const g=p.map((E,w)=>{const S=E,M=p[(w+1)%p.length];return Rr(S,M)?null:[S,M]}).filter(Boolean),m=U3([f,d],g),b=yM([f,d],m);if(b&&m&&(v.transform=[["translate",b[0]+r,b[1]+s]],h)){const E=Math.atan((m[0][1]-m[1][1])/(m[0][0]-m[1][0]));v.transform.push(["rotate",E/Math.PI*180]),v.textAlign="center",(n==="right"||n==="left")&&(E>0?v.textBaseline=n==="right"?"bottom":"top":v.textBaseline=n==="right"?"top":"bottom")}return v}var yR=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class pv extends vv{constructor(n){super(li({style:pv.defaultStyleProps},n))}getLabelStyle(n){if(!n.label||!n.d||n.d.length===0)return!1;const r=jr(this.getGraphicStyle(n),"label"),{maxWidth:s,offsetX:l,offsetY:u,autoRotate:h,placement:f,closeToPath:d}=r,v=yR(r,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),p=this.shapeMap.key,g=p==null?void 0:p.getRenderBounds();return Object.assign(gR(g,f,l,u,d,n.d,h),{wordWrapWidth:OM(g,s)},v)}getKeyStyle(n){return this.getGraphicStyle(n)}render(n,r){this.upsert("key",na,this.getKeyStyle(n),r),this.upsert("label",dc,this.getLabelStyle(n),r)}}pv.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};function mR(a){const n=[],r=s=>{s!=null&&s.children.length&&s.children.forEach(l=>{n.push(l),r(l)})};return r(a),n}function bR(a){const n=[];let r=a.parentNode;for(;r;)n.push(r),r=r.parentNode;return n}class o2 extends vl{constructor(n){super(n),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},ff=this,this.isMutationObserved=!0,this.addEventListener(De.MOUNTED,this.onMounted),this.addEventListener(De.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){const{radius:n,clipPath:r,width:s=0,height:l=0}=this.attributes;if(n&&s&&l){const[u,h]=this.getBounds().min,f={x:u,y:h,radius:n,width:s,height:l};if(r)Object.assign(this.parsedStyle.clipPath.style,f);else{const d=new Pr({style:f});this.style.clipPath=d}}else r&&(this.style.clipPath=null)}}const l2=new WeakMap;let ff=null;const c2=a=>{if(ff&&bR(ff).includes(a)){const n=l2.get(a);n?n.includes(ff)||n.push(ff):l2.set(a,[ff])}},u2=a=>{const n=l2.get(a);n&&n.forEach(r=>r.handleRadius())};class RM extends vv{constructor(n){super(n)}isImage(){const{src:n}=this.attributes;return!!n}getIconStyle(n=this.attributes){const{width:r=0,height:s=0}=n,l=this.getGraphicStyle(n);return this.isImage()?Object.assign({x:-r/2,y:-s/2},l):Object.assign({textBaseline:"middle",textAlign:"center"},l)}render(n=this.attributes,r=this){this.upsert("icon",this.isImage()?o2:yl,this.getIconStyle(n),r)}}class NM extends vv{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(n,r){const s=super.animate(n,r);return s&&(s.onframe=()=>this.onframe(),s.finished.then(()=>this.onframe())),s}}var Fg=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class Ks extends NM{constructor(n){super(li({style:Ks.defaultStyleProps},n)),this.type="node"}getSize(n=this.attributes){const{size:r}=n;return Ta(r)}getKeyStyle(n){const r=this.getGraphicStyle(n);return Object.assign(SM(r,["label","halo","icon","badge","port"]))}getLabelStyle(n){if(n.label===!1||!n.labelText)return!1;const r=jr(this.getGraphicStyle(n),"label"),{placement:s,maxWidth:l,offsetX:u,offsetY:h}=r,f=Fg(r,["placement","maxWidth","offsetX","offsetY"]),d=this.getShape("key").getLocalBounds();return Object.assign(hC(d,s,u,h),{wordWrapWidth:OM(d,l)},f)}getHaloStyle(n){if(n.halo===!1)return!1;const r=this.getKeyStyle(n),{fill:s}=r,l=Fg(r,["fill"]),u=jr(this.getGraphicStyle(n),"halo");return Object.assign(Object.assign(Object.assign({},l),{stroke:s}),u)}getIconStyle(n){if(n.icon===!1||!n.iconText&&!n.iconSrc)return!1;const r=jr(this.getGraphicStyle(n),"icon");return Object.assign(eR(n.size,r),r)}getBadgesStyle(n){var r;const s=a2(this.shapeMap,"badge-"),l={};if(Object.keys(s).forEach(g=>{l[g]=!1}),n.badge===!1||!(!((r=n.badges)===null||r===void 0)&&r.length))return l;const{badges:u=[],badgePalette:h,opacity:f=1}=n,d=Fg(n,["badges","badgePalette","opacity"]),v=CM(h),p=jr(this.getGraphicStyle(d),"badge");return u.forEach((g,m)=>{l[m]=Object.assign(Object.assign({backgroundFill:v?v[m%(v==null?void 0:v.length)]:void 0,opacity:f},p),this.getBadgeStyle(g))}),l}getBadgeStyle(n){const r=this.getShape("key"),{placement:s="top",offsetX:l,offsetY:u}=n,h=Fg(n,["placement","offsetX","offsetY"]),f=hC(r.getLocalBounds(),s,l,u,!0);return Object.assign(Object.assign({},f),h)}getPortsStyle(n){var r;const s=this.getPorts(),l={};if(Object.keys(s).forEach(f=>{l[f]=!1}),n.port===!1||!(!((r=n.ports)===null||r===void 0)&&r.length))return l;const u=jr(this.getGraphicStyle(n),"port"),{ports:h=[]}=n;return h.forEach((f,d)=>{const v=f.key||d,p=Object.assign(Object.assign({},u),f);if(lC(p))l[v]=!1;else{const[g,m]=this.getPortXY(n,f);l[v]=Object.assign({transform:[["translate",g,m]]},p)}}),l}getPortXY(n,r){const{placement:s="left"}=r,l=this.getShape("key");return _2(xR(this.context,l),s)}getPorts(){return a2(this.shapeMap,"port-")}getCenter(){return this.getShape("key").getBounds().center}getIntersectPoint(n,r=!1){const s=this.getShape("key").getBounds();return H3(n,s,r)}drawHaloShape(n,r){const s=this.getHaloStyle(n),l=this.getShape("key");this.upsert("halo",l.constructor,s,r)}drawIconShape(n,r){const s=this.getIconStyle(n);this.upsert("icon",RM,s,r),c2(this)}drawBadgeShapes(n,r){const s=this.getBadgesStyle(n);Object.keys(s).forEach(l=>{const u=s[l];this.upsert(`badge-${l}`,hf,u,r)})}drawPortShapes(n,r){const s=this.getPortsStyle(n);Object.keys(s).forEach(l=>{const u=s[l],h=`port-${l}`;this.upsert(h,ur,u,r)})}drawLabelShape(n,r){const s=this.getLabelStyle(n);this.upsert("label",dc,s,r)}_drawKeyShape(n,r){return this.drawKeyShape(n,r)}render(n=this.parsedAttributes,r=this){this._drawKeyShape(n,r),this.getShape("key")&&(this.drawHaloShape(n,r),this.drawIconShape(n,r),this.drawBadgeShapes(n,r),this.drawLabelShape(n,r),this.drawPortShapes(n,r))}update(n){super.update(n),n&&("x"in n||"y"in n||"z"in n)&&u2(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}Ks.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};function xR(a,n){if(!a)return n.getLocalBounds();const r=a.canvas.getLayer(),s=n.cloneNode();bu(s,"hidden"),r.appendChild(s);const l=s.getLocalBounds();return s.destroy(),l}class Su extends Ks{constructor(n){super(li({style:Su.defaultStyleProps},n))}drawKeyShape(n,r){return this.upsert("key",ur,this.getKeyStyle(n),r)}getKeyStyle(n){const r=super.getKeyStyle(n);return Object.assign(Object.assign({},r),{r:Math.min(...this.getSize(n))/2})}getIconStyle(n){const r=super.getIconStyle(n),{r:s}=this.getShape("key").attributes,l=s*2*Sl;return r?Object.assign({width:l,height:l},r):!1}getIntersectPoint(n,r=!1){const s=this.getShape("key").getBounds();return Lg(n,s,r)}}Su.defaultStyleProps={size:32};class zg extends Ks{constructor(n){super(n)}get parsedAttributes(){return this.attributes}drawKeyShape(n,r){return this.upsert("key",gl,this.getKeyStyle(n),r)}getKeyStyle(n){const r=super.getKeyStyle(n);return Object.assign(Object.assign({},r),{points:this.getPoints(n)})}getIntersectPoint(n,r=!1){var s,l;const{points:u}=this.getShape("key").attributes,h=[+(((s=this.attributes)===null||s===void 0?void 0:s.x)||0),+(((l=this.attributes)===null||l===void 0?void 0:l.y)||0)];return gM(n,h,u,!0,r).point}}class ER extends zg{constructor(n){super(n)}getPoints(n){const[r,s]=this.getSize(n);return cL(r,s)}}var wR=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class Zg extends Su{constructor(n){super(li({style:Zg.defaultStyleProps},n))}parseOuterR(){const{size:n}=this.parsedAttributes;return Math.min(...Ta(n))/2}parseInnerR(){const{innerR:n}=this.parsedAttributes;return(0,xn.Z)(n)?parseInt(n)/100*this.parseOuterR():n}drawDonutShape(n,r){const{donuts:s}=n;if(!(s!=null&&s.length))return;const l=s.map(g=>(0,tn.Z)(g)?{value:g}:g),u=jr(this.getGraphicStyle(n),"donut"),h=CM(n.donutPalette);if(!h)return;const f=l.reduce((g,m)=>{var b;return g+((b=m.value)!==null&&b!==void 0?b:0)},0),d=this.parseOuterR(),v=this.parseInnerR();let p=0;l.forEach((g,m)=>{const{value:b=0,color:E=h[m%h.length]}=g,w=wR(g,["value","color"]),S=(f===0?1/l.length:b/f)*360;this.upsert(`round${m}`,na,Object.assign(Object.assign(Object.assign({},u),{d:MR(d,v,p,p+S),fill:E}),w),r),p+=S})}render(n,r=this){super.render(n,r),this.drawDonutShape(n,r)}}Zg.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};const Wg=(a,n,r,s)=>[a+Math.sin(s)*r,n-Math.cos(s)*r],SR=(a,n,r,s)=>s<=0||r<=s?[["M",a-r,n],["A",r,r,0,1,1,a+r,n],["A",r,r,0,1,1,a-r,n],["Z"]]:[["M",a-r,n],["A",r,r,0,1,1,a+r,n],["A",r,r,0,1,1,a-r,n],["Z"],["M",a+s,n],["A",s,s,0,1,0,a-s,n],["A",s,s,0,1,0,a+s,n],["Z"]],_R=(a,n,r,s,l,u)=>{const[h,f]=[l/360*2*Math.PI,u/360*2*Math.PI],d=[Wg(a,n,s,h),Wg(a,n,r,h),Wg(a,n,r,f),Wg(a,n,s,f)],v=f-h>Math.PI?1:0;return[["M",d[0][0],d[0][1]],["L",d[1][0],d[1][1]],["A",r,r,0,v,1,d[2][0],d[2][1]],["L",d[3][0],d[3][1]],["A",s,s,0,v,0,d[0][0],d[0][1]],["Z"]]},MR=(a=0,n=0,r,s)=>{const[l,u]=[0,0];return Math.abs(r-s)%360<1e-6?SR(l,u,a,n):_R(l,u,a,n,r,s)};class Gg extends Ks{constructor(n){super(li({style:Gg.defaultStyleProps},n))}drawKeyShape(n,r){return this.upsert("key",vu,this.getKeyStyle(n),r)}getKeyStyle(n){const r=super.getKeyStyle(n),[s,l]=this.getSize(n);return Object.assign(Object.assign({},r),{rx:s/2,ry:l/2})}getIconStyle(n){const r=super.getIconStyle(n),{rx:s,ry:l}=this.getShape("key").attributes,u=Math.min(+s,+l)*2*Sl;return r?Object.assign({width:u,height:u},r):!1}getIntersectPoint(n,r=!1){const s=this.getShape("key").getBounds();return Lg(n,s,r)}}Gg.defaultStyleProps={size:[45,35]};class CR extends zg{constructor(n){super(n)}getOuterR(n){return n.outerR||Math.min(...this.getSize(n))/2}getPoints(n){return hL(this.getOuterR(n))}getIconStyle(n){const r=super.getIconStyle(n),s=this.getOuterR(n)*Sl;return r?Object.assign({width:s,height:s},r):!1}}function TR(a,n){var r=n.cx,s=r===void 0?0:r,l=n.cy,u=l===void 0?0:l,h=n.r;a.arc(s,u,h,0,Math.PI*2,!1)}function OR(a,n){var r=n.cx,s=r===void 0?0:r,l=n.cy,u=l===void 0?0:l,h=n.rx,f=n.ry;if(a.ellipse)a.ellipse(s,u,h,f,0,0,Math.PI*2,!1);else{var d=h>f?h:f,v=h>f?1:h/f,p=h>f?f/h:1;a.save(),a.scale(v,p),a.arc(s,u,d,0,Math.PI*2)}}function AR(a,n){var r=n.x1,s=n.y1,l=n.x2,u=n.y2,h=n.markerStart,f=n.markerEnd,d=n.markerStartOffset,v=n.markerEndOffset,p=0,g=0,m=0,b=0,E=0,w,S;h&&nn(h)&&d&&(w=l-r,S=u-s,E=Math.atan2(S,w),p=Math.cos(E)*(d||0),g=Math.sin(E)*(d||0)),f&&nn(f)&&v&&(w=r-l,S=s-u,E=Math.atan2(S,w),m=Math.cos(E)*(v||0),b=Math.sin(E)*(v||0)),a.moveTo(r+p,s+g),a.lineTo(l+m,u+b)}function kR(a,n){var r=n.markerStart,s=n.markerEnd,l=n.markerStartOffset,u=n.markerEndOffset,h=n.d,f=h.absolutePath,d=h.segments,v=0,p=0,g=0,m=0,b=0,E,w;if(r&&nn(r)&&l){var S=r.parentNode.getStartTangent(),M=(0,V.Z)(S,2),C=M[0],T=M[1];E=C[0]-T[0],w=C[1]-T[1],b=Math.atan2(w,E),v=Math.cos(b)*(l||0),p=Math.sin(b)*(l||0)}if(s&&nn(s)&&u){var k=s.parentNode.getEndTangent(),O=(0,V.Z)(k,2),A=O[0],R=O[1];E=A[0]-R[0],w=A[1]-R[1],b=Math.atan2(w,E),g=Math.cos(b)*(u||0),m=Math.sin(b)*(u||0)}for(var L=0;L<f.length;L++){var D=f[L],z=D[0],W=f[L+1],G=L===0&&(v!==0||p!==0),Y=(L===f.length-1||W&&(W[0]==="M"||W[0]==="Z"))&&g!==0&&m!==0,q=G?[v,p]:[0,0],rt=(0,V.Z)(q,2),yt=rt[0],st=rt[1],mt=Y?[g,m]:[0,0],at=(0,V.Z)(mt,2),Et=at[0],It=at[1];switch(z){case"M":a.moveTo(D[1]+yt,D[2]+st);break;case"L":a.lineTo(D[1]+Et,D[2]+It);break;case"Q":a.quadraticCurveTo(D[1],D[2],D[3]+Et,D[4]+It);break;case"C":a.bezierCurveTo(D[1],D[2],D[3],D[4],D[5]+Et,D[6]+It);break;case"A":{var Gt=d[L].arcParams,Jt=Gt.cx,Re=Gt.cy,te=Gt.rx,we=Gt.ry,cn=Gt.startAngle,$e=Gt.endAngle,qe=Gt.xRotation,Xe=Gt.sweepFlag;if(a.ellipse)a.ellipse(Jt,Re,te,we,qe,cn,$e,!!(1-Xe));else{var Ir=te>we?te:we,Ze=te>we?1:te/we,is=te>we?we/te:1;a.translate(Jt,Re),a.rotate(qe),a.scale(Ze,is),a.arc(0,0,Ir,cn,$e,!!(1-Xe)),a.scale(1/Ze,1/is),a.rotate(-qe),a.translate(-Jt,-Re)}Y&&a.lineTo(D[6]+g,D[7]+m);break}case"Z":a.closePath();break}}}function PR(a,n){var r=n.markerStart,s=n.markerEnd,l=n.markerStartOffset,u=n.markerEndOffset,h=n.points.points,f=h.length,d=h[0][0],v=h[0][1],p=h[f-1][0],g=h[f-1][1],m=0,b=0,E=0,w=0,S=0,M,C;r&&nn(r)&&l&&(M=h[1][0]-h[0][0],C=h[1][1]-h[0][1],S=Math.atan2(C,M),m=Math.cos(S)*(l||0),b=Math.sin(S)*(l||0)),s&&nn(s)&&u&&(M=h[f-1][0]-h[0][0],C=h[f-1][1]-h[0][1],S=Math.atan2(C,M),E=Math.cos(S)*(u||0),w=Math.sin(S)*(u||0)),a.moveTo(d+(m||E),v+(b||w));for(var T=1;T<f-1;T++){var k=h[T];a.lineTo(k[0],k[1])}a.lineTo(p,g)}function RR(a,n){var r=n.markerStart,s=n.markerEnd,l=n.markerStartOffset,u=n.markerEndOffset,h=n.points.points,f=h.length,d=h[0][0],v=h[0][1],p=h[f-1][0],g=h[f-1][1],m=0,b=0,E=0,w=0,S=0,M,C;r&&nn(r)&&l&&(M=h[1][0]-h[0][0],C=h[1][1]-h[0][1],S=Math.atan2(C,M),m=Math.cos(S)*(l||0),b=Math.sin(S)*(l||0)),s&&nn(s)&&u&&(M=h[f-2][0]-h[f-1][0],C=h[f-2][1]-h[f-1][1],S=Math.atan2(C,M),E=Math.cos(S)*(u||0),w=Math.sin(S)*(u||0)),a.moveTo(d+m,v+b);for(var T=1;T<f-1;T++){var k=h[T];a.lineTo(k[0],k[1])}a.lineTo(p+E,g+w)}function NR(a,n){var r=n.x,s=r===void 0?0:r,l=n.y,u=l===void 0?0:l,h=n.radius,f=n.width,d=n.height,v=f,p=d,g=h&&h.some(function(O){return O!==0});if(!g)a.rect(s,u,v,p);else{var m=f>0?1:-1,b=d>0?1:-1,E=m+b===0,w=h.map(function(O){return Le(O,0,Math.min(Math.abs(v)/2,Math.abs(p)/2))}),S=(0,V.Z)(w,4),M=S[0],C=S[1],T=S[2],k=S[3];a.moveTo(m*M+s,u),a.lineTo(v-m*C+s,u),C!==0&&a.arc(v-m*C+s,b*C+u,C,-b*Math.PI/2,m>0?0:Math.PI,E),a.lineTo(v+s,p-b*T+u),T!==0&&a.arc(v-m*T+s,p-b*T+u,T,m>0?0:Math.PI,b>0?Math.PI/2:1.5*Math.PI,E),a.lineTo(m*k+s,p+u),k!==0&&a.arc(m*k+s,p-b*k+u,k,b>0?Math.PI/2:-Math.PI/2,m>0?Math.PI:0,E),a.lineTo(s,b*M+u),M!==0&&a.arc(m*M+s,b*M+u,M,m>0?Math.PI:0,b>0?Math.PI*1.5:Math.PI/2,E)}}var LR=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.name="canvas-path-generator",r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"init",value:function(){var s,l=(s={},(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(s,lt.CIRCLE,TR),lt.ELLIPSE,OR),lt.RECT,NR),lt.LINE,AR),lt.POLYLINE,RR),lt.POLYGON,PR),lt.PATH,kR),lt.TEXT,void 0),lt.GROUP,void 0),lt.IMAGE,void 0),(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(s,lt.HTML,void 0),lt.MESH,void 0),lt.FRAGMENT,void 0));this.context.pathGeneratorFactory=l}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(ps);var IR=Xt(),DR=Xt(),BR=Xt(),FR=Qe(),LM=function(){function a(){var n=this;(0,H.Z)(this,a),this.isHit=function(r,s,l,u){var h=n.context.pointInPathPickerFactory[r.nodeName];if(h){var f=Di(FR,l),d=Ve(DR,Ut(BR,s[0],s[1],0),f);if(h(r,new Gr(d[0],d[1]),u,n.isPointInPath,n.context,n.runtime))return!0}return!1},this.isPointInPath=function(r,s){var l=n.runtime.offscreenCanvasCreator.getOrCreateContext(n.context.config.offscreenCanvas),u=n.context.pathGeneratorFactory[r.nodeName];return u&&(l.beginPath(),u(l,r.parsedStyle),l.closePath()),l.isPointInPath(s.x,s.y)}}return(0,j.Z)(a,[{key:"apply",value:function(r,s){var l,u=this,h=r.renderingService,f=r.renderingContext;this.context=r,this.runtime=s;var d=(l=f.root)===null||l===void 0?void 0:l.ownerDocument;h.hooks.pick.tapPromise(a.tag,function(){var v=(0,Or.Z)((0,si.Z)().mark(function p(g){return(0,si.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",u.pick(d,g));case 1:case"end":return b.stop()}},p)}));return function(p){return v.apply(this,arguments)}}()),h.hooks.pickSync.tap(a.tag,function(v){return u.pick(d,v)})}},{key:"pick",value:function(r,s){var l=s.topmost,u=s.position,h=u.x,f=u.y,d=Ut(IR,h,f,0),v=r.elementsFromBBox(d[0],d[1],d[0],d[1]),p=[],g=(0,el.Z)(v),m;try{for(g.s();!(m=g.n()).done;){var b=m.value,E=b.getWorldTransform(),w=this.isHit(b,d,E,!1);if(w){var S=Ap(b);if(S){var M=S.parsedStyle.clipPath,C=this.isHit(M,d,M.getWorldTransform(),!0);if(C){if(l)return s.picked=[b],s;p.push(b)}}else{if(l)return s.picked=[b],s;p.push(b)}}}}catch(T){g.e(T)}finally{g.f()}return s.picked=p,s}}])}();LM.tag="CanvasPicker";function zR(a,n,r){var s=a.parsedStyle,l=s.cx,u=l===void 0?0:l,h=s.cy,f=h===void 0?0:h,d=s.r,v=s.fill,p=s.stroke,g=s.lineWidth,m=g===void 0?1:g,b=s.increasedLineWidthForHitTesting,E=b===void 0?0:b,w=s.pointerEvents,S=w===void 0?"auto":w,M=(m+E)/2,C=Xr(u,f,n.x,n.y),T=_o(S,v,p),k=(0,V.Z)(T,2),O=k[0],A=k[1];return O&&A||r?C<=d+M:O?C<=d:A?C>=d-M&&C<=d+M:!1}function jg(a,n,r,s){return a/(r*r)+n/(s*s)}function ZR(a,n,r){var s=a.parsedStyle,l=s.cx,u=l===void 0?0:l,h=s.cy,f=h===void 0?0:h,d=s.rx,v=s.ry,p=s.fill,g=s.stroke,m=s.lineWidth,b=m===void 0?1:m,E=s.increasedLineWidthForHitTesting,w=E===void 0?0:E,S=s.pointerEvents,M=S===void 0?"auto":S,C=n.x,T=n.y,k=_o(M,p,g),O=(0,V.Z)(k,2),A=O[0],R=O[1],L=(b+w)/2,D=(C-u)*(C-u),z=(T-f)*(T-f);return A&&R||r?jg(D,z,d+L,v+L)<=1:A?jg(D,z,d,v)<=1:R?jg(D,z,d-L,v-L)>=1&&jg(D,z,d+L,v+L)<=1:!1}function _u(a,n,r,s,l,u){return l>=a&&l<=a+r&&u>=n&&u<=n+s}function WR(a,n,r,s,l,u,h){var f=l/2;return _u(a-f,n-f,r,l,u,h)||_u(a+r-f,n-f,l,s,u,h)||_u(a+f,n+s-f,r,l,u,h)||_u(a-f,n+f,l,s,u,h)}function $g(a,n,r,s,l,u,h,f){var d=(Math.atan2(f-n,h-a)+Math.PI*2)%(Math.PI*2),v={x:a+r*Math.cos(d),y:n+r*Math.sin(d)};return Xr(v.x,v.y,h,f)<=u/2}function vc(a,n,r,s,l,u,h){var f=Math.min(a,r),d=Math.max(a,r),v=Math.min(n,s),p=Math.max(n,s),g=l/2;return u>=f-g&&u<=d+g&&h>=v-g&&h<=p+g?Ul(a,n,r,s,u,h)<=l/2:!1}function IM(a,n,r,s,l){var u=a.length;if(u<2)return!1;for(var h=0;h<u-1;h++){var f=a[h][0],d=a[h][1],v=a[h+1][0],p=a[h+1][1];if(vc(f,d,v,p,n,r,s))return!0}if(l){var g=a[0],m=a[u-1];if(vc(g[0],g[1],m[0],m[1],n,r,s))return!0}return!1}var GR=1e-6;function h2(a){return Math.abs(a)<GR?0:a<0?-1:1}function jR(a,n,r){return(r[0]-a[0])*(n[1]-a[1])===(n[0]-a[0])*(r[1]-a[1])&&Math.min(a[0],n[0])<=r[0]&&r[0]<=Math.max(a[0],n[0])&&Math.min(a[1],n[1])<=r[1]&&r[1]<=Math.max(a[1],n[1])}function DM(a,n,r){var s=!1,l=a.length;if(l<=2)return!1;for(var u=0;u<l;u++){var h=a[u],f=a[(u+1)%l];if(jR(h,f,[n,r]))return!0;h2(h[1]-r)>0!=h2(f[1]-r)>0&&h2(n-(r-h[1])*(h[0]-f[0])/(h[1]-f[1])-h[0])<0&&(s=!s)}return s}function BM(a,n,r){for(var s=!1,l=0;l<a.length;l++){var u=a[l];if(s=DM(u,n,r),s)break}return s}function $R(a,n,r){var s=a.parsedStyle,l=s.x1,u=s.y1,h=s.x2,f=s.y2,d=s.lineWidth,v=d===void 0?1:d,p=s.increasedLineWidthForHitTesting,g=p===void 0?0:p,m=s.pointerEvents,b=m===void 0?"auto":m,E=s.fill,w=s.stroke,S=_o(b,E,w),M=(0,V.Z)(S,2),C=M[1];return!C&&!r||!v?!1:vc(l,u,h,f,v+g,n.x,n.y)}function HR(a,n,r,s,l){for(var u=!1,h=n/2,f=0;f<a.length;f++){var d=a[f],v=d.currentPoint,p=d.params,g=d.prePoint,m=d.box;if(!(m&&!_u(m.x-h,m.y-h,m.width+n,m.height+n,r,s)))switch(d.command){case"L":case"Z":if(u=vc(g[0],g[1],v[0],v[1],n,r,s),u)return!0;break;case"Q":var b=hb(g[0],g[1],p[1],p[2],p[3],p[4],r,s);if(u=b<=n/2,u)return!0;break;case"C":var E=T0(g[0],g[1],p[1],p[2],p[3],p[4],p[5],p[6],r,s,l);if(u=E<=n/2,u)return!0;break;case"A":d.cubicParams||(d.cubicParams=rd(g[0],g[1],p[1],p[2],p[3],p[4],p[5],p[6],p[7],void 0));for(var w=d.cubicParams,S=g,M=0;M<w.length;M+=6){var C=T0(S[0],S[1],w[M],w[M+1],w[M+2],w[M+3],w[M+4],w[M+5],r,s,l);if(S=[w[M+4],w[M+5]],u=C<=n/2,u)return!0}break}}return u}function VR(a,n,r,s,l,u){var h=a.parsedStyle,f=h.lineWidth,d=f===void 0?1:f,v=h.increasedLineWidthForHitTesting,p=v===void 0?0:v,g=h.stroke,m=h.fill,b=h.d,E=h.pointerEvents,w=E===void 0?"auto":E,S=b.segments,M=b.hasArc,C=b.polylines,T=b.polygons,k=_o(w,(T==null?void 0:T.length)&&m,g),O=(0,V.Z)(k,2),A=O[0],R=O[1],L=Nd(a),D=!1;return A||r?(M?D=s(a,n):D=BM(T,n.x,n.y)||BM(C,n.x,n.y),D):((R||r)&&(D=HR(S,d+p,n.x,n.y,L)),D)}function UR(a,n,r){var s=a.parsedStyle,l=s.stroke,u=s.fill,h=s.lineWidth,f=h===void 0?1:h,d=s.increasedLineWidthForHitTesting,v=d===void 0?0:d,p=s.points,g=s.pointerEvents,m=g===void 0?"auto":g,b=_o(m,u,l),E=(0,V.Z)(b,2),w=E[0],S=E[1],M=!1;return(S||r)&&(M=IM(p.points,f+v,n.x,n.y,!0)),!M&&(w||r)&&(M=DM(p.points,n.x,n.y)),M}function YR(a,n,r){var s=a.parsedStyle,l=s.lineWidth,u=l===void 0?1:l,h=s.increasedLineWidthForHitTesting,f=h===void 0?0:h,d=s.points,v=s.pointerEvents,p=v===void 0?"auto":v,g=s.fill,m=s.stroke,b=_o(p,g,m),E=(0,V.Z)(b,2),w=E[1];return!w&&!r||!u?!1:IM(d.points,u+f,n.x,n.y,!1)}function XR(a,n,r,s,l){var u=a.parsedStyle,h=u.radius,f=u.fill,d=u.stroke,v=u.lineWidth,p=v===void 0?1:v,g=u.increasedLineWidthForHitTesting,m=g===void 0?0:g,b=u.x,E=b===void 0?0:b,w=u.y,S=w===void 0?0:w,M=u.width,C=u.height,T=u.pointerEvents,k=T===void 0?"auto":T,O=_o(k,f,d),A=(0,V.Z)(O,2),R=A[0],L=A[1],D=h&&h.some(function(Y){return Y!==0}),z=p+m;if(D){var G=!1;return(L||r)&&(G=KR(E,S,M,C,h.map(function(Y){return Le(Y,0,Math.min(Math.abs(M)/2,Math.abs(C)/2))}),z,n.x,n.y)),!G&&(R||r)&&(G=s(a,n)),G}else{var W=z/2;if(R&&L||r)return _u(E-W,S-W,M+W,C+W,n.x,n.y);if(R)return _u(E,S,M,C,n.x,n.y);if(L)return WR(E,S,M,C,z,n.x,n.y)}return!1}function KR(a,n,r,s,l,u,h,f){var d=(0,V.Z)(l,4),v=d[0],p=d[1],g=d[2],m=d[3];return vc(a+v,n,a+r-p,n,u,h,f)||vc(a+r,n+p,a+r,n+s-g,u,h,f)||vc(a+r-g,n+s,a+m,n+s,u,h,f)||vc(a,n+s-m,a,n+v,u,h,f)||$g(a+r-p,n+p,p,1.5*Math.PI,2*Math.PI,u,h,f)||$g(a+r-g,n+s-g,g,0,.5*Math.PI,u,h,f)||$g(a+m,n+s-m,m,.5*Math.PI,Math.PI,u,h,f)||$g(a+v,n+v,v,Math.PI,1.5*Math.PI,u,h,f)}function qR(a,n,r,s,l,u){var h=a.parsedStyle,f=h.pointerEvents,d=f===void 0?"auto":f,v=h.x,p=v===void 0?0:v,g=h.y,m=g===void 0?0:g,b=h.width,E=h.height;if(d==="non-transparent-pixel"){var w=l.config.offscreenCanvas,S=u.offscreenCanvasCreator.getOrCreateCanvas(w),M=u.offscreenCanvasCreator.getOrCreateContext(w,{willReadFrequently:!0});S.width=b,S.height=E,l.defaultStyleRendererFactory[lt.IMAGE].render(M,(0,gt.Z)((0,gt.Z)({},a.parsedStyle),{},{x:0,y:0}),a,void 0,void 0,void 0);var C=M.getImageData(n.x-p,n.y-m,1,1).data;return C.every(function(T){return T!==0})}return!0}function QR(a,n,r,s){var l=a.getGeometryBounds();return n.x>=l.min[0]&&n.y>=l.min[1]&&n.x<=l.max[0]&&n.y<=l.max[1]}var JR=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.name="canvas-picker",r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"init",value:function(){var s,l=(s={},(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(s,lt.CIRCLE,zR),lt.ELLIPSE,ZR),lt.RECT,XR),lt.LINE,$R),lt.POLYLINE,YR),lt.POLYGON,UR),lt.PATH,VR),lt.TEXT,QR),lt.GROUP,null),lt.IMAGE,qR),(0,Zt.Z)((0,Zt.Z)(s,lt.HTML,null),lt.MESH,null));this.context.pointInPathPickerFactory=l,this.addRenderingPlugin(new LM)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(ps);function Ro(a,n){if(!{}.hasOwnProperty.call(a,n))throw new TypeError("attempted to use private field on non-instance");return a}var tN=0;function eN(a){return"__private_"+tN+++"_"+a}var nN=function(){function a(){(0,H.Z)(this,a),this.cacheStore=new Map}return(0,j.Z)(a,[{key:"onRefAdded",value:function(r){}},{key:"has",value:function(r){return this.cacheStore.has(r)}},{key:"put",value:function(r,s,l){return this.cacheStore.has(r)?!1:(this.cacheStore.set(r,{value:s,counter:new Set([l.entity])}),this.onRefAdded(l),!0)}},{key:"get",value:function(r,s){var l=this.cacheStore.get(r);return l?(l.counter.has(s.entity)||(l.counter.add(s.entity),this.onRefAdded(s)),l.value):null}},{key:"update",value:function(r,s,l){var u=this.cacheStore.get(r);return u?(u.value=(0,gt.Z)((0,gt.Z)({},u.value),s),u.counter.has(l.entity)||(u.counter.add(l.entity),this.onRefAdded(l)),!0):!1}},{key:"release",value:function(r,s){var l=this.cacheStore.get(r);return l?(l.counter.delete(s.entity),l.counter.size<=0&&this.cacheStore.delete(r),!0):!1}},{key:"releaseRef",value:function(r){var s=this;Array.from(this.cacheStore.keys()).forEach(function(l){s.release(l,r)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),f2=[],d2=[],v2=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,null,[{key:"stop",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.api;a.rafId&&(r.cancelAnimationFrame(a.rafId),a.rafId=null)}},{key:"executeTask",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.api;f2.length<=0&&d2.length<=0||(d2.forEach(function(s){return s()}),d2=f2.splice(0,a.TASK_NUM_PER_FRAME),a.rafId=r.requestAnimationFrame(function(){a.executeTask(r)}))}},{key:"sliceImage",value:function(r,s,l,u){for(var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:a.api,d=r.naturalWidth||r.width,v=r.naturalHeight||r.height,p=s-h,g=l-h,m=Math.ceil(d/p),b=Math.ceil(v/g),E={tileSize:[s,l],gridSize:[b,m],tiles:Array(b).fill(null).map(function(){return Array(m).fill(null)})},w=function(C){for(var T=function(A){f2.push(function(){var R=A*p,L=C*g,D=[Math.min(s,d-R),Math.min(l,v-L)],z=D[0],W=D[1],G=f.createCanvas();G.width=s,G.height=l;var Y=G.getContext("2d");Y.drawImage(r,R,L,z,W,0,0,z,W),E.tiles[C][A]={x:R,y:L,tileX:A,tileY:C,data:G},u()})},k=0;k<m;k++)T(k)},S=0;S<b;S++)w(S);return a.stop(),a.executeTask(),E}}])}();v2.TASK_NUM_PER_FRAME=10;var qa=new nN;qa.onRefAdded=function(n){var r=this;n.addEventListener(De.DESTROY,function(){r.releaseRef(n)},{once:!0})};var p2=function(){function a(n,r){(0,H.Z)(this,a),this.gradientCache={},this.patternCache={},this.context=n,this.runtime=r}return(0,j.Z)(a,[{key:"getImageSync",value:function(r,s,l){var u=(0,xn.Z)(r)?r:r.src;if(qa.has(u)){var h=qa.get(u,s);if(h.img.complete)return l==null||l(h),h}return this.getOrCreateImage(r,s).then(function(f){l==null||l(f)}).catch(function(f){console.error(f)}),null}},{key:"getOrCreateImage",value:function(r,s){var l=this,u=(0,xn.Z)(r)?r:r.src;if(!(0,xn.Z)(r)&&!qa.has(u)){var h={img:r,size:[r.naturalWidth||r.width,r.naturalHeight||r.height],tileSize:Hg(r)};qa.put(u,h,s)}if(qa.has(u)){var f=qa.get(u,s);return f.img.complete?Promise.resolve(f):new Promise(function(d,v){f.img.addEventListener("load",function(){f.size=[f.img.naturalWidth||f.img.width,f.img.naturalHeight||f.img.height],f.tileSize=Hg(f.img),d(f)}),f.img.addEventListener("error",function(p){v(p)})})}return new Promise(function(d,v){var p=l.context.config.createImage();if(p){var g={img:p,size:[0,0],tileSize:Hg(p)};qa.put(u,g,s),p.onload=function(){g.size=[p.naturalWidth||p.width,p.naturalHeight||p.height],g.tileSize=Hg(g.img),d(g)},p.onerror=function(m){v(m)},p.crossOrigin="Anonymous",p.src=u}})}},{key:"createDownSampledImage",value:function(){var n=(0,Or.Z)((0,si.Z)().mark(function s(l,u){var h,f,d,v,p,g,m,b,E,w,S,M,C,T;return(0,si.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.getOrCreateImage(l,u);case 2:if(h=O.sent,typeof h.downSamplingRate=="undefined"){O.next=5;break}return O.abrupt("return",h);case 5:if(f=this.context.config.enableLargeImageOptimization,d=typeof f=="boolean"?{}:f,v=d.maxDownSampledImageSize,p=v===void 0?2048:v,g=d.downSamplingRateThreshold,m=g===void 0?.5:g,b=this.runtime.globalThis.createImageBitmap,E=(0,V.Z)(h.size,2),w=E[0],S=E[1],M=h.img,C=Math.min((p+p)/(w+S),Math.max(.01,Math.min(m,.5))),T=(0,gt.Z)((0,gt.Z)({},h),{},{downSamplingRate:C}),qa.update(h.img.src,T,u),!b){O.next=25;break}return O.prev=14,O.next=17,b(h.img,{resizeWidth:w*C,resizeHeight:S*C});case 17:M=O.sent,O.next=23;break;case 20:O.prev=20,O.t0=O.catch(14),C=1;case 23:O.next=26;break;case 25:C=1;case 26:return T=(0,gt.Z)((0,gt.Z)({},this.getImageSync(l,u)),{},{downSampled:M,downSamplingRate:C}),qa.update(h.img.src,T,u),O.abrupt("return",T);case 29:case"end":return O.stop()}},s,this,[[14,20]])}));function r(s,l){return n.apply(this,arguments)}return r}()},{key:"createImageTiles",value:function(){var n=(0,Or.Z)((0,si.Z)().mark(function s(l,u,h,f){var d,v,p,g,m;return(0,si.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.getOrCreateImage(l,f);case 2:return d=E.sent,v=f.ownerDocument.defaultView,p=v.requestAnimationFrame,g=v.cancelAnimationFrame,v2.api={requestAnimationFrame:p,cancelAnimationFrame:g,createCanvas:function(){return Jh.createCanvas()}},m=(0,gt.Z)((0,gt.Z)({},d),v2.sliceImage(d.img,d.tileSize[0],d.tileSize[0],h)),qa.update(d.img.src,m,f),E.abrupt("return",m);case 8:case"end":return E.stop()}},s,this)}));function r(s,l,u,h){return n.apply(this,arguments)}return r}()},{key:"releaseImage",value:function(r,s){qa.release((0,xn.Z)(r)?r:r.src,s)}},{key:"releaseImageRef",value:function(r){qa.releaseRef(r)}},{key:"getOrCreatePatternSync",value:function(r,s,l,u,h,f,d){var v=this.generatePatternKey(s);if(v&&this.patternCache[v])return this.patternCache[v];var p=s.image,g=s.repetition,m=s.transform,b,E=!1;if((0,xn.Z)(p)){var w=this.getImageSync(p,r,d);b=w==null?void 0:w.img}else u?(b=u,E=!0):b=p;var S=b&&l.createPattern(b,g);if(S){var M;m?M=Ip(Ep(m),new Fn({})):M=ni(Qe()),E&&Dn(M,M,[1/h,1/h,1]),S.setTransform({a:M[0],b:M[1],c:M[4],d:M[5],e:M[12]+f[0],f:M[13]+f[1]})}return v&&S&&(this.patternCache[v]=S),S}},{key:"getOrCreateGradient",value:function(r,s){var l=this.generateGradientKey(r),u=r.type,h=r.steps,f=r.min,d=r.width,v=r.height,p=r.angle,g=r.cx,m=r.cy,b=r.size;if(this.gradientCache[l])return this.gradientCache[l];var E=null;if(u===wo.LinearGradient){var w=Tb(f,d,v,p),S=w.x1,M=w.y1,C=w.x2,T=w.y2;E=s.createLinearGradient(S,M,C,T)}else if(u===wo.RadialGradient){var k=Ob(f,d,v,g,m,b),O=k.x,A=k.y,R=k.r;E=s.createRadialGradient(O,A,0,O,A,R)}return E&&(h.forEach(function(L){var D=L.offset,z=L.color;if(D.unit===Bt.kPercentage){var W;(W=E)===null||W===void 0||W.addColorStop(D.value/100,z.toString())}}),this.gradientCache[l]=E),this.gradientCache[l]}},{key:"generateGradientKey",value:function(r){var s=r.type,l=r.min,u=r.width,h=r.height,f=r.steps,d=r.angle,v=r.cx,p=r.cy,g=r.size;return"gradient-".concat(s,"-").concat((d==null?void 0:d.toString())||0,"-").concat((v==null?void 0:v.toString())||0,"-").concat((p==null?void 0:p.toString())||0,"-").concat((g==null?void 0:g.toString())||0,"-").concat(l[0],"-").concat(l[1],"-").concat(u,"-").concat(h,"-").concat(f.map(function(m){var b=m.offset,E=m.color;return"".concat(b).concat(E)}).join("-"))}},{key:"generatePatternKey",value:function(r){var s=r.image,l=r.repetition;if((0,xn.Z)(s))return"pattern-".concat(s,"-").concat(l);if(s.nodeName==="rect")return"pattern-".concat(s.entity,"-").concat(l)}}])}();p2.isSupportTile=!!Jh.createCanvas();function Hg(a){if(!a.complete)return[0,0];var n=a.naturalWidth||a.width,r=a.naturalHeight||a.height,s=256;return[256,512].forEach(function(l){var u=Math.ceil(r/l),h=Math.ceil(n/l);u*h<1e3&&(s=l)}),[s,s]}var FM=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"apply",value:function(r){var s=r.renderingService,l=r.renderingContext,u=r.imagePool,h=l.root.ownerDocument.defaultView,f=function(g,m,b){var E=g.parsedStyle,w=E.width,S=E.height;w&&!S?g.setAttribute("height",b/m*w):!w&&S&&g.setAttribute("width",m/b*S)},d=function(g){var m=g.target,b=m.nodeName,E=m.attributes;if(b===lt.IMAGE){var w=E.src,S=E.keepAspectRatio;u.getImageSync(w,m,function(M){var C=M.img,T=C.width,k=C.height;S&&f(m,T,k),m.renderable.dirty=!0,s.dirtify()})}},v=function(g){var m=g.target,b=g.attrName,E=g.prevValue,w=g.newValue;m.nodeName!==lt.IMAGE||b!=="src"||(E!==w&&u.releaseImage(E,m),(0,xn.Z)(w)&&u.getOrCreateImage(w,m).then(function(S){var M=S.img,C=M.width,T=M.height;m.attributes.keepAspectRatio&&f(m,C,T),m.renderable.dirty=!0,s.dirtify()}).catch(function(){}))};s.hooks.init.tap(a.tag,function(){h.addEventListener(De.MOUNTED,d),h.addEventListener(De.ATTR_MODIFIED,v)}),s.hooks.destroy.tap(a.tag,function(){h.removeEventListener(De.MOUNTED,d),h.removeEventListener(De.ATTR_MODIFIED,v)})}}])}();FM.tag="LoadImage";var rN=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.name="image-loader",r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"init",value:function(s){this.context.imagePool=new p2(this.context,s),this.addRenderingPlugin(new FM)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(ps);var Lr=eN("renderState"),zM=function(){function a(n){(0,H.Z)(this,a),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,Lr,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Qe(),this.dprMatrix=Qe(),this.tmpMat4=Qe(),this.vec3a=Xt(),this.vec3b=Xt(),this.vec3c=Xt(),this.vec3d=Xt(),this.canvasRendererPluginOptions=n}return(0,j.Z)(a,[{key:"apply",value:function(r,s){var l=this;this.context=r;var u=this.context,h=u.config,f=u.camera,d=u.renderingService,v=u.renderingContext,p=u.rBushRoot,g=u.pathGeneratorFactory,m=h.renderer.getConfig().enableRenderingOptimization;h.renderer.getConfig().enableDirtyCheck=!1,h.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=p,this.pathGeneratorFactory=g;var b=r.contextService,E=v.root.ownerDocument.defaultView,w=function(T){var k=T.target,O=k.rBushNode;O.aabb&&l.removedRBushNodeAABBs.push(O.aabb)},S=function(T){var k=T.target,O=k.rBushNode;O.aabb&&l.removedRBushNodeAABBs.push(O.aabb)};d.hooks.init.tap(a.tag,function(){E.addEventListener(De.UNMOUNTED,w),E.addEventListener(De.CULLED,S);var C=b.getDPR(),T=h.width,k=h.height,O=b.getContext();l.clearRect(O,0,0,T*C,k*C,h.background)}),d.hooks.destroy.tap(a.tag,function(){E.removeEventListener(De.UNMOUNTED,w),E.removeEventListener(De.CULLED,S),l.renderQueue=[],l.removedRBushNodeAABBs=[],Ro(l,Lr)[Lr]={restoreStack:[],prevObject:null,currentContext:null}}),d.hooks.beginFrame.tap(a.tag,function(){var C,T=b.getContext(),k=b.getDPR(),O=h.width,A=h.height,R=l.canvasRendererPluginOptions,L=R.dirtyObjectNumThreshold,D=R.dirtyObjectRatioThreshold,z=d.getStats(),W=z.total,G=z.rendered,Y=G/W;l.clearFullScreen=l.clearFullScreenLastFrame||!((C=E.context.renderingPlugins[1])!==null&&C!==void 0&&C.isFirstTimeRenderingFinished)||d.disableDirtyRectangleRendering()||G>L&&Y>D,T&&(typeof T.resetTransform=="function"?T.resetTransform():T.setTransform(1,0,0,1,0,0),l.clearFullScreen&&l.clearRect(T,0,0,O*k,A*k,h.background))});var M=function(T,k){for(var O=[T];O.length>0;){var A,R=O.pop();R.isVisible()&&!R.isCulled()&&(m?l.renderDisplayObjectOptimized(R,k,l.context,Ro(l,Lr)[Lr],s):l.renderDisplayObject(R,k,l.context,Ro(l,Lr)[Lr],s));for(var L=((A=R.sortable)===null||A===void 0||(A=A.sorted)===null||A===void 0?void 0:A.length)>0?R.sortable.sorted:R.childNodes,D=L.length-1;D>=0;D--)O.push(L[D])}};d.hooks.endFrame.tap(a.tag,function(){if(v.root.childNodes.length===0){l.clearFullScreenLastFrame=!0;return}m=h.renderer.getConfig().enableRenderingOptimization,Ro(l,Lr)[Lr]={restoreStack:[],prevObject:null,currentContext:Ro(l,Lr)[Lr].currentContext},Ro(l,Lr)[Lr].currentContext.clear(),l.clearFullScreenLastFrame=!1;var C=b.getContext(),T=b.getDPR();if(us(l.dprMatrix,[T,T,1]),qt(l.vpMatrix,l.dprMatrix,f.getOrthoMatrix()),l.clearFullScreen)m?(C.save(),M(v.root,C),C.restore()):M(v.root,C),l.removedRBushNodeAABBs=[];else{var k=l.safeMergeAABB.apply(l,[l.mergeDirtyAABBs(l.renderQueue)].concat((0,J.Z)(l.removedRBushNodeAABBs.map(function(te){var we=te.minX,cn=te.minY,$e=te.maxX,qe=te.maxY,Xe=new en;return Xe.setMinMax([we,cn,0],[$e,qe,0]),Xe}))));if(l.removedRBushNodeAABBs=[],en.isEmpty(k)){l.renderQueue=[];return}var O=l.convertAABB2Rect(k),A=O.x,R=O.y,L=O.width,D=O.height,z=Ve(l.vec3a,[A,R,0],l.vpMatrix),W=Ve(l.vec3b,[A+L,R,0],l.vpMatrix),G=Ve(l.vec3c,[A,R+D,0],l.vpMatrix),Y=Ve(l.vec3d,[A+L,R+D,0],l.vpMatrix),q=Math.min(z[0],W[0],Y[0],G[0]),rt=Math.min(z[1],W[1],Y[1],G[1]),yt=Math.max(z[0],W[0],Y[0],G[0]),st=Math.max(z[1],W[1],Y[1],G[1]),mt=Math.floor(q),at=Math.floor(rt),Et=Math.ceil(yt-q),It=Math.ceil(st-rt);C.save(),l.clearRect(C,mt,at,Et,It,h.background),C.beginPath(),C.rect(mt,at,Et,It),C.clip(),C.setTransform(l.vpMatrix[0],l.vpMatrix[1],l.vpMatrix[4],l.vpMatrix[5],l.vpMatrix[12],l.vpMatrix[13]);var Gt=h.renderer.getConfig(),Jt=Gt.enableDirtyRectangleRenderingDebug;Jt&&E.dispatchEvent(new xr(ra.DIRTY_RECTANGLE,{dirtyRect:{x:mt,y:at,width:Et,height:It}}));var Re=l.searchDirtyObjects(k);Re.sort(function(te,we){return te.sortable.renderOrder-we.sortable.renderOrder}).forEach(function(te){te&&te.isVisible()&&!te.isCulled()&&l.renderDisplayObject(te,C,l.context,Ro(l,Lr)[Lr],s)}),C.restore(),l.renderQueue.forEach(function(te){l.saveDirtyAABB(te)}),l.renderQueue=[]}Ro(l,Lr)[Lr].restoreStack.forEach(function(){C.restore()}),Ro(l,Lr)[Lr].restoreStack=[]}),d.hooks.render.tap(a.tag,function(C){l.clearFullScreen||l.renderQueue.push(C)})}},{key:"clearRect",value:function(r,s,l,u,h,f){r.clearRect(s,l,u,h),f&&(r.fillStyle=f,r.fillRect(s,l,u,h))}},{key:"renderDisplayObjectOptimized",value:function(r,s,l,u,h){var f=r.nodeName,d=!1,v=!1,p=this.context.styleRendererFactory[f],g=this.pathGeneratorFactory[f],m=r.parsedStyle.clipPath;if(m){d=!u.prevObject||!Ue(m.getWorldTransform(),u.prevObject.getWorldTransform()),d&&(this.applyWorldTransform(s,m),u.prevObject=null);var b=this.pathGeneratorFactory[m.nodeName];b&&(s.save(),v=!0,s.beginPath(),b(s,m.parsedStyle),s.closePath(),s.clip())}if(p){d=!u.prevObject||!Ue(r.getWorldTransform(),u.prevObject.getWorldTransform()),d&&this.applyWorldTransform(s,r);var E=!u.prevObject;if(!E){var w=u.prevObject.nodeName;f===lt.TEXT?E=w!==lt.TEXT:f===lt.IMAGE?E=w!==lt.IMAGE:E=w===lt.TEXT||w===lt.IMAGE}p.applyStyleToContext(s,r,E,u),u.prevObject=r}g&&(s.beginPath(),g(s,r.parsedStyle),f!==lt.LINE&&f!==lt.PATH&&f!==lt.POLYLINE&&s.closePath()),p&&p.drawToContext(s,r,Ro(this,Lr)[Lr],this,h),v&&s.restore(),r.renderable.dirty=!1}},{key:"renderDisplayObject",value:function(r,s,l,u,h){var f=r.nodeName,d=u.restoreStack[u.restoreStack.length-1];d&&!(r.compareDocumentPosition(d)&Yn.DOCUMENT_POSITION_CONTAINS)&&(s.restore(),u.restoreStack.pop());var v=this.context.styleRendererFactory[f],p=this.pathGeneratorFactory[f],g=r.parsedStyle.clipPath;if(g){this.applyWorldTransform(s,g);var m=this.pathGeneratorFactory[g.nodeName];m&&(s.save(),u.restoreStack.push(r),s.beginPath(),m(s,g.parsedStyle),s.closePath(),s.clip())}v&&(this.applyWorldTransform(s,r),s.save(),this.applyAttributesToContext(s,r)),p&&(s.beginPath(),p(s,r.parsedStyle),f!==lt.LINE&&f!==lt.PATH&&f!==lt.POLYLINE&&s.closePath()),v&&(v.render(s,r.parsedStyle,r,l,this,h),s.restore()),r.renderable.dirty=!1}},{key:"applyAttributesToContext",value:function(r,s){var l=s.parsedStyle,u=l.stroke,h=l.fill,f=l.opacity,d=l.lineDash,v=l.lineDashOffset;d&&r.setLineDash(d),(0,le.Z)(v)||(r.lineDashOffset=v),(0,le.Z)(f)||(r.globalAlpha*=f),!(0,le.Z)(u)&&!Array.isArray(u)&&!u.isNone&&(r.strokeStyle=s.attributes.stroke),!(0,le.Z)(h)&&!Array.isArray(h)&&!h.isNone&&(r.fillStyle=s.attributes.fill)}},{key:"convertAABB2Rect",value:function(r){var s=r.getMin(),l=r.getMax(),u=Math.floor(s[0]),h=Math.floor(s[1]),f=Math.ceil(l[0]),d=Math.ceil(l[1]),v=f-u,p=d-h;return{x:u,y:h,width:v,height:p}}},{key:"mergeDirtyAABBs",value:function(r){var s=new en;return r.forEach(function(l){var u=l.getRenderBounds();s.add(u);var h=l.renderable.dirtyRenderBounds;h&&s.add(h)}),s}},{key:"searchDirtyObjects",value:function(r){var s=r.getMin(),l=(0,V.Z)(s,2),u=l[0],h=l[1],f=r.getMax(),d=(0,V.Z)(f,2),v=d[0],p=d[1],g=this.rBush.search({minX:u,minY:h,maxX:v,maxY:p});return g.map(function(m){var b=m.displayObject;return b})}},{key:"saveDirtyAABB",value:function(r){var s=r.renderable;s.dirtyRenderBounds||(s.dirtyRenderBounds=new en);var l=r.getRenderBounds();l&&s.dirtyRenderBounds.update(l.center,l.halfExtents)}},{key:"applyWorldTransform",value:function(r,s,l){l?(Na(this.tmpMat4,s.getLocalTransform()),qt(this.tmpMat4,l,this.tmpMat4),qt(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Na(this.tmpMat4,s.getWorldTransform()),qt(this.tmpMat4,this.vpMatrix,this.tmpMat4)),r.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var r=new en,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return l.forEach(function(h){r.add(h)}),r}}])}();zM.tag="CanvasRenderer";function Vg(a,n,r,s,l,u,h){var f,d;if(a.image.nodeName==="rect"){var v=a.image.parsedStyle,p=v.width,g=v.height;d=s.contextService.getDPR();var m=s.config.offscreenCanvas;f=u.offscreenCanvasCreator.getOrCreateCanvas(m),f.width=p*d,f.height=g*d;var b=u.offscreenCanvasCreator.getOrCreateContext(m),E={restoreStack:[],prevObject:null,currentContext:new Map};a.image.forEach(function(S){l.renderDisplayObject(S,b,s,E,u)}),E.restoreStack.forEach(function(){b.restore()})}var w=h.getOrCreatePatternSync(n,a,r,f,d,n.getGeometryBounds().min,function(){n.renderable.dirty=!0,s.renderingService.dirtify()});return w}function Ug(a,n,r,s){var l;if(a.type===wo.LinearGradient||a.type===wo.RadialGradient){var u=n.getGeometryBounds(),h=u&&u.halfExtents[0]*2||1,f=u&&u.halfExtents[1]*2||1,d=u&&u.min||[0,0];l=s.getOrCreateGradient((0,gt.Z)((0,gt.Z)({type:a.type},a.value),{},{min:d,width:h,height:f}),r)}return l}var Yg=["shadowBlur","shadowOffsetX","shadowOffsetY"],ZM=["lineCap","lineJoin","miterLimit"],$r={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},WM={};function gr(a,n,r,s){var l=s.has(n)?s.get(n):$r[n];return l!==r&&(n==="lineDash"?a.setLineDash(r):a[n]=r,s.set(n,r)),l}var iN=function(){function a(n){(0,H.Z)(this,a),this.imagePool=n}return(0,j.Z)(a,[{key:"applyAttributesToContext",value:function(r,s){}},{key:"render",value:function(r,s,l,u,h,f){}},{key:"applyCommonStyleToContext",value:function(r,s,l,u){var h=l?WM:u.prevObject.parsedStyle,f=s.parsedStyle;(l||f.opacity!==h.opacity)&&gr(r,"globalAlpha",(0,le.Z)(f.opacity)?$r.globalAlpha:f.opacity,u.currentContext),(l||f.blend!==h.blend)&&gr(r,"globalCompositeOperation",(0,le.Z)(f.blend)?$r.globalCompositeOperation:f.blend,u.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(r,s,l,u){var h=l?WM:u.prevObject.parsedStyle,f=s.parsedStyle,d=f.lineWidth,v=d===void 0?$r.lineWidth:d,p=f.fill&&!f.fill.isNone,g=f.stroke&&!f.stroke.isNone&&v>0;if(g){if(l||s.attributes.stroke!==u.prevObject.attributes.stroke){var m=!(0,le.Z)(f.stroke)&&!Array.isArray(f.stroke)&&!f.stroke.isNone?s.attributes.stroke:$r.strokeStyle;gr(r,"strokeStyle",m,u.currentContext)}(l||f.lineWidth!==h.lineWidth)&&gr(r,"lineWidth",(0,le.Z)(f.lineWidth)?$r.lineWidth:f.lineWidth,u.currentContext),(l||f.lineDash!==h.lineDash)&&gr(r,"lineDash",f.lineDash||$r.lineDash,u.currentContext),(l||f.lineDashOffset!==h.lineDashOffset)&&gr(r,"lineDashOffset",(0,le.Z)(f.lineDashOffset)?$r.lineDashOffset:f.lineDashOffset,u.currentContext);for(var b=0;b<ZM.length;b++){var E=ZM[b];(l||f[E]!==h[E])&&gr(r,E,(0,le.Z)(f[E])?$r[E]:f[E],u.currentContext)}}if(p&&(l||s.attributes.fill!==u.prevObject.attributes.fill)){var w=!(0,le.Z)(f.fill)&&!Array.isArray(f.fill)&&!f.fill.isNone?s.attributes.fill:$r.fillStyle;gr(r,"fillStyle",w,u.currentContext)}}},{key:"applyStyleToContext",value:function(r,s,l,u){var h=s.nodeName;this.applyCommonStyleToContext(r,s,l,u),h===lt.IMAGE||this.applyStrokeFillStyleToContext(r,s,l,u)}},{key:"applyShadowAndFilterStyleToContext",value:function(r,s,l,u){var h=s.parsedStyle;if(l){gr(r,"shadowColor",h.shadowColor.toString(),u.currentContext);for(var f=0;f<Yg.length;f++){var d=Yg[f];gr(r,d,h[d]||$r[d],u.currentContext)}}h.filter&&h.filter.length&&gr(r,"filter",s.attributes.filter,u.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(r,s,l,u){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s){gr(r,"shadowColor",$r.shadowColor,u.currentContext);for(var f=0;f<Yg.length;f++){var d=Yg[f];gr(r,d,$r[d],u.currentContext)}}if(l)if(s&&h){var v=r.filter;!(0,le.Z)(v)&&v.indexOf("drop-shadow")>-1&&gr(r,"filter",v.replace(/drop-shadow\([^)]*\)/,"").trim()||$r.filter,u.currentContext)}else gr(r,"filter",$r.filter,u.currentContext)}},{key:"fillToContext",value:function(r,s,l,u,h){var f=this,d=s.parsedStyle,v=d.fill,p=d.fillRule,g=null;if(Array.isArray(v)&&v.length>0)v.forEach(function(b){var E=gr(r,"fillStyle",Ug(b,s,r,f.imagePool),l.currentContext);g=g!=null?g:E,p?r.fill(p):r.fill()});else{if(cl(v)){var m=Vg(v,s,r,s.ownerDocument.defaultView.context,u,h,this.imagePool);m&&(r.fillStyle=m,g=!0)}p?r.fill(p):r.fill()}g!==null&&gr(r,"fillStyle",g,l.currentContext)}},{key:"strokeToContext",value:function(r,s,l,u,h){var f=this,d=s.parsedStyle.stroke,v=null;if(Array.isArray(d)&&d.length>0)d.forEach(function(m){var b=gr(r,"strokeStyle",Ug(m,s,r,f.imagePool),l.currentContext);v=v!=null?v:b,r.stroke()});else{if(cl(d)){var p=Vg(d,s,r,s.ownerDocument.defaultView.context,u,h,this.imagePool);if(p){var g=gr(r,"strokeStyle",p,l.currentContext);v=v!=null?v:g}}r.stroke()}v!==null&&gr(r,"strokeStyle",v,l.currentContext)}},{key:"drawToContext",value:function(r,s,l,u,h){var f,d=s.nodeName,v=s.parsedStyle,p=v.opacity,g=p===void 0?$r.globalAlpha:p,m=v.fillOpacity,b=m===void 0?$r.fillOpacity:m,E=v.strokeOpacity,w=E===void 0?$r.strokeOpacity:E,S=v.lineWidth,M=S===void 0?$r.lineWidth:S,C=v.fill&&!v.fill.isNone,T=v.stroke&&!v.stroke.isNone&&M>0;if(!(!C&&!T)){var k=!(0,le.Z)(v.shadowColor)&&v.shadowBlur>0,O=v.shadowType==="inner",A=((f=v.fill)===null||f===void 0?void 0:f.alpha)===0,R=!!(v.filter&&v.filter.length),L=k&&T&&(d===lt.PATH||d===lt.LINE||d===lt.POLYLINE||A||O),D=null;if(C){L||this.applyShadowAndFilterStyleToContext(r,s,k,l);var z=g*b;D=gr(r,"globalAlpha",z,l.currentContext),this.fillToContext(r,s,l,u,h),L||this.clearShadowAndFilterStyleForContext(r,k,R,l)}if(T){var W=!1,G=g*w,Y=gr(r,"globalAlpha",G,l.currentContext);if(D=C?D:Y,L&&(this.applyShadowAndFilterStyleToContext(r,s,k,l),W=!0,O)){var q=r.globalCompositeOperation;r.globalCompositeOperation="source-atop",this.strokeToContext(r,s,l,u,h),r.globalCompositeOperation=q,this.clearShadowAndFilterStyleForContext(r,k,R,l,!0)}this.strokeToContext(r,s,l,u,h),W&&this.clearShadowAndFilterStyleForContext(r,k,R,l)}D!==null&&gr(r,"globalAlpha",D,l.currentContext)}}}])}(),g2=function(a){function n(){return(0,H.Z)(this,n),(0,$.Z)(this,n,arguments)}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"render",value:function(s,l,u,h,f,d){var v=l.fill,p=l.fillRule,g=l.opacity,m=g===void 0?1:g,b=l.fillOpacity,E=b===void 0?1:b,w=l.stroke,S=l.strokeOpacity,M=S===void 0?1:S,C=l.lineWidth,T=C===void 0?1:C,k=l.lineCap,O=l.lineJoin,A=l.shadowType,R=l.shadowColor,L=l.shadowBlur,D=l.filter,z=l.miterLimit,W=v&&!v.isNone,G=w&&!w.isNone&&T>0,Y=(v==null?void 0:v.alpha)===0,q=!!(D&&D.length),rt=!(0,le.Z)(R)&&L>0,yt=u.nodeName,st=A==="inner",mt=G&&rt&&(yt===lt.PATH||yt===lt.LINE||yt===lt.POLYLINE||Y||st);W&&(s.globalAlpha=m*E,mt||Xg(u,s,rt),GM(s,u,v,p,h,f,d,this.imagePool),mt||this.clearShadowAndFilter(s,q,rt)),G&&(s.globalAlpha=m*M,s.lineWidth=T,(0,le.Z)(z)||(s.miterLimit=z),(0,le.Z)(k)||(s.lineCap=k),(0,le.Z)(O)||(s.lineJoin=O),mt&&(st&&(s.globalCompositeOperation="source-atop"),Xg(u,s,!0),st&&(y2(s,u,w,h,f,d,this.imagePool),s.globalCompositeOperation=$r.globalCompositeOperation,this.clearShadowAndFilter(s,q,!0))),y2(s,u,w,h,f,d,this.imagePool))}},{key:"clearShadowAndFilter",value:function(s,l,u){if(u&&(s.shadowColor="transparent",s.shadowBlur=0),l){var h=s.filter;!(0,le.Z)(h)&&h.indexOf("drop-shadow")>-1&&(s.filter=h.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(iN);function Xg(a,n,r){var s=a.parsedStyle,l=s.filter,u=s.shadowColor,h=s.shadowBlur,f=s.shadowOffsetX,d=s.shadowOffsetY;l&&l.length&&(n.filter=a.style.filter),r&&(n.shadowColor=u.toString(),n.shadowBlur=h||0,n.shadowOffsetX=f||0,n.shadowOffsetY=d||0)}function GM(a,n,r,s,l,u,h,f){var d=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(r)?r.forEach(function(v){a.fillStyle=Ug(v,n,a,f),d||(s?a.fill(s):a.fill())}):(cl(r)&&(a.fillStyle=Vg(r,n,a,l,u,h,f)),d||(s?a.fill(s):a.fill()))}function y2(a,n,r,s,l,u,h){var f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(r)?r.forEach(function(d){a.strokeStyle=Ug(d,n,a,h),f||a.stroke()}):(cl(r)&&(a.strokeStyle=Vg(r,n,a,s,l,u,h)),f||a.stroke())}function aN(a,n){var r=(0,V.Z)(a,4),s=r[0],l=r[1],u=r[2],h=r[3],f=(0,V.Z)(n,4),d=f[0],v=f[1],p=f[2],g=f[3],m=Math.max(s,d),b=Math.max(l,v),E=Math.min(s+u,d+p),w=Math.min(l+h,v+g);return E<=m||w<=b?null:[m,b,E-m,w-b]}function sN(a,n){var r=Ve(Xt(),[a[0],a[1],0],n),s=Ve(Xt(),[a[0]+a[2],a[1],0],n),l=Ve(Xt(),[a[0],a[1]+a[3],0],n),u=Ve(Xt(),[a[0]+a[2],a[1]+a[3],0],n);return[Math.min(r[0],s[0],l[0],u[0]),Math.min(r[1],s[1],l[1],u[1]),Math.max(r[0],s[0],l[0],u[0])-Math.min(r[0],s[0],l[0],u[0]),Math.max(r[1],s[1],l[1],u[1])-Math.min(r[1],s[1],l[1],u[1])]}var oN=function(a){function n(){return(0,H.Z)(this,n),(0,$.Z)(this,n,arguments)}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"renderDownSampled",value:function(s,l,u,h){var f=h.src,d=h.imageCache;if(!d.downSampled){this.imagePool.createDownSampledImage(f,u).then(function(){u.ownerDocument&&(u.renderable.dirty=!0,u.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(v){console.error(v)});return}s.drawImage(d.downSampled,Math.floor(h.drawRect[0]),Math.floor(h.drawRect[1]),Math.ceil(h.drawRect[2]),Math.ceil(h.drawRect[3]))}},{key:"renderTile",value:function(s,l,u,h){var f=h.src,d=h.imageCache,v=h.imageRect,p=h.drawRect,g=d.size,m=s.getTransform(),b=m.a,E=m.b,w=m.c,S=m.d,M=m.e,C=m.f;if(s.resetTransform(),!(d!=null&&d.gridSize)){this.imagePool.createImageTiles(f,[],function(){u.ownerDocument&&(u.renderable.dirty=!0,u.ownerDocument.defaultView.context.renderingService.dirtify())},u).catch(function(rt){console.error(rt)});return}for(var T=[g[0]/v[2],g[1]/v[3]],k=[d.tileSize[0]/T[0],d.tileSize[1]/T[1]],O=[Math.floor((p[0]-v[0])/k[0]),Math.ceil((p[0]+p[2]-v[0])/k[0])],A=O[0],R=O[1],L=[Math.floor((p[1]-v[1])/k[1]),Math.ceil((p[1]+p[3]-v[1])/k[1])],D=L[0],z=L[1],W=D;W<=z;W++)for(var G=A;G<=R;G++){var Y=d.tiles[W][G];if(Y){var q=[Math.floor(v[0]+Y.tileX*k[0]),Math.floor(v[1]+Y.tileY*k[1]),Math.ceil(k[0]),Math.ceil(k[1])];s.drawImage(Y.data,q[0],q[1],q[2],q[3])}}s.setTransform(b,E,w,S,M,C)}},{key:"render",value:function(s,l,u){var h=l.x,f=h===void 0?0:h,d=l.y,v=d===void 0?0:d,p=l.width,g=l.height,m=l.src,b=l.shadowColor,E=l.shadowBlur,w=this.imagePool.getImageSync(m,u),S=w==null?void 0:w.img,M=p,C=g;if(S){M||(M=S.width),C||(C=S.height);var T=!(0,le.Z)(b)&&E>0;Xg(u,s,T);try{var k=u.ownerDocument.defaultView.getContextService().getDomElement(),O=k.width,A=k.height,R=s.getTransform(),L=R.a,D=R.b,z=R.c,W=R.d,G=R.e,Y=R.f,q=jo(L,z,0,0,D,W,0,0,0,0,1,0,G,Y,0,1),rt=sN([f,v,M,C],q),yt=aN([0,0,O,A],rt);if(!yt)return;if(!u.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){n.renderFull(s,l,u,{image:S,drawRect:[f,v,M,C]});return}var st=rt[2]/w.size[0];if(st<(w.downSamplingRate||.5)){this.renderDownSampled(s,l,u,{src:m,imageCache:w,drawRect:[f,v,M,C]});return}if(!p2.isSupportTile){n.renderFull(s,l,u,{image:S,drawRect:[f,v,M,C]});return}this.renderTile(s,l,u,{src:m,imageCache:w,imageRect:rt,drawRect:yt})}catch(mt){}}}},{key:"drawToContext",value:function(s,l,u,h,f){this.render(s,l.parsedStyle,l)}}],[{key:"renderFull",value:function(s,l,u,h){s.drawImage(h.image,Math.floor(h.drawRect[0]),Math.floor(h.drawRect[1]),Math.ceil(h.drawRect[2]),Math.ceil(h.drawRect[3]))}}])}(g2),lN=function(a){function n(){return(0,H.Z)(this,n),(0,$.Z)(this,n,arguments)}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"render",value:function(s,l,u,h,f,d){u.getBounds();var v=l.lineWidth,p=v===void 0?1:v,g=l.textAlign,m=g===void 0?"start":g,b=l.textBaseline,E=b===void 0?"alphabetic":b,w=l.lineJoin,S=w===void 0?"miter":w,M=l.miterLimit,C=M===void 0?10:M,T=l.letterSpacing,k=T===void 0?0:T,O=l.stroke,A=l.fill,R=l.fillRule,L=l.fillOpacity,D=L===void 0?1:L,z=l.strokeOpacity,W=z===void 0?1:z,G=l.opacity,Y=G===void 0?1:G,q=l.metrics,rt=l.x,yt=rt===void 0?0:rt,st=l.y,mt=st===void 0?0:st,at=l.dx,Et=l.dy,It=l.shadowColor,Gt=l.shadowBlur,Jt=q.font,Re=q.lines,te=q.height,we=q.lineHeight,cn=q.lineMetrics;s.font=Jt,s.lineWidth=p,s.textAlign=m==="middle"?"center":m;var $e=E;$e==="alphabetic"&&($e="bottom"),s.lineJoin=S,(0,le.Z)(C)||(s.miterLimit=C);var qe=mt;E==="middle"?qe+=-te/2-we/2:E==="bottom"||E==="alphabetic"||E==="ideographic"?qe+=-te:(E==="top"||E==="hanging")&&(qe+=-we);var Xe=yt+(at||0);qe+=Et||0,Re.length===1&&($e==="bottom"?($e="middle",qe-=.5*te):$e==="top"&&($e="middle",qe+=.5*te)),s.textBaseline=$e;var Ir=!(0,le.Z)(It)&&Gt>0;Xg(u,s,Ir);for(var Ze=0;Ze<Re.length;Ze++){var is=p/2+Xe;qe+=we,!(0,le.Z)(O)&&!O.isNone&&p&&this.drawLetterSpacing(s,u,Re[Ze],cn[Ze],m,is,qe,k,A,R,D,O,W,Y,!0,h,f,d),(0,le.Z)(A)||this.drawLetterSpacing(s,u,Re[Ze],cn[Ze],m,is,qe,k,A,R,D,O,W,Y,!1,h,f,d)}}},{key:"drawLetterSpacing",value:function(s,l,u,h,f,d,v,p,g,m,b,E,w,S,M,C,T,k){if(p===0){M?this.strokeText(s,l,u,d,v,E,w,C,T,k):this.fillText(s,l,u,d,v,g,m,b,S,C,T,k);return}var O=s.textAlign;s.textAlign="left";var A=d;f==="center"||f==="middle"?A=d-h.width/2:(f==="right"||f==="end")&&(A=d-h.width);for(var R=Array.from(u),L=s.measureText(u).width,D=0,z=0;z<R.length;++z){var W=R[z];M?this.strokeText(s,l,W,A,v,E,w,C,T,k):this.fillText(s,l,W,A,v,g,m,b,S,C,T,k),D=s.measureText(u.substring(z+1)).width,A+=L-D+p,L=D}s.textAlign=O}},{key:"fillText",value:function(s,l,u,h,f,d,v,p,g,m,b,E){GM(s,l,d,v,m,b,E,this.imagePool,!0);var w,S=!(0,le.Z)(p)&&p!==1;S&&(w=s.globalAlpha,s.globalAlpha=p*g),s.fillText(u,h,f),S&&(s.globalAlpha=w)}},{key:"strokeText",value:function(s,l,u,h,f,d,v,p,g,m){y2(s,l,d,p,g,m,this.imagePool,!0);var b,E=!(0,le.Z)(v)&&v!==1;E&&(b=s.globalAlpha,s.globalAlpha=v),s.strokeText(u,h,f),E&&(s.globalAlpha=b)}},{key:"drawToContext",value:function(s,l,u,h,f){this.render(s,l.parsedStyle,l,l.ownerDocument.defaultView.context,h,f)}}])}(g2),cN=function(a){function n(){var r,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,H.Z)(this,n),r=(0,$.Z)(this,n),r.name="canvas-renderer",r.options=s,r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"init",value:function(){var s,l=(0,gt.Z)({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),u=this.context.imagePool,h=new g2(u),f=(s={},(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(s,lt.CIRCLE,h),lt.ELLIPSE,h),lt.RECT,h),lt.IMAGE,new oN(u)),lt.TEXT,new lN(u)),lt.LINE,h),lt.POLYLINE,h),lt.POLYGON,h),lt.PATH,h),lt.GROUP,void 0),(0,Zt.Z)((0,Zt.Z)((0,Zt.Z)(s,lt.HTML,void 0),lt.MESH,void 0),lt.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=f,this.context.styleRendererFactory=f,this.addRenderingPlugin(new zM(l))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(ps);var jM=function(){function a(){(0,H.Z)(this,a)}return(0,j.Z)(a,[{key:"apply",value:function(r,s){var l=this,u=r.renderingService,h=r.renderingContext,f=r.config;this.context=r;var d=h.root.ownerDocument.defaultView,v=function(L){u.hooks.pointerMove.call(L)},p=function(L){u.hooks.pointerUp.call(L)},g=function(L){u.hooks.pointerDown.call(L)},m=function(L){u.hooks.pointerOver.call(L)},b=function(L){u.hooks.pointerOut.call(L)},E=function(L){u.hooks.pointerCancel.call(L)},w=function(L){u.hooks.pointerWheel.call(L)},S=function(L){u.hooks.click.call(L)},M=function(L){s.globalThis.document.addEventListener("pointermove",v,!0),L.addEventListener("pointerdown",g,!0),L.addEventListener("pointerleave",b,!0),L.addEventListener("pointerover",m,!0),s.globalThis.addEventListener("pointerup",p,!0),s.globalThis.addEventListener("pointercancel",E,!0)},C=function(L){L.addEventListener("touchstart",g,!0),L.addEventListener("touchend",p,!0),L.addEventListener("touchmove",v,!0),L.addEventListener("touchcancel",E,!0)},T=function(L){s.globalThis.document.addEventListener("mousemove",v,!0),L.addEventListener("mousedown",g,!0),L.addEventListener("mouseout",b,!0),L.addEventListener("mouseover",m,!0),s.globalThis.addEventListener("mouseup",p,!0)},k=function(L){s.globalThis.document.removeEventListener("pointermove",v,!0),L.removeEventListener("pointerdown",g,!0),L.removeEventListener("pointerleave",b,!0),L.removeEventListener("pointerover",m,!0),s.globalThis.removeEventListener("pointerup",p,!0),s.globalThis.removeEventListener("pointercancel",E,!0)},O=function(L){L.removeEventListener("touchstart",g,!0),L.removeEventListener("touchend",p,!0),L.removeEventListener("touchmove",v,!0),L.removeEventListener("touchcancel",E,!0)},A=function(L){s.globalThis.document.removeEventListener("mousemove",v,!0),L.removeEventListener("mousedown",g,!0),L.removeEventListener("mouseout",b,!0),L.removeEventListener("mouseover",m,!0),s.globalThis.removeEventListener("mouseup",p,!0)};u.hooks.init.tap(a.tag,function(){var R=l.context.contextService.getDomElement();s.globalThis.navigator.msPointerEnabled?(R.style.msContentZooming="none",R.style.msTouchAction="none"):d.supportsPointerEvents&&(R.style.touchAction="none"),d.supportsPointerEvents?M(R):T(R),d.supportsTouchEvents&&C(R),f.useNativeClickEvent&&R.addEventListener("click",S,!0),R.addEventListener("wheel",w,{passive:!0,capture:!0})}),u.hooks.destroy.tap(a.tag,function(){var R=l.context.contextService.getDomElement();s.globalThis.navigator.msPointerEnabled?(R.style.msContentZooming="",R.style.msTouchAction=""):d.supportsPointerEvents&&(R.style.touchAction=""),d.supportsPointerEvents?k(R):A(R),d.supportsTouchEvents&&O(R),f.useNativeClickEvent&&R.removeEventListener("click",S,!0),R.removeEventListener("wheel",w,!0)})}}])}();jM.tag="DOMInteraction";var uN=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.name="dom-interaction",r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"init",value:function(){this.addRenderingPlugin(new jM)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(ps);var hN="g-canvas-camera",$M=function(){function a(){(0,H.Z)(this,a),this.displayObjectHTMLElementMap=new WeakMap}return(0,j.Z)(a,[{key:"joinTransformMatrix",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([r[0],r[1],r[4],r[5],r[12]+s[0],r[13]+s[1]].join(","),")")}},{key:"apply",value:function(r,s){var l=this,u=r.camera,h=r.renderingContext,f=r.renderingService;this.context=r;var d=h.root.ownerDocument.defaultView,v=d.context.eventService.nativeHTMLMap,p=function(M,C){C.style.transform=l.joinTransformMatrix(M.getWorldTransform(),M.getOrigin())},g=function(M){var C=M.target;if(C.nodeName===lt.HTML){l.$camera||(l.$camera=l.createCamera(u));var T=l.getOrCreateEl(C);l.$camera.appendChild(T),Object.keys(C.attributes).forEach(function(k){l.updateAttribute(k,C)}),p(C,T),v.set(T,C)}},m=function(M){var C=M.target;if(C.nodeName===lt.HTML&&l.$camera){var T=l.getOrCreateEl(C);T&&(T.remove(),v.delete(T))}},b=function(M){var C=M.target;if(C.nodeName===lt.HTML){var T=M.attrName;l.updateAttribute(T,C)}},E=function(M){var C=M.target,T=C.nodeName===lt.FRAGMENT?C.childNodes:[C];T.forEach(function(k){if(k.nodeName===lt.HTML){var O=l.getOrCreateEl(k);p(k,O)}})},w=function(){if(l.$camera){var M=l.context.config,C=M.width,T=M.height;l.$camera.parentElement.style.width="".concat(C||0,"px"),l.$camera.parentElement.style.height="".concat(T||0,"px")}};f.hooks.init.tap(a.tag,function(){d.addEventListener(ra.RESIZE,w),d.addEventListener(De.MOUNTED,g),d.addEventListener(De.UNMOUNTED,m),d.addEventListener(De.ATTR_MODIFIED,b),d.addEventListener(De.BOUNDS_CHANGED,E)}),f.hooks.endFrame.tap(a.tag,function(){l.$camera&&h.renderReasons.has(nc.CAMERA_CHANGED)&&(l.$camera.style.transform=l.joinTransformMatrix(u.getOrthoMatrix()))}),f.hooks.destroy.tap(a.tag,function(){l.$camera&&l.$camera.remove(),d.removeEventListener(ra.RESIZE,w),d.removeEventListener(De.MOUNTED,g),d.removeEventListener(De.UNMOUNTED,m),d.removeEventListener(De.ATTR_MODIFIED,b),d.removeEventListener(De.BOUNDS_CHANGED,E)})}},{key:"createCamera",value:function(r){var s=this.context.config,l=s.document,u=s.width,h=s.height,f=this.context.contextService.getDomElement(),d=f.parentNode;if(d){var v=hN,p=d.querySelector("#".concat(v));if(!p){var g=(l||document).createElement("div");g.style.overflow="hidden",g.style.pointerEvents="none",g.style.position="absolute",g.style.left="0px",g.style.top="0px",g.style.width="".concat(u||0,"px"),g.style.height="".concat(h||0,"px");var m=(l||document).createElement("div");p=m,m.id=v,m.style.position="absolute",m.style.left="".concat(f.offsetLeft||0,"px"),m.style.top="".concat(f.offsetTop||0,"px"),m.style.transformOrigin="left top",m.style.transform=this.joinTransformMatrix(r.getOrthoMatrix()),m.style.pointerEvents="none",m.style.width="100%",m.style.height="100%",g.appendChild(m),d.appendChild(g)}return p}return null}},{key:"getOrCreateEl",value:function(r){var s=this.context.config.document,l=this.displayObjectHTMLElementMap.get(r);return l||(l=(s||document).createElement("div"),r.parsedStyle.$el=l,this.displayObjectHTMLElementMap.set(r,l),r.id&&(l.id=r.id),r.name&&l.setAttribute("name",r.name),r.className&&(l.className=r.className),l.style.position="absolute",l.style["will-change"]="transform",l.style.transform=this.joinTransformMatrix(r.getWorldTransform(),r.getOrigin())),l}},{key:"updateAttribute",value:function(r,s){var l=this.getOrCreateEl(s);switch(r){case"innerHTML":var u=s.parsedStyle.innerHTML;(0,xn.Z)(u)?l.innerHTML=u:(l.innerHTML="",l.appendChild(u));break;case"x":l.style.left="".concat(s.parsedStyle.x,"px");break;case"y":l.style.top="".concat(s.parsedStyle.y,"px");break;case"transformOrigin":var h=s.parsedStyle.transformOrigin;l.style["transform-origin"]="".concat(h[0].buildCSSText(null,null,"")," ").concat(h[1].buildCSSText(null,null,""));break;case"width":var f=s.parsedStyle.width;l.style.width=(0,tn.Z)(f)?"".concat(f,"px"):f.toString();break;case"height":var d=s.parsedStyle.height;l.style.height=(0,tn.Z)(d)?"".concat(d,"px"):d.toString();break;case"zIndex":var v=s.parsedStyle.zIndex;l.style["z-index"]="".concat(v);break;case"visibility":var p=s.parsedStyle.visibility;l.style.visibility=p;break;case"pointerEvents":var g=s.parsedStyle.pointerEvents,m=g===void 0?"auto":g;l.style.pointerEvents=m;break;case"opacity":var b=s.parsedStyle.opacity;l.style.opacity="".concat(b);break;case"fill":var E=s.parsedStyle.fill,w="";Ih(E)?E.isNone?w="transparent":w=s.getAttribute("fill"):Array.isArray(E)?w=s.getAttribute("fill"):cl(E),l.style.background=w;break;case"stroke":var S=s.parsedStyle.stroke,M="";Ih(S)?S.isNone?M="transparent":M=s.getAttribute("stroke"):Array.isArray(S)?M=s.getAttribute("stroke"):cl(S),l.style["border-color"]=M,l.style["border-style"]="solid";break;case"lineWidth":var C=s.parsedStyle.lineWidth;l.style["border-width"]="".concat(C||0,"px");break;case"lineDash":l.style["border-style"]="dashed";break;case"filter":var T=s.style.filter;l.style.filter=T;break;default:!(0,le.Z)(s.style[r])&&s.style[r]!==""&&(l.style[r]=s.style[r])}}}])}();$M.tag="HTMLRendering";var fN=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.name="html-renderer",r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"init",value:function(){this.addRenderingPlugin(new $M)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(ps);var dN=function(){function a(n){(0,H.Z)(this,a),this.renderingContext=n.renderingContext,this.canvasConfig=n.config}return(0,j.Z)(a,[{key:"init",value:function(){var r=this.canvasConfig,s=r.container,l=r.canvas;if(l)this.$canvas=l,s&&l.parentElement!==s&&s.appendChild(l),this.$container=l.parentElement,this.canvasConfig.container=this.$container;else if(s&&(this.$container=(0,xn.Z)(s)?document.getElementById(s):s,this.$container)){var u=document.createElement("canvas");this.$container.appendChild(u),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=u}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(r,s){var l=this.canvasConfig.devicePixelRatio;this.dpr=l,this.$canvas&&(this.$canvas.width=this.dpr*r,this.$canvas.height=this.dpr*s,_x(this.$canvas,r,s)),this.renderingContext.renderReasons.add(nc.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(r){this.$container&&this.$container.style&&(this.$container.style.cursor=r)}},{key:"toDataURL",value:function(){var n=(0,Or.Z)((0,si.Z)().mark(function s(){var l,u,h,f=arguments;return(0,si.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l=f.length>0&&f[0]!==void 0?f[0]:{},u=l.type,h=l.encoderOptions,v.abrupt("return",this.context.canvas.toDataURL(u,h));case 3:case"end":return v.stop()}},s,this)}));function r(){return n.apply(this,arguments)}return r}()}])}(),vN=function(a){function n(){var r;(0,H.Z)(this,n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=(0,$.Z)(this,n,[].concat(l)),r.name="canvas-context-register",r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"init",value:function(){this.context.ContextService=dN}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(ps),gv=function(a){function n(r){var s;return(0,H.Z)(this,n),s=(0,$.Z)(this,n,[r]),s.registerPlugin(new vN),s.registerPlugin(new rN),s.registerPlugin(new LR),s.registerPlugin(new cN),s.registerPlugin(new uN),s.registerPlugin(new JR),s.registerPlugin(new fN),s}return(0,X.Z)(n,a),(0,j.Z)(n)}(L0),yv=K(23413),pN=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class mv extends Ks{constructor(n){super(Object.assign(Object.assign({},n),{style:Object.assign({},mv.defaultStyleProps,n.style)})),this.rootPointerEvent=new Qh(null),this.forwardEvents=r=>{const s=this.context.canvas,l=s.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(r,l).forEach(h=>{const f=this.bootstrapEvent(this.rootPointerEvent,h,l,r);fv(s.context.eventService,"mappingTable.pointerupoutside",[]),s.context.eventService.mapEvent(f)})}}get eventService(){return this.context.canvas.context.eventService}get events(){return[pt.CLICK,pt.POINTER_DOWN,pt.POINTER_MOVE,pt.POINTER_UP,pt.POINTER_OVER,pt.POINTER_LEAVE]}getDomElement(){return this.getShape("key").getDomElement()}render(n=this.parsedAttributes,r=this){this.drawKeyShape(n,r),this.drawPortShapes(n,r)}getKeyStyle(n){const r=(0,yv.Z)(n,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:s=0,dy:l=0}=r,u=pN(r,["dx","dy"]),[h,f]=this.getSize(n);return Object.assign(Object.assign({x:s,y:l},u),{width:h,height:f})}drawKeyShape(n,r){const s=this.getKeyStyle(n),{x:l,y:u,width:h=0,height:f=0}=s,d=this.upsert("key-container",Pr,{x:l,y:u,width:h,height:f,opacity:0},r);return this.upsert("key",pu,s,d)}connectedCallback(){if(!(this.context.canvas.getRenderer("main")instanceof gv))return;const s=this.getDomElement();this.events.forEach(l=>{s.addEventListener(l,this.forwardEvents)})}attributeChangedCallback(n,r,s){n==="zIndex"&&r!==s&&(this.getDomElement().style.zIndex=s)}destroy(){const n=this.getDomElement();this.events.forEach(r=>{n.removeEventListener(r,this.forwardEvents)}),super.destroy()}normalizeToPointerEvent(n,r){const s=[];if(r.isTouchEvent(n))for(let l=0;l<n.changedTouches.length;l++){const u=n.changedTouches[l];xe(u.button)&&(u.button=0),xe(u.buttons)&&(u.buttons=1),xe(u.isPrimary)&&(u.isPrimary=n.touches.length===1&&n.type==="touchstart"),xe(u.width)&&(u.width=u.radiusX||1),xe(u.height)&&(u.height=u.radiusY||1),xe(u.tiltX)&&(u.tiltX=0),xe(u.tiltY)&&(u.tiltY=0),xe(u.pointerType)&&(u.pointerType="touch"),xe(u.pointerId)&&(u.pointerId=u.identifier||0),xe(u.pressure)&&(u.pressure=u.force||.5),xe(u.twist)&&(u.twist=0),xe(u.tangentialPressure)&&(u.tangentialPressure=0),u.isNormalized=!0,u.type=n.type,s.push(u)}else if(r.isMouseEvent(n)){const l=n;xe(l.isPrimary)&&(l.isPrimary=!0),xe(l.width)&&(l.width=1),xe(l.height)&&(l.height=1),xe(l.tiltX)&&(l.tiltX=0),xe(l.tiltY)&&(l.tiltY=0),xe(l.pointerType)&&(l.pointerType="mouse"),xe(l.pointerId)&&(l.pointerId=1),xe(l.pressure)&&(l.pressure=.5),xe(l.twist)&&(l.twist=0),xe(l.tangentialPressure)&&(l.tangentialPressure=0),l.isNormalized=!0,s.push(l)}else s.push(n);return s}transferMouseData(n,r){n.isTrusted=r.isTrusted,n.srcElement=r.srcElement,n.timeStamp=performance.now(),n.type=r.type,n.altKey=r.altKey,n.metaKey=r.metaKey,n.shiftKey=r.shiftKey,n.ctrlKey=r.ctrlKey,n.button=r.button,n.buttons=r.buttons,n.client.x=r.clientX,n.client.y=r.clientY,n.movement.x=r.movementX,n.movement.y=r.movementY,n.page.x=r.pageX,n.page.y=r.pageY,n.screen.x=r.screenX,n.screen.y=r.screenY,n.relatedTarget=null}bootstrapEvent(n,r,s,l){n.view=s,n.originalEvent=null,n.nativeEvent=l,n.pointerId=r.pointerId,n.width=r.width,n.height=r.height,n.isPrimary=r.isPrimary,n.pointerType=r.pointerType,n.pressure=r.pressure,n.tangentialPressure=r.tangentialPressure,n.tiltX=r.tiltX,n.tiltY=r.tiltY,n.twist=r.twist,this.transferMouseData(n,r);const{x:u,y:h}=this.getViewportXY(r);n.viewport.x=u,n.viewport.y=h;const[f,d]=this.context.canvas.getCanvasByViewport([u,h]);return n.canvas.x=f,n.canvas.y=d,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.isTrusted=l.isTrusted,n.type==="pointerleave"&&(n.type="pointerout"),n}getViewportXY(n){let r,s;const{offsetX:l,offsetY:u,clientX:h,clientY:f}=n;if(!(0,le.Z)(l)&&!(0,le.Z)(u))r=l,s=u;else{const d=this.eventService.client2Viewport({x:h,y:f});r=d.x,s=d.y}return{x:r,y:s}}onframe(){super.onframe();const{opacity:n}=this.attributes;this.getDomElement().style.opacity=`${n}`}}mv.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var HM=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class Kg extends Ks{constructor(n){super(li({style:Kg.defaultStyleProps},n))}getKeyStyle(n){const[r,s]=this.getSize(n),l=super.getKeyStyle(n),{fillOpacity:u,opacity:h=u}=l,f=HM(l,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:h},f),{width:r,height:s,x:-r/2,y:-s/2})}getBounds(){return this.getShape("key").getBounds()}getHaloStyle(n){if(n.halo===!1)return!1;const r=this.getShape("key").attributes,{fill:s,stroke:l}=r,u=HM(r,["fill","stroke"]),h=jr(this.getGraphicStyle(n),"halo"),f=Number(h.lineWidth),[d,v]=Ce(this.getSize(n),[f,f]),{lineWidth:p}=h,g={fill:"transparent",lineWidth:p/2,width:d-p/2,height:v-p/2,x:-(d-p/2)/2,y:-(v-p/2)/2};return Object.assign(Object.assign({},h),g)}getIconStyle(n){const r=super.getIconStyle(n),[s,l]=this.getSize(n);return r?Object.assign({width:s*Sl,height:l*Sl},r):!1}drawKeyShape(n,r){const s=this.upsert("key",o2,this.getKeyStyle(n),r);return c2(this),s}drawHaloShape(n,r){this.upsert("halo",Pr,this.getHaloStyle(n),r)}update(n){super.update(n),n&&("x"in n||"y"in n||"z"in n)&&u2(this)}}Kg.defaultStyleProps={size:32};class gN extends Ks{constructor(n){super(n)}getKeyStyle(n){const[r,s]=this.getSize(n);return Object.assign(Object.assign({},super.getKeyStyle(n)),{width:r,height:s,x:-r/2,y:-s/2})}getIconStyle(n){const r=super.getIconStyle(n),{width:s,height:l}=this.getShape("key").attributes;return r?Object.assign({width:s*Sl,height:l*Sl},r):!1}drawKeyShape(n,r){return this.upsert("key",Pr,this.getKeyStyle(n),r)}}class yN extends zg{constructor(n){super(n)}getInnerR(n){return n.innerR||this.getOuterR(n)*3/8}getOuterR(n){return Math.min(...this.getSize(n))/2}getPoints(n){return aL(this.getOuterR(n),this.getInnerR(n))}getIconStyle(n){const r=super.getIconStyle(n),s=this.getInnerR(n)*2*Sl;return r?Object.assign({width:s,height:s},r):!1}getPortXY(n,r){const{placement:s="top"}=r,l=this.getShape("key").getLocalBounds(),u=sL(this.getOuterR(n),this.getInnerR(n));return _2(l,s,u,!1)}}class qg extends zg{constructor(n){super(li({style:qg.defaultStyleProps},n))}getPoints(n){const{direction:r}=n,[s,l]=this.getSize(n);return oL(s,l,r)}getPortXY(n,r){const{direction:s}=n,{placement:l="top"}=r,u=this.getShape("key").getLocalBounds(),[h,f]=this.getSize(n),d=lL(h,f,s);return _2(u,l,d,!1)}getIconStyle(n){const{icon:r,iconText:s,iconSrc:l,direction:u}=n;if(r===!1||Po(s||l))return!1;const h=jr(this.getGraphicStyle(n),"icon"),f=this.getShape("key").getLocalBounds(),[d,v]=Jk(f,u),p=tP(f,u)*2*Sl;return Object.assign({x:d,y:v,width:p,height:p},h)}}qg.defaultStyleProps={size:40,direction:"up"};var VM=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class df extends Ks{constructor(n){super(li({style:df.defaultStyleProps},n)),this.type="combo",this.updateComboPosition(this.parsedAttributes)}getKeySize(n){const{collapsed:r,childrenNode:s=[]}=n;return s.length===0?this.getEmptyKeySize(n):r?this.getCollapsedKeySize(n):this.getExpandedKeySize(n)}getEmptyKeySize(n){const{padding:r,collapsedSize:s}=n,[l,u,h,f]=$s(r);return Ce(Ta(s),[f+u,l+h,0])}getCollapsedKeySize(n){return Ta(n.collapsedSize)}getExpandedKeySize(n){const r=this.getContentBBox(n);return[Oo(r),Ao(r),0]}getContentBBox(n){const{childrenNode:r=[],padding:s}=n,l=r.map(h=>this.context.element.getElement(h)).filter(Boolean);if(l.length===0){const h=new en,{x:f=0,y:d=0,size:v}=n,[p,g]=Ta(v);return h.setMinMax([f-p/2,d-g/2,0],[f+p/2,d+g/2,0]),h}const u=av(l.map(h=>h.getBounds()));return s?cc(u,s):u}drawCollapsedMarkerShape(n,r){const s=this.getCollapsedMarkerStyle(n);this.upsert("collapsed-marker",RM,s,r),c2(this)}getCollapsedMarkerStyle(n){if(!n.collapsed||!n.collapsedMarker)return!1;const r=jr(this.getGraphicStyle(n),"collapsedMarker"),{type:s}=r,l=VM(r,["type"]),u=this.getShape("key"),[h,f]=wl(u.getLocalBounds(),"center"),d=Object.assign(Object.assign({},l),{x:h,y:f});if(s){const v=this.getCollapsedMarkerText(s,n);Object.assign(d,{text:v})}return d}getCollapsedMarkerText(n,r){const{childrenData:s=[]}=r,{model:l}=this.context;return n==="descendant-count"?l.getDescendantsData(this.id).length.toString():n==="child-count"?s.length.toString():n==="node-count"?l.getDescendantsData(this.id).filter(u=>l.getElementType(tt(u))==="node").length.toString():(0,re.Z)(n)?n(s):""}getComboPosition(n){const{x:r=0,y:s=0,collapsed:l,childrenData:u=[]}=n;if(u.length===0)return[+r,+s,0];if(l){const{model:h}=this.context,f=h.getDescendantsData(this.id).filter(d=>!h.isCombo(tt(d)));if(f.length>0&&f.some(W3)){const d=f.reduce((v,p)=>Ce(v,pr(p)),[0,0,0]);return Ys(d,f.length)}return[+r,+s,0]}return this.getContentBBox(n).center}getComboStyle(n){const[r,s]=this.getComboPosition(n);return{x:r,y:s,transform:[["translate",r,s]]}}updateComboPosition(n){const r=this.getComboStyle(n);Object.assign(this.style,r);const{x:s,y:l}=r;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:s,y:l}}),u2(this)}render(n,r=this){super.render(n,r),this.drawCollapsedMarkerShape(n,r)}update(n={}){super.update(n),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(n,r){const s=super.animate(this.attributes.collapsed?n:n.map(l=>{var{x:u,y:h,z:f,transform:d}=l,v=VM(l,["x","y","z","transform"]);return v}),r);return s&&new Proxy(s,{set:(l,u,h)=>(u==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(l,u,h))})}}df.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};class mN extends df{constructor(n){super(n)}drawKeyShape(n,r){return this.upsert("key",ur,this.getKeyStyle(n),r)}getKeyStyle(n){const{collapsed:r}=n,s=super.getKeyStyle(n),[l]=this.getKeySize(n);return Object.assign(Object.assign(Object.assign({},s),r&&jr(s,"collapsed")),{r:l/2})}getCollapsedKeySize(n){const[r,s]=Ta(n.collapsedSize),l=Math.max(r,s)/2;return[l*2,l*2,0]}getExpandedKeySize(n){const r=this.getContentBBox(n),[s,l]=oc(r),u=Math.sqrt(Math.pow(s,2)+Math.pow(l,2))/2;return[u*2,u*2,0]}getIntersectPoint(n,r=!1){const s=this.getShape("key").getBounds();return Lg(n,s,r)}}class bN extends df{constructor(n){super(n)}drawKeyShape(n,r){return this.upsert("key",Pr,this.getKeyStyle(n),r)}getKeyStyle(n){const r=super.getKeyStyle(n),[s,l]=this.getKeySize(n);return Object.assign(Object.assign(Object.assign({},r),n.collapsed&&jr(r,"collapsed")),{width:s,height:l,x:-s/2,y:-l/2})}}var xN=function(a,n){if(!nv(a))return a;for(var r=[],s=0;s<a.length;s++){var l=a[s];n(l,s)&&r.push(l)}return r},EN=xN,wN=function(a,n){return nv(a)?a.indexOf(n)>-1:!1},SN=wN,_N=function(a,n){return n===void 0&&(n=[]),EN(a,function(r){return!SN(n,r)})},MN=_N;const CN={padding:10};function UM(a,n,r,s,l,u){const{padding:h}=Object.assign(CN,u),f=lc(r,h),d=lc(s,h),v=[a,...l,n];let p=null;const g=[];for(let m=0,b=v.length;m<b-1;m++){const E=m+1,w=v[m],S=v[E],M=j3(w,S);let C=null;if(m===0)if(E===b-1)if(f.intersects(d))C=b2(w,S,f,d);else if(!yg(w,f)&&!yg(S,d)){const T=yu(w,f),k=yu(S,d);C=XM(T,k,sa(T,k)),C.points.unshift(T),C.points.push(k)}else M||(C=ON(w,S,f,d));else Hs(S,f)?C=b2(w,S,f,lc(S,h),p):M||(C=Qg(w,S,f));else E===b-1?Hs(w,d)?C=b2(w,S,lc(w,h),d,p):M||(C=KM(w,S,d,p)):M||(C=XM(w,S,p));C?(g.push(...C.points),p=C.direction):p=sa(w,S),E<b-1&&g.push(S)}return g.map(xu)}const TN={N:"S",S:"N",W:"E",E:"W"},YM={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function sa(a,n){const[r,s]=a,[l,u]=n;return r===l?s>u?"N":"S":s===u?r>l?"W":"E":null}function m2(a,n){return n==="N"||n==="S"?Ao(a):Oo(a)}function XM(a,n,r){const s=[a[0],n[1]],l=[n[0],a[1]],u=sa(a,s),h=sa(a,l),f=r?TN[r]:null,d=u===r||u!==f&&h!==r?s:l;return{points:[d],direction:sa(d,n)}}function Qg(a,n,r){if(yg(a,r)){const s=bv(a,n,r);return{points:[s],direction:sa(s,n)}}else{const s=yu(a,r),u=["left","right"].includes(sv(a,r))?[n[0],s[1]]:[s[0],n[1]];return{points:[u],direction:sa(u,n)}}}function KM(a,n,r,s){const l=yg(n,r)?n:yu(n,r),u=[[l[0],a[1]],[a[0],l[1]]],h=u.filter(d=>Qk(d,r)&&!E_(d,r,!0)),f=h.filter(d=>sa(d,a)!==s);if(f.length>0){const d=f.find(v=>sa(a,v)===s)||f[0];return{points:[d],direction:sa(d,n)}}else{const d=MN(u,h)[0],v=fc(n,d,m2(r,s)/2);return{points:[bv(v,a,r),v],direction:sa(v,n)}}}function ON(a,n,r,s){let l=Qg(a,n,r);const u=cv(l.points[0]);if(Hs(u,s)){l=Qg(n,a,s);const h=cv(l.points[0]);if(Hs(h,r)){const f=fc(a,u,m2(r,sa(a,u))/2),d=fc(n,h,m2(s,sa(n,h))/2),v=[(f[0]+d[0])/2,(f[1]+d[1])/2],p=Qg(a,v,r),g=KM(v,n,s,p.direction);l.points=[p.points[0],g.points[0]],l.direction=g.direction}}return l}function b2(a,n,r,s,l){const h=av([r,s]),f=Xn(n,h.center)>Xn(a,h.center),[d,v]=f?[n,a]:[a,n],p=Ao(h)+Oo(h);let g;if(l){const E=[d[0]+p*Math.cos(YM[l]),d[1]+p*Math.sin(YM[l])];g=fc(yu(E,h),E,.01)}else g=fc(yu(d,h),d,-.01);let m=bv(g,v,h),b=[uv(g,2),uv(m,2)];if(Rr(uv(g),uv(m))){const E=JE(Nn(g,d),[1,0,0])+Math.PI/2;m=[v[0]+p*Math.cos(E),v[1]+p*Math.sin(E),0],m=uv(fc(yu(m,h),v,-.01),2);const w=bv(g,m,h);b=[g,w,m]}return{points:f?b.reverse():b,direction:sa(f?g:m,n)}}function bv(a,n,r){let s=[a[0],n[1]];return Hs(s,r)&&(s=[n[0],a[1]]),s}function qM(a,n,r,s,l){let d=typeof n=="number"?n:.5;n==="start"&&(d=0),n==="end"&&(d=.99);const v=Oi(a.getPoint(d)),p=Oi(a.getPoint(d+.01));let g=n==="start"?"left":n==="end"?"right":"center";if(dM(v,p)||!r){const[M,C]=QM(a,d,s,l);return{transform:[["translate",M,C]],textAlign:g}}let m=Math.atan2(p[1]-v[1],p[0]-v[0]);p[0]<v[0]&&(g=g==="center"?g:g==="left"?"right":"left",s*=-1,m+=Math.PI);const[E,w]=QM(a,d,s,l,m),S=[["translate",E,w],["rotate",m/Math.PI*180]];return{textAlign:g,transform:S}}function AN(a,n,r,s,l){var u,h;const f=((u=a.badge)===null||u===void 0?void 0:u.getGeometryBounds().halfExtents[0])*2||0,d=((h=a.label)===null||h===void 0?void 0:h.getGeometryBounds().halfExtents[0])*2||0;return qM(a.key,r,!0,(d?(d/2+f/2)*(n==="suffix"?1:-1):0)+s,l)}function QM(a,n,r,s,l){const[u,h]=Oi(a.getPoint(n));let f=r,d=s;return l&&(f=r*Math.cos(l)-s*Math.sin(l),d=r*Math.sin(l)+s*Math.cos(l)),[u+f,h+d]}function x2(a,n,r,s){if(Rr(a,n))return a;const l=Nn(n,a),u=[a[0]+r*l[0],a[1]+r*l[1]],h=El(Ng(l,!1));return u[0]+=s*h[0],u[1]+=s*h[1],u}function kN(a){return(0,tn.Z)(a)?[a,-a]:a}function PN(a){return(0,tn.Z)(a)?[a,1-a]:a}function RN(a,n,r){return[["M",a[0],a[1]],["Q",r[0],r[1],n[0],n[1]]]}function JM(a,n,r){return[["M",a[0],a[1]],["C",r[0][0],r[0][1],r[1][0],r[1][1],n[0],n[1]]]}function E2(a,n=0,r=!1){const s=a.length-1,l=a[0],u=a[s],h=a.slice(1,s),f=[["M",l[0],l[1]]];return h.forEach((d,v)=>{const p=h[v-1]||l,g=h[v+1]||u;if(!vM(p,d,g)&&n){const[m,b]=NN(p,d,g,n);f.push(["L",m[0],m[1]],["Q",d[0],d[1],b[0],b[1]],["L",b[0],b[1]])}else f.push(["L",d[0],d[1]])}),f.push(["L",u[0],u[1]]),r&&f.push(["Z"]),f}function NN(a,n,r,s){const l=Rg(a,n),u=Rg(r,n),h=Math.min(s,Math.min(l,u)/2),f=[n[0]-h/l*(n[0]-a[0]),n[1]-h/l*(n[1]-a[1])],d=[n[0]-h/u*(n[0]-r[0]),n[1]-h/u*(n[1]-r[1])];return[f,d]}const LN=a=>{const n=Math.PI/2,r=Ao(a)/2,s=Oo(a)/2,l=Math.atan2(r,s)/2,u=Math.atan2(s,r)/2;return{top:[-n-u,-n+u],"top-right":[-n+u,-l],"right-top":[-n+u,-l],right:[-l,l],"bottom-right":[l,n-u],"right-bottom":[l,n-u],bottom:[n-u,n+u],"bottom-left":[n+u,Math.PI-l],"left-bottom":[n+u,Math.PI-l],left:[Math.PI-l,Math.PI+l],"top-left":[Math.PI+l,-n-u],"left-top":[Math.PI+l,-n-u]}};function tC(a,n,r,s,l){const u=lc(a),h=a.getCenter();let f=s&&gc(s),d=l&&gc(l);if(!f||!d){const v=LN(u),p=v[n][0],g=v[n][1],[m,b]=oc(u),E=Math.max(m,b),w=Ce(h,[E*Math.cos(p),E*Math.sin(p),0]),S=Ce(h,[E*Math.cos(g),E*Math.sin(g),0]);f=C2(a,w),d=C2(a,S),r||([f,d]=[d,f])}return[f,d]}function IN(a,n,r,s,l,u){const h=a.getPorts()[l||u],f=a.getPorts()[u||l];let[d,v]=tC(a,n,r,h,f);const p=DN(a,d,v,s);return h&&(d=wv(h,p[0])),f&&(v=wv(f,p.at(-1))),JM(d,v,p)}function DN(a,n,r,s){const l=a.getCenter();if(Rr(n,r)){const u=Nn(n,l),h=[s*Math.sign(u[0])||s/2,s*Math.sign(u[1])||-s/2,0];return[Ce(n,h),Ce(r,Us(h,[1,-1,1]))]}return[fc(l,n,Xn(l,n)+s),fc(l,r,Xn(l,r)+s)]}function BN(a,n,r,s,l,u,h){const f=M2(a),d=f[u||h],v=f[h||u];let[p,g]=tC(a,r,s,d,v);const m=FN(a,p,g,l);return d&&(p=wv(d,m[0])),v&&(g=wv(v,m.at(-1))),E2([p,...m,g],n)}function FN(a,n,r,s){const l=[],u=lc(a);if(Rr(n,r))switch(sv(n,u)){case"left":l.push([n[0]-s,n[1]]),l.push([n[0]-s,n[1]+s]),l.push([n[0],n[1]+s]);break;case"right":l.push([n[0]+s,n[1]]),l.push([n[0]+s,n[1]+s]),l.push([n[0],n[1]+s]);break;case"top":l.push([n[0],n[1]-s]),l.push([n[0]+s,n[1]-s]),l.push([n[0]+s,n[1]]);break;case"bottom":l.push([n[0],n[1]+s]),l.push([n[0]+s,n[1]+s]),l.push([n[0]+s,n[1]]);break}else{const h=sv(n,u),f=sv(r,u);if(h===f){const d=h;let v,p;switch(d){case"left":v=Math.min(n[0],r[0])-s,l.push([v,n[1]]),l.push([v,r[1]]);break;case"right":v=Math.max(n[0],r[0])+s,l.push([v,n[1]]),l.push([v,r[1]]);break;case"top":p=Math.min(n[1],r[1])-s,l.push([n[0],p]),l.push([r[0],p]);break;case"bottom":p=Math.max(n[1],r[1])+s,l.push([n[0],p]),l.push([r[0],p]);break}}else{const d=(m,b)=>({left:[b[0]-s,b[1]],right:[b[0]+s,b[1]],top:[b[0],b[1]-s],bottom:[b[0],b[1]+s]})[m],v=d(h,n),p=d(f,r),g=bv(v,p,u);l.push(v,g,p)}}return l}function w2(a,n){const r=new Set,s=new Set,l=new Set;return a.forEach(u=>{n(u).forEach(f=>{r.add(f),a.includes(f.source)&&a.includes(f.target)?s.add(f):l.add(f)})}),{edges:Array.from(r),internal:Array.from(s),external:Array.from(l)}}function eC(a,n){const r=[];let s=a;for(;s;){r.push(s);const l=n(tt(s));if(l)s=l;else break}if(r.some(l=>{var u;return(u=l.style)===null||u===void 0?void 0:u.collapsed})){const l=r.reverse().findIndex(Ma);return r[l]||r.at(-1)}return a}function zN(a,n){return n||(a<4?10:a===4?12:a*2.5)}const ZN=(a,n)=>{const r=Math.max(a,n)/2;return[["M",-a/2,0],["A",r,r,0,1,0,2*r-a/2,0],["A",r,r,0,1,0,-a/2,0],["Z"]]},nC=(a,n)=>[["M",-a/2,0],["L",a/2,-n/2],["L",a/2,n/2],["Z"]],WN=(a,n)=>[["M",-a/2,0],["L",0,-n/2],["L",a/2,0],["L",0,n/2],["Z"]],GN=(a,n)=>[["M",-a/2,0],["L",a/2,-n/2],["L",4*a/5-a/2,0],["L",a/2,n/2],["Z"]],jN=(a,n)=>[["M",-a/2,-n/2],["L",a/2,-n/2],["L",a/2,n/2],["L",-a/2,n/2],["Z"]],$N=(a,n)=>{const r=a/2,s=a/7,l=a-s;return[["M",-r,0],["L",0,-n/2],["L",0,n/2],["Z"],["M",l-r,-n/2],["L",l+s-r,-n/2],["L",l+s-r,n/2],["L",l-r,n/2],["Z"]]},HN=(a,n)=>[["M",a/2,-n/2],["L",-a/2,0],["L",a/2,0],["L",-a/2,0],["L",a/2,n/2]];var Jg=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class pc extends NM{constructor(n){super(li({style:pc.defaultStyleProps},n)),this.type="edge"}get sourceNode(){const{sourceNode:n}=this.parsedAttributes;return this.context.element.getElement(n)}get targetNode(){const{targetNode:n}=this.parsedAttributes;return this.context.element.getElement(n)}getKeyStyle(n){const r=this.getGraphicStyle(n),{loop:s}=r,l=Jg(r,["loop"]),{sourceNode:u,targetNode:h}=this,d={d:s&&eL(u,h)?this.getLoopPath(n):this.getKeyPath(n)};return na.PARSED_STYLE_LIST.forEach(v=>{v in l&&(d[v]=l[v])}),d}getLoopPath(n){const{sourcePort:r,targetPort:s}=n,l=this.sourceNode,u=lc(l),h=Math.max(Oo(u),Ao(u)),{placement:f,clockwise:d,dist:v=h}=jr(this.getGraphicStyle(n),"loop");return IN(l,f,d,v,r,s)}getEndpoints(n,r=!0,s=[]){const{sourcePort:l,targetPort:u}=n,{sourceNode:h,targetNode:f}=this,[d,v]=rL(h,f,l,u);if(!r){const b=d?gc(d):h.getCenter(),E=v?gc(v):f.getCenter();return[b,E]}const p=typeof s=="function"?s():s,g=uC(d||h,p[0]||v||f),m=uC(v||f,p[p.length-1]||d||h);return[g,m]}getHaloStyle(n){if(n.halo===!1)return!1;const r=this.getKeyStyle(n),s=jr(this.getGraphicStyle(n),"halo");return Object.assign(Object.assign({},r),s)}getLabelStyle(n){if(n.label===!1||!n.labelText)return!1;const r=jr(this.getGraphicStyle(n),"label"),{placement:s,offsetX:l,offsetY:u,autoRotate:h,maxWidth:f}=r,d=Jg(r,["placement","offsetX","offsetY","autoRotate","maxWidth"]),v=qM(this.shapeMap.key,s,h,l,u),p=this.shapeMap.key.getLocalBounds(),g=rR([p.min,p.max],f);return Object.assign({wordWrapWidth:g},v,d)}getBadgeStyle(n){if(n.badge===!1||!n.badgeText)return!1;const r=jr(n,"badge"),{offsetX:s,offsetY:l,placement:u}=r,h=Jg(r,["offsetX","offsetY","placement"]);return Object.assign(h,AN(this.shapeMap,u,n.labelPlacement,s,l))}drawArrow(n,r){var s;const l=r==="start",h=n[r==="start"?"startArrow":"endArrow"],f=this.shapeMap.key;if(h){const d=this.getArrowStyle(n,l),[v,p,g]=l?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],m=f.parsedStyle[v];if(m)m.attr(d);else{const b=d.src?vl:na,E=new b({style:d});f.style[v]=E}f.style[p]=n[g]||d.width/2+ +d.lineWidth}else{const d=l?"markerStart":"markerEnd";(s=f.style[d])===null||s===void 0||s.destroy(),f.style[d]=null}}getArrowStyle(n,r){const s=this.getShape("key").attributes,l=r?"startArrow":"endArrow",u=jr(this.getGraphicStyle(n),l),{size:h,type:f}=u,d=Jg(u,["size","type"]),[v,p]=Ta(zN(s.lineWidth,h)),m=((0,re.Z)(f)?f:B[f]||nC)(v,p);return Object.assign((0,yv.Z)(s,["stroke","strokeOpacity","fillOpacity"]),{width:v,height:p},Object.assign({},m&&{d:m,fill:f==="simple"?"":s.stroke}),d)}drawLabelShape(n,r){const s=this.getLabelStyle(n);this.upsert("label",dc,s,r)}drawHaloShape(n,r){const s=this.getHaloStyle(n);this.upsert("halo",na,s,r)}drawBadgeShape(n,r){const s=this.getBadgeStyle(n);this.upsert("badge",hf,s,r)}drawSourceArrow(n){this.drawArrow(n,"start")}drawTargetArrow(n){this.drawArrow(n,"end")}drawKeyShape(n,r){const s=this.getKeyStyle(n);return this.upsert("key",na,s,r)}render(n=this.parsedAttributes,r=this){this.drawKeyShape(n,r),this.getShape("key")&&(this.drawSourceArrow(n),this.drawTargetArrow(n),this.drawLabelShape(n,r),this.drawHaloShape(n,r),this.drawBadgeShape(n,r))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(n,r){const s=super.animate(n,r);return s&&new Proxy(s,{set:(l,u,h)=>(u==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(l,u,h))})}}pc.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};class Mu extends pc{constructor(n){super(li({style:Mu.defaultStyleProps},n))}getKeyPath(n){const[r,s]=this.getEndpoints(n),{controlPoints:l,curvePosition:u,curveOffset:h}=n,f=this.getControlPoints(r,s,PN(u),kN(h),l);return JM(r,s,f)}getControlPoints(n,r,s,l,u){return(u==null?void 0:u.length)===2?u:[x2(n,r,s[0],l[0]),x2(n,r,s[1],l[1])]}}Mu.defaultStyleProps={curvePosition:.5,curveOffset:20};class ty extends Mu{constructor(n){super(li({style:ty.defaultStyleProps},n))}getControlPoints(n,r,s,l){const u=r[0]-n[0];return[[n[0]+u*s[0]+l[0],n[1]],[r[0]-u*s[1]+l[1],r[1]]]}}ty.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class ey extends Mu{constructor(n){super(li({style:ey.defaultStyleProps},n))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(n){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(n);const r=pr(this.ref),s=this.sourceNode.getIntersectPoint(r,!0),l=this.targetNode.getIntersectPoint(r);return[s,l]}toRadialCoordinate(n){const r=pr(this.ref),s=Xn(n,r),l=cM(Nn(n,r));return[s,l]}getControlPoints(n,r,s,l){const[u,h]=this.toRadialCoordinate(n),[f]=this.toRadialCoordinate(r),d=f-u;return[[n[0]+(d*s[0]+l[0])*Math.cos(h),n[1]+(d*s[0]+l[0])*Math.sin(h)],[r[0]-(d*s[1]-l[0])*Math.cos(h),r[1]-(d*s[1]-l[0])*Math.sin(h)]]}}ey.defaultStyleProps={curvePosition:.5,curveOffset:20};class ny extends Mu{constructor(n){super(li({style:ny.defaultStyleProps},n))}getControlPoints(n,r,s,l){const u=r[1]-n[1];return[[n[0],n[1]+u*s[0]+l[0]],[r[0],r[1]-u*s[1]+l[1]]]}}ny.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class ry extends pc{constructor(n){super(li({style:ry.defaultStyleProps},n))}getKeyPath(n){const[r,s]=this.getEndpoints(n);return[["M",r[0],r[1]],["L",s[0],s[1]]]}}ry.defaultStyleProps={};const VN={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:Rg},_l=a=>`${Math.round(a[0])}|||${Math.round(a[1])}`;function Cu(a,n){const r=s=>Math.round(s/n);return(0,tn.Z)(a)?r(a):a.map(r)}function UN(a,n){const r=Math.abs(a-n);return r>Math.PI?2*Math.PI-r:r}function rC(a,n){const r=n[0]-a[0],s=n[1]-a[1];return!r&&!s?0:Math.atan2(s,r)}function iC(a,n,r,s){const l=rC(a,n),u=r[_l(a)],f=rC(u||s,a);return UN(f,l)}const YN=(a,n)=>{const{offset:r,gridSize:s}=n,l={};return a.forEach(u=>{if(!u||u.destroyed||!u.isVisible())return;const h=cc(u.getRenderBounds(),r);for(let f=Cu(h.min[0],s);f<=Cu(h.max[0],s);f+=1)for(let d=Cu(h.min[1],s);d<=Cu(h.max[1],s);d+=1)l[`${f}|||${d}`]=!0}),l};function aC(a,n,r){return Math.min(...n.map(s=>r(a,s)))}function XN(a,n,r){let s=a[0],l=r(a[0],n);for(let u=0;u<a.length;u++){const h=a[u],f=r(h,n);f<l&&(s=h,l=f)}return s}const sC=(a,n,r,s)=>{if(!n)return[a];const{directionMap:l,offset:u}=s,h=cc(n.getRenderBounds(),u),f=Object.keys(l).reduce((d,v)=>{if(r.includes(v)){const p=l[v],[g,m]=oc(h),b=[a[0]+p.stepX*g,a[1]+p.stepY*m],E=eP(h);for(let w=0;w<E.length;w++){const S=e2([a,b],E[w]);S&&E_(S,h)&&d.push(S)}}return d},[]);return Hs(a,h)||f.push(a),f.map(d=>Cu(d,s.gridSize))},KN=(a,n,r,s,l,u,h)=>{const f=[];let d=[u[0]===s[0]?s[0]:a[0]*h,u[1]===s[1]?s[1]:a[1]*h];f.unshift(d);let v=a,p=n[_l(v)];for(;p;){const b=p,E=v;iC(b,E,n,r)&&(d=[b[0]===E[0]?d[0]:b[0]*h,b[1]===E[1]?d[1]:b[1]*h],f.unshift(d)),p=n[_l(b)],v=b}const g=l.map(b=>[b[0]*h,b[1]*h]),m=XN(g,d,Rg);return f.unshift(m),f};function qN(a,n,r,s){const l=xu(a.getCenter()),u=xu(n.getCenter()),h=Object.assign(VN,s),{gridSize:f}=h,d=h.enableObstacleAvoidance?r:[a,n],v=YN(d,h),p=Cu(l,f),g=Cu(u,f),m=sC(l,a,h.startDirections,h),b=sC(u,n,h.endDirections,h);m.forEach(L=>delete v[_l(L)]),b.forEach(L=>delete v[_l(L)]);const E={},w={},S={},M={},C={},T=new QN;for(let L=0;L<m.length;L++){const D=m[L],z=_l(D);E[z]=D,M[z]=0,C[z]=aC(D,b,h.distFunc),T.add({id:z,value:C[z]})}const k=b.map(L=>_l(L));let O=h.maximumLoops,A,R=1/0;for(const[L,D]of Object.entries(E))C[L]<=R&&(R=C[L],A=D);for(;Object.keys(E).length>0&&O>0;){const L=T.minId(!1);if(L)A=E[L];else break;const D=_l(A);if(k.includes(D))return KN(A,S,p,u,m,g,f);delete E[D],T.remove(D),w[D]=!0;for(const z of Object.values(h.directionMap)){const W=Ce(A,[z.stepX,z.stepY]),G=_l(W);if(w[G])continue;const Y=iC(A,W,S,p);if(Y>h.maxAllowedDirectionChange||v[G])continue;E[G]||(E[G]=W);const q=h.penalties[Y],rt=h.distFunc(A,W)+(isNaN(q)?f:q),yt=M[D]+rt,st=M[G];st&&yt>=st||(S[G]=A,M[G]=yt,C[G]=yt+aC(W,b,h.distFunc),T.add({id:G,value:C[G]}))}O-=1}return[]}class QN{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(n,r){let s=0,l=r-1;for(;l-s>1;){const u=Math.floor((s+l)/2);if(this.arr[u].value>n.value)l=u;else if(this.arr[u].value<n.value)s=u;else{this.arr.splice(u,0,n),this.map[n.id]=!0;return}}this.arr.splice(l,0,n),this.map[n.id]=!0}add(n){delete this.map[n.id];const r=this.arr.length;if(!r||this.arr[r-1].value<n.value){this.arr.push(n),this.map[n.id]=!0;return}this._innerAdd(n,r)}remove(n){this.map[n]&&delete this.map[n]}_clearAndGetMinId(){let n;for(let r=this.arr.length-1;r>=0;r--)this.map[this.arr[r].id]?n=this.arr[r].id:this.arr.splice(r,1);return n}_findFirstId(){for(;this.arr.length;){const n=this.arr.shift();if(this.map[n.id])return n.id}}minId(n){return n?this._clearAndGetMinId():this._findFirstId()}}class xv extends pc{constructor(n){super(li({style:xv.defaultStyleProps},n))}getControlPoints(n){const{router:r}=n,{sourceNode:s,targetNode:l}=this,[u,h]=this.getEndpoints(n,!1);let f=[];if(!r)f=n.controlPoints;else if(r.type==="shortest-path"){const d=this.context.element.getNodes();f=qN(s,l,d,r),f.length||(f=UM(u,h,s,l,n.controlPoints,{padding:r.offset}))}else r.type==="orth"&&(f=UM(u,h,s,l,n.controlPoints,r));return f}getPoints(n){const r=this.getControlPoints(n),[s,l]=this.getEndpoints(n,!0,r);return[s,...r,l]}getKeyPath(n){const r=this.getPoints(n);return E2(r,n.radius)}getLoopPath(n){const{sourcePort:r,targetPort:s,radius:l}=n,u=this.sourceNode,h=lc(u),f=Math.max(Oo(h),Ao(h))/4,{placement:d,clockwise:v,dist:p=f}=jr(this.getGraphicStyle(n),"loop");return BN(u,l,d,v,p,r,s)}}xv.defaultStyleProps={radius:0,controlPoints:[],router:!1};class iy extends pc{constructor(n){super(li({style:iy.defaultStyleProps},n))}getKeyPath(n){const{curvePosition:r,curveOffset:s}=n,[l,u]=this.getEndpoints(n),h=n.controlPoint||x2(l,u,r,s);return RN(l,u,h)}}iy.defaultStyleProps={curvePosition:.5,curveOffset:30};var JN=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};function Ev(a){return a instanceof Ks&&a.type==="node"}function oC(a){return a instanceof pc}function S2(a){return a instanceof df}function tL(a){return Ev(a)||oC(a)||S2(a)}function eL(a,n){return!a||!n?!1:a===n}const nL={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function _2(a,n,r=nL,s=!0){const l=[.5,.5],u=(0,xn.Z)(n)?Ca(r,n.toLocaleLowerCase(),l):n;if(!s&&(0,xn.Z)(n))return u;const[h,f]=u||l;return[a.min[0]+Oo(a)*h,a.min[1]+Ao(a)*f]}function M2(a){if(!a)return{};const n=a.getPorts();return(a.attributes.ports||[]).forEach((s,l)=>{var u;const{key:h,placement:f}=s;lC(s)&&(n[u=h||l]||(n[u]=wl(a.getShape("key").getBounds(),f)))}),n}function lC(a){const{r:n}=a;return!n||Number(n)===0}function gc(a){return cf(a)?a:a.getPosition()}function rL(a,n,r,s){const l=cC(a,n,r,s),u=cC(n,a,s,r);return[l,u]}function cC(a,n,r,s){const l=M2(a);if(r)return l[r];const u=Object.values(l);if(u.length===0)return;const h=u.map(v=>gc(v)),f=iL(n,s),[d]=V3(h,f);return u.find(v=>gc(v)===d)}function iL(a,n){const r=M2(a);if(n)return[gc(r[n])];const s=Object.values(r);return s.length>0?s.map(l=>gc(l)):[a.getCenter()]}function uC(a,n){return S2(a)||Ev(a)?C2(a,n):wv(a,n)}function wv(a,n){if(!a||!n)return[0,0,0];if(cf(a))return a;if(a.attributes.linkToCenter)return a.getPosition();const r=cf(n)?n:Ev(n)?n.getCenter():n.getPosition();return Lg(r,a.getBounds())}function C2(a,n){if(!a||!n)return[0,0,0];const r=cf(n)?n:Ev(n)?n.getCenter():n.getPosition();return a.getIntersectPoint(r)||a.getCenter()}function hC(a,n="bottom",r=0,s=0,l=!1){const u=n.split("-"),[h,f]=wl(a,n),[d,v]=l?["bottom","top"]:["top","bottom"],p=u.includes("top")?v:u.includes("bottom")?d:"middle",g=u.includes("left")?"right":u.includes("right")?"left":"center";return{transform:[["translate",h+r,f+s]],textBaseline:p,textAlign:g}}function aL(a,n){return[[0,-a],[n*Math.cos(3*Math.PI/10),-n*Math.sin(3*Math.PI/10)],[a*Math.cos(Math.PI/10),-a*Math.sin(Math.PI/10)],[n*Math.cos(Math.PI/10),n*Math.sin(Math.PI/10)],[a*Math.cos(3*Math.PI/10),a*Math.sin(3*Math.PI/10)],[0,n],[-a*Math.cos(3*Math.PI/10),a*Math.sin(3*Math.PI/10)],[-n*Math.cos(Math.PI/10),n*Math.sin(Math.PI/10)],[-a*Math.cos(Math.PI/10),-a*Math.sin(Math.PI/10)],[-n*Math.cos(3*Math.PI/10),-n*Math.sin(3*Math.PI/10)]]}function sL(a,n){const r={};return r.top=[0,-a],r.left=[-a*Math.cos(Math.PI/10),-a*Math.sin(Math.PI/10)],r["left-bottom"]=[-a*Math.cos(3*Math.PI/10),a*Math.sin(3*Math.PI/10)],r.bottom=[0,n],r["right-bottom"]=[a*Math.cos(3*Math.PI/10),a*Math.sin(3*Math.PI/10)],r.right=r.default=[a*Math.cos(Math.PI/10),-a*Math.sin(Math.PI/10)],r}function oL(a,n,r){const s=n/2,l=a/2,u={up:[[-l,s],[l,s],[0,-s]],left:[[-l,0],[l,s],[l,-s]],right:[[-l,s],[-l,-s],[l,0]],down:[[-l,-s],[l,-s],[0,s]]};return u[r]||u.up}function lL(a,n,r){const s=n/2,l=a/2,u={};return r==="down"?(u.bottom=u.default=[0,s],u.right=[l,-s],u.left=[-l,-s]):r==="left"?(u.top=[l,-s],u.bottom=[l,s],u.left=u.default=[-l,0]):r==="right"?(u.top=[-l,-s],u.bottom=[-l,s],u.right=u.default=[l,0]):(u.left=[-l,s],u.top=u.default=[0,-s],u.right=[l,s]),u}function KZ(a,n){return[[a/2,-n/2],[a/2,n/2],[-a/2,n/2],[-a/2,-n/2]]}function cL(a,n){return[[0,-n/2],[a/2,0],[0,n/2],[-a/2,0]]}function fC(a){return Ca(a,["style","visibility"])!=="hidden"}function uL(a,n){const{zIndex:r,transform:s,transformOrigin:l,visibility:u,cursor:h,clipPath:f,component:d}=n,v=JN(n,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(a.attributes,v),s&&a.setAttribute("transform",s),(0,tn.Z)(r)&&a.setAttribute("zIndex",r),l&&a.setAttribute("transformOrigin",l),u&&a.setAttribute("visibility",u),h&&a.setAttribute("cursor",h),f&&a.setAttribute("clipPath",f),d&&a.setAttribute("component",d)}function T2(a,n){"update"in a?a.update(n):a.attr(n)}function hL(a){return[[0,a],[a*Math.sqrt(3)/2,a/2],[a*Math.sqrt(3)/2,-a/2],[0,-a],[-a*Math.sqrt(3)/2,-a/2],[-a*Math.sqrt(3)/2,a/2]]}function fL(a){fv(a,"__to_be_destroyed__",!0)}function Sv(a){return Ca(a,"__to_be_destroyed__",!1)}var dL=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class ay extends Xa{constructor(n,r){super(n,Object.assign({},ay.defaultOptions,r)),this.onCollapseExpand=s=>dL(this,void 0,void 0,function*(){if(!this.validate(s))return;const{target:l}=s;if(!tL(l))return;const u=l.id,{model:h,graph:f}=this.context,d=h.getElementDataById(u);if(!d)return!1;const{onCollapse:v,onExpand:p,animation:g,align:m}=this.options;Ma(d)?(yield f.expandElement(u,{animation:g,align:m}),p==null||p(u)):(yield f.collapseElement(u,{animation:g,align:m}),v==null||v(u))}),this.bindEvents()}update(n){this.unbindEvents(),super.update(n),this.bindEvents()}bindEvents(){const{graph:n}=this.context,{trigger:r}=this.options;n.on(`node:${r}`,this.onCollapseExpand),n.on(`combo:${r}`,this.onCollapseExpand)}unbindEvents(){const{graph:n}=this.context,{trigger:r}=this.options;n.off(`node:${r}`,this.onCollapseExpand),n.off(`combo:${r}`,this.onCollapseExpand)}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}destroy(){this.unbindEvents(),super.destroy()}}ay.defaultOptions={enable:!0,animation:!0,trigger:pt.DBLCLICK,align:!0};var sy={},vL=function(a){return a=a||"g",sy[a]?sy[a]+=1:sy[a]=1,a+sy[a]},oy=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};const pL="g6-create-edge-assist-edge-id",ly="g6-create-edge-assist-node-id";class cy extends Xa{constructor(n,r){super(n,Object.assign({},cy.defaultOptions,r)),this.drop=s=>oy(this,void 0,void 0,function*(){const{targetType:l}=s;["combo","node"].includes(l)&&this.source?yield this.handleCreateEdge(s):yield this.cancelEdge()}),this.handleCreateEdge=s=>oy(this,void 0,void 0,function*(){var l,u,h;if(!this.validate(s))return;const{graph:f,canvas:d,batch:v,element:p}=this.context,{style:g}=this.options;if(this.source){this.createEdge(s),yield this.cancelEdge();return}v.startBatch(),d.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([s.target.id])[0];const m=f.getElementData(this.source);f.addNodeData([{id:ly,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:(l=m.style)===null||l===void 0?void 0:l.x,y:(u=m.style)===null||u===void 0?void 0:u.y}}]),f.addEdgeData([{id:pL,source:this.source,target:ly,style:Object.assign({pointerEvents:"none"},g)}]),yield(h=p.draw({animation:!1}))===null||h===void 0?void 0:h.finished}),this.updateAssistEdge=s=>oy(this,void 0,void 0,function*(){var l;if(!this.source)return;const{model:u,element:h}=this.context;u.translateNodeTo(ly,[s.canvas.x,s.canvas.y]),yield(l=h.draw({animation:!1,silence:!0}))===null||l===void 0?void 0:l.finished}),this.createEdge=s=>{var l,u;const{graph:h}=this.context,{style:f,onFinish:d,onCreate:v}=this.options;if(((l=s.target)===null||l===void 0?void 0:l.id)===void 0||this.source===void 0)return;const g=(u=this.getSelectedNodeIDs([s.target.id]))===null||u===void 0?void 0:u[0],m=`${this.source}-${g}-${vL()}`,b=v({id:m,source:this.source,target:g,style:f});b&&(h.addEdgeData([b]),d(b))},this.cancelEdge=()=>oy(this,void 0,void 0,function*(){var s;if(!this.source)return;const{graph:l,element:u,batch:h}=this.context;l.removeNodeData([ly]),this.source=void 0,yield(s=u.draw({animation:!1}))===null||s===void 0?void 0:s.finished,h.endBatch()}),this.bindEvents()}update(n){super.update(n),this.bindEvents()}bindEvents(){const{graph:n}=this.context,{trigger:r}=this.options;this.unbindEvents(),r==="click"?(n.on(Ss.CLICK,this.handleCreateEdge),n.on(gu.CLICK,this.handleCreateEdge),n.on(ml.CLICK,this.cancelEdge),n.on(vg.CLICK,this.cancelEdge)):(n.on(Ss.DRAG_START,this.handleCreateEdge),n.on(gu.DRAG_START,this.handleCreateEdge),n.on(pt.POINTER_UP,this.drop)),n.on(pt.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(n){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(r=>r.id).concat(n)))}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}unbindEvents(){const{graph:n}=this.context;n.off(Ss.CLICK,this.handleCreateEdge),n.off(gu.CLICK,this.handleCreateEdge),n.off(ml.CLICK,this.cancelEdge),n.off(vg.CLICK,this.cancelEdge),n.off(Ss.DRAG_START,this.handleCreateEdge),n.off(gu.DRAG_START,this.handleCreateEdge),n.off(pt.POINTER_UP,this.drop),n.off(pt.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}}cy.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:a=>a,onFinish:()=>{}};function gL(a,n,r){var s;return function(){var l=this,u=arguments,h=function(){s=null,r||a.apply(l,u)},f=r&&!s;clearTimeout(s),s=setTimeout(h,n),f&&a.apply(l,u)}}var _v=gL,dC=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class uy extends Xa{constructor(n,r){super(n,Object.assign({},uy.defaultOptions,r)),this.isDragging=!1,this.onDragStart=s=>{this.validate(s)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"))},this.onDrag=s=>{var l,u,h,f;if(!this.isDragging||Nr.isPinching)return;const d=(u=(l=s.movement)===null||l===void 0?void 0:l.x)!==null&&u!==void 0?u:s.dx,v=(f=(h=s.movement)===null||h===void 0?void 0:h.y)!==null&&f!==void 0?f:s.dy;d|v&&this.translate([d,v],!1)},this.onDragEnd=()=>{var s,l;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),(l=(s=this.options).onFinish)===null||l===void 0||l.call(s)},this.invokeOnFinish=_v(()=>{var s,l;(l=(s=this.options).onFinish)===null||l===void 0||l.call(s)},300),this.shortcut=new uf(n.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default"}update(n){this.unbindEvents(),super.update(n),this.bindEvents()}bindEvents(){const{trigger:n}=this.options;if((0,ai.Z)(n)){const{up:r=[],down:s=[],left:l=[],right:u=[]}=n;this.shortcut.bind(r,h=>this.onTranslate([0,1],h)),this.shortcut.bind(s,h=>this.onTranslate([0,-1],h)),this.shortcut.bind(l,h=>this.onTranslate([1,0],h)),this.shortcut.bind(u,h=>this.onTranslate([-1,0],h))}else{const{graph:r}=this.context;r.on(pt.DRAG_START,this.onDragStart),r.on(pt.DRAG,this.onDrag),r.on(pt.DRAG_END,this.onDragEnd)}}onTranslate(n,r){return dC(this,void 0,void 0,function*(){if(!this.validate(r))return;const{sensitivity:s}=this.options,l=s*-1;yield this.translate(Us(n,l),this.options.animation),this.invokeOnFinish()})}translate(n,r){return dC(this,void 0,void 0,function*(){n=this.clampByDirection(n),n=this.clampByRange(n),n=this.clampByRotation(n),yield this.context.graph.translateBy(n,r)})}clampByRotation([n,r]){const s=this.context.graph.getRotation();if(s%360===0)return[n,r];const l=s*Math.PI/180,u=Math.cos(l),h=Math.sin(l);return[n*u-r*h,n*h+r*u]}clampByDirection([n,r]){const{direction:s}=this.options;return s==="x"?r=0:s==="y"&&(n=0),[n,r]}clampByRange([n,r]){const{viewport:s,canvas:l}=this.context,[u,h]=l.getSize(),[f,d,v,p]=$s(this.options.range),g=[h*f,u*d,h*v,u*p],m=cc(zE(s.getCanvasCenter()),g),b=Nn(s.getViewportCenter(),[n,r,0]);if(!Hs(b,m)){const{min:[E,w],max:[S,M]}=m;(b[0]<E&&n>0||b[0]>S&&n<0)&&(n=0),(b[1]<w&&r>0||b[1]>M&&r<0)&&(r=0)}return[n,r]}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return typeof r=="function"?r(n):!!r}unbindEvents(){this.shortcut.unbindAll();const{graph:n}=this.context;n.off(pt.DRAG_START,this.onDragStart),n.off(pt.DRAG,this.onDrag),n.off(pt.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}}uy.defaultOptions={enable:a=>"targetType"in a?a.targetType==="canvas":!0,sensitivity:10,direction:"both",range:1/0};var vC=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class Mv extends Xa{constructor(n,r){super(n,Object.assign({},Mv.defaultOptions,r)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=s=>vC(this,void 0,void 0,function*(){var l;if(this.options.dropEffect!=="link")return;const{model:u,element:h}=this.context,f=s.target.id;this.target.forEach(d=>{const v=u.getParentData(d,zn);v&&tt(v)===f&&u.refreshComboData(f),u.setParent(d,f,zn)}),yield(l=h==null?void 0:h.draw({animation:!0}))===null||l===void 0?void 0:l.finished}),this.setCursor=s=>{if(this.isDragging)return;const{type:l}=s,{canvas:u}=this.context,{cursor:h}=this.options;l===pt.POINTER_ENTER?u.setCursor((h==null?void 0:h.grab)||"grab"):u.setCursor((h==null?void 0:h.default)||"default")},this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(n){this.unbindEvents(),super.update(n),this.bindEvents()}bindEvents(){const{graph:n,canvas:r}=this.context,s=r.getLayer().getContextService().$canvas;s&&(s.addEventListener("blur",this.onDragEnd),s.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(l=>{n.on(`${l}:${pt.DRAG_START}`,this.onDragStart),n.on(`${l}:${pt.DRAG}`,this.onDrag),n.on(`${l}:${pt.DRAG_END}`,this.onDragEnd),n.on(`${l}:${pt.POINTER_ENTER}`,this.setCursor),n.on(`${l}:${pt.POINTER_LEAVE}`,this.setCursor)}),["link"].includes(this.options.dropEffect)&&(n.on(gu.DROP,this.onDrop),n.on(ml.DROP,this.onDrop))}getSelectedNodeIDs(n){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(r=>r.id).concat(n)))}getDelta(n){const r=this.context.graph.getZoom();return Ys([n.dx,n.dy],r)}onDragStart(n){var r;if(this.enable=this.validate(n),!this.enable)return;const{batch:s,canvas:l,graph:u}=this.context;l.setCursor(((r=this.options.cursor)===null||r===void 0?void 0:r.grabbing)||"grabbing"),this.isDragging=!0,s.startBatch();const h=n.target.id;u.getElementState(h).includes(this.options.state)?this.target=this.getSelectedNodeIDs([h]):this.target=[h],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(n){if(!this.enable)return;const r=this.getDelta(n);this.options.shadow?this.moveShadow(r):this.moveElement(this.target,r)}onDragEnd(){var n,r,s;if(!this.enable)return;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";const{x:h=0,y:f=0}=this.shadow.attributes,[d,v]=Nn([+h,+f],this.shadowOrigin);this.moveElement(this.target,[d,v])}this.showEdges(),(r=(n=this.options).onFinish)===null||r===void 0||r.call(n,this.target);const{batch:l,canvas:u}=this.context;l.endBatch(),u.setCursor(((s=this.options.cursor)===null||s===void 0?void 0:s.grab)||"grab"),this.isDragging=!1,this.target=[]}validate(n){if(this.destroyed||Sv(n.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}moveElement(n,r){return vC(this,void 0,void 0,function*(){const{graph:s,model:l}=this.context,{dropEffect:u}=this.options;u==="move"&&n.forEach(h=>l.refreshComboData(h)),s.translateElementBy(Object.fromEntries(n.map(h=>[h,r])),!1)})}moveShadow(n){if(!this.shadow)return;const{x:r=0,y:s=0}=this.shadow.attributes,[l,u]=n;this.shadow.attr({x:+r+l,y:+s+u})}createShadow(n){const r=jr(this.options,"shadow"),s=av(n.map(v=>this.context.element.getElement(v).getBounds())),[l,u]=s.min;this.shadowOrigin=[l,u];const[h,f]=oc(s),d={width:h,height:f,x:l,y:u};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},r),d),{visibility:"visible"})):(this.shadow=new Pr({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},r),d),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||this.hiddenEdges.length===0||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){const{hideEdge:n,shadow:r}=this.options;if(n==="none"||r)return;const{graph:s}=this.context;n==="all"?this.hiddenEdges=s.getEdgeData().map(tt):this.hiddenEdges=Array.from(new Set(this.target.map(l=>s.getRelatedEdgesData(l,n).map(tt)).flat())),s.hideElement(this.hiddenEdges)}unbindEvents(){const{graph:n,canvas:r}=this.context,s=r.getLayer().getContextService().$canvas;s&&(s.removeEventListener("blur",this.onDragEnd),s.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(l=>{n.off(`${l}:${pt.DRAG_START}`,this.onDragStart),n.off(`${l}:${pt.DRAG}`,this.onDrag),n.off(`${l}:${pt.DRAG_END}`,this.onDragEnd),n.off(`${l}:${pt.POINTER_ENTER}`,this.setCursor),n.off(`${l}:${pt.POINTER_LEAVE}`,this.setCursor)}),n.off(`combo:${pt.DROP}`,this.onDrop),n.off(`canvas:${pt.DROP}`,this.onDrop)}destroy(){var n;this.unbindEvents(),(n=this.shadow)===null||n===void 0||n.destroy(),super.destroy()}}Mv.defaultOptions={animation:!0,enable:a=>["node","combo"].includes(a.targetType),dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var O2=K(72137);class hy{constructor(n,r){this.context=n,this.options=r||{}}}var yL=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})},mL=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};function qZ(a){const{type:n}=a;return!!(["comboCombined","comboForce"].includes(n)||n==="antv-dagre"&&a.sortByCombo)}function bL(a){const{type:n}=a;return["compact-box","mindmap","dendrogram","indented"].includes(n)}function QZ(a){return isNumber(a.x)&&isNumber(a.y)}function xL(a){return!Array.isArray(a)&&(a==null?void 0:a.preLayout)}function fy(a){const{nodes:n,edges:r}=a,s={nodes:[],edges:[],combos:[]};return n.forEach(l=>{const u=l.data._isCombo?s.combos:s.nodes,{x:h,y:f,z:d=0}=l.data;u==null||u.push({id:l.id,style:{x:h,y:f,z:d}})}),r.forEach(l=>{const{id:u,source:h,target:f,data:{points:d=[],controlPoints:v=d.slice(1,d.length-1)}}=l;s.edges.push({id:u,source:h,target:f,style:Object.assign({},v!=null&&v.length?{controlPoints:v.map(Oi)}:{})})}),s}function EL(a,n){class r extends hy{constructor(l,u){if(super(l,u),this.instance=new a({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){const h=this.instance;this.stop=h.stop.bind(h),this.tick=f=>{const d=h.tick(f);return fy(d)}}}execute(l,u){return yL(this,void 0,void 0,function*(){return fy(yield this.instance.execute(this.graphData2LayoutModel(l),this.transformOptions((0,Ka.Z)({},this.options,u))))})}transformOptions(l){if(!("onTick"in l))return l;const u=l.onTick;return l.onTick=h=>u(fy(h)),l}graphData2LayoutModel(l){const{nodes:u=[],edges:h=[],combos:f=[]}=l,d=u.map(b=>{const E=tt(b),{data:w,style:S,combo:M}=b,C=mL(b,["data","style","combo"]),T={id:E,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},w),{data:w}),M?{parentId:M}:{}),{style:S}),C)};return S!=null&&S.x&&Object.assign(T.data,{x:S.x}),S!=null&&S.y&&Object.assign(T.data,{y:S.y}),S!=null&&S.z&&Object.assign(T.data,{z:S.z}),T}),v=new Map(d.map(b=>[b.id,b])),p=h.filter(b=>{const{source:E,target:w}=b;return v.has(E)&&v.has(w)}).map(b=>{const{source:E,target:w,data:S,style:M}=b;return{id:tt(b),source:E,target:w,data:Object.assign({},S),style:Object.assign({},M)}}),g=f.map(b=>({id:tt(b),data:Object.assign({_isCombo:!0},b.data),style:Object.assign({},b.style)})),m=new O2.k({nodes:[...d,...g],edges:p});return n.model.model.hasTreeStructure(zn)&&(m.attachTreeStructure(zn),d.forEach(b=>{const E=n.model.model.getParent(b.id,zn);E&&m.hasNode(E.id)&&m.setParent(b.id,E.id,zn)})),m}}return r}function A2(a,n,...r){if(n in a)return a[n](...r);if("instance"in a){const s=a.instance;if(n in s)return s[n](...r)}return null}function pC(a,n){if(n in a)return a[n];if("instance"in a){const r=a.instance;if(n in r)return r[n]}return null}var wL=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class SL extends Mv{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(n=>["d3-force","d3-force-3d"].includes(n==null?void 0:n.id))}validate(n){return this.context.layout?this.forceLayoutInstance?super.validate(n):(_a.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1):!1}moveElement(n,r){return wL(this,void 0,void 0,function*(){const s=this.forceLayoutInstance;this.context.graph.getNodeData(n).forEach((l,u)=>{const{x:h=0,y:f=0}=l.style||{};s&&A2(s,"setFixedPosition",n[u],[...Ce([+h,+f],r)])})})}onDragStart(n){if(this.enable=this.validate(n),!this.enable)return;this.target=this.getSelectedNodeIDs([n.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);const r=this.forceLayoutInstance;r&&pC(r,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(s=>{const{x:l=0,y:u=0}=s.style||{};r&&A2(r,"setFixedPosition",tt(s),[+l,+u])})}onDrag(n){if(!this.enable)return;const r=this.getDelta(n);this.moveElement(this.target,r)}onDragEnd(){const n=this.forceLayoutInstance;n&&pC(n,"simulation").alphaTarget(0),!this.options.fixed&&this.context.graph.getNodeData(this.target).forEach(r=>{n&&A2(n,"setFixedPosition",tt(r),[null,null,null])})}}var gC=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class dy extends Xa{constructor(n,r){super(n,Object.assign({},dy.defaultOptions,r)),this.isZoomEvent=s=>!!(s.data&&"scale"in s.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=s=>gC(this,void 0,void 0,function*(){if(!this.validate(s))return;const{graph:l}=this.context,{state:u,nodeFilter:h,edgeFilter:f,comboFilter:d}=this.options,v=(u?l.getElementDataByState("node",u):l.getNodeData()).filter(h),p=(u?l.getElementDataByState("edge",u):l.getEdgeData()).filter(f),g=(u?l.getElementDataByState("combo",u):l.getComboData()).filter(d),m=this.isZoomEvent(s)?this.zoom=Math.max(.01,Math.min(s.data.scale,10)):this.zoom,b=[...v,...g];b.length>0&&b.forEach(E=>this.fixNodeLike(E,m)),this.updateRelatedEdges(),p.length>0&&p.forEach(E=>this.fixEdge(E,m))}),this.cachedStyles=new Map,this.getOriginalFieldValue=(s,l,u)=>{var h;const f=this.cachedStyles.get(s)||[],d=((h=f.find(v=>v.shape===l))===null||h===void 0?void 0:h.style)||{};return u in d||(d[u]=l.attributes[u],this.cachedStyles.set(s,[...f.filter(v=>v.shape!==l),{shape:l,style:d}])),d[u]},this.scaleEntireElement=(s,l,u)=>{l.setLocalScale(1/u);const h=this.cachedStyles.get(s)||[];h.push({shape:l}),this.cachedStyles.set(s,h)},this.scaleSpecificShapes=(s,l,u)=>{const h=mR(s);(Array.isArray(u)?u:[u]).forEach(d=>{const{shape:v,fields:p}=d,g=typeof v=="function"?v(h):s.getShape(v);if(g){if(!p){this.scaleEntireElement(s.id,g,l);return}p.forEach(m=>{const b=this.getOriginalFieldValue(s.id,g,m);(0,tn.Z)(b)&&(g.style[m]=b/l)})}})},this.skipIfExceedViewport=s=>{const{viewport:l}=this.context;return!(l!=null&&l.isInViewport(s.getRenderBounds(),!1,30))},this.fixNodeLike=(s,l)=>{const u=tt(s),{element:h,model:f}=this.context,d=h.getElement(u);if(!d||this.skipIfExceedViewport(d))return;f.getRelatedEdgesData(u).forEach(g=>this.relatedEdgeToUpdate.add(tt(g)));const p=this.options[d.type];if(!p){this.scaleEntireElement(u,d,l);return}this.scaleSpecificShapes(d,l,p)},this.fixEdge=(s,l)=>{const u=tt(s),h=this.context.element.getElement(u);if(!h||this.skipIfExceedViewport(h))return;const f=this.options.edge;if(!f){h.style.transformOrigin="center",this.scaleEntireElement(u,h,l);return}this.scaleSpecificShapes(h,l,f)},this.updateRelatedEdges=()=>{const{element:s}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(l=>{const u=s.getElement(l);u==null||u.update({})}),this.relatedEdgeToUpdate.clear()},this.resetTransform=s=>gC(this,void 0,void 0,function*(){var l;!((l=s.data)===null||l===void 0)&&l.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))}),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(l=>{l.forEach(({shape:u,style:h})=>{if(Po(h))u.setLocalScale(1);else{if(this.options.state)return;Object.entries(h).forEach(([f,d])=>u.style[f]=d)}})});const{graph:n,element:r}=this.context,s=Object.keys(Object.fromEntries(this.cachedStyles)).filter(l=>l&&n.getElementType(l)==="node");if(s.length>0){const l=new Set;s.forEach(u=>{n.getRelatedEdgesData(u).forEach(h=>l.add(tt(h)))}),l.forEach(u=>{const h=r==null?void 0:r.getElement(u);h==null||h.update({})})}}}bindEvents(){const{graph:n}=this.context;n.on(Pt.AFTER_DRAW,this.resetTransform),n.on(Pt.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){const{graph:n}=this.context;n.off(Pt.AFTER_DRAW,this.resetTransform),n.off(Pt.AFTER_TRANSFORM,this.fixElementSize)}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}destroy(){this.unbindEvents(),super.destroy()}}dy.defaultOptions={enable:a=>a.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var _L=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class vy extends Xa{constructor(n,r){super(n,Object.assign({},vy.defaultOptions,r)),this.focus=s=>_L(this,void 0,void 0,function*(){if(!this.validate(s))return;const{graph:l}=this.context;yield l.focusElement(s.target.id,this.options.animation)}),this.bindEvents()}bindEvents(){const{graph:n}=this.context;this.unbindEvents(),Eu.forEach(r=>{n.on(`${r}:${pt.CLICK}`,this.focus)})}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}unbindEvents(){const{graph:n}=this.context;Eu.forEach(r=>{n.off(`${r}:${pt.CLICK}`,this.focus)})}destroy(){this.unbindEvents(),super.destroy()}}vy.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};class vf extends Xa{constructor(n,r){super(n,Object.assign({},vf.defaultOptions,r)),this.isFrozen=!1,this.toggleFrozen=s=>{this.isFrozen=s.type==="dragstart"},this.hoverElement=s=>{if(!this.validate(s))return;const l=s.type===pt.POINTER_ENTER;this.updateElementsState(s,l);const{onHover:u,onHoverEnd:h}=this.options;l?u==null||u(s):h==null||h(s)},this.updateElementsState=(s,l)=>{if(!this.options.state&&!this.options.inactiveState)return;const{graph:u}=this.context,{state:h,animation:f,inactiveState:d}=this.options,v=this.getActiveIds(s),p={};if(h&&Object.assign(p,this.getElementsState(v,h,l)),d){const g=aM(u.getData(),!0).filter(m=>!v.includes(m));Object.assign(p,this.getElementsState(g,d,l))}u.setElementState(p,f)},this.getElementsState=(s,l,u)=>{const{graph:h}=this.context,f={};return s.forEach(d=>{const v=h.getElementState(d);u?f[d]=v.includes(l)?v:[...v,l]:f[d]=v.filter(p=>p!==l)}),f},this.bindEvents()}bindEvents(){const{graph:n}=this.context;this.unbindEvents(),Eu.forEach(s=>{n.on(`${s}:${pt.POINTER_ENTER}`,this.hoverElement),n.on(`${s}:${pt.POINTER_LEAVE}`,this.hoverElement)});const r=this.context.canvas.document;r.addEventListener(`${pt.DRAG_START}`,this.toggleFrozen),r.addEventListener(`${pt.DRAG_END}`,this.toggleFrozen)}getActiveIds(n){const{graph:r}=this.context,{degree:s,direction:l}=this.options,u=n.target.id;return s?xM(r,n.targetType,u,typeof s=="function"?s(n):s,l):[u]}validate(n){if(this.destroyed||this.isFrozen||Sv(n.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}unbindEvents(){const{graph:n}=this.context;Eu.forEach(s=>{n.off(`${s}:${pt.POINTER_ENTER}`,this.hoverElement),n.off(`${s}:${pt.POINTER_LEAVE}`,this.hoverElement)});const r=this.context.canvas.document;r.removeEventListener(`${pt.DRAG_START}`,this.toggleFrozen),r.removeEventListener(`${pt.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}}vf.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};class ML extends hv{onPointerDown(n){if(!super.validate(n)||!super.isKeydown()||this.points)return;const{canvas:r}=this.context;this.pathShape=new na({id:"g6-lasso-select",style:this.options.style}),r.appendChild(this.pathShape),this.points=[Ig(n)]}onPointerMove(n){var r;if(!this.points)return;const{immediately:s,mode:l}=this.options;this.points.push(Ig(n)),(r=this.pathShape)===null||r===void 0||r.setAttribute("d",dR(this.points)),s&&l==="default"&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return}super.updateElementsStates(this.points),this.clearLasso()}}clearLasso(){var n;(n=this.pathShape)===null||n===void 0||n.remove(),this.pathShape=void 0,this.points=void 0}}class py extends Xa{constructor(n,r){super(n,Object.assign({},py.defaultOptions,r)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(s,l,u)=>{s.filter(Boolean).forEach(h=>{l==="hidden"&&!h.isVisible()?this.hiddenShapes.push(h):l==="visible"&&this.hiddenShapes.includes(h)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(h),1):bu(h,l,u)})},this.filterShapes=(s,l)=>{if((0,re.Z)(l))return h=>!l(s,h);const u=l==null?void 0:l[s];return h=>h.className?!(u!=null&&u.includes(h.className)):!0},this.hideShapes=s=>{if(!this.validate(s)||!this.isVisible)return;const{element:l}=this.context,{shapes:u={}}=this.options;this.setElementsVisibility(l.getNodes(),"hidden",this.filterShapes("node",u)),this.setElementsVisibility(l.getEdges(),"hidden",this.filterShapes("edge",u)),this.setElementsVisibility(l.getCombos(),"hidden",this.filterShapes("combo",u)),this.isVisible=!1},this.showShapes=_v(s=>{if(!this.validate(s)||this.isVisible)return;const{element:l}=this.context;this.setElementsVisibility(l.getNodes(),"visible"),this.setElementsVisibility(l.getEdges(),"visible"),this.setElementsVisibility(l.getCombos(),"visible"),this.isVisible=!0},this.options.debounce),this.bindEvents()}bindEvents(){const{graph:n}=this.context;n.on(Pt.BEFORE_TRANSFORM,this.hideShapes),n.on(Pt.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){const{graph:n}=this.context;n.off(Pt.BEFORE_TRANSFORM,this.hideShapes),n.off(Pt.AFTER_TRANSFORM,this.showShapes)}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}update(n){this.unbindEvents(),super.update(n),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}py.defaultOptions={enable:!0,debounce:200,shapes:a=>a==="node"};var yC=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class gy extends Xa{constructor(n,r){super(n,Object.assign({},gy.defaultOptions,r)),this.onWheel=s=>yC(this,void 0,void 0,function*(){this.options.preventDefault&&s.preventDefault();const l=s.deltaX,u=s.deltaY;yield this.scroll([-l,-u],s)}),this.shortcut=new uf(n.graph),this.bindEvents()}update(n){super.update(n),this.bindEvents()}bindEvents(){var n,r;const{trigger:s}=this.options;if(this.shortcut.unbindAll(),(0,ai.Z)(s)){(n=this.graphDom)===null||n===void 0||n.removeEventListener(pt.WHEEL,this.onWheel);const{up:l=[],down:u=[],left:h=[],right:f=[]}=s;this.shortcut.bind(l,d=>this.scroll([0,-10],d)),this.shortcut.bind(u,d=>this.scroll([0,10],d)),this.shortcut.bind(h,d=>this.scroll([-10,0],d)),this.shortcut.bind(f,d=>this.scroll([10,0],d))}else(r=this.graphDom)===null||r===void 0||r.addEventListener(pt.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(n){const{sensitivity:r}=this.options;return n=Us(n,r),n=this.clampByDirection(n),n=this.clampByRange(n),n}clampByDirection([n,r]){const{direction:s}=this.options;return s==="x"?r=0:s==="y"&&(n=0),[n,r]}clampByRange([n,r]){const{viewport:s,canvas:l}=this.context,[u,h]=l.getSize(),[f,d,v,p]=$s(this.options.range),g=[h*f,u*d,h*v,u*p],m=cc(zE(s.getCanvasCenter()),g),b=Nn(s.getViewportCenter(),[n,r,0]);if(!Hs(b,m)){const{min:[E,w],max:[S,M]}=m;(b[0]<E&&n>0||b[0]>S&&n<0)&&(n=0),(b[1]<w&&r>0||b[1]>M&&r<0)&&(r=0)}return[n,r]}scroll(n,r){return yC(this,void 0,void 0,function*(){if(!this.validate(r))return;const{onFinish:s}=this.options,l=this.context.graph,u=this.formatDisplacement(n);yield l.translateBy(u,!1),s==null||s()})}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}destroy(){var n;this.shortcut.destroy(),(n=this.graphDom)===null||n===void 0||n.removeEventListener(pt.WHEEL,this.onWheel),super.destroy()}}gy.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var mC=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class yy extends Xa{constructor(n,r){super(n,Object.assign({},yy.defaultOptions,r)),this.zoom=(s,l,u)=>mC(this,void 0,void 0,function*(){if(!this.validate(l))return;const{graph:h}=this.context;let f=this.options.origin;!f&&"viewport"in l&&(f=Oi(l.viewport));const{sensitivity:d,onFinish:v}=this.options,p=1+Le(s,-50,50)*d/100,g=h.getZoom();yield h.zoomTo(g*p,u,f),v==null||v()}),this.onReset=()=>mC(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation)}),this.preventDefault=s=>{this.options.preventDefault&&s.preventDefault()},this.shortcut=new uf(n.graph),this.bindEvents()}update(n){super.update(n),this.bindEvents()}bindEvents(){const{trigger:n}=this.options;if(this.shortcut.unbindAll(),Array.isArray(n))if(n.includes(pt.PINCH))this.shortcut.bind([pt.PINCH],r=>{this.zoom(r.scale,r,!1)});else{const r=this.context.canvas.getContainer();r==null||r.addEventListener(pt.WHEEL,this.preventDefault),this.shortcut.bind([...n,pt.WHEEL],s=>{const{deltaX:l,deltaY:u}=s;this.zoom(-(u!=null?u:l),s,!1)})}if(typeof n=="object"){const{zoomIn:r=[],zoomOut:s=[],reset:l=[]}=n;this.shortcut.bind(r,u=>this.zoom(10,u,this.options.animation)),this.shortcut.bind(s,u=>this.zoom(-10,u,this.options.animation)),this.shortcut.bind(l,this.onReset)}}validate(n){if(this.destroyed)return!1;const{enable:r}=this.options;return(0,re.Z)(r)?r(n):!!r}destroy(){var n;this.shortcut.destroy(),(n=this.context.canvas.getContainer())===null||n===void 0||n.removeEventListener(pt.WHEEL,this.preventDefault),super.destroy()}}yy.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};var my=K(81746),CL=K(45978),TL=K(63795),OL=K(63757),AL=K(5192),kL=K(58745),PL=K(21183),RL=K(40476),NL=K(70979),LL=K(89469),IL=K(41733),DL=K(64912),BL=K(29257),FL=K(26629);function zL(a){var n,r,s,l=a||1;function u(f,d){++n>l&&(s=r,h(1),++n),r[f]=d}function h(f){n=0,r=Object.create(null),f||(s=Object.create(null))}return h(),{clear:h,has:function(f){return r[f]!==void 0||s[f]!==void 0},get:function(f){var d=r[f];if(d!==void 0)return d;if((d=s[f])!==void 0)return u(f,d),d},set:function(f,d){r[f]!==void 0?r[f]=d:u(f,d)}}}var k2=new Map;function P2(a,n,r){r===void 0&&(r=128);var s=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var h=n?n.apply(this,l):l[0];k2.has(a)||k2.set(a,zL(r));var f=k2.get(a);if(f.has(h))return f.get(h);var d=a.apply(this,l);return f.set(h,d),d};return s}var ZL=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class by extends hy{constructor(){super(...arguments),this.id="fishbone"}getRoot(){const n=this.context.model.getRootsData();if(!(Po(n)||n.length>2))return n[0]}formatSize(n){const r=typeof n=="function"?n:()=>n;return s=>Ta(r(s))}doLayout(n,r){const{hGap:s,getRibSep:l,vGap:u,nodeSize:h,height:f}=r,{model:d}=this.context,v=this.formatSize(h);let p=v(n)[0]+l(n);const g=(T,k=0)=>{var O;return k+=s*((T.children||[]).length+1),(O=T.children)===null||O===void 0||O.forEach(A=>{var R;(R=d.getNodeLikeDatum(A).children)===null||R===void 0||R.forEach(D=>{const z=d.getNodeLikeDatum(D);k=g(z,k)})}),k},m=T=>{if(T.depth===1)return p;const k=d.getParentData(T.id,"tree");if(pf(T)){const O=d.getParentData(k.id,"tree"),A=w(T)-w(O);return m(k)+A*s/u}else{const O=(k.children||[]).indexOf(T.id),A=d.getNodeData((k.children||[]).slice(O));return b(k)-A.reduce((R,L)=>R+g(L),0)-v(k)[0]/2}},b=P2(T=>{if(R2(T))return v(T)[0]/2;const k=d.getParentData(T.id,"tree");if(pf(T))return m(T)+g(T)+v(T)[0]/2;{const O=w(T)-w(k),A=s/u;return m(T)+O*A}},T=>T.id),E=T=>w(d.getParentData(T,"tree")),w=P2(T=>{if(R2(T))return f/2;if(pf(T)){const k=d.getParentData(T.id,"tree"),O=k.children.indexOf(T.id);if(O===0)return E(k.id)+u;const A=d.getNodeLikeDatum(k.children[O-1]);if(Po(A.children))return w(A)+u;const R=d.getDescendantsData(A.id);return Math.max(...R.map(L=>pf(L)?E(L.id):w(L)))+u}else{if(Po(T.children))return E(T.id)+u;const k=d.getNodeLikeDatum(T.children.slice(-1)[0]);if(Po(k.children))return w(k)+u;const O=d.getDescendantsData(T.id).slice(-1)[0];return(pf(O)?E(O.id):w(O))+u}},T=>T.id);let S=0;const M={nodes:[],edges:[]},C=T=>{var k;(k=T.children)===null||k===void 0||k.forEach(D=>C(d.getNodeLikeDatum(D)));const O=w(T),A=b(T);if(M.nodes.push({id:T.id,x:A,y:O}),R2(T))return;const R=d.getRelatedEdgesData(T.id,"in")[0],L=[m(T),pf(T)?O:E(T.id)];M.edges.push({id:tt(R),controlPoints:[L],relatedNodeId:T.id}),S=Math.max(S,A+l(T)),T.depth===1&&(p=S)};return C(n),M}placeAlterative(n,r){const s=(r.children||[]).filter((f,d)=>d%2!==0);if(s.length===0)return n;const{model:l}=this.context,u=n.nodes.find(f=>f.id===r.id).y,h=f=>{const d=l.getAncestorsData(f,"tree");if(Po(d))return!1;const v=d.length===1?f:d[d.length-2].id;return s.includes(v)};n.nodes.forEach(f=>{h(f.id)&&(f.y=2*u-f.y)}),n.edges.forEach(f=>{h(f.relatedNodeId)&&(f.controlPoints=f.controlPoints.map(d=>[d[0],2*u-d[1]]))})}rightToLeft(n,r){return n.nodes.forEach(s=>s.x=r.width-s.x),n.edges.forEach(s=>{s.controlPoints=s.controlPoints.map(l=>[r.width-l[0],l[1]])}),n}execute(n,r){return ZL(this,void 0,void 0,function*(){const s=Object.assign(Object.assign(Object.assign({},by.defaultOptions),this.options),r),{direction:l,nodeSize:u}=s,h=this.getRoot();if(!h)return n;const f=this.formatSize(u);s.vGap||(s.vGap=Math.max(...(n.nodes||[]).map(m=>f(m)[1]))),s.hGap||(s.hGap=Math.max(...(n.nodes||[]).map(m=>f(m)[0])));let d=this.doLayout(h,s);this.placeAlterative(d,h),l==="RL"&&(d=this.rightToLeft(d,s));const{model:v}=this.context,p=[],g=[];return d.nodes.forEach(m=>{const{id:b,x:E,y:w}=m,S=v.getNodeLikeDatum(b);p.push(bC(S,{x:E,y:w}))}),d.edges.forEach(m=>{const{id:b,controlPoints:E}=m,w=v.getEdgeDatum(b);g.push(bC(w,{controlPoints:E}))}),{nodes:p,edges:g}})}}by.defaultOptions={direction:"RL",getRibSep:()=>60};const bC=(a,n)=>Object.assign(Object.assign({},a),{style:Object.assign(Object.assign({},a.style||{}),n)}),R2=a=>a.depth===0,pf=a=>(a.depth||(a.depth=0))%2===0;var WL=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class xy extends hy{constructor(){super(...arguments),this.id="snake"}formatSize(n,r){const s=typeof r=="function"?r:()=>r;return n.reduce((l,u)=>{const[h,f]=Ta(s(u))||[0,0];return[Math.max(l[0],h),Math.max(l[1],f)]},[0,0])}validate(n){const{nodes:r=[],edges:s=[]}=n,l={},u={},h={};r.forEach(m=>{l[m.id]=0,u[m.id]=0,h[m.id]=[]}),s.forEach(m=>{l[m.target]++,u[m.source]++,h[m.source].push(m.target)});const f=new Set,d=m=>{f.has(m)||(f.add(m),h[m].forEach(d))};if(d(r[0].id),f.size!==r.length)return!1;const v=r.filter(m=>l[m.id]===0),p=r.filter(m=>u[m.id]===0);return!(v.length!==1||p.length!==1||r.filter(m=>l[m.id]===1&&u[m.id]===1).length!==r.length-2)}execute(n,r){return WL(this,void 0,void 0,function*(){var s;if(!this.validate(n))return n;const{nodeSize:l,padding:u,sortBy:h,cols:f,colGap:d,rowGap:v,clockwise:p,width:g,height:m}=Object.assign({},xy.defaultOptions,this.options,r),[b,E,w,S]=$s(u),M=this.formatSize(n.nodes||[],l),C=Math.ceil((n.nodes||[]).length/f);let T=d||(g-S-E-f*M[0])/(f-1),k=v||(m-b-w-C*M[1])/(C-1);return(k===1/0||k<0)&&(k=0),(T===1/0||T<0)&&(T=0),{nodes:((h?(s=n.nodes)===null||s===void 0?void 0:s.sort(h):GL(n))||[]).map((R,L)=>{const D=Math.floor(L/f),z=L%f,W=p?D%2===0?z:f-1-z:D%2===0?f-1-z:z,G=S+W*(M[0]+T)+M[0]/2,Y=b+D*(M[1]+k)+M[1]/2;return{id:R.id,style:{x:G,y:Y}}})}})}}xy.defaultOptions={padding:0,cols:5,clockwise:!0};function GL(a){const{nodes:n=[],edges:r=[]}=a,s={},l={};n.forEach(f=>{s[f.id]=0,l[f.id]=[]}),r.forEach(f=>{s[f.target]++,l[f.source].push(f.target)});const u=[],h=[];for(n.forEach(f=>{s[f.id]===0&&u.push(f.id)});u.length>0;){const f=u.shift(),d=n.find(v=>v.id===f);h.push(d),l[f].forEach(v=>{s[v]--,s[v]===0&&u.push(v)})}return h}const jL=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],$L=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],HL=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],VL=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],UL=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];var YL=K(15255),N2=K(83845),XL=function(a,n,r){if(!(0,za.Z)(a)&&!(0,N2.Z)(a))return a;var s=r;return(0,YL.Z)(a,function(l,u){s=n(s,l,u)}),s},KL=XL,L2=function(a,n){return KL(a,function(r,s,l){return n.includes(l)||(r[l]=s),r},{})};class Ai extends QE{}function gf(a,n=!0,r){const s=document.createElement("div");return s.setAttribute("class",`g6-${a}`),Object.assign(s.style,{position:"absolute",display:"block"}),n&&Object.assign(s.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),r&&Object.assign(s.style,r),s}function I2(a,n="div",r={},s="",l=document.body){const u=document.getElementById(a);u&&u.remove();const h=document.createElement(n);return h.innerHTML=s,h.id=a,Object.assign(h.style,r),l.appendChild(h),h}var qL=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class Ey extends Ai{constructor(n,r){super(n,Object.assign({},Ey.defaultOptions,r)),this.$element=gf("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(r)}update(n){const r=Object.create(null,{update:{get:()=>super.update}});return qL(this,void 0,void 0,function*(){r.update.call(this,n),Object.assign(this.$element.style,L2(this.options,["key","type"]))})}destroy(){super.destroy(),this.$element.remove()}}Ey.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};function D2(a,n,r,s,l,u){const h=a,f=n,d=r-h,v=s-f;let p=l-h,g=u-f,m=p*d+g*v,b=0;m<=0?b=0:(p=d-p,g=v-g,m=p*d+g*v,m<=0?b=0:b=m*m/(d*d+v*v));const E=p*p+g*g-b;return E<0?0:E}function yc(a,n,r,s){return(a-r)*(a-r)+(n-s)*(n-s)}function xC(a,n,r,s,l){return yc(a,n,r,s)<l*l}function QL(a){if(!Number.isFinite(a))return r=>r;if(a===0)return Math.round;const n=Math.pow(10,a);return r=>Math.round(r*n)/n}function EC(a){const n=Math.min(a.x1,a.x2),r=Math.max(a.x1,a.x2),s=Math.min(a.y1,a.y2),l=Math.max(a.y1,a.y2);return{x:n,y:s,x2:r,y2:l,width:r-n,height:l-s}}class ci{constructor(n,r,s,l){this.x1=n,this.y1=r,this.x2=s,this.y2=l}equals(n){return this.x1===n.x1&&this.y1===n.y1&&this.x2===n.x2&&this.y2===n.y2}draw(n){n.moveTo(this.x1,this.y1),n.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(n){return new ci(n.x1,n.y1,n.x2,n.y2)}cuts(n,r){if(this.y1===this.y2||r<this.y1&&r<=this.y2||r>this.y1&&r>=this.y2||n>this.x1&&n>=this.x2)return!1;if(n<this.x1&&n<=this.x2)return!0;const s=this.x1+(r-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return n<=s}distSquare(n,r){return D2(this.x1,this.y1,this.x2,this.y2,n,r)}ptClose(n,r,s){if(this.x1<this.x2){if(n<this.x1-s||n>this.x2+s)return!1}else if(n<this.x2-s||n>this.x1+s)return!1;if(this.y1<this.y2){if(r<this.y1-s||r>this.y2+s)return!1}else if(r<this.y2-s||r>this.y1+s)return!1;return!0}}var Er;(function(a){a[a.POINT=1]="POINT",a[a.PARALLEL=2]="PARALLEL",a[a.COINCIDENT=3]="COINCIDENT",a[a.NONE=4]="NONE"})(Er||(Er={}));class B2{constructor(n,r=0,s=0){this.state=n,this.x=r,this.y=s}}function wy(a,n){const r=(n.x2-n.x1)*(a.y1-n.y1)-(n.y2-n.y1)*(a.x1-n.x1),s=(a.x2-a.x1)*(a.y1-n.y1)-(a.y2-a.y1)*(a.x1-n.x1),l=(n.y2-n.y1)*(a.x2-a.x1)-(n.x2-n.x1)*(a.y2-a.y1);if(l){const u=r/l,h=s/l;return 0<=u&&u<=1&&0<=h&&h<=1?new B2(Er.POINT,a.x1+u*(a.x2-a.x1),a.y1+u*(a.y2-a.y1)):new B2(Er.NONE)}return new B2(r===0||s===0?Er.COINCIDENT:Er.PARALLEL)}function wC(a,n){const r=(n.x2-n.x1)*(a.y1-n.y1)-(n.y2-n.y1)*(a.x1-n.x1),s=(a.x2-a.x1)*(a.y1-n.y1)-(a.y2-a.y1)*(a.x1-n.x1),l=(n.y2-n.y1)*(a.x2-a.x1)-(n.x2-n.x1)*(a.y2-a.y1);if(l){const u=r/l,h=s/l;if(0<=u&&u<=1&&0<=h&&h<=1)return u}return Number.POSITIVE_INFINITY}function JL(a,n){function r(l,u,h,f){let d=wC(n,new ci(l,u,h,f));return d=Math.abs(d-.5),d>=0&&d<=1?1:0}let s=r(a.x,a.y,a.x2,a.y);return s+=r(a.x,a.y,a.x,a.y2),s>1||(s+=r(a.x,a.y2,a.x2,a.y2),s>1)?!0:(s+=r(a.x2,a.y,a.x2,a.y2),s>0)}var wr;(function(a){a[a.LEFT=0]="LEFT",a[a.TOP=1]="TOP",a[a.RIGHT=2]="RIGHT",a[a.BOTTOM=3]="BOTTOM"})(wr||(wr={}));function Sy(a,n,r){const s=new Set;return a.width<=0?(s.add(wr.LEFT),s.add(wr.RIGHT)):n<a.x?s.add(wr.LEFT):n>a.x+a.width&&s.add(wr.RIGHT),a.height<=0?(s.add(wr.TOP),s.add(wr.BOTTOM)):r<a.y?s.add(wr.TOP):r>a.y+a.height&&s.add(wr.BOTTOM),s}function SC(a,n){let r=n.x1,s=n.y1;const l=n.x2,u=n.y2,h=Array.from(Sy(a,l,u));if(h.length===0)return!0;let f=Sy(a,r,s);for(;f.size!==0;){for(const d of h)if(f.has(d))return!1;if(f.has(wr.RIGHT)||f.has(wr.LEFT)){let d=a.x;f.has(wr.RIGHT)&&(d+=a.width),s=s+(d-r)*(u-s)/(l-r),r=d}else{let d=a.y;f.has(wr.BOTTOM)&&(d+=a.height),r=r+(d-s)*(l-r)/(u-s),s=d}f=Sy(a,r,s)}return!0}function tI(a,n){let r=Number.POSITIVE_INFINITY,s=0;function l(u,h,f,d){let v=wC(n,new ci(u,h,f,d));v=Math.abs(v-.5),v>=0&&v<=1&&(s++,v<r&&(r=v))}return l(a.x,a.y,a.x2,a.y),l(a.x,a.y,a.x,a.y2),s>1||(l(a.x,a.y2,a.x2,a.y2),s>1)?r:(l(a.x2,a.y,a.x2,a.y2),s===0?-1:r)}function eI(a,n){let r=0;const s=wy(a,new ci(n.x,n.y,n.x2,n.y));r+=s.state===Er.POINT?1:0;const l=wy(a,new ci(n.x,n.y,n.x,n.y2));r+=l.state===Er.POINT?1:0;const u=wy(a,new ci(n.x,n.y2,n.x2,n.y2));r+=u.state===Er.POINT?1:0;const h=wy(a,new ci(n.x2,n.y,n.x2,n.y2));return r+=h.state===Er.POINT?1:0,{top:s,left:l,bottom:u,right:h,count:r}}class $i{constructor(n,r,s,l){this.x=n,this.y=r,this.width=s,this.height=l}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(n){return new $i(n.x,n.y,n.width,n.height)}equals(n){return this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height}clone(){return new $i(this.x,this.y,this.width,this.height)}add(n){const r=Math.min(this.x,n.x),s=Math.min(this.y,n.y),l=Math.max(this.x2,n.x+n.width),u=Math.max(this.y2,n.y+n.height);this.x=r,this.y=s,this.width=l-r,this.height=u-s}addPoint(n){const r=Math.min(this.x,n.x),s=Math.min(this.y,n.y),l=Math.max(this.x2,n.x),u=Math.max(this.y2,n.y);this.x=r,this.y=s,this.width=l-r,this.height=u-s}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(n){n.rect(this.x,this.y,this.width,this.height)}containsPt(n,r){return n>=this.x&&n<=this.x2&&r>=this.y&&r<=this.y2}get area(){return this.width*this.height}intersects(n){return this.area<=0||n.width<=0||n.height<=0?!1:n.x+n.width>this.x&&n.y+n.height>this.y&&n.x<this.x2&&n.y<this.y2}distSquare(n,r){if(this.containsPt(n,r))return 0;const s=Sy(this,n,r);return s.has(wr.TOP)?s.has(wr.LEFT)?yc(n,r,this.x,this.y):s.has(wr.RIGHT)?yc(n,r,this.x2,this.y):(this.y-r)*(this.y-r):s.has(wr.BOTTOM)?s.has(wr.LEFT)?yc(n,r,this.x,this.y2):s.has(wr.RIGHT)?yc(n,r,this.x2,this.y2):(r-this.y2)*(r-this.y2):s.has(wr.LEFT)?(this.x-n)*(this.x-n):s.has(wr.RIGHT)?(n-this.x2)*(n-this.x2):0}}function nI(a){if(a.length===0)return null;const n=a[0],r=new $i(n.x,n.y,0,0);for(const s of a)r.addPoint(s);return r}class _y{constructor(n,r,s){this.cx=n,this.cy=r,this.radius=s}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return this.radius*2}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return this.radius*2}static from(n){return new _y(n.cx,n.cy,n.radius)}containsPt(n,r){return yc(this.cx,this.cy,n,r)<this.radius*this.radius}distSquare(n,r){const s=yc(this.cx,this.cy,n,r);if(s<this.radius*this.radius)return 0;const l=Math.sqrt(s)-this.radius;return l*l}draw(n){n.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Math.PI*2)}}class Tu{constructor(n,r=0,s=0,l=0,u=0,h=10,f=10,d=new Float32Array(Math.max(0,h*f)).fill(0)){this.pixelGroup=n,this.i=r,this.j=s,this.pixelX=l,this.pixelY=u,this.width=h,this.height=f,this.area=d}createSub(n,r){return new Tu(this.pixelGroup,n.x,n.y,r.x,r.y,n.width,n.height)}static fromPixelRegion(n,r){return new Tu(r,0,0,n.x,n.y,Math.ceil(n.width/r),Math.ceil(n.height/r))}copy(n,r){return new Tu(this.pixelGroup,this.scaleX(r.x),this.scaleY(r.y),r.x,r.y,n.width,n.height,n.area)}boundX(n){return n<this.i?this.i:n>=this.width?this.width-1:n}boundY(n){return n<this.j?this.j:n>=this.height?this.height-1:n}scaleX(n){return this.boundX(Math.floor((n-this.pixelX)/this.pixelGroup))}scaleY(n){return this.boundY(Math.floor((n-this.pixelY)/this.pixelGroup))}scale(n){const r=this.scaleX(n.x),s=this.scaleY(n.y),l=this.boundX(Math.ceil((n.x+n.width-this.pixelX)/this.pixelGroup)),u=this.boundY(Math.ceil((n.y+n.height-this.pixelY)/this.pixelGroup)),h=l-r,f=u-s;return new $i(r,s,h,f)}invertScaleX(n){return Math.round(n*this.pixelGroup+this.pixelX)}invertScaleY(n){return Math.round(n*this.pixelGroup+this.pixelY)}addPadding(n,r){const s=Math.ceil(r/this.pixelGroup),l=this.boundX(n.x-s),u=this.boundY(n.y-s),h=this.boundX(n.x2+s),f=this.boundY(n.y2+s),d=h-l,v=f-u;return new $i(l,u,d,v)}get(n,r){return n<0||r<0||n>=this.width||r>=this.height?Number.NaN:this.area[n+r*this.width]}inc(n,r,s){n<0||r<0||n>=this.width||r>=this.height||(this.area[n+r*this.width]+=s)}set(n,r,s){n<0||r<0||n>=this.width||r>=this.height||(this.area[n+r*this.width]=s)}incArea(n,r){if(n.width<=0||n.height<=0||r===0)return;const s=this.width,l=n.width,u=Math.max(0,n.i),h=Math.max(0,n.j),f=Math.min(n.i+n.width,s),d=Math.min(n.j+n.height,this.height);if(!(d<=0||f<=0||u>=s||d>=this.height))for(let v=h;v<d;v++){const p=(v-n.j)*l,g=v*s;for(let m=u;m<f;m++){const b=n.area[m-n.i+p];b!==0&&(this.area[m+g]+=r*b)}}}fill(n){this.area.fill(n)}fillArea(n,r){const s=n.x+n.y*this.width;for(let l=0;l<n.height;l++){const u=s+l*this.width;this.area.fill(r,u,u+n.width)}}fillHorizontalLine(n,r,s,l){const u=n+r*this.width;this.area.fill(l,u,u+s)}fillVerticalLine(n,r,s,l){const u=n+r*this.width;for(let h=0;h<s;h++)this.area[u+h*this.width]=l}clear(){this.area.fill(0)}toString(){let n="";for(let r=0;r<this.height;r++){const s=r*this.width;for(let l=0;l<this.width;l++){const u=this.area[s+l];n+=u.toFixed(1).padStart(6),n+=" "}n+=`
`}return n}draw(n,r=!0){if(this.width<=0||this.height<=0)return;n.save(),r&&n.translate(this.pixelX,this.pixelY);const s=this.area.reduce((h,f)=>Math.min(h,f),Number.POSITIVE_INFINITY),l=this.area.reduce((h,f)=>Math.max(h,f),Number.NEGATIVE_INFINITY),u=h=>(h-s)/(l-s);n.scale(this.pixelGroup,this.pixelGroup);for(let h=0;h<this.width;h++)for(let f=0;f<this.height;f++){const d=this.area[h+f*this.width];n.fillStyle=`rgba(0, 0, 0, ${u(d)})`,n.fillRect(h,f,1,1)}n.restore()}drawThreshold(n,r,s=!0){if(!(this.width<=0||this.height<=0)){n.save(),s&&n.translate(this.pixelX,this.pixelY),n.scale(this.pixelGroup,this.pixelGroup);for(let l=0;l<this.width;l++)for(let u=0;u<this.height;u++){const h=this.area[l+u*this.width];n.fillStyle=h>r?"black":"white",n.fillRect(l,u,1,1)}n.restore()}}}function _C(a,n){const r=s=>({x:s.x-n,y:s.y-n,width:s.width+2*n,height:s.height+2*n});return Array.isArray(a)?a.map(r):r(a)}function MC(a,n,r){return CC(Object.assign(EC(a),{distSquare:(s,l)=>D2(a.x1,a.y1,a.x2,a.y2,s,l)}),n,r)}function CC(a,n,r){const s=_C(a,r),l=n.scale(s),u=n.createSub(l,s);return rI(u,n,r,(h,f)=>a.distSquare(h,f)),u}function rI(a,n,r,s){const l=r*r;for(let u=0;u<a.height;u++)for(let h=0;h<a.width;h++){const f=n.invertScaleX(a.i+h),d=n.invertScaleY(a.j+u),v=s(f,d);if(v===0){a.set(h,u,l);continue}if(v<l){const p=r-Math.sqrt(v);a.set(h,u,p*p)}}return a}function iI(a,n,r){const s=n.scale(a),l=n.addPadding(s,r),u=n.createSub(l,{x:a.x-r,y:a.y-r}),h=s.x-l.x,f=s.y-l.y,d=l.x2-s.x2,v=l.y2-s.y2,p=l.width-h-d,g=l.height-f-v,m=r*r;u.fillArea({x:h,y:f,width:p+1,height:g+1},m);const b=[0],E=Math.max(f,h,d,v);{const C=n.invertScaleX(s.x+s.width/2);for(let T=1;T<E;T++){const k=n.invertScaleY(s.y-T),O=a.distSquare(C,k);if(O<m){const A=r-Math.sqrt(O);b.push(A*A)}else break}}const w=[],S=Math.max(h,d),M=Math.max(f,d);for(let C=1;C<S;C++){const T=n.invertScaleX(s.x-C),k=[];for(let O=1;O<M;O++){const A=n.invertScaleY(s.y-O),R=a.distSquare(T,A);if(R<m){const L=r-Math.sqrt(R);k.push(L*L)}else k.push(0)}w.push(k)}for(let C=1;C<Math.min(f,b.length);C++){const T=b[C];u.fillHorizontalLine(h,f-C,p+1,T)}for(let C=1;C<Math.min(v,b.length);C++){const T=b[C];u.fillHorizontalLine(h,f+g+C,p+1,T)}for(let C=1;C<Math.min(h,b.length);C++){const T=b[C];u.fillVerticalLine(h-C,f,g+1,T)}for(let C=1;C<Math.min(v,b.length);C++){const T=b[C];u.fillVerticalLine(h+p+C,f,g+1,T)}for(let C=1;C<h;C++){const T=w[C-1],k=h-C;for(let O=1;O<f;O++)u.set(k,f-O,T[O-1]);for(let O=1;O<v;O++)u.set(k,f+g+O,T[O-1])}for(let C=1;C<d;C++){const T=w[C-1],k=h+p+C;for(let O=1;O<f;O++)u.set(k,f-O,T[O-1]);for(let O=1;O<v;O++)u.set(k,f+g+O,T[O-1])}return u}function JZ(a,n,r,s){return{x:a,y:n,width:r,height:s}}function t7(a,n,r){return{cx:a,cy:n,radius:r}}function e7(a,n,r,s){return{x1:a,y1:n,x2:r,y2:s}}function ar(a,n){return{x:a,y:n}}function aI(a,n,r,s){if(a.length===0)return[];const l=uI(a);return l.map((u,h)=>{const f=l.slice(0,h);return sI(n,u,f,r,s)}).flat()}function sI(a,n,r,s,l){const u=ar(n.cx,n.cy),h=cI(u,r,a);if(h==null)return[];const f=new ci(u.x,u.y,h.cx,h.cy),d=oI(f,a,s,l);return lI(d,a)}function oI(a,n,r,s){const l=[],u=[];u.push(a);let h=!0;for(let f=0;f<r&&h;f++)for(h=!1;!h&&u.length>0;){const d=u.pop(),v=TC(n,d),p=v?eI(d,v):null;if(!v||!p||p.count!==2){h||l.push(d);continue}let g=s,m=Cy(v,g,p,!0),b=mc(m,u)||mc(m,l),E=My(m,n);for(;!b&&E&&g>=1;)g/=1.5,m=Cy(v,g,p,!0),b=mc(m,u)||mc(m,l),E=My(m,n);if(m&&!b&&!E&&(u.push(new ci(d.x1,d.y1,m.x,m.y)),u.push(new ci(m.x,m.y,d.x2,d.y2)),h=!0),h)continue;g=s,m=Cy(v,g,p,!1);let w=mc(m,u)||mc(m,l);for(E=My(m,n);!w&&E&&g>=1;)g/=1.5,m=Cy(v,g,p,!1),w=mc(m,u)||mc(m,l),E=My(m,n);m&&!w&&(u.push(new ci(d.x1,d.y1,m.x,m.y)),u.push(new ci(m.x,m.y,d.x2,d.y2)),h=!0),h||l.push(d)}for(;u.length>0;)l.push(u.pop());return l}function lI(a,n){const r=[];for(;a.length>0;){const s=a.pop();if(a.length===0){r.push(s);break}const l=a.pop(),u=new ci(s.x1,s.y1,l.x2,l.y2);TC(n,u)?(r.push(s),a.push(l)):a.push(u)}return r}function cI(a,n,r){let s=Number.POSITIVE_INFINITY;return n.reduce((l,u)=>{const h=yc(a.x,a.y,u.cx,u.cy);if(h>s)return l;const f=new ci(a.x,a.y,u.cx,u.cy),d=hI(r,f);return h*(d+1)*(d+1)<s&&(l=u,s=h*(d+1)*(d+1)),l},null)}function uI(a){if(a.length<2)return a;let n=0,r=0;return a.forEach(s=>{n+=s.cx,r+=s.cy}),n/=a.length,r/=a.length,a.map(s=>{const l=n-s.cx,u=r-s.cy,h=l*l+u*u;return[s,h]}).sort((s,l)=>s[1]-l[1]).map(s=>s[0])}function My(a,n){return n.some(r=>r.containsPt(a.x,a.y))}function mc(a,n){return n.some(r=>!!(xC(r.x1,r.y1,a.x,a.y,.001)||xC(r.x2,r.y2,a.x,a.y,.001)))}function TC(a,n){let r=Number.POSITIVE_INFINITY,s=null;for(const l of a){if(!SC(l,n))continue;const u=tI(l,n);u>=0&&u<r&&(s=l,r=u)}return s}function hI(a,n){return a.reduce((r,s)=>SC(s,n)&&JL(s,n)?r+1:r,0)}function Cy(a,n,r,s){const l=r.top,u=r.left,h=r.bottom,f=r.right;if(s){if(u.state===Er.POINT){if(l.state===Er.POINT)return ar(a.x-n,a.y-n);if(h.state===Er.POINT)return ar(a.x-n,a.y2+n);const m=a.width*a.height;return a.width*((u.y-a.y+(f.y-a.y))*.5)<m*.5?u.y>f.y?ar(a.x-n,a.y-n):ar(a.x2+n,a.y-n):u.y<f.y?ar(a.x-n,a.y2+n):ar(a.x2+n,a.y2+n)}if(f.state===Er.POINT){if(l.state===Er.POINT)return ar(a.x2+n,a.y-n);if(h.state===Er.POINT)return ar(a.x2+n,a.y2+n)}const p=a.height*a.width;return a.height*((l.x-a.x+(f.x-a.x))*.5)<p*.5?l.x>h.x?ar(a.x-n,a.y-n):ar(a.x-n,a.y2+n):l.x<h.x?ar(a.x2+n,a.y-n):ar(a.x2+n,a.y2+n)}if(u.state===Er.POINT){if(l.state===Er.POINT)return ar(a.x2+n,a.y2+n);if(h.state===Er.POINT)return ar(a.x2+n,a.y-n);const p=a.height*a.width;return a.width*((u.y-a.y+(f.y-a.y))*.5)<p*.5?u.y>f.y?ar(a.x2+n,a.y2+n):ar(a.x-n,a.y2+n):u.y<f.y?ar(a.x2+n,a.y-n):ar(a.x-n,a.y-n)}if(f.state===Er.POINT){if(l.state===Er.POINT)return ar(a.x-n,a.y2+n);if(h.state===Er.POINT)return ar(a.x-n,a.y-n)}const d=a.height*a.width;return a.height*((l.x-a.x+(f.x-a.x))*.5)<d*.5?l.x>h.x?ar(a.x2+n,a.y2+n):ar(a.x2+n,a.y-n):l.x<h.x?ar(a.x-n,a.y2+n):ar(a.x-n,a.y-n)}function fI(a,n,r,s){if(!(a.closed?r<a.length:r<a.length-1))return!1;const u=a.get(n),h=a.get(r+1);for(let f=n+1;f<=r;f++){const d=a.get(f);if(D2(u.x,u.y,h.x,h.y,d.x,d.y)>s)return!1}return!0}function dI(a=0){return n=>{if(a<0||n.length<3)return n;const r=[];let s=0;const l=a*a;for(;s<n.length;){let u=s+1;for(;fI(n,s,u,l);)u++;r.push(n.get(s)),s=u}return new Ou(r)}}function vI(a,n){switch(a){case-2:return(((-n+3)*n-3)*n+1)/6;case-1:return((3*n-6)*n*n+4)/6;case 0:return(((-3*n+3)*n+3)*n+1)/6;case 1:return n*n*n/6;default:throw new Error("unknown error")}}function pI(a=6){function u(h,f,d){let v=0,p=0;for(let g=-2;g<=1;g++){const m=h.get(f+g),b=vI(g,d);v+=b*m.x,p+=b*m.y}return{x:v,y:p}}return h=>{if(h.length<3)return h;const f=[],d=h.closed,v=h.length+3-1+(d?0:2);f.push(u(h,2-(d?0:2),0));for(let p=2-(d?0:2);p<v;p++)for(let g=1;g<=a;g++)f.push(u(h,p,g/a));return new Ou(f)}}function gI(a=8){return n=>{let r=a,s=n.length;if(r>1)for(s=Math.floor(n.length/r);s<3&&r>1;)r-=1,s=Math.floor(n.length/r);const l=[];for(let u=0,h=0;h<s;h++,u+=r)l.push(n.get(u));return new Ou(l)}}class Ou{constructor(n=[],r=!0){this.points=n,this.closed=r}get(n){const r=n,s=this.points.length;return n<0?this.closed?this.get(n+s):this.points[0]:n>=s?this.closed?this.get(n-s):this.points[s-1]:this.points[r]}get length(){return this.points.length}toString(n=1/0){const r=this.points;if(r.length===0)return"";const s=typeof n=="function"?n:QL(n);let l="M";for(const u of r)l+=`${s(u.x)},${s(u.y)} L`;return l=l.slice(0,-1),this.closed&&(l+=" Z"),l}draw(n){const r=this.points;if(r.length!==0){n.beginPath(),n.moveTo(r[0].x,r[0].y);for(const s of r)n.lineTo(s.x,s.y);this.closed&&n.closePath()}}sample(n){return gI(n)(this)}simplify(n){return dI(n)(this)}bSplines(n){return pI(n)(this)}apply(n){return n(this)}containsElements(n){const r=nI(this.points);return r?n.every(s=>r.containsPt(s.cx,s.cy)&&this.withinArea(s.cx,s.cy)):!1}withinArea(n,r){if(this.length===0)return!1;let s=0;const l=this.points[0],u=new ci(l.x,l.y,l.x,l.y);for(let h=1;h<this.points.length;h++){const f=this.points[h];u.x1=u.x2,u.y1=u.y2,u.x2=f.x,u.y2=f.y,u.cuts(n,r)&&s++}return u.x1=u.x2,u.y1=u.y2,u.x2=l.x,u.y2=l.y,u.cuts(n,r)&&s++,s%2===1}}class yI{constructor(n=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=n}add(n){this.set.add(`${n.x}x${n.y}`),this.arr[this.count++]=n}contains(n){return this.set.has(`${n.x}x${n.y}`)}isFirst(n){if(this.count===0)return!1;const r=this.arr[0];return r!=null&&r.x===n.x&&r.y===n.y}path(){return new Ou(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(n){return this.arr[n]}get length(){return this.count}}const Cv=0,Ty=1,Oy=2,F2=3;function mI(a,n){const r=(Math.floor(a.width)+Math.floor(a.height))*2,s=new yI(r);function l(d,v,p,g){const m=a.get(d,v);return Number.isNaN(m)?Number.NaN:m>n?p+g:p}function u(d,v){let p=Cv;return p=l(d,v,p,1),p=l(d+1,v,p,2),p=l(d,v+1,p,4),p=l(d+1,v+1,p,8),Number.isNaN(p)?-1:p}let h=Ty;function f(d,v){let p=d,g=v,m=a.invertScaleX(p),b=a.invertScaleY(g);for(let E=0;E<a.width*a.height;E++){const w={x:m,y:b};if(s.contains(w)){if(s.isFirst(w))return!0}else s.add(w);const S=u(p,g);switch(S){case-1:return!0;case 0:case 3:case 2:case 7:h=Oy;break;case 12:case 14:case 4:h=F2;break;case 6:h=h===Cv?F2:Oy;break;case 1:case 13:case 5:h=Cv;break;case 9:h=h===Oy?Cv:Ty;break;case 10:case 8:case 11:h=Ty;break;default:return console.warn("Marching squares invalid state: "+S),!0}switch(h){case Cv:g--,b-=a.pixelGroup;break;case Ty:g++,b+=a.pixelGroup;break;case F2:p--,m-=a.pixelGroup;break;case Oy:p++,m+=a.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+S),!0}}return!0}for(let d=0;d<a.width;d++)for(let v=0;v<a.height;v++){if(a.get(d,v)<=n)continue;const p=u(d,v);if(!(p<0||p===15)&&f(d,v))return s.path()}return null}const Ay={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function Tv(a){return a!=null&&typeof a.radius=="number"}function OC(a,n){if(Tv(a)!==Tv(n))return!1;if(Tv(a)){const s=n;return a.cx===s.cx&&a.cy===s.cy&&a.radius===s.radius}const r=n;return a.x===r.x&&a.y===r.y&&a.width===r.width&&a.height===r.height}var qs;(function(a){a[a.MEMBERS=0]="MEMBERS",a[a.NON_MEMBERS=1]="NON_MEMBERS",a[a.EDGES=2]="EDGES"})(qs||(qs={}));class z2{constructor(n={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new $i(0,0,0,0),this.potentialArea=new Tu(1,0,0,0,0,0,0),this.o=Object.assign({},Ay,n)}pushMember(...n){if(n.length!==0){this.dirty.add(qs.MEMBERS);for(const r of n)this.members.push({raw:r,obj:Tv(r)?_y.from(r):$i.from(r),area:null})}}removeMember(n){const r=this.members.findIndex(s=>OC(s.raw,n));return r<0?!1:(this.members.splice(r,1),this.dirty.add(qs.MEMBERS),!0)}removeNonMember(n){const r=this.nonMembers.findIndex(s=>OC(s.raw,n));return r<0?!1:(this.nonMembers.splice(r,1),this.dirty.add(qs.NON_MEMBERS),!0)}removeEdge(n){const r=this.edges.findIndex(s=>s.obj.equals(n));return r<0?!1:(this.edges.splice(r,1),this.dirty.add(qs.NON_MEMBERS),!0)}pushNonMember(...n){if(n.length!==0){this.dirty.add(qs.NON_MEMBERS);for(const r of n)this.nonMembers.push({raw:r,obj:Tv(r)?_y.from(r):$i.from(r),area:null})}}pushEdge(...n){if(n.length!==0){this.dirty.add(qs.EDGES);for(const r of n)this.edges.push({raw:r,obj:ci.from(r),area:null})}}update(){const n=this.dirty.has(qs.MEMBERS),r=this.dirty.has(qs.NON_MEMBERS);let s=this.dirty.has(qs.EDGES);this.dirty.clear();const l=this.members.map(v=>v.obj);if(this.o.virtualEdges&&(n||r)){const v=this.nonMembers.map(m=>m.obj),p=aI(l,v,this.o.maxRoutingIterations,this.o.morphBuffer),g=new Map(this.virtualEdges.map(m=>[m.obj.toString(),m.area]));this.virtualEdges=p.map(m=>{var b;return{raw:m,obj:m,area:(b=g.get(m.toString()))!==null&&b!==void 0?b:null}}),s=!0}let u=!1;if(n||s){const v=this.virtualEdges.concat(this.edges).map(b=>b.obj),p=xI(l,v),g=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,m=$i.from(_C(p,g));m.equals(this.activeRegion)||(u=!0,this.activeRegion=m)}if(u){const v=Math.ceil(this.activeRegion.width/this.o.pixelGroup),p=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=Tu.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(g=>g.area=null),this.nonMembers.forEach(g=>g.area=null),this.edges.forEach(g=>g.area=null),this.virtualEdges.forEach(g=>g.area=null)):(v!==this.potentialArea.width||p!==this.potentialArea.height)&&(this.potentialArea=Tu.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}const h=new Map,f=v=>{if(v.area){const p=`${v.obj.width}x${v.obj.height}x${v.obj instanceof $i?"R":"C"}`;h.set(p,v.area)}},d=v=>{if(v.area)return;const p=`${v.obj.width}x${v.obj.height}x${v.obj instanceof $i?"R":"C"}`;if(h.has(p)){const m=h.get(p);v.area=this.potentialArea.copy(m,{x:v.obj.x-this.o.nodeR1,y:v.obj.y-this.o.nodeR1});return}const g=v.obj instanceof $i?iI(v.obj,this.potentialArea,this.o.nodeR1):CC(v.obj,this.potentialArea,this.o.nodeR1);v.area=g,h.set(p,g)};this.members.forEach(f),this.nonMembers.forEach(f),this.members.forEach(d),this.nonMembers.forEach(v=>{this.activeRegion.intersects(v.obj)?d(v):v.area=null}),this.edges.forEach(v=>{v.area||(v.area=MC(v.obj,this.potentialArea,this.o.edgeR1))}),this.virtualEdges.forEach(v=>{v.area||(v.area=MC(v.obj,this.potentialArea,this.o.edgeR1))})}drawMembers(n){for(const r of this.members)r.obj.draw(n)}drawNonMembers(n){for(const r of this.nonMembers)r.obj.draw(n)}drawEdges(n){for(const r of this.edges)r.obj.draw(n)}drawPotentialArea(n,r=!0){this.potentialArea.draw(n,r)}compute(){if(this.members.length===0)return new Ou([]);this.dirty.size>0&&this.update();const{o:n,potentialArea:r}=this,s=this.members.map(f=>f.area),l=this.virtualEdges.concat(this.edges).map(f=>f.area),u=this.nonMembers.filter(f=>f.area!=null).map(f=>f.area),h=this.members.map(f=>f.obj);return bI(r,s,l,u,f=>f.containsElements(h),n)}}function bI(a,n,r,s,l,u={}){const h=Object.assign({},Ay,u);let f=h.threshold,d=h.memberInfluenceFactor,v=h.edgeInfluenceFactor,p=h.nonMemberInfluenceFactor;const g=(h.nodeR0-h.nodeR1)*(h.nodeR0-h.nodeR1),m=(h.edgeR0-h.edgeR1)*(h.edgeR0-h.edgeR1);for(let b=0;b<h.maxMarchingIterations;b++){if(a.clear(),d!==0){const w=d/g;for(const S of n)a.incArea(S,w)}if(v!==0){const w=v/m;for(const S of r)a.incArea(S,w)}if(p!==0){const w=p/g;for(const S of s)a.incArea(S,w)}const E=mI(a,f);if(E&&l(E))return E;if(f*=.95,b<=h.maxMarchingIterations*.5)d*=1.2,v*=1.2;else if(p!==0&&s.length>0)p*=.8;else break}return new Ou([])}function xI(a,n){if(a.length===0)return new $i(0,0,0,0);const r=$i.from(a[0]);for(const s of a)r.add(s);for(const s of n)r.add(EC(s));return r}function n7(a,n=[],r=[],s={}){if(a.length===0)return new Ou([]);const l=new z2(s);return l.pushMember(...a),l.pushNonMember(...n),l.pushEdge(...r),l.compute()}var EI=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class ky extends Ai{constructor(n,r){super(n,(0,Ka.Z)({},ky.defaultOptions,r)),this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{const{style:s,bubbleSetOptions:l}=this.parseOptions();Rr(this.bubbleSetOptions,l)||this.init(),this.bubbleSetOptions=Object.assign({},l);const u=Object.assign(Object.assign({},s),{d:this.getPath()});this.shape?this.shape.update(u):(this.shape=new pv({style:u}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=s=>{if(!this.shape)return;const l=tt(s.data);[...this.options.members,...this.options.avoidMembers].includes(l)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(l)}))},this.getPath=s=>{const{graph:l}=this.context,u=this.options.members,h=[...this.members.keys()],f=this.options.avoidMembers,d=[...this.avoidMembers.keys()];if(!s&&Rr(u,h)&&Rr(f,d))return this.path;const{enter:v=[],exit:p=[]}=uc(h,u,S=>S),{enter:g=[],exit:m=[]}=uc(d,f,S=>S);s&&(p.push(s),v.push(s));const b=(S,M,C)=>{S.forEach(T=>{const k=C?this.members:this.avoidMembers,O=C?"pushMember":"pushNonMember",A=C?"removeMember":"removeNonMember";if(M){let R;l.getElementType(T)==="edge"?([R]=SI(l,T),this.bubbleSets.pushEdge(R)):([R]=wI(l,T),this.bubbleSets[O](R)),k.set(T,R)}else{const R=k.get(T);R&&(l.getElementType(T)==="edge"?this.bubbleSets.removeEdge(R):this.bubbleSets[A](R),k.delete(T))}})};b(p,!1,!0),b(v,!0,!0),b(m,!1,!1),b(g,!0,!1);const w=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=PM(w.points.map(Oi)),this.path},this.bindEvents(),this.bubbleSets=new z2(this.options)}bindEvents(){this.context.graph.on(Pt.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(Pt.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new z2(this.options),this.members=new Map,this.avoidMembers=new Map}parseOptions(){const n=this.options,{type:r,key:s,members:l,avoidMembers:u}=n,h=EI(n,["type","key","members","avoidMembers"]),f=Object.keys(h).reduce((d,v)=>(v in Ay?d.bubbleSetOptions[v]=h[v]:d.style[v]=h[v],d),{style:{},bubbleSetOptions:{}});return Object.assign({type:r,key:s,members:l,avoidMembers:u},f)}addMember(n){const r=Array.isArray(n)?n:[n];r.some(s=>this.options.avoidMembers.includes(s))&&(this.options.avoidMembers=this.options.avoidMembers.filter(s=>!r.includes(s))),this.options.members=[...new Set([...this.options.members,...r])],this.drawBubbleSets()}removeMember(n){const r=Array.isArray(n)?n:[n];this.options.members=this.options.members.filter(s=>!r.includes(s)),this.drawBubbleSets()}updateMember(n){this.options.members=(0,re.Z)(n)?n(this.options.members):n,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(n){const r=Array.isArray(n)?n:[n];r.some(s=>this.options.members.includes(s))&&(this.options.members=this.options.members.filter(s=>!r.includes(s))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...r])],this.drawBubbleSets()}removeAvoidMember(n){const r=Array.isArray(n)?n:[n];this.options.avoidMembers.some(s=>r.includes(s))&&(this.options.avoidMembers=this.options.avoidMembers.filter(s=>!r.includes(s)),this.drawBubbleSets())}updateAvoidMember(n){this.options.avoidMembers=Array.isArray(n)?n:[n],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(Pt.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(Pt.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),super.destroy()}}ky.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},Ay);const wI=(a,n)=>(Array.isArray(n)?n:[n]).map(s=>{const l=a.getElementRenderBounds(s);return new $i(l.min[0],l.min[1],Oo(l),Ao(l))}),SI=(a,n)=>(Array.isArray(n)?n:[n]).map(s=>{const l=a.getEdgeData(s),u=a.getElementPosition(l.source),h=a.getElementPosition(l.target);return ci.from({x1:u[0],y1:u[1],x2:h[0],y2:h[1]})});class r7 extends null{constructor(n,r){super(n,r),this.setOptions=s=>{const l={cameraType:"setType",near:"setNear",far:"setFar",fov:"setFov",aspect:"setAspect",projectionMode:"setProjectionMode",distance:"setDistance",minDistance:"setMinDistance",maxDistance:"setMaxDistance",roll:"setRoll",elevation:"setElevation",azimuth:"setAzimuth"},u=(h,f)=>{switch(h){case"projectionMode":return f==="perspective"?1:0;case"cameraType":return{orbiting:0,exploring:1,tracking:2}[f];case"aspect":return typeof f=="number"?f:this.getCanvasAspect();default:return f}};Object.entries(l).forEach(([h,f])=>{const d=s[h];if(d!==void 0){const v=u(h,d);this.context.canvas.getCamera()[f](v)}})},this.bindEvents()}update(n){this.setOptions(n),super.update(n)}bindEvents(){this.context.graph.once(GraphEvent.BEFORE_DRAW,()=>this.setOptions(this.options))}getCanvasAspect(){const[n,r]=this.context.viewport.getCanvasSize();return n/r}}function _I(a){return`
    <ul class="g6-contextmenu-ul">
      ${a.map(n=>`<li  class="g6-contextmenu-li" value="${n.value}">${n.name}</li>`).join("")}
    </ul>
  `}const MI=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;var AC=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class Py extends Ai{constructor(n,r){super(n,Object.assign({},Py.defaultOptions,r)),this.targetElement=null,this.onTriggerEvent=s=>{var l;(l=s.preventDefault)===null||l===void 0||l.call(s),this.show(s)},this.onMenuItemClick=s=>{const{onClick:l,trigger:u}=this.options;if(s.target instanceof HTMLElement&&s.target.className.includes("g6-contextmenu-li")){const h=s.target.getAttribute("value");l==null||l(h,s.target,this.targetElement),this.hide()}u!=="click"&&this.hide()},this.initElement(),this.update(r)}initElement(){this.$element=gf("contextmenu",!1,{zIndex:"99"});const{className:n}=this.options;n&&this.$element.classList.add(n),this.context.canvas.getContainer().appendChild(this.$element),I2("g6-contextmenu-css","style",{},MI,document.head)}show(n){return AC(this,void 0,void 0,function*(){const{enable:r,offset:s}=this.options;if(typeof r=="function"&&!r(n)||!r){this.hide();return}const l=yield this.getDOMContent(n);l instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(l)):this.$element.innerHTML=l;const u=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${n.client.x-u.left+s[0]}px`,this.$element.style.top=`${n.client.y-u.top+s[1]}px`,this.$element.style.display="block",this.targetElement=n.target})}hide(){this.$element.style.display="none",this.targetElement=null}update(n){this.unbindEvents(),super.update(n),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(n){return AC(this,void 0,void 0,function*(){const{getContent:r,getItems:s}=this.options;return s?_I(yield s(n)):yield r(n)})}bindEvents(){const{graph:n}=this.context,{trigger:r}=this.options;n.on(`canvas:${r}`,this.onTriggerEvent),n.on(`node:${r}`,this.onTriggerEvent),n.on(`edge:${r}`,this.onTriggerEvent),n.on(`combo:${r}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}unbindEvents(){const{graph:n}=this.context,{trigger:r}=this.options;n.off(`canvas:${r}`,this.onTriggerEvent),n.off(`node:${r}`,this.onTriggerEvent),n.off(`edge:${r}`,this.onTriggerEvent),n.off(`combo:${r}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}Py.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};class Ry extends Ai{constructor(n,r){super(n,Object.assign({},Ry.defaultOptions,r)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{const{model:s,element:l}=this.context,u=s.getEdgeData();this.divideEdges(this.options.divisions);const{cycles:h,iterRate:f,divRate:d}=this.options;let{lambda:v,divisions:p,iterations:g}=this.options;for(let m=0;m<h;m++){for(let b=0;b<g;b++){const E={};u.forEach(w=>{var S;if(w.source===w.target)return;const M=tt(w);E[M]=this.getEdgeForces(w,p,v);for(let C=0;C<p+1;C++)(S=this.edgePoints)[M]||(S[M]=[]),this.edgePoints[M][C]=Ce(this.edgePoints[M][C],E[M][C])})}v/=2,p*=d,g*=f,this.divideEdges(p)}u.forEach(m=>{const b=tt(m),E=l.getElement(b);E==null||E.update({d:E2(this.edgePoints[b])})})},this.bindEvents()}get nodeMap(){const n=this.context.model.getNodeData();return Object.fromEntries(n.map(r=>[tt(r),xu(pr(r))]))}divideEdges(n){this.context.model.getEdgeData().forEach(s=>{var l;const u=tt(s);(l=this.edgePoints)[u]||(l[u]=[]);const h=this.nodeMap[s.source],f=this.nodeMap[s.target];if(n===1)this.edgePoints[u].push(h),this.edgePoints[u].push(Ys(Ce(h,f),2)),this.edgePoints[u].push(f);else{const v=(this.edgePoints[u].length===0?Xn(h,f):kI(this.edgePoints[u]))/(n+1);let p=v;const g=[h];for(let m=1;m<this.edgePoints[u].length;m++){const b=this.edgePoints[u][m-1],E=this.edgePoints[u][m];let w=Xn(E,b);for(;w>p;){const S=p/w,M=Ce(b,Us(Nn(E,b),S));g.push(M),w-=p,p=v}p-=w}g.push(f),this.edgePoints[u]=g}})}getVectorPosition(n){const r=this.nodeMap[n.source],s=this.nodeMap[n.target],[l,u]=Nn(s,r),h=Xn(r,s);return{source:r,target:s,vx:l,vy:u,length:h}}measureEdgeCompatibility(n,r){const s=this.getVectorPosition(n),l=this.getVectorPosition(r),u=CI(s,l),h=TI(s,l),f=OI(s,l),d=AI(s,l);return u*h*f*d}getEdgeBundles(){const n={},r=this.options.bundleThreshold,s=this.context.model.getEdgeData();return s.forEach((l,u)=>{s.forEach((h,f)=>{var d,v;if(f<=u)return;this.measureEdgeCompatibility(l,h)>=r&&(n[d=tt(l)]||(n[d]=[]),n[tt(l)].push(h),n[v=tt(h)]||(n[v]=[]),n[tt(h)].push(l))})}),n}getSpringForce(n,r){const{pre:s,cur:l,next:u}=n;return Us(Nn(Ce(s,u),Us(l,2)),r)}getElectrostaticForce(n,r){Po(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());const s=this.edgeBundles[tt(r)];let l=[0,0];return s==null||s.forEach(u=>{const h=this.edgePoints[tt(u)][n],f=this.edgePoints[tt(r)][n],d=Nn(h,f),v=Xn(h,f);l=Ce(l,Us(d,1/v))}),l}getEdgeForces(n,r,s){const l=this.nodeMap[n.source],u=this.nodeMap[n.target],h=this.options.K/(Xn(l,u)*(r+1)),f=[[0,0]],d=tt(n);for(let v=1;v<r;v++){const p=this.getSpringForce({pre:this.edgePoints[d][v-1],cur:this.edgePoints[d][v],next:this.edgePoints[d][v+1]||[0,0]},h),g=this.getElectrostaticForce(v,n);f.push(Us(Ce(p,g),s))}return f.push([0,0]),f}bindEvents(){const{graph:n}=this.context;n.on(Pt.AFTER_RENDER,this.onBundle)}unbindEvents(){const{graph:n}=this.context;n.off(Pt.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}}Ry.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};const CI=(a,n)=>Math.abs(z3([a.vx,a.vy],[n.vx,n.vy])/(a.length*n.length)),TI=(a,n)=>{const r=(a.length+n.length)/2;return 2/(r/Math.min(a.length,n.length)+Math.max(a.length,n.length)/r)},OI=(a,n)=>{const r=(a.length+n.length)/2,s=Ys(Ce(a.source,a.target),2),l=Ys(Ce(n.source,n.target),2);return r/(r+Xn(s,l))},kC=(a,n)=>{if(n.source[0]===n.target[0])return[n.source[0],a[1]];if(n.source[1]===n.target[1])return[a[0],n.source[1]];const r=(n.source[1]-n.target[1])/(n.source[0]-n.target[0]),s=(r*r*n.source[0]+r*(a[1]-n.source[1])+a[0])/(r*r+1),l=r*(s-n.source[0])+n.source[1];return[s,l]},PC=(a,n)=>{const r=kC(n.source,a),s=kC(n.target,a),l=Ys(Ce(r,s),2),u=Ys(Ce(a.source,a.target),2);return Xn(r,s)===0?0:Math.max(0,1-2*Xn(u,l)/Xn(r,s))},AI=(a,n)=>Math.min(PC(a,n),PC(n,a)),kI=a=>{let n=0;for(let r=1;r<a.length;r++)n+=Xn(a[r],a[r-1]);return n},PI={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},RC=.05;class Ny extends Ai{constructor(n,r){super(n,Object.assign({},Ny.defaultOptions,r)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=s=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const l=Oi(s.canvas);this.renderLens(l),this.renderFocusElements()},this.renderLens=s=>{const l=Object.assign({},PI,this.options.style);this.isLensOn||(this.lens=new Su({style:l}),this.canvas.appendChild(this.lens)),Object.assign(l,Xs(s),{size:this.r*2}),this.lens.update(l)},this.getFilterData=()=>{const{filter:s}=this.options,{model:l}=this.context,u=l.getData();if(!s)return u;const{nodes:h,edges:f,combos:d}=u;return{nodes:h.filter(v=>s(tt(v),"node")),edges:f.filter(v=>s(tt(v),"edge")),combos:d.filter(v=>s(tt(v),"combo"))}},this.getFocusElements=s=>{const{nodes:l,edges:u}=this.getFilterData(),h=l.filter(v=>Xn(pr(v),s)<this.r),f=h.map(v=>tt(v)),d=u.filter(v=>{const{source:p,target:g}=v,m=f.includes(p),b=f.includes(g);switch(this.options.nodeType){case"both":return m&&b;case"either":return m!==b;case"source":return m&&!b;case"target":return!m&&b;default:return!1}});return{nodes:h,edges:d}},this.renderFocusElements=()=>{const{element:s,graph:l}=this.context;if(!this.isLensOn)return;const u=this.lens.getCenter(),{nodes:h,edges:f}=this.getFocusElements(u),d=new Set,v=p=>{const g=tt(p);d.add(g);const m=s.getElement(g);if(!m)return;const b=this.shapes.get(g)||m.cloneNode();b.setPosition(m.getPosition()),b.id=m.id,this.shapes.has(g)?Object.entries(m.attributes).forEach(([S,M])=>{b.style[S]!==M&&(b.style[S]=M)}):(this.canvas.appendChild(b),this.shapes.set(g,b));const E=l.getElementType(g),w=this.getElementStyle(E,p);b.update(w)};h.forEach(v),f.forEach(v),this.shapes.forEach((p,g)=>{d.has(g)||(p.destroy(),this.shapes.delete(g))})},this.scaleRByWheel=s=>{var l;this.options.preventDefault&&s.preventDefault();const{clientX:u,clientY:h,deltaX:f,deltaY:d}=s,{graph:v,canvas:p}=this.context,g=v.getCanvasByClient([u,h]),m=(l=this.lens)===null||l===void 0?void 0:l.getCenter();if(!this.isLensOn||Xn(g,m)>this.r)return;const{maxR:b,minR:E}=this.options,w=f+d>0?1/(1-RC):1-RC,S=Math.min(...p.getSize())/2;this.r=Math.max(E||0,Math.min(b||S,this.r*w)),this.renderLens(m),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=s=>{var l;const u=Oi(s.canvas),h=(l=this.lens)===null||l===void 0?void 0:l.getCenter();!this.isLensOn||Xn(u,h)>this.r||(this.isLensDragging=!0)},this.onDrag=s=>{if(!this.isLensDragging)return;const l=Oi(s.canvas);this.renderLens(l),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(n,r){const s=n==="node"?this.options.nodeStyle:this.options.edgeStyle;return typeof s=="function"?s(r):s}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var n;const{graph:r}=this.context,{trigger:s,scaleRBy:l}=this.options,u=r.getCanvas().getLayer();["click","drag"].includes(s)&&u.addEventListener(pt.CLICK,this.onEdgeFilter),s==="pointermove"?u.addEventListener(pt.POINTER_MOVE,this.onEdgeFilter):s==="drag"&&(u.addEventListener(pt.DRAG_START,this.onDragStart),u.addEventListener(pt.DRAG,this.onDrag),u.addEventListener(pt.DRAG_END,this.onDragEnd)),l==="wheel"&&((n=this.graphDom)===null||n===void 0||n.addEventListener(pt.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var n;const{graph:r}=this.context,{trigger:s,scaleRBy:l}=this.options,u=r.getCanvas().getLayer();["click","drag"].includes(s)&&u.removeEventListener(pt.CLICK,this.onEdgeFilter),s==="pointermove"?u.removeEventListener(pt.POINTER_MOVE,this.onEdgeFilter):s==="drag"&&(u.removeEventListener(pt.DRAG_START,this.onDragStart),u.removeEventListener(pt.DRAG,this.onDrag),u.removeEventListener(pt.DRAG_END,this.onDragEnd)),l==="wheel"&&((n=this.graphDom)===null||n===void 0||n.removeEventListener(pt.WHEEL,this.scaleRByWheel))}update(n){var r;this.unbindEvents(),super.update(n),this.r=(r=n.r)!==null&&r!==void 0?r:this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((n,r)=>{n.destroy(),this.shapes.delete(r)}),super.destroy()}}Ny.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};const RI={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},NC=.05,LC=.1;class Ly extends Ai{constructor(n,r){super(n,Object.assign({},Ly.defaultOptions,r)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=s=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const l=Oi(s.canvas);this.onMagnify(l)},this.onMagnify=s=>{s.some(isNaN)||(this.renderLens(s),this.renderFocusElements())},this.renderLens=s=>{const l=Object.assign({},RI,this.options.style);this.isLensOn||(this.lens=new Su({style:l}),this.canvas.appendChild(this.lens)),Object.assign(l,Xs(s),{size:this.r*2,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(l)},this.getDPercent=()=>{const{minD:s,maxD:l}=this.options;return`${Math.round((this.d-s)/(l-s)*100)}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;const{graph:s}=this.context,l=this.lens.getCenter(),u=(this.d+1)*this.r,h=new Map,f=new Map;s.getNodeData().forEach(v=>{const p=pr(v),g=Xn(p,l);if(g>this.r)return;const m=u*g/(this.d*g+this.r),[b,E]=p,[w,S]=l,M=(b-w)/g,C=(E-S)/g,T=[w+m*M,S+m*C],k=tt(v),O=this.getNodeStyle(v),A=(0,yv.Z)(s.getElementRenderStyle(k),Object.keys(O));h.set(k,Object.assign(Object.assign({},Xs(T)),O)),f.set(k,Object.assign(Object.assign({},Xs(p)),A))}),this.updateStyle(h,f)},this.getNodeStyle=s=>{const{nodeStyle:l}=this.options;return typeof l=="function"?l(s):l},this.updateStyle=(s,l)=>{const{graph:u,element:h}=this.context,{enter:f,exit:d,keep:v}=uc(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(s.keys()),m=>m),p=new Set,g=(m,b)=>{const E=h.getElement(m);E==null||E.update(b),u.getRelatedEdgesData(m).forEach(w=>{p.add(tt(w))})};[...f,...v].forEach(m=>{g(m,s.get(m))}),d.forEach(m=>{g(m,this.prevOriginStyleMap.get(m)),this.prevOriginStyleMap.delete(m)}),p.forEach(m=>{const b=h.getElement(m);b==null||b.update({})}),this.prevMagnifiedStyleMap=s,l.forEach((m,b)=>{this.prevOriginStyleMap.has(b)||this.prevOriginStyleMap.set(b,m)})},this.isWheelValid=s=>{if(this.options.preventDefault&&s.preventDefault(),!this.isLensOn)return!1;const{clientX:l,clientY:u}=s,h=this.context.graph.getCanvasByClient([l,u]),f=this.lens.getCenter();return!(Xn(h,f)>this.r)},this.scaleR=s=>{const{maxR:l,minR:u}=this.options,h=s?1/(1-NC):1-NC,f=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(u||0,Math.min(l||f,this.r*h))},this.scaleD=s=>{const{maxD:l,minD:u}=this.options,h=s?this.d+LC:this.d-LC;this.d=Math.max(u,Math.min(l,h))},this.scaleRByWheel=s=>{if(!this.isWheelValid(s))return;const{deltaX:l,deltaY:u}=s;this.scaleR(l+u>0);const h=this.lens.getCenter();this.onMagnify(h)},this.scaleDByWheel=s=>{if(!this.isWheelValid(s))return;const{deltaX:l,deltaY:u}=s;this.scaleD(l+u>0);const h=this.lens.getCenter();this.onMagnify(h)},this.isDragValid=s=>{if(this.options.preventDefault&&s.preventDefault(),!this.isLensOn)return!1;const l=Oi(s.canvas),u=this.lens.getCenter();return!(Xn(l,u)>this.r)},this.isLensDragging=!1,this.onDragStart=s=>{this.isDragValid(s)&&(this.isLensDragging=!0)},this.onDrag=s=>{if(!this.isLensDragging)return;const l=Oi(s.canvas);this.onMagnify(l)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=s=>{if(!this.isLensDragging)return;const{dx:l,dy:u}=s;this.scaleR(l-u>0);const h=this.lens.getCenter();this.onMagnify(h)},this.scaleDByDrag=s=>{if(!this.isLensDragging)return;const{dx:l,dy:u}=s;this.scaleD(l-u>0);const h=this.lens.getCenter();this.onMagnify(h)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var n;const{graph:r}=this.context,{trigger:s,scaleRBy:l,scaleDBy:u}=this.options,h=r.getCanvas().getLayer();if(["click","drag"].includes(s)&&h.addEventListener(pt.CLICK,this.onCreateFisheye),s==="pointermove"&&h.addEventListener(pt.POINTER_MOVE,this.onCreateFisheye),s==="drag"||l==="drag"||u==="drag"){h.addEventListener(pt.DRAG_START,this.onDragStart),h.addEventListener(pt.DRAG_END,this.onDragEnd);const f=s==="drag"?this.onDrag:l==="drag"?this.scaleRByDrag:this.scaleDByDrag;h.addEventListener(pt.DRAG,f)}if(l==="wheel"||u==="wheel"){const f=l==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(n=this.graphDom)===null||n===void 0||n.addEventListener(pt.WHEEL,f,{passive:!1})}}unbindEvents(){var n;const{graph:r}=this.context,{trigger:s,scaleRBy:l,scaleDBy:u}=this.options,h=r.getCanvas().getLayer();if(["click","drag"].includes(s)&&h.removeEventListener(pt.CLICK,this.onCreateFisheye),s==="pointermove"&&h.removeEventListener(pt.POINTER_MOVE,this.onCreateFisheye),s==="drag"||l==="drag"||u==="drag"){h.removeEventListener(pt.DRAG_START,this.onDragStart),h.removeEventListener(pt.DRAG_END,this.onDragEnd);const f=s==="drag"?this.onDrag:l==="drag"?this.scaleRByDrag:this.scaleDByDrag;h.removeEventListener(pt.DRAG,f)}if(l==="wheel"||u==="wheel"){const f=l==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(n=this.graphDom)===null||n===void 0||n.removeEventListener(pt.WHEEL,f)}}update(n){var r,s;this.unbindEvents(),super.update(n),this.r=(r=n.r)!==null&&r!==void 0?r:this.r,this.d=(s=n.d)!==null&&s!==void 0?s:this.d,this.bindEvents()}destroy(){var n;this.unbindEvents(),this.isLensOn&&((n=this.lens)===null||n===void 0||n.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}}Ly.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};class Iy extends Ai{constructor(n,r){super(n,Object.assign({},Iy.defaultOptions,r)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var s,l,u,h;const f=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(f),f?(l=(s=this.options).onEnter)===null||l===void 0||l.call(s):(h=(u=this.options).onExit)===null||h===void 0||h.call(u)},this.shortcut=new uf(n.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();const{request:n=[],exit:r=[]}=this.options.trigger;this.shortcut.bind(n,this.request),this.shortcut.bind(r,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(l=>{document.addEventListener(l,this.onFullscreenChange,!1)})}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(r=>{document.removeEventListener(r,this.onFullscreenChange,!1)})}setGraphSize(n=!0){var r,s;let l,u;n?(l=((r=globalThis.screen)===null||r===void 0?void 0:r.width)||0,u=((s=globalThis.screen)===null||s===void 0?void 0:s.height)||0,this.graphSize=this.context.graph.getSize()):[l,u]=this.graphSize,this.context.graph.setSize(l,u),this.context.graph.render()}request(){document.fullscreenElement||!NI()||this.$el.requestFullscreen().catch(n=>{_a.warn(`Error attempting to enable full-screen: ${n.message} (${n.name})`)})}exit(){document.fullscreenElement&&document.exitFullscreen()}update(n){this.unbindEvents(),super.update(n),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}}Iy.defaultOptions={trigger:{},autoFit:!0};function NI(){return document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled")}class Dy extends Ai{constructor(n,r){super(n,Object.assign({},Dy.defaultOptions,r)),this.$element=gf("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=l=>{const{data:{scale:u,origin:h}}=l;if(!u)return;const f=this.currentScale;this.currentScale=u;const d=u/f,v=Us(h||this.context.graph.getCanvasCenter(),1-d),p=this.baseSize*u,g=Us(this.offset,d),m=t2(g,p),b=Ce(m,v);this.$element.style.backgroundSize=`${p}px ${p}px`,this.$element.style.backgroundPosition=`${b[0]}px ${b[1]}px`,this.offset=t2(b,p)},this.followTranslate=l=>{if(!this.options.follow)return;const{data:{translate:u}}=l;u&&this.updateOffset(u)},this.onTransform=l=>{const u=this.parseFollow(this.options.follow);u.zoom&&this.followZoom(l),u.translate&&this.followTranslate(l)},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(n){super.update(n),n.size!==void 0&&(this.baseSize=n.size),this.updateStyle()}bindEvents(){const{graph:n}=this.context;n.on(Pt.AFTER_TRANSFORM,this.onTransform)}updateStyle(){const{stroke:n,lineWidth:r,border:s,borderLineWidth:l,borderStroke:u,borderStyle:h}=this.options,f=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:s?`${l}px ${h} ${u}`:"none",backgroundImage:`linear-gradient(${n} ${r}px, transparent ${r}px), linear-gradient(90deg, ${n} ${r}px, transparent ${r}px)`,backgroundSize:`${f}px ${f}px`,backgroundRepeat:"repeat"})}updateOffset(n){const r=this.baseSize*this.currentScale;this.offset=t2(Ce(this.offset,n),r),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(n){var r,s;return go(n)?{translate:n,zoom:n}:{translate:(r=n==null?void 0:n.translate)!==null&&r!==void 0?r:!1,zoom:(s=n==null?void 0:n.zoom)!==null&&s!==void 0?s:!1}}destroy(){this.context.graph.off(Pt.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}}Dy.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};var Z2=K(90494);function W2(a){const n={Added:new Map,Updated:new Map,Removed:new Map};return a.forEach(r=>{const{type:s,value:l}=r,u=tt(l);if(s==="NodeAdded"||s==="EdgeAdded"||s==="ComboAdded")n.Added.set(u,r);else if(s==="NodeUpdated"||s==="EdgeUpdated"||s==="ComboUpdated")if(n.Added.has(u))n.Added.set(u,{type:s.replace("Updated","Added"),value:l});else if(n.Updated.has(u)){const{original:h}=n.Updated.get(u);n.Updated.set(u,{type:s,value:l,original:h})}else n.Removed.has(u)||n.Updated.set(u,r);else(s==="NodeRemoved"||s==="EdgeRemoved"||s==="ComboRemoved")&&(n.Added.has(u)?n.Added.delete(u):(n.Updated.has(u)&&n.Updated.delete(u),n.Removed.set(u,r)))}),[...Array.from(n.Added.values()),...Array.from(n.Updated.values()),...Array.from(n.Removed.values())]}function IC(a){const{NodeAdded:n=[],NodeUpdated:r=[],NodeRemoved:s=[],EdgeAdded:l=[],EdgeUpdated:u=[],EdgeRemoved:h=[],ComboAdded:f=[],ComboUpdated:d=[],ComboRemoved:v=[]}=pg(a,p=>p.type);return{add:{nodes:n,edges:l,combos:f},update:{nodes:r,edges:u,combos:d},remove:{nodes:s,edges:h,combos:v}}}function DC(a,n){for(const r in a)(0,ai.Z)(a[r])&&!Array.isArray(a[r])&&a[r]!==null?(n[r]||(n[r]={}),DC(a[r],n[r])):n[r]===void 0&&(n[r]=iv(r))}function LI(a,n=!1,r){const s={animation:n,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:l,update:u,remove:h}=IC(W2(a));return["nodes","edges","combos"].forEach(f=>{u[f]&&u[f].forEach(d=>{var v,p;const g=Object.assign({},d.value);let m=Object.assign({},d.original);if(r){const b=r.graph.getElementType(tt(d.original)),E=b==="edge"?"stroke":"fill",w=r.element.getElementComputedStyle(b,d.original);m=Object.assign(Object.assign({},d.original),{style:Object.assign({[E]:w[E]},d.original.style)})}DC(g,m),(v=s.current.update)[f]||(v[f]=[]),s.current.update[f].push(g),(p=s.original.update)[f]||(p[f]=[]),s.original.update[f].push(m)}),l[f]&&l[f].forEach(d=>{var v,p;const g=Object.assign({},d.value);(v=s.current.add)[f]||(v[f]=[]),s.current.add[f].push(g),(p=s.original.remove)[f]||(p[f]=[]),s.original.remove[f].push(g)}),h[f]&&h[f].forEach(d=>{var v,p;const g=Object.assign({},d.value);(v=s.current.remove)[f]||(v[f]=[]),s.current.remove[f].push(g),(p=s.original.add)[f]||(p[f]=[]),s.original.add[f].push(g)})}),s}class By extends Ai{constructor(n,r){super(n,Object.assign({},By.defaultOptions,r)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(l,u=!0)=>{var h,f,d;this.freezed=!0,(f=(h=this.options).executeCommand)===null||f===void 0||f.call(h,l);const v=u?l.original:l.current;this.context.graph.addData(v.add),this.context.graph.updateData(v.update),this.context.graph.removeData(aM(v.remove,!1)),(d=this.context.element)===null||d===void 0||d.draw({silence:!0,animation:l.animation}),this.freezed=!1},this.addCommand=l=>{var u;if(!this.freezed){if(l.type===Pt.AFTER_DRAW){const{dataChanges:h=[],animation:f=!0}=l.data;if(!((u=this.context.batch)===null||u===void 0)&&u.isBatching){if(!this.batchChanges)return;this.batchChanges.push(h),this.batchAnimation&&(this.batchAnimation=f);return}this.batchChanges=[h],this.batchAnimation=f}this.undoStackPush(LI(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(sc.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=l=>{const{initiate:u}=l.data;this.batchAnimation=!1,u?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null)},this.emitter=new Z2.Z;const{graph:s}=this.context;s.on(Pt.AFTER_DRAW,this.addCommand),s.on(Pt.BATCH_START,this.initBatchCommand),s.on(Pt.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var n,r,s,l;const u=this.undoStack.pop();if(u){if(this.executeCommand(u),((r=(n=this.options).beforeAddCommand)===null||r===void 0?void 0:r.call(n,u,!1))===!1)return;this.redoStack.push(u),(l=(s=this.options).afterAddCommand)===null||l===void 0||l.call(s,u,!1),this.notify(sc.UNDO,u)}return this}redo(){const n=this.redoStack.pop();return n&&(this.executeCommand(n,!1),this.undoStackPush(n),this.notify(sc.REDO,n)),this}undoAndCancel(){const n=this.undoStack.pop();return n&&(this.executeCommand(n,!1),this.redoStack=[],this.notify(sc.CANCEL,n)),this}undoStackPush(n){var r,s,l,u;const{stackSize:h}=this.options;h!==0&&this.undoStack.length>=h&&this.undoStack.shift(),((s=(r=this.options).beforeAddCommand)===null||s===void 0?void 0:s.call(r,n,!0))!==!1&&(this.undoStack.push(n),(u=(l=this.options).afterAddCommand)===null||u===void 0||u.call(l,n,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(sc.CLEAR,null)}notify(n,r){this.emitter.emit(n,{cmd:r}),this.emitter.emit(sc.CHANGE,{cmd:r})}on(n,r){this.emitter.on(n,r)}destroy(){const{graph:n}=this.context;n.off(Pt.AFTER_DRAW,this.addCommand),n.off(Pt.BATCH_START,this.initBatchCommand),n.off(Pt.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}}By.defaultOptions={stackSize:0};const G2={toXy(a,n){if(!n)return[...a];const r=n[0].slice(1),s=n[1].slice(1);return a.map(l=>[l[r],l[s]])},fromXy(a,n){if(!n)return[...a];const r=n[0].slice(1),s=n[1].slice(1);return a.map(([l,u])=>({[r]:l,[s]:u}))}};class II{constructor(n,r){this._cells=[],this._cellSize=r,this._reverseCellSize=1/r;for(const s of n){const l=this.coordToCellNum(s[0]),u=this.coordToCellNum(s[1]);this._cells[l]||(this._cells[l]=[]),this._cells[l][u]||(this._cells[l][u]=[]),this._cells[l][u].push(s)}}cellPoints(n,r){var s;return((s=this._cells[n])===null||s===void 0?void 0:s[r])||[]}rangePoints(n){const r=this.coordToCellNum(n[0]),s=this.coordToCellNum(n[1]),l=this.coordToCellNum(n[2]),u=this.coordToCellNum(n[3]),h=[];for(let f=r;f<=l;f++)for(let d=s;d<=u;d++){const v=this.cellPoints(f,d);for(const p of v)h.push(p)}return h}removePoint(n){const r=this.coordToCellNum(n[0]),s=this.coordToCellNum(n[1]),l=this._cells[r][s],u=l.findIndex(([h,f])=>h===n[0]&&f===n[1]);return u>-1&&l.splice(u,1),l}trunc(n){return Math.trunc(n)}coordToCellNum(n){return this.trunc(n*this._reverseCellSize)}extendBbox(n,r){return[n[0]-r*this._cellSize,n[1]-r*this._cellSize,n[2]+r*this._cellSize,n[3]+r*this._cellSize]}}function DI(a,n){return new II(a,n)}const BC=+(Math.pow(2,27)+1);function Fy(a,n,r){const s=a*n,l=BC*a,u=l-a,h=l-u,f=a-h,d=BC*n,v=d-n,p=d-v,g=n-p,E=s-h*p-f*p-h*g,w=f*g-E;return r?(r[0]=w,r[1]=s,r):[w,s]}function BI(a,n,r){const s=a+n,l=s-a,u=s-l,h=n-l,f=a-u;return r?(r[0]=f+h,r[1]=s,r):[f+h,s]}function FI(a,n){const r=a.length;if(r===1){const f=Fy(a[0],n);return f[0]?f:[f[1]]}const s=new Array(2*r),l=[.1,.1],u=[.1,.1];let h=0;Fy(a[0],n,l),l[0]&&(s[h++]=l[0]);for(let f=1;f<r;++f){Fy(a[f],n,u);const d=l[1];BI(d,u[0],l),l[0]&&(s[h++]=l[0]);const v=u[1],p=l[1],g=v+p,m=g-v,b=p-m;l[1]=g,b&&(s[h++]=b)}return l[1]&&(s[h++]=l[1]),h===0&&(s[h++]=0),s.length=h,s}function zI(a,n){const r=a+n,s=r-a,l=r-s,u=n-s,f=a-l+u;return f?[f,r]:[r]}function ZI(a,n){const r=a.length|0,s=n.length|0;if(r===1&&s===1)return zI(a[0],-n[0]);const l=r+s,u=new Array(l);let h=0,f=0,d=0;const v=Math.abs;let p=a[f],g=v(p),m=-n[d],b=v(m),E,w;g<b?(w=p,f+=1,f<r&&(p=a[f],g=v(p))):(w=m,d+=1,d<s&&(m=-n[d],b=v(m))),f<r&&g<b||d>=s?(E=p,f+=1,f<r&&(p=a[f],g=v(p))):(E=m,d+=1,d<s&&(m=-n[d],b=v(m)));let S=E+w,M=S-E,C=w-M,T=C,k=S,O,A,R,L,D;for(;f<r&&d<s;)g<b?(E=p,f+=1,f<r&&(p=a[f],g=v(p))):(E=m,d+=1,d<s&&(m=-n[d],b=v(m))),w=T,S=E+w,M=S-E,C=w-M,C&&(u[h++]=C),O=k+S,A=O-k,R=O-A,L=S-A,D=k-R,T=D+L,k=O;for(;f<r;)E=p,w=T,S=E+w,M=S-E,C=w-M,C&&(u[h++]=C),O=k+S,A=O-k,R=O-A,L=S-A,D=k-R,T=D+L,k=O,f+=1,f<r&&(p=a[f]);for(;d<s;)E=m,w=T,S=E+w,M=S-E,C=w-M,C&&(u[h++]=C),O=k+S,A=O-k,R=O-A,L=S-A,D=k-R,T=D+L,k=O,d+=1,d<s&&(m=-n[d]);return T&&(u[h++]=T),k&&(u[h++]=k),h||(u[h++]=0),u.length=h,u}function WI(a,n){const r=a+n,s=r-a,l=r-s,u=n-s,f=a-l+u;return f?[f,r]:[r]}function GI(a,n){const r=a.length|0,s=n.length|0;if(r===1&&s===1)return WI(a[0],n[0]);const l=r+s,u=new Array(l);let h=0,f=0,d=0;const v=Math.abs;let p=a[f],g=v(p),m=n[d],b=v(m),E,w;g<b?(w=p,f+=1,f<r&&(p=a[f],g=v(p))):(w=m,d+=1,d<s&&(m=n[d],b=v(m))),f<r&&g<b||d>=s?(E=p,f+=1,f<r&&(p=a[f],g=v(p))):(E=m,d+=1,d<s&&(m=n[d],b=v(m)));let S=E+w,M=S-E,C=w-M,T=C,k=S,O,A,R,L,D;for(;f<r&&d<s;)g<b?(E=p,f+=1,f<r&&(p=a[f],g=v(p))):(E=m,d+=1,d<s&&(m=n[d],b=v(m))),w=T,S=E+w,M=S-E,C=w-M,C&&(u[h++]=C),O=k+S,A=O-k,R=O-A,L=S-A,D=k-R,T=D+L,k=O;for(;f<r;)E=p,w=T,S=E+w,M=S-E,C=w-M,C&&(u[h++]=C),O=k+S,A=O-k,R=O-A,L=S-A,D=k-R,T=D+L,k=O,f+=1,f<r&&(p=a[f]);for(;d<s;)E=m,w=T,S=E+w,M=S-E,C=w-M,C&&(u[h++]=C),O=k+S,A=O-k,R=O-A,L=S-A,D=k-R,T=D+L,k=O,d+=1,d<s&&(m=n[d]);return T&&(u[h++]=T),k&&(u[h++]=k),h||(u[h++]=0),u.length=h,u}const FC=5,zy=11102230246251565e-32,jI=(3+16*zy)*zy,$I=(7+56*zy)*zy;function HI(a,n,r,s){return function(u,h,f){const d=a(a(n(h[1],f[0]),n(-f[1],h[0])),a(n(u[1],h[0]),n(-h[1],u[0]))),v=a(n(u[1],f[0]),n(-f[1],u[0])),p=s(d,v);return p[p.length-1]}}function VI(a,n,r,s){return function(u,h,f,d){const v=a(a(r(a(n(f[1],d[0]),n(-d[1],f[0])),h[2]),a(r(a(n(h[1],d[0]),n(-d[1],h[0])),-f[2]),r(a(n(h[1],f[0]),n(-f[1],h[0])),d[2]))),a(r(a(n(h[1],d[0]),n(-d[1],h[0])),u[2]),a(r(a(n(u[1],d[0]),n(-d[1],u[0])),-h[2]),r(a(n(u[1],h[0]),n(-h[1],u[0])),d[2])))),p=a(a(r(a(n(f[1],d[0]),n(-d[1],f[0])),u[2]),a(r(a(n(u[1],d[0]),n(-d[1],u[0])),-f[2]),r(a(n(u[1],f[0]),n(-f[1],u[0])),d[2]))),a(r(a(n(h[1],f[0]),n(-f[1],h[0])),u[2]),a(r(a(n(u[1],f[0]),n(-f[1],u[0])),-h[2]),r(a(n(u[1],h[0]),n(-h[1],u[0])),f[2])))),g=s(v,p);return g[g.length-1]}}function UI(a,n,r,s){return function(u,h,f,d,v){const p=a(a(a(r(a(r(a(n(d[1],v[0]),n(-v[1],d[0])),f[2]),a(r(a(n(f[1],v[0]),n(-v[1],f[0])),-d[2]),r(a(n(f[1],d[0]),n(-d[1],f[0])),v[2]))),h[3]),a(r(a(r(a(n(d[1],v[0]),n(-v[1],d[0])),h[2]),a(r(a(n(h[1],v[0]),n(-v[1],h[0])),-d[2]),r(a(n(h[1],d[0]),n(-d[1],h[0])),v[2]))),-f[3]),r(a(r(a(n(f[1],v[0]),n(-v[1],f[0])),h[2]),a(r(a(n(h[1],v[0]),n(-v[1],h[0])),-f[2]),r(a(n(h[1],f[0]),n(-f[1],h[0])),v[2]))),d[3]))),a(r(a(r(a(n(f[1],d[0]),n(-d[1],f[0])),h[2]),a(r(a(n(h[1],d[0]),n(-d[1],h[0])),-f[2]),r(a(n(h[1],f[0]),n(-f[1],h[0])),d[2]))),-v[3]),a(r(a(r(a(n(d[1],v[0]),n(-v[1],d[0])),h[2]),a(r(a(n(h[1],v[0]),n(-v[1],h[0])),-d[2]),r(a(n(h[1],d[0]),n(-d[1],h[0])),v[2]))),u[3]),r(a(r(a(n(d[1],v[0]),n(-v[1],d[0])),u[2]),a(r(a(n(u[1],v[0]),n(-v[1],u[0])),-d[2]),r(a(n(u[1],d[0]),n(-d[1],u[0])),v[2]))),-h[3])))),a(a(r(a(r(a(n(h[1],v[0]),n(-v[1],h[0])),u[2]),a(r(a(n(u[1],v[0]),n(-v[1],u[0])),-h[2]),r(a(n(u[1],h[0]),n(-h[1],u[0])),v[2]))),d[3]),a(r(a(r(a(n(h[1],d[0]),n(-d[1],h[0])),u[2]),a(r(a(n(u[1],d[0]),n(-d[1],u[0])),-h[2]),r(a(n(u[1],h[0]),n(-h[1],u[0])),d[2]))),-v[3]),r(a(r(a(n(f[1],d[0]),n(-d[1],f[0])),h[2]),a(r(a(n(h[1],d[0]),n(-d[1],h[0])),-f[2]),r(a(n(h[1],f[0]),n(-f[1],h[0])),d[2]))),u[3]))),a(r(a(r(a(n(f[1],d[0]),n(-d[1],f[0])),u[2]),a(r(a(n(u[1],d[0]),n(-d[1],u[0])),-f[2]),r(a(n(u[1],f[0]),n(-f[1],u[0])),d[2]))),-h[3]),a(r(a(r(a(n(h[1],d[0]),n(-d[1],h[0])),u[2]),a(r(a(n(u[1],d[0]),n(-d[1],u[0])),-h[2]),r(a(n(u[1],h[0]),n(-h[1],u[0])),d[2]))),f[3]),r(a(r(a(n(h[1],f[0]),n(-f[1],h[0])),u[2]),a(r(a(n(u[1],f[0]),n(-f[1],u[0])),-h[2]),r(a(n(u[1],h[0]),n(-h[1],u[0])),f[2]))),-d[3]))))),g=a(a(a(r(a(r(a(n(d[1],v[0]),n(-v[1],d[0])),f[2]),a(r(a(n(f[1],v[0]),n(-v[1],f[0])),-d[2]),r(a(n(f[1],d[0]),n(-d[1],f[0])),v[2]))),u[3]),r(a(r(a(n(d[1],v[0]),n(-v[1],d[0])),u[2]),a(r(a(n(u[1],v[0]),n(-v[1],u[0])),-d[2]),r(a(n(u[1],d[0]),n(-d[1],u[0])),v[2]))),-f[3])),a(r(a(r(a(n(f[1],v[0]),n(-v[1],f[0])),u[2]),a(r(a(n(u[1],v[0]),n(-v[1],u[0])),-f[2]),r(a(n(u[1],f[0]),n(-f[1],u[0])),v[2]))),d[3]),r(a(r(a(n(f[1],d[0]),n(-d[1],f[0])),u[2]),a(r(a(n(u[1],d[0]),n(-d[1],u[0])),-f[2]),r(a(n(u[1],f[0]),n(-f[1],u[0])),d[2]))),-v[3]))),a(a(r(a(r(a(n(f[1],v[0]),n(-v[1],f[0])),h[2]),a(r(a(n(h[1],v[0]),n(-v[1],h[0])),-f[2]),r(a(n(h[1],f[0]),n(-f[1],h[0])),v[2]))),u[3]),r(a(r(a(n(f[1],v[0]),n(-v[1],f[0])),u[2]),a(r(a(n(u[1],v[0]),n(-v[1],u[0])),-f[2]),r(a(n(u[1],f[0]),n(-f[1],u[0])),v[2]))),-h[3])),a(r(a(r(a(n(h[1],v[0]),n(-v[1],h[0])),u[2]),a(r(a(n(u[1],v[0]),n(-v[1],u[0])),-h[2]),r(a(n(u[1],h[0]),n(-h[1],u[0])),v[2]))),f[3]),r(a(r(a(n(h[1],f[0]),n(-f[1],h[0])),u[2]),a(r(a(n(u[1],f[0]),n(-f[1],u[0])),-h[2]),r(a(n(u[1],h[0]),n(-h[1],u[0])),f[2]))),-v[3])))),m=s(p,g);return m[m.length-1]}}function Zy(a){return(a===3?HI:a===4?VI:UI)(GI,Fy,FI,ZI)}const YI=Zy(3),XI=Zy(4),Au=[function(){return 0},function(){return 0},function(n,r){return r[0]-n[0]},function(n,r,s){const l=(n[1]-s[1])*(r[0]-s[0]),u=(n[0]-s[0])*(r[1]-s[1]),h=l-u;let f;if(l>0){if(u<=0)return h;f=l+u}else if(l<0){if(u>=0)return h;f=-(l+u)}else return h;const d=jI*f;return h>=d||h<=-d?h:YI(n,r,s)},function(n,r,s,l){const u=n[0]-l[0],h=r[0]-l[0],f=s[0]-l[0],d=n[1]-l[1],v=r[1]-l[1],p=s[1]-l[1],g=n[2]-l[2],m=r[2]-l[2],b=s[2]-l[2],E=h*p,w=f*v,S=f*d,M=u*p,C=u*v,T=h*d,k=g*(E-w)+m*(S-M)+b*(C-T),O=(Math.abs(E)+Math.abs(w))*Math.abs(g)+(Math.abs(S)+Math.abs(M))*Math.abs(m)+(Math.abs(C)+Math.abs(T))*Math.abs(b),A=$I*O;return k>A||-k>A?k:XI(n,r,s,l)}];function KI(a){let n=Au[a.length];return n||(n=Au[a.length]=Zy(a.length)),n.apply(void 0,...a)}function qI(a,n,r,s,l,u,h){return function(...d){switch(d.length){case 0:case 1:return 0;case 2:return s(d[0],d[1]);case 3:return l(d[0],d[1],d[2]);case 4:return u(d[0],d[1],d[2],d[3]);case 5:return h(d[0],d[1],d[2],d[3],d[4])}return a(d)}}function QI(){for(;Au.length<=FC;)Au.push(Zy(Au.length));const a=qI(void 0,KI,...Au);for(let n=0;n<=FC;++n)a[n]=Au[n];return a}var Ov=QI();const zC=Ov[3];function JI(a){const n=a.length;if(n<3){const f=new Array(n);for(let d=0;d<n;++d)f[d]=d;return n===2&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:f}const r=new Array(n);for(let f=0;f<n;++f)r[f]=f;r.sort((f,d)=>{const v=a[f][0]-a[d][0];return v||a[f][1]-a[d][1]});const s=[r[0],r[1]],l=[r[0],r[1]];for(let f=2;f<n;++f){const d=r[f],v=a[d];let p=s.length;for(;p>1&&zC(a[s[p-2]],a[s[p-1]],v)<=0;)p-=1,s.pop();for(s.push(d),p=l.length;p>1&&zC(a[l[p-2]],a[l[p-1]],v)>=0;)p-=1,l.pop();l.push(d)}const u=new Array(l.length+s.length-2);let h=0;for(let f=0,d=s.length;f<d;++f)u[h++]=s[f];for(let f=l.length-2;f>0;--f)u[h++]=l[f];return u}function tD(a,n,r,s){for(let l=0;l<2;++l){const u=a[l],h=n[l],[f,d]=[Math.min(u,h),Math.max(u,h)],v=r[l],p=s[l],[g,m]=[Math.min(v,p),Math.max(v,p)];if(m<f||d<g)return!1}return!0}function eD(a,n,r,s){const l=Ov(a,r,s),u=Ov(n,r,s);if(l>0&&u>0||l<0&&u<0)return!1;const h=Ov(r,a,n),f=Ov(s,a,n);return h>0&&f>0||h<0&&f<0?!1:l===0&&u===0&&h===0&&f===0?tD(a,n,r,s):!0}function nD(a){const n=[a[0]];let r=a[0];for(let s=1;s<a.length;s++){const l=a[s];(r[0]!==l[0]||r[1]!==l[1])&&n.push(l),r=l}return n}function rD(a){return a.sort(function(n,r){return n[0]-r[0]||n[1]-r[1]})}function j2(a,n){return Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)}function ZC(a,n,r){const s=[n[0]-a[0],n[1]-a[1]],l=[r[0]-a[0],r[1]-a[1]],u=j2(a,n),h=j2(a,r);return(s[0]*l[0]+s[1]*l[1])/Math.sqrt(u*h)}function WC(a,n){for(let r=0;r<n.length-1;r++){const s=[n[r],n[r+1]];if(!(a[0][0]===s[0][0]&&a[0][1]===s[0][1]||a[0][0]===s[1][0]&&a[0][1]===s[1][1])&&eD(a[0],a[1],s[0],s[1]))return!0}return!1}function iD(a){let n=1/0,r=1/0,s=-1/0,l=-1/0;for(let u=a.length-1;u>=0;u--)a[u][0]<n&&(n=a[u][0]),a[u][1]<r&&(r=a[u][1]),a[u][0]>s&&(s=a[u][0]),a[u][1]>l&&(l=a[u][1]);return[s-n,l-r]}function aD(a){return[Math.min(a[0][0],a[1][0]),Math.min(a[0][1],a[1][1]),Math.max(a[0][0],a[1][0]),Math.max(a[0][1],a[1][1])]}function sD(a,n,r){let s=null,l=jC,u=jC,h,f;for(let d=0;d<n.length;d++)h=ZC(a[0],a[1],n[d]),f=ZC(a[1],a[0],n[d]),h>l&&f>u&&!WC([a[0],n[d]],r)&&!WC([a[1],n[d]],r)&&(l=h,u=f,s=n[d]);return s}function GC(a,n,r,s,l){let u=!1;for(let h=0;h<a.length-1;h++){const f=[a[h],a[h+1]],d=f[0][0]+","+f[0][1]+","+f[1][0]+","+f[1][1];if(j2(f[0],f[1])<n||l.has(d))continue;let v=0,p=aD(f),g,m,b;do p=s.extendBbox(p,v),g=p[2]-p[0],m=p[3]-p[1],b=sD(f,s.rangePoints(p),a),v++;while(b===null&&(r[0]>g||r[1]>m));g>=r[0]&&m>=r[1]&&l.add(d),b!==null&&(a.splice(h+1,0,b),s.removePoint(b),u=!0)}return u?GC(a,n,r,s,l):a}function oD(a,n,r){const s=n||20,l=nD(rD(G2.toXy(a,r)));if(l.length<4){const g=l.concat([l[0]]);return r?G2.fromXy(g,r):g}const u=iD(l),h=[u[0]*$C,u[1]*$C],f=JI(l).reverse().map(g=>l[g]);f.push(f[0]);const d=l.filter(function(g){return f.indexOf(g)<0}),v=Math.ceil(1/(l.length/(u[0]*u[1]))),p=GC(f,Math.pow(s,2),h,DI(d,v),new Set);return r?G2.fromXy(p,r):p}const jC=Math.cos(90/(180/Math.PI)),$C=.6;function lD(a,n,r){if(a.length===1)return cD(a[0],n,r);if(a.length===2)return HC(a,n,r);if(a.length===3){const[s,l,u]=n2(a);if(vM(s,l,u))return HC([s,u],n,r)}switch(r){case"smooth":return hD(a,n);case"sharp":return fD(a,n);case"rounded":default:return uD(a,n)}}const cD=(a,n,r)=>{if(r==="sharp")return[["M",a[0]-n,a[1]-n],["L",a[0]+n,a[1]-n],["L",a[0]+n,a[1]+n],["L",a[0]-n,a[1]+n],["Z"]];const s=[n,n,0,0,0];return[["M",a[0],a[1]-n],["A",...s,a[0],a[1]+n],["A",...s,a[0],a[1]-n]]},HC=(a,n,r)=>{const s=[n,n,0,0,0],l=r==="sharp"?Ce(a[0],hc(El(Nn(a[0],a[1])),n)):a[0],u=r==="sharp"?Ce(a[1],hc(El(Nn(a[1],a[0])),n)):a[1],h=hc(El(Ng(Nn(l,u),!1)),n),f=hc(h,-1),d=Ce(l,h),v=Ce(u,h),p=Ce(u,f),g=Ce(l,f);return r==="sharp"?[["M",d[0],d[1]],["L",v[0],v[1]],["L",p[0],p[1]],["L",g[0],g[1]],["Z"]]:[["M",d[0],d[1]],["L",v[0],v[1]],["A",...s,p[0],p[1]],["L",g[0],g[1]],["A",...s,d[0],d[1]]]},uD=(a,n)=>{const r=n2(a).map((f,d)=>{const v=(d-2+a.length)%a.length,p=(d-1+a.length)%a.length,g=(d+1)%a.length,m=a[v],b=a[p],E=a[g],w=Nn(m,b),S=Nn(b,f),M=Nn(f,E),C=(R,L)=>JE(R,L,!0)<Math.PI,T=C(w,S),k=C(S,M),O=R=>hc(El(Ng(R,!1)),n),A=O(S);return[{p:xu(T?Ce(b,O(w)):Ce(b,A)),concave:T&&b},{p:xu(k?Ce(f,O(M)):Ce(f,A)),concave:k&&f}]}),s=[n,n,0,0,0],l=r.findIndex((f,d)=>!r[(d-1+r.length)%r.length][0].concave&&!r[(d-1+r.length)%r.length][1].concave&&!f[0].concave&&!f[0].concave&&!f[1].concave),u=r.slice(l).concat(r.slice(0,l));let h=[];return u.flatMap((f,d)=>{const v=[],p=u[r.length-1];return d===0&&v.push(["M",...p[1].p]),f[0].concave?h.push(f[0].p,f[1].p):v.push(["A",...s,...f[0].p]),f[1].concave?h.unshift(f[1].p):v.push(["L",...f[1].p]),h.length===3&&(v.pop(),v.push(["C",...h.flat()]),h=[]),v})},hD=(a,n)=>{const r=n2(a).map((s,l)=>{const u=a[(l+1)%a.length];return{p:s,v:El(Nn(u,s))}});return r.forEach((s,l)=>{const u=l>0?l-1:a.length-1,h=r[u].v,f=El(Ce(h,hc(s.v,JE(h,s.v,!0)<Math.PI?1:-1)));s.p=Ce(s.p,hc(f,n))}),PM(r.map(s=>s.p))},fD=(a,n)=>{const s=a.map((u,h)=>{const f=a[h===0?a.length-1:h-1],d=cv(hc(El(Ng(Nn(f,u),!1)),n));return[Ce(f,d),Ce(u,d)]}).flat();return s.map((u,h)=>{if(h%2===0)return null;const f=[s[(h-1)%s.length],s[h%s.length]],d=[s[(h+1)%s.length],s[(h+2)%s.length]];return e2(f,d,!0)}).filter(Boolean).map((u,h)=>[h===0?"M":"L",u[0],u[1]]).concat([["Z"]])};var dD=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class Wy extends Ai{constructor(n,r){super(n,Object.assign({},Wy.defaultOptions,r)),this.hullMemberIds=[],this.drawHull=()=>{if(!this.shape)this.shape=new pv({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);else{const s=!Rr(this.optionsCache,this.options);this.shape.update(this.getHullStyle(s))}this.optionsCache=Object.assign({},this.options)},this.updateHullPath=s=>{this.shape&&this.options.members.includes(tt(s.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(s=!1)=>{const{graph:l}=this.context,u=this.getMember();if(u.length===0)return"";const h=u.map(v=>l.getNodeData(v)),f=oD(h.map(pr),this.options.concavity).slice(1).reverse(),d=f.flatMap(v=>h.filter(p=>Rr(pr(p),v)).map(tt));return Rr(d,this.hullMemberIds)&&!s?this.path:(this.hullMemberIds=d,this.path=lD(f,this.getPadding(),this.options.corner),this.path)},this.bindEvents()}bindEvents(){this.context.graph.on(Pt.AFTER_RENDER,this.drawHull),this.context.graph.on(Pt.AFTER_ELEMENT_UPDATE,this.updateHullPath)}unbindEvents(){this.context.graph.off(Pt.AFTER_RENDER,this.drawHull),this.context.graph.off(Pt.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(n){const r=this.options,{members:s,padding:l,corner:u}=r,h=dD(r,["members","padding","corner"]);return Object.assign(Object.assign({},h),{d:this.getHullPath(n)})}getPadding(){const{graph:n}=this.context;return this.hullMemberIds.reduce((s,l)=>{const{halfExtents:u}=n.getElementRenderBounds(l),h=Math.max(u[0],u[1]);return Math.max(s,h)},0)+this.options.padding}addMember(n){const r=Array.isArray(n)?n:[n];this.options.members=[...new Set([...this.options.members,...r])],this.shape.update({d:this.getHullPath()})}removeMember(n){const r=Array.isArray(n)?n:[n];this.options.members=this.options.members.filter(s=>!r.includes(s)),r.some(s=>this.hullMemberIds.includes(s))&&this.shape.update({d:this.getHullPath()})}updateMember(n){this.options.members=(0,re.Z)(n)?n(this.options.members):n,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.unbindEvents(),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}}Wy.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};function VC(a,n){n(a),a.children&&a.children.forEach(function(r){r&&VC(r,n)})}function Av(a){Gy(a,!0)}function Qs(a){Gy(a,!1)}function Gy(a,n){var r=n?"visible":"hidden";VC(a,function(s){s.attr("visibility",r)})}var vD=5,UC=function(a,n,r,s){r===void 0&&(r=0),s===void 0&&(s=vD),Object.entries(n).forEach(function(l){var u=(0,N.CR)(l,2),h=u[0],f=u[1],d=a;Object.prototype.hasOwnProperty.call(n,h)&&(f?(0,N2.Z)(f)?((0,N2.Z)(a[h])||(d[h]={}),r<s?UC(a[h],f,r+1,s):d[h]=n[h]):(0,za.Z)(f)?(d[h]=[],d[h]=d[h].concat(f)):d[h]=f:d[h]=f)})},ui=function(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var s=0;s<n.length;s+=1)UC(a,n[s]);return a},pD=function(a){(0,N.ZT)(n,a);function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var l=a.apply(this,(0,N.ev)([],(0,N.CR)(r),!1))||this;return l.isMutationObserved=!0,l.addEventListener(De.INSERTED,function(){Qs(l)}),l}return n}(kr);function YC(a){var n=a.appendChild(new pD({class:"offscreen"}));return Qs(n),n}function gD(a){for(var n=a;n;){if(n.className==="offscreen")return!0;n=n.parent}return!1}function yD(){Gy(this,this.attributes.visibility!=="hidden")}var Sr=function(a){(0,N.ZT)(n,a);function n(r,s){s===void 0&&(s={});var l=a.call(this,ui({},{style:s},r))||this;return l.initialized=!1,l._defaultOptions=s,l}return Object.defineProperty(n.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=YC(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),n.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},n.prototype.disconnectedCallback=function(){var r;(r=this._offscreen)===null||r===void 0||r.destroy()},n.prototype.attributeChangedCallback=function(r){r==="visibility"&&yD.call(this)},n.prototype.update=function(r,s){var l;return this.attr(ui({},this.attributes,r||{})),(l=this.render)===null||l===void 0?void 0:l.call(this,this.attributes,this,s)},n.prototype.clear=function(){this.removeChildren()},n.prototype.bindEvents=function(r,s){},n.prototype.getSubShapeStyle=function(r){var s=r.x,l=r.y,u=r.transform,h=r.transformOrigin,f=r.class,d=r.className,v=r.zIndex,p=(0,N._T)(r,["x","y","transform","transformOrigin","class","className","zIndex"]);return p},n}(Xd);function $2(a){return a.toString().charAt(0).toUpperCase()+a.toString().slice(1)}function mD(a){return a.toString().charAt(0).toLowerCase()+a.toString().slice(1)}function bD(a,n){return"".concat(n).concat($2(a))}function XC(a,n,r){var s;r===void 0&&(r=!0);var l=n||((s=a.match(/^([a-z][a-z0-9]+)/))===null||s===void 0?void 0:s[0])||"",u=a.replace(new RegExp("^(".concat(l,")")),"");return r?mD(u):u}function xD(a,n){Object.entries(n).forEach(function(r){var s=(0,N.CR)(r,2),l=s[0],u=s[1];(0,N.ev)([a],(0,N.CR)(a.querySelectorAll(l)),!1).filter(function(h){return h.matches(l)}).forEach(function(h){if(h){var f=h;f.style.cssText+=Object.entries(u).reduce(function(d,v){return"".concat(d).concat(v.join(":"),";")},"")}})})}var jy=function(a,n){if(!(a!=null&&a.startsWith(n)))return!1;var r=a[n.length];return r>="A"&&r<="Z"};function Te(a,n,r){r===void 0&&(r=!1);var s={};return Object.entries(a).forEach(function(l){var u=(0,N.CR)(l,2),h=u[0],f=u[1];if(!(h==="className"||h==="class")){if(jy(h,"show")&&jy(XC(h,"show"),n)!==r)h===bD(n,"show")?s[h]=f:s[h.replace(new RegExp($2(n)),"")]=f;else if(!jy(h,"show")&&jy(h,n)!==r){var d=XC(h,n);d==="filter"&&typeof f=="function"||(s[d]=f)}}}),s}function yf(a,n){return Object.entries(a).reduce(function(r,s){var l=(0,N.CR)(s,2),u=l[0],h=l[1];return u.startsWith("show")?r["show".concat(n).concat(u.slice(4))]=h:r["".concat(n).concat($2(u))]=h,r},{})}function Ml(a,n){n===void 0&&(n=["x","y","class","className"]);var r=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],s={},l={};return Object.entries(a).forEach(function(u){var h=(0,N.CR)(u,2),f=h[0],d=h[1];n.includes(f)||(r.indexOf(f)!==-1?l[f]=d:s[f]=d)}),[s,l]}var ED=function(a){if(!(0,za.Z)(a))return[];for(var n=[],r=0;r<a.length;r++)n=n.concat(a[r]);return n},wD=ED,H2=function(a){(0,N.ZT)(n,a);function n(r){r===void 0&&(r={});var s=r.style,l=(0,N._T)(r,["style"]);return a.call(this,(0,N.pi)({style:(0,N.pi)({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},s)},l))||this}return Object.defineProperty(n.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=YC(this)),this._offscreen},enumerable:!1,configurable:!0}),n.prototype.disconnectedCallback=function(){var r;(r=this._offscreen)===null||r===void 0||r.destroy()},n}(yl);function SD(a,n){var r=new Map;return a.forEach(function(s){var l=n(s);r.has(l)||r.set(l,[]),r.get(l).push(s)}),r}function _D(a){throw new Error(a)}var MD=function(){function a(l,u,h,f,d,v,p){l===void 0&&(l=null),u===void 0&&(u=null),h===void 0&&(h=null),f===void 0&&(f=null),d===void 0&&(d=[null,null,null,null,null]),v===void 0&&(v=[]),p===void 0&&(p=[]),n.add(this),this._elements=Array.from(l),this._data=u,this._parent=h,this._document=f,this._enter=d[0],this._update=d[1],this._exit=d[2],this._merge=d[3],this._split=d[4],this._transitions=v,this._facetElements=p}a.prototype.selectAll=function(l){var u=typeof l=="string"?this._parent.querySelectorAll(l):l;return new r(u,null,this._elements[0],this._document)},a.prototype.selectFacetAll=function(l){var u=typeof l=="string"?this._parent.querySelectorAll(l):l;return new r(this._elements,null,this._parent,this._document,void 0,void 0,u)},a.prototype.select=function(l){var u=typeof l=="string"?this._parent.querySelectorAll(l)[0]||null:l;return new r([u],null,u,this._document)},a.prototype.append=function(l){var u=this,h=typeof l=="function"?l:function(){return u.createElement(l)},f=[];if(this._data!==null){for(var d=0;d<this._data.length;d++){var v=this._data[d],p=(0,N.CR)(Array.isArray(v)?v:[v,null],2),g=p[0],m=p[1],b=h(g,d);b.__data__=g,m!==null&&(b.__fromElements__=m),this._parent.appendChild(b),f.push(b)}return new r(f,null,this._parent,this._document)}for(var d=0;d<this._elements.length;d++){var E=this._elements[d],g=E.__data__,b=h(g,d);E.appendChild(b),f.push(b)}return new r(f,null,f[0],this._document)},a.prototype.maybeAppend=function(l,u){var h=(0,N.Q_)(this,n,"m",s).call(this,l[0]==="#"?l:"#".concat(l),u);return h.attr("id",l),h},a.prototype.maybeAppendByClassName=function(l,u){var h=l.toString(),f=(0,N.Q_)(this,n,"m",s).call(this,h[0]==="."?h:".".concat(h),u);return f.attr("className",h),f},a.prototype.maybeAppendByName=function(l,u){var h=(0,N.Q_)(this,n,"m",s).call(this,'[name="'.concat(l,'"]'),u);return h.attr("name",l),h},a.prototype.data=function(l,u,h){var f,d;u===void 0&&(u=function(z){return z}),h===void 0&&(h=function(){return null});for(var v=[],p=[],g=new Set(this._elements),m=[],b=new Set,E=new Map(this._elements.map(function(z,W){return[u(z.__data__,W),z]})),w=new Map(this._facetElements.map(function(z,W){return[u(z.__data__,W),z]})),S=SD(this._elements,function(z){return h(z.__data__)}),M=0;M<l.length;M++){var C=l[M],T=u(C,M),k=h(C,M);if(E.has(T)){var O=E.get(T);O.__data__=C,O.__facet__=!1,p.push(O),g.delete(O),E.delete(T)}else if(w.has(T)){var O=w.get(T);O.__data__=C,O.__facet__=!0,p.push(O),w.delete(T)}else if(S.has(T)){var A=S.get(T);m.push([C,A]);try{for(var R=(f=void 0,(0,N.XA)(A)),L=R.next();!L.done;L=R.next()){var O=L.value;g.delete(O)}}catch(z){f={error:z}}finally{try{L&&!L.done&&(d=R.return)&&d.call(R)}finally{if(f)throw f.error}}S.delete(T)}else if(E.has(k)){var O=E.get(k);O.__toData__?O.__toData__.push(C):O.__toData__=[C],b.add(O),g.delete(O)}else v.push(C)}var D=[new r([],v,this._parent,this._document),new r(p,null,this._parent,this._document),new r(g,null,this._parent,this._document),new r([],m,this._parent,this._document),new r(b,null,this._parent,this._document)];return new r(this._elements,null,this._parent,this._document,D)},a.prototype.merge=function(l){var u=(0,N.ev)((0,N.ev)([],(0,N.CR)(this._elements),!1),(0,N.CR)(l._elements),!1),h=(0,N.ev)((0,N.ev)([],(0,N.CR)(this._transitions),!1),(0,N.CR)(l._transitions),!1);return new r(u,null,this._parent,this._document,void 0,h)},a.prototype.createElement=function(l){if(this._document)return this._document.createElement(l,{});var u=r.registry[l];return u?new u:_D("Unknown node type: ".concat(l))},a.prototype.join=function(l,u,h,f,d){l===void 0&&(l=function(E){return E}),u===void 0&&(u=function(E){return E}),h===void 0&&(h=function(E){return E.remove()}),f===void 0&&(f=function(E){return E}),d===void 0&&(d=function(E){return E.remove()});var v=l(this._enter),p=u(this._update),g=h(this._exit),m=f(this._merge),b=d(this._split);return p.merge(v).merge(g).merge(m).merge(b)},a.prototype.remove=function(){for(var l=function(f){var d=u._elements[f],v=u._transitions[f];v?v.then(function(){return d.remove()}):d.remove()},u=this,h=0;h<this._elements.length;h++)l(h);return new r([],null,this._parent,this._document,void 0,this._transitions)},a.prototype.each=function(l){for(var u=0;u<this._elements.length;u++){var h=this._elements[u],f=h.__data__;l.call(h,f,u)}return this},a.prototype.attr=function(l,u){var h=typeof u!="function"?function(){return u}:u;return this.each(function(f,d){u!==void 0&&(this[l]=h.call(this,f,d))})},a.prototype.style=function(l,u,h){h===void 0&&(h=!0);var f=typeof u!="function"||!h?function(){return u}:u;return this.each(function(d,v){u!==void 0&&(this.style[l]=f.call(this,d,v))})},a.prototype.styles=function(l,u){return l===void 0&&(l={}),u===void 0&&(u=!0),this.each(function(h,f){var d=this;Object.entries(l).forEach(function(v){var p=(0,N.CR)(v,2),g=p[0],m=p[1],b=typeof m!="function"||!u?function(){return m}:m;m!==void 0&&d.attr(g,b.call(d,h,f))})})},a.prototype.update=function(l,u){u===void 0&&(u=!0);var h=typeof l!="function"||!u?function(){return l}:l;return this.each(function(f,d){l&&this.update&&this.update(h.call(this,f,d))})},a.prototype.maybeUpdate=function(l,u){u===void 0&&(u=!0);var h=typeof l!="function"||!u?function(){return l}:l;return this.each(function(f,d){l&&this.update&&this.update(h.call(this,f,d))})},a.prototype.transition=function(l){var u=this._transitions,h=new Array(this._elements.length);return this.each(function(f,d){h[d]=l.call(this,f,d)}),this._transitions=wD(h),this},a.prototype.on=function(l,u){return this.each(function(){this.addEventListener(l,u)}),this},a.prototype.call=function(l){for(var u=[],h=1;h<arguments.length;h++)u[h-1]=arguments[h];return l.call.apply(l,(0,N.ev)([this._parent,this],(0,N.CR)(u),!1)),this},a.prototype.node=function(){return this._elements[0]},a.prototype.nodes=function(){return this._elements},a.prototype.transitions=function(){return this._transitions.filter(function(l){return!!l})},a.prototype.parent=function(){return this._parent};var n,r,s;return r=a,n=new WeakSet,s=function(u,h){var f=this._elements[0],d=f.querySelector(u);if(d)return new r([d],null,this._parent,this._document);var v=typeof h=="string"?this.createElement(h):h();return f.appendChild(v),new r([v],null,this._parent,this._document)},a.registry={g:kr,rect:Pr,circle:ur,path:na,text:H2,ellipse:vu,image:vl,line:pl,polygon:gl,polyline:af,html:pu},a}();function Kt(a){return new MD([a],null,a,a.ownerDocument)}function CD(a,n,r){return a.querySelector(n)?Kt(a).select(n):Kt(a).append(r)}var Hi=function(){function a(n,r,s,l){n===void 0&&(n=0),r===void 0&&(r=0),s===void 0&&(s=0),l===void 0&&(l=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=n,this.y=r,this.width=s,this.height=l}return Object.defineProperty(a.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),a.fromRect=function(n){return new a(n.x,n.y,n.width,n.height)},a.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},a.prototype.isPointIn=function(n,r){return n>=this.left&&n<=this.right&&r>=this.top&&r<=this.bottom},a}();function i7(a){var n=a.getRenderBounds(),r=__read(n.min,2),s=r[0],l=r[1],u=__read(n.max,2),h=u[0],f=u[1],d=h-s,v=f-l;return new Hi(s,l,d,v)}var Js=function(a,n){var r=function(l){return"".concat(n,"-").concat(l)},s=Object.fromEntries(Object.entries(a).map(function(l){var u=(0,N.CR)(l,2),h=u[0],f=u[1],d=r(f);return[h,{name:d,class:".".concat(d),id:"#".concat(d),toString:function(){return d}}]}));return Object.assign(s,{prefix:r}),s};function ki(a){if((0,tn.Z)(a))return[a,a,a,a];if((0,za.Z)(a)){var n=a.length;if(n===1)return[a[0],a[0],a[0],a[0]];if(n===2)return[a[0],a[1],a[0],a[1]];if(n===3)return[a[0],a[1],a[2],a[1]];if(n===4)return a}return[0,0,0,0]}function Qa(a,n,r,s,l){return s===void 0&&(s=!0),l===void 0&&(l=function(u){u.node().removeChildren()}),a?r(n):(s&&l(n),null)}var KC=Js({text:"text"},"title");function $y(a){return/\S+-\S+/g.test(a)?a.split("-").map(function(n){return n[0]}):a.length>2?[a[0]]:a.split("")}function TD(a,n){var r=a.attributes,s=r.position,l=r.spacing,u=r.inset,h=r.text,f=a.getBBox(),d=n.getBBox(),v=$y(s),p=(0,N.CR)(ki(h?l:0),4),g=p[0],m=p[1],b=p[2],E=p[3],w=(0,N.CR)(ki(u),4),S=w[0],M=w[1],C=w[2],T=w[3],k=(0,N.CR)([E+m,g+b],2),O=k[0],A=k[1],R=(0,N.CR)([T+M,S+C],2),L=R[0],D=R[1];if(v[0]==="l")return new Hi(f.x,f.y,d.width+f.width+O+L,Math.max(d.height+D,f.height));if(v[0]==="t")return new Hi(f.x,f.y,Math.max(d.width+L,f.width),d.height+f.height+A+D);var z=(0,N.CR)([n.attributes.width||d.width,n.attributes.height||d.height],2),W=z[0],G=z[1];return new Hi(d.x,d.y,W+f.width+O+L,G+f.height+A+D)}function OD(a,n){var r=Object.entries(n).reduce(function(s,l){var u=(0,N.CR)(l,2),h=u[0],f=u[1],d=a.node().attr(h);return d||(s[h]=f),s},{});a.styles(r)}function AD(a){var n,r,s,l,u=a,h=u.width,f=u.height,d=u.position,v=(0,N.CR)([+h/2,+f/2],2),p=v[0],g=v[1],m=(0,N.CR)([+p,+g,"center","middle"],4),b=m[0],E=m[1],w=m[2],S=m[3],M=$y(d);return M.includes("l")&&(n=(0,N.CR)([0,"start"],2),b=n[0],w=n[1]),M.includes("r")&&(r=(0,N.CR)([+h,"end"],2),b=r[0],w=r[1]),M.includes("t")&&(s=(0,N.CR)([0,"top"],2),E=s[0],S=s[1]),M.includes("b")&&(l=(0,N.CR)([+f,"bottom"],2),E=l[0],S=l[1]),{x:b,y:E,textAlign:w,textBaseline:S}}var kD=function(a){(0,N.ZT)(n,a);function n(r){return a.call(this,r,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return n.prototype.getAvailableSpace=function(){var r=this,s=this.attributes,l=s.width,u=s.height,h=s.position,f=s.spacing,d=s.inset,v=r.querySelector(KC.text.class);if(!v)return new Hi(0,0,+l,+u);var p=v.getBBox(),g=p.width,m=p.height,b=(0,N.CR)(ki(f),4),E=b[0],w=b[1],S=b[2],M=b[3],C=(0,N.CR)([0,0,+l,+u],4),T=C[0],k=C[1],O=C[2],A=C[3],R=$y(h);if(R.includes("i"))return new Hi(T,k,O,A);R.forEach(function(yt,st){var mt,at,Et,It;yt==="t"&&(mt=(0,N.CR)(st===0?[m+S,+u-m-S]:[0,+u],2),k=mt[0],A=mt[1]),yt==="r"&&(at=(0,N.CR)([+l-g-M],1),O=at[0]),yt==="b"&&(Et=(0,N.CR)([+u-m-E],1),A=Et[0]),yt==="l"&&(It=(0,N.CR)(st===0?[g+w,+l-g-w]:[0,+l],2),T=It[0],O=It[1])});var L=(0,N.CR)(ki(d),4),D=L[0],z=L[1],W=L[2],G=L[3],Y=(0,N.CR)([G+z,D+W],2),q=Y[0],rt=Y[1];return new Hi(T+G,k+D,O-q,A-rt)},n.prototype.getBBox=function(){return this.title?this.title.getBBox():new Hi(0,0,0,0)},n.prototype.render=function(r,s){var l=this,u=r.width,h=r.height,f=r.position,d=r.spacing,v=(0,N._T)(r,["width","height","position","spacing"]),p=(0,N.CR)(Ml(v),1),g=p[0],m=AD(r),b=m.x,E=m.y,w=m.textAlign,S=m.textBaseline;Qa(!!v.text,Kt(s),function(M){l.title=M.maybeAppendByClassName(KC.text,"text").styles(g).call(OD,{x:b,y:E,textAlign:w,textBaseline:S}).node()})},n}(Sr),V2=function(){};function Ja(a,n){return(0,re.Z)(a)?a.apply(void 0,(0,N.ev)([],(0,N.CR)(n),!1)):a}function PD(a,n){return a.reduce(function(r,s){return(r[s[n]]=r[s[n]]||[]).push(s),r},{})}function RD(a){return typeof a=="boolean"?!1:"enter"in a&&"update"in a&&"exit"in a}function qC(a){if(!a)return{enter:!1,update:!1,exit:!1};var n=["enter","update","exit"],r=Object.fromEntries(Object.entries(a).filter(function(s){var l=(0,N.CR)(s,1),u=l[0];return!n.includes(u)}));return Object.fromEntries(n.map(function(s){return RD(a)?a[s]===!1?[s,!1]:[s,(0,N.pi)((0,N.pi)({},a[s]),r)]:[s,r]}))}function mf(a,n){a?a.finished.then(n):n()}function ND(a,n){a.length===0?n():Promise.all(a.map(function(r){return r==null?void 0:r.finished})).then(n)}function QC(a,n){"update"in a?a.update(n):a.attr(n)}function JC(a,n,r){if(n.length===0)return null;if(!r){var s=n.slice(-1)[0];return QC(a,{style:s}),null}return a.animate(n,r)}function LD(a,n){return!(a.nodeName!=="text"||n.nodeName!=="text"||a.attributes.text!==n.attributes.text)}function ID(a,n,r,s){if(s===void 0&&(s="destroy"),LD(a,n))return a.remove(),[null];var l=function(){s==="destroy"?a.destroy():s==="hide"&&Qs(a),n.isVisible()&&Av(n)};if(!r)return l(),[null];var u=r.duration,h=u===void 0?0:u,f=r.delay,d=f===void 0?0:f,v=Math.ceil(+h/2),p=+h/4,g=(0,N.CR)(a.getGeometryBounds().center,2),m=g[0],b=g[1],E=(0,N.CR)(n.getGeometryBounds().center,2),w=E[0],S=E[1],M=(0,N.CR)([(m+w)/2-m,(b+S)/2-b],2),C=M[0],T=M[1],k=a.style.opacity,O=k===void 0?1:k,A=n.style.opacity,R=A===void 0?1:A,L=a.style.transform||"",D=n.style.transform||"",z=a.animate([{opacity:O,transform:"translate(0, 0) ".concat(L)},{opacity:0,transform:"translate(".concat(C,", ").concat(T,") ").concat(L)}],(0,N.pi)((0,N.pi)({fill:"both"},r),{duration:d+v+p})),W=n.animate([{opacity:0,transform:"translate(".concat(-C,", ").concat(-T,") ").concat(D),offset:.01},{opacity:R,transform:"translate(0, 0) ".concat(D)}],(0,N.pi)((0,N.pi)({fill:"both"},r),{duration:v+p,delay:d+v-p}));return mf(W,l),[z,W]}function to(a,n,r){var s={},l={};return Object.entries(n).forEach(function(u){var h=(0,N.CR)(u,2),f=h[0],d=h[1];if(!(0,le.Z)(d)){var v=a.style[f]||a.parsedStyle[f]||0;v!==d&&(s[f]=v,l[f]=d)}}),r?JC(a,[s,l],(0,N.pi)({fill:"both"},r)):(QC(a,l),null)}function DD(a){var n;return((n=a[0])===null||n===void 0?void 0:n.map(function(r,s){return a.map(function(l){return l[s]})}))||[]}function U2(a,n,r){r===void 0&&(r=!1);var s=a.getBBox(),l=s.width,u=s.height,h=n/Math.max(l,u);return r&&(a.style.transform="scale(".concat(h,")")),h}var tT=function(a,n,r){return[["M",a-r,n],["A",r,r,0,1,0,a+r,n],["A",r,r,0,1,0,a-r,n],["Z"]]},BD=tT,FD=function(a,n,r){return[["M",a-r,n-r],["L",a+r,n-r],["L",a+r,n+r],["L",a-r,n+r],["Z"]]},zD=function(a,n,r){return[["M",a-r,n],["L",a,n-r],["L",a+r,n],["L",a,n+r],["Z"]]},ZD=function(a,n,r){var s=r*Math.sin(.3333333333333333*Math.PI);return[["M",a-r,n+s],["L",a,n-s],["L",a+r,n+s],["Z"]]},WD=function(a,n,r){var s=r*Math.sin(.3333333333333333*Math.PI);return[["M",a-r,n-s],["L",a+r,n-s],["L",a,n+s],["Z"]]},GD=function(a,n,r){var s=r/2*Math.sqrt(3);return[["M",a,n-r],["L",a+s,n-r/2],["L",a+s,n+r/2],["L",a,n+r],["L",a-s,n+r/2],["L",a-s,n-r/2],["Z"]]},jD=function(a,n,r){var s=r-1.5;return[["M",a-r,n-s],["L",a+r,n+s],["L",a+r,n-s],["L",a-r,n+s],["Z"]]},eT=function(a,n,r){return[["M",a,n+r],["L",a,n-r]]},$D=function(a,n,r){return[["M",a-r,n-r],["L",a+r,n+r],["M",a+r,n-r],["L",a-r,n+r]]},HD=function(a,n,r){return[["M",a-r/2,n-r],["L",a+r/2,n-r],["M",a,n-r],["L",a,n+r],["M",a-r/2,n+r],["L",a+r/2,n+r]]},VD=function(a,n,r){return[["M",a-r,n],["L",a+r,n],["M",a,n-r],["L",a,n+r]]},UD=function(a,n,r){return[["M",a-r,n],["L",a+r,n]]},nT=function(a,n,r){return[["M",a-r,n],["L",a+r,n]]},YD=nT,XD=function(a,n,r){return[["M",a-r,n],["A",r/2,r/2,0,1,1,a,n],["A",r/2,r/2,0,1,0,a+r,n]]},KD=function(a,n,r){return[["M",a-r-1,n-2.5],["L",a,n-2.5],["L",a,n+2.5],["L",a+r+1,n+2.5]]},qD=function(a,n,r){return[["M",a-r-1,n+2.5],["L",a,n+2.5],["L",a,n-2.5],["L",a+r+1,n-2.5]]},QD=function(a,n,r){return[["M",a-(r+1),n+2.5],["L",a-r/2,n+2.5],["L",a-r/2,n-2.5],["L",a+r/2,n-2.5],["L",a+r/2,n+2.5],["L",a+r+1,n+2.5]]};function JD(a,n){return[["M",a-5,n+2.5],["L",a-5,n],["L",a,n],["L",a,n-3],["L",a,n+3],["L",a+6.5,n+3]]}var t6=function(a,n,r){return[["M",a-r,n-r],["L",a+r,n],["L",a-r,n+r],["Z"]]},Cs=Js({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),e6=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,r,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:t6(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(l,u){return"".concat(l,"/").concat(u)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return s.playState="idle",s.contentGroup=s.appendChild(new kr({class:Cs.contentGroup.name})),s.playWindow=s.contentGroup.appendChild(new kr({class:Cs.playWindow.name})),s.innerCurrPage=s.defaultPage,s}return Object.defineProperty(n.prototype,"defaultPage",{get:function(){var r=this.attributes.defaultPage;return Le(r,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pageShape",{get:function(){var r=this.pageViews,s=(0,N.CR)(DD(r.map(function(g){var m=g.getBBox(),b=m.width,E=m.height;return[b,E]})).map(function(g){return Math.max.apply(Math,(0,N.ev)([],(0,N.CR)(g),!1))}),2),l=s[0],u=s[1],h=this.attributes,f=h.pageWidth,d=f===void 0?l:f,v=h.pageHeight,p=v===void 0?u:v;return{pageWidth:d,pageHeight:p}},enumerable:!1,configurable:!0}),n.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(n.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),n.prototype.getBBox=function(){var r=a.prototype.getBBox.call(this),s=r.x,l=r.y,u=this.controllerShape,h=this.pageShape,f=h.pageWidth,d=h.pageHeight;return new Hi(s,l,f+u.width,d)},n.prototype.goTo=function(r){var s=this,l=this.attributes.animate,u=this,h=u.currPage,f=u.playState,d=u.playWindow,v=u.pageViews;if(f!=="idle"||r<0||v.length<=0||r>=v.length)return null;v[h].setLocalPosition(0,0),this.prepareFollowingPage(r);var p=(0,N.CR)(this.getFollowingPageDiff(r),2),g=p[0],m=p[1];this.playState="running";var b=JC(d,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-g,", ").concat(-m,")")}],l);return mf(b,function(){s.innerCurrPage=r,s.playState="idle",s.setVisiblePages([r]),s.updatePageInfo()}),b},n.prototype.prev=function(){var r=this.attributes.loop,s=this.pageViews.length,l=this.currPage;if(!r&&l<=0)return null;var u=r?(l-1+s)%s:Le(l-1,0,s);return this.goTo(u)},n.prototype.next=function(){var r=this.attributes.loop,s=this.pageViews.length,l=this.currPage;if(!r&&l>=s-1)return null;var u=r?(l+1)%s:Le(l+1,0,s);return this.goTo(u)},n.prototype.renderClipPath=function(r){var s=this.pageShape,l=s.pageWidth,u=s.pageHeight;if(!l||!u){this.contentGroup.style.clipPath=void 0;return}this.clipPath=r.maybeAppendByClassName(Cs.clipPath,"rect").styles({width:l,height:u}),this.contentGroup.attr("clipPath",this.clipPath.node())},n.prototype.setVisiblePages=function(r){this.playWindow.children.forEach(function(s,l){r.includes(l)?Av(s):Qs(s)})},n.prototype.adjustControllerLayout=function(){var r=this,s=r.prevBtnGroup,l=r.nextBtnGroup,u=r.pageInfoGroup,h=this.attributes,f=h.orientation,d=h.controllerPadding,v=u.getBBox(),p=v.width,g=v.height,m=(0,N.CR)(f==="horizontal"?[-180,0]:[-90,90],2),b=m[0],E=m[1];s.setLocalEulerAngles(b),l.setLocalEulerAngles(E);var w=s.getBBox(),S=w.width,M=w.height,C=l.getBBox(),T=C.width,k=C.height,O=Math.max(S,p,T),A=f==="horizontal"?{offset:[[0,0],[S/2+d,0],[S+p+d*2,0]],textAlign:"start"}:{offset:[[O/2,-M-d],[O/2,0],[O/2,k+d]],textAlign:"center"},R=(0,N.CR)(A.offset,3),L=(0,N.CR)(R[0],2),D=L[0],z=L[1],W=(0,N.CR)(R[1],2),G=W[0],Y=W[1],q=(0,N.CR)(R[2],2),rt=q[0],yt=q[1],st=A.textAlign,mt=u.querySelector("text");mt&&(mt.style.textAlign=st),s.setLocalPosition(D,z),u.setLocalPosition(G,Y),l.setLocalPosition(rt,yt)},n.prototype.updatePageInfo=function(){var r,s=this,l=s.currPage,u=s.pageViews,h=s.attributes.formatter;u.length<2||((r=this.pageInfoGroup.querySelector(Cs.pageInfo.class))===null||r===void 0||r.attr("text",h(l+1,u.length)),this.adjustControllerLayout())},n.prototype.getFollowingPageDiff=function(r){var s=this.currPage;if(s===r)return[0,0];var l=this.attributes.orientation,u=this.pageShape,h=u.pageWidth,f=u.pageHeight,d=r<s?-1:1;return l==="horizontal"?[d*h,0]:[0,d*f]},n.prototype.prepareFollowingPage=function(r){var s=this,l=s.currPage,u=s.pageViews;if(this.setVisiblePages([r,l]),r!==l){var h=(0,N.CR)(this.getFollowingPageDiff(r),2),f=h[0],d=h[1];u[r].setLocalPosition(f,d)}},n.prototype.renderController=function(r){var s=this,l=this.attributes.controllerSpacing,u=this.pageShape,h=u.pageWidth,f=u.pageHeight,d=this.pageViews.length>=2,v=r.maybeAppendByClassName(Cs.controller,"g");if(Gy(v.node(),d),!!d){var p=Te(this.attributes,"button"),g=Te(this.attributes,"pageNum"),m=(0,N.CR)(Ml(p),2),b=m[0],E=m[1],w=b.size,S=(0,N._T)(b,["size"]),M=!v.select(Cs.prevBtnGroup.class).node(),C=v.maybeAppendByClassName(Cs.prevBtnGroup,"g").styles(E);this.prevBtnGroup=C.node();var T=C.maybeAppendByClassName(Cs.prevBtn,"path"),k=v.maybeAppendByClassName(Cs.nextBtnGroup,"g").styles(E);this.nextBtnGroup=k.node();var O=k.maybeAppendByClassName(Cs.nextBtn,"path");[T,O].forEach(function(R){R.styles((0,N.pi)((0,N.pi)({},S),{transformOrigin:"center"})),U2(R.node(),w,!0)});var A=v.maybeAppendByClassName(Cs.pageInfoGroup,"g");this.pageInfoGroup=A.node(),A.maybeAppendByClassName(Cs.pageInfo,"text").styles(g),this.updatePageInfo(),v.node().setLocalPosition(h+l,f/2),M&&(this.prevBtnGroup.addEventListener("click",function(){s.prev()}),this.nextBtnGroup.addEventListener("click",function(){s.next()}))}},n.prototype.render=function(r,s){var l=r.x,u=l===void 0?0:l,h=r.y,f=h===void 0?0:h;this.attr("transform","translate(".concat(u,", ").concat(f,")"));var d=Kt(s);this.renderClipPath(d),this.renderController(d),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},n.prototype.bindEvents=function(){var r=this,s=_v(function(){return r.render(r.attributes,r)},50);this.playWindow.addEventListener(De.INSERTED,s),this.playWindow.addEventListener(De.REMOVED,s)},n}(Sr);function n6(a){var n="default";if((0,ai.Z)(a)&&a instanceof Image)n="image";else if((0,re.Z)(a))n="symbol";else if((0,xn.Z)(a)){var r=new RegExp("data:(image|text)");a.match(r)?n="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(a)?n="url":n="symbol"}return n}function r6(a){var n=n6(a);return["base64","url","image"].includes(n)?"image":a&&n==="symbol"?"path":null}var Zn=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(r,s){var l=r.x,u=l===void 0?0:l,h=r.y,f=h===void 0?0:h,d=this.getSubShapeStyle(r),v=d.symbol,p=d.size,g=p===void 0?16:p,m=(0,N._T)(d,["symbol","size"]),b=r6(v);Qa(!!b,Kt(s),function(E){E.maybeAppendByClassName("marker",b).attr("className","marker ".concat(b,"-marker")).call(function(w){if(b==="image"){var S=g*2;w.styles({img:v,width:S,height:S,x:u-g,y:f-g})}else{var S=g/2,M=(0,re.Z)(v)?v:n.getSymbol(v);w.styles((0,N.pi)({d:M==null?void 0:M(u,f,S)},m))}})})},n.MARKER_SYMBOL_MAP=new Map,n.registerSymbol=function(r,s){n.MARKER_SYMBOL_MAP.set(r,s)},n.getSymbol=function(r){return n.MARKER_SYMBOL_MAP.get(r)},n.getSymbols=function(){return Array.from(n.MARKER_SYMBOL_MAP.keys())},n}(Sr);Zn.registerSymbol("cross",$D),Zn.registerSymbol("hyphen",UD),Zn.registerSymbol("line",eT),Zn.registerSymbol("plus",VD),Zn.registerSymbol("tick",HD),Zn.registerSymbol("circle",tT),Zn.registerSymbol("point",BD),Zn.registerSymbol("bowtie",jD),Zn.registerSymbol("hexagon",GD),Zn.registerSymbol("square",FD),Zn.registerSymbol("diamond",zD),Zn.registerSymbol("triangle",ZD),Zn.registerSymbol("triangle-down",WD),Zn.registerSymbol("line",eT),Zn.registerSymbol("dot",nT),Zn.registerSymbol("dash",YD),Zn.registerSymbol("smooth",XD),Zn.registerSymbol("hv",KD),Zn.registerSymbol("vh",qD),Zn.registerSymbol("hvh",QD),Zn.registerSymbol("vhv",JD);function a7(a,n,r){var s=Math.round((a-r)/n);return r+s*n}function i6(a,n,r){var s=1.4,l=s*r;return[["M",a-r,n-l],["L",a+r,n-l],["L",a+r,n+l],["L",a-r,n+l],["Z"]]}var rT=1.4,iT=.4;function a6(a,n,r){var s=r,l=s*rT,u=s/2,h=s/6,f=a+l*iT;return[["M",a,n],["L",f,n+u],["L",a+l,n+u],["L",a+l,n-u],["L",f,n-u],["Z"],["M",f,n+h],["L",a+l-2,n+h],["M",f,n-h],["L",a+l-2,n-h]]}function s6(a,n,r){var s=r,l=s*rT,u=s/2,h=s/6,f=n+l*iT;return[["M",a,n],["L",a-u,f],["L",a-u,n+l],["L",a+u,n+l],["L",a+u,f],["Z"],["M",a-h,f],["L",a-h,n+l-2],["M",a+h,f],["L",a+h,n+l-2]]}Zn.registerSymbol("hiddenHandle",i6),Zn.registerSymbol("verticalHandle",a6),Zn.registerSymbol("horizontalHandle",s6);var s7=function(a,n,r){return a===void 0&&(a="horizontal"),a==="horizontal"?n:r};function o7(a,n,r,s){var l;s===void 0&&(s=4);var u=__read(a,2),h=u[0],f=u[1],d=__read(n,2),v=d[0],p=d[1],g=__read(r,2),m=g[0],b=g[1],E=__read([v,p],2),w=E[0],S=E[1],M=S-w;return w>S&&(l=__read([S,w],2),w=l[0],S=l[1]),M>f-h?[h,f]:w<h?m===h&&b===S?[h,S]:[h,M+h]:S>f?b===f&&m===w?[w,f]:[f-M,f]:[w,S]}function Y2(a,n,r){return a===void 0&&(a="horizontal"),a==="horizontal"?n:r}function l7(a){var n=a&&a.getRenderBounds();if(!n)return{width:0,height:0};var r=n.getMax(),s=n.getMin();return{width:r[0]-s[0],height:r[1]-s[1]}}function aT(a){var n=a.getLocalBounds(),r=n.min,s=n.max,l=(0,N.CR)([r,s],2),u=(0,N.CR)(l[0],2),h=u[0],f=u[1],d=(0,N.CR)(l[1],2),v=d[0],p=d[1];return{x:h,y:f,width:v-h,height:p-f,left:h,bottom:p,top:f,right:v}}function c7(a,n){var r=select(a).append("text").node();return r.attr(__assign(__assign({},n),{visibility:"hidden"})),r}function o6(a,n){var r=(0,N.CR)(a,2),s=r[0],l=r[1],u=(0,N.CR)(n,2),h=u[0],f=u[1];return s!==h&&l===f}function u7(a,n){var r=__read(a,2),s=r[0],l=r[1],u=__read(n,2),h=u[0],f=u[1];return s===h&&l!==f}function l6(a,n){var r,s,l=n.attributes;try{for(var u=(0,N.XA)(Object.entries(l)),h=u.next();!h.done;h=u.next()){var f=(0,N.CR)(h.value,2),d=f[0],v=f[1];d!=="id"&&d!=="className"&&a.attr(d,v)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}}function Cl(a){return typeof a=="function"?a():(0,xn.Z)(a)||(0,tn.Z)(a)?new H2({style:{text:String(a)}}):a}var Hy,X2;function h7(a){X2=a}var c6=P2(function(a,n){var r=n.fontSize,s=n.fontFamily,l=n.fontWeight,u=n.fontStyle,h=n.fontVariant;return X2?X2(a,r):(Hy||(Hy=Mt.offscreenCanvasCreator.getOrCreateContext(void 0)),Hy.font=[u,h,l,"".concat(r,"px"),s].join(" "),Hy.measureText(a).width)},function(a,n){return[a,Object.values(n||sT(a)).join()].join("")},4096),sT=function(a){var n=a.style.fontFamily||"sans-serif",r=a.style.fontWeight||"normal",s=a.style.fontStyle||"normal",l=a.style.fontVariant,u=a.style.fontSize;return u=typeof u=="object"?u.value:u,{fontSize:u,fontFamily:n,fontWeight:r,fontStyle:s,fontVariant:l}};function oT(a){return a.nodeName==="text"?a:a.nodeName==="g"&&a.children.length===1&&a.children[0].nodeName==="text"?a.children[0]:null}function lT(a,n){var r=oT(a);r&&r.attr(n)}function K2(a,n,r){r===void 0&&(r="..."),lT(a,{wordWrap:!0,wordWrapWidth:n,maxLines:1,textOverflow:r})}var ts=Js({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function u6(a){var n=a.querySelector(ts.marker.class);return n?n.style:{}}var h6=function(a){(0,N.ZT)(n,a);function n(r){return a.call(this,r,{span:[1,1],marker:function(){return new ur({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(n.prototype,"showValue",{get:function(){var r=this.attributes.valueText;return r?typeof r=="string"||typeof r=="number"?r!=="":typeof r=="function"?!0:r.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"actualSpace",{get:function(){var r=this.labelGroup,s=this.valueGroup,l=this.attributes.markerSize,u=r.node().getBBox(),h=u.width,f=u.height,d=s.node().getBBox(),v=d.width,p=d.height;return{markerWidth:l,labelWidth:h,valueWidth:v,height:Math.max(l,f,p)}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"span",{get:function(){var r=this.attributes.span;if(!r)return[1,1];var s=(0,N.CR)(ki(r),2),l=s[0],u=s[1],h=this.showValue?u:0,f=l+h;return[l/f,h/f]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shape",{get:function(){var r,s=this.attributes,l=s.markerSize,u=s.width,h=this.actualSpace,f=h.markerWidth,d=h.height,v=this.actualSpace,p=v.labelWidth,g=v.valueWidth,m=(0,N.CR)(this.spacing,2),b=m[0],E=m[1];if(u){var w=u-l-b-E,S=(0,N.CR)(this.span,2),M=S[0],C=S[1];r=(0,N.CR)([M*w,C*w],2),p=r[0],g=r[1]}var T=f+p+g+b+E;return{width:T,height:d,markerWidth:f,labelWidth:p,valueWidth:g}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"spacing",{get:function(){var r=this.attributes.spacing;if(!r)return[0,0];var s=(0,N.CR)(ki(r),2),l=s[0],u=s[1];return this.showValue?[l,u]:[l,0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"layout",{get:function(){var r=this.shape,s=r.markerWidth,l=r.labelWidth,u=r.valueWidth,h=r.width,f=r.height,d=(0,N.CR)(this.spacing,2),v=d[0],p=d[1];return{height:f,width:h,markerWidth:s,labelWidth:l,valueWidth:u,position:[s/2,s+v,s+l+v+p]}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scaleSize",{get:function(){var r=u6(this.markerGroup.node()),s=this.attributes,l=s.markerSize,u=s.markerStrokeWidth,h=u===void 0?r.strokeWidth:u,f=s.markerLineWidth,d=f===void 0?r.lineWidth:f,v=s.markerStroke,p=v===void 0?r.stroke:v,g=+(h||d||(p?1:0))*Math.sqrt(2),m=this.markerGroup.node().getBBox(),b=m.width,E=m.height;return(1-g/Math.max(b,E))*l},enumerable:!1,configurable:!0}),n.prototype.renderMarker=function(r){var s=this,l=this.attributes.marker,u=Te(this.attributes,"marker");this.markerGroup=r.maybeAppendByClassName(ts.markerGroup,"g").style("zIndex",0),Qa(!!l,this.markerGroup,function(){var h,f=s.markerGroup.node(),d=(h=f.childNodes)===null||h===void 0?void 0:h[0],v=typeof l=="string"?new Zn({style:{symbol:l},className:ts.marker.name}):l();d?v.nodeName===d.nodeName?d instanceof Zn?d.update((0,N.pi)((0,N.pi)({},u),{symbol:l})):(l6(d,v),Kt(d).styles(u)):(d.remove(),Kt(v).attr("className",ts.marker.name).styles(u),f.appendChild(v)):(v instanceof Zn||Kt(v).attr("className",ts.marker.name).styles(u),f.appendChild(v)),s.markerGroup.node().scale(1/s.markerGroup.node().getScale()[0]);var p=U2(s.markerGroup.node(),s.scaleSize,!0);s.markerGroup.node().style._transform="scale(".concat(p,")")})},n.prototype.renderLabel=function(r){var s=Te(this.attributes,"label"),l=s.text,u=(0,N._T)(s,["text"]);this.labelGroup=r.maybeAppendByClassName(ts.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(ts.label,function(){return Cl(l)}).styles(u)},n.prototype.renderValue=function(r){var s=this,l=Te(this.attributes,"value"),u=l.text,h=(0,N._T)(l,["text"]);this.valueGroup=r.maybeAppendByClassName(ts.valueGroup,"g").style("zIndex",0),Qa(this.showValue,this.valueGroup,function(){s.valueGroup.maybeAppendByClassName(ts.value,function(){return Cl(u)}).styles(h)})},n.prototype.renderBackground=function(r){var s=this.shape,l=s.width,u=s.height,h=Te(this.attributes,"background");this.background=r.maybeAppendByClassName(ts.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(ts.background,"rect").styles((0,N.pi)({width:l,height:u},h))},n.prototype.adjustLayout=function(){var r=this.layout,s=r.labelWidth,l=r.valueWidth,u=r.height,h=(0,N.CR)(r.position,3),f=h[0],d=h[1],v=h[2],p=u/2;this.markerGroup.styles({transform:"translate(".concat(f,", ").concat(p,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(d,", ").concat(p,")")}),K2(this.labelGroup.select(ts.label.class).node(),Math.ceil(s)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(v,", ").concat(p,")")}),K2(this.valueGroup.select(ts.value.class).node(),Math.ceil(l)))},n.prototype.render=function(r,s){var l=Kt(s),u=r.x,h=u===void 0?0:u,f=r.y,d=f===void 0?0:f;l.styles({transform:"translate(".concat(h,", ").concat(d,")")}),this.renderMarker(l),this.renderLabel(l),this.renderValue(l),this.renderBackground(l),this.adjustLayout()},n}(Sr),ku=Js({page:"item-page",navigator:"navigator",item:"item"},"items"),cT=function(a,n,r){return r===void 0&&(r=!0),a?n(a):r},f6=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,r,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:V2,mouseenter:V2,mouseleave:V2})||this;return s.navigatorShape=[0,0],s}return Object.defineProperty(n.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"grid",{get:function(){var r=this.attributes,s=r.gridRow,l=r.gridCol,u=r.data;if(!s&&!l)throw new Error("gridRow and gridCol can not be set null at the same time");return s&&l?[s,l]:s?[s,u.length]:[u.length,l]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"renderData",{get:function(){var r=this.attributes,s=r.data,l=r.layout,u=Te(this.attributes,"item"),h=s.map(function(f,d){var v=f.id,p=v===void 0?d:v,g=f.label,m=f.value;return{id:"".concat(p),index:d,style:(0,N.pi)({layout:l,labelText:g,valueText:m},Object.fromEntries(Object.entries(u).map(function(b){var E=(0,N.CR)(b,2),w=E[0],S=E[1];return[w,Ja(S,[f,d,s])]})))}});return h},enumerable:!1,configurable:!0}),n.prototype.getGridLayout=function(){var r=this,s=this.attributes,l=s.orientation,u=s.width,h=s.rowPadding,f=s.colPadding,d=(0,N.CR)(this.navigatorShape,1),v=d[0],p=(0,N.CR)(this.grid,2),g=p[0],m=p[1],b=m*g,E=0;return this.pageViews.children.map(function(w,S){var M,C,T=Math.floor(S/b),k=S%b,O=r.ifHorizontal(m,g),A=[Math.floor(k/O),k%O];l==="vertical"&&A.reverse();var R=(0,N.CR)(A,2),L=R[0],D=R[1],z=(u-v-(m-1)*f)/m,W=w.getBBox().height,G=(0,N.CR)([0,0],2),Y=G[0],q=G[1];return l==="horizontal"?(M=(0,N.CR)([E,L*(W+h)],2),Y=M[0],q=M[1],E=D===m-1?0:E+z+f):(C=(0,N.CR)([D*(z+f),E],2),Y=C[0],q=C[1],E=L===g-1?0:E+W+h),{page:T,index:S,row:L,col:D,pageIndex:k,width:z,height:W,x:Y,y:q}})},n.prototype.getFlexLayout=function(){var r=this.attributes,s=r.width,l=r.height,u=r.rowPadding,h=r.colPadding,f=(0,N.CR)(this.navigatorShape,1),d=f[0],v=(0,N.CR)(this.grid,2),p=v[0],g=v[1],m=(0,N.CR)([s-d,l],2),b=m[0],E=m[1],w=(0,N.CR)([0,0,0,0,0,0,0,0],8),S=w[0],M=w[1],C=w[2],T=w[3],k=w[4],O=w[5],A=w[6],R=w[7];return this.pageViews.children.map(function(L,D){var z,W,G,Y,q=L.getBBox(),rt=q.width,yt=q.height,st=A===0?0:h,mt=A+st+rt;if(mt<=b&&cT(k,function(Et){return Et<g}))return z=(0,N.CR)([A+st,R,mt],3),S=z[0],M=z[1],A=z[2],{width:rt,height:yt,x:S,y:M,page:C,index:D,pageIndex:T++,row:O,col:k++};W=(0,N.CR)([O+1,0,0,R+yt+u],4),O=W[0],k=W[1],A=W[2],R=W[3];var at=R+yt;return at<=E&&cT(O,function(Et){return Et<p})?(G=(0,N.CR)([A,R,rt],3),S=G[0],M=G[1],A=G[2],{width:rt,height:yt,x:S,y:M,page:C,index:D,pageIndex:T++,row:O,col:k++}):(Y=(0,N.CR)([0,0,rt,0,C+1,0,0,0],8),S=Y[0],M=Y[1],A=Y[2],R=Y[3],C=Y[4],T=Y[5],O=Y[6],k=Y[7],{width:rt,height:yt,x:S,y:M,page:C,index:D,pageIndex:T++,row:O,col:k++})})},Object.defineProperty(n.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var r=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,s=r.call(this);return s.slice(-1)[0].page>0?(this.navigatorShape=[55,0],r.call(this)):s},enumerable:!1,configurable:!0}),n.prototype.ifHorizontal=function(r,s){var l=this.attributes.orientation;return Y2(l,r,s)},n.prototype.flattenPage=function(r){r.querySelectorAll(ku.item.class).forEach(function(s){r.appendChild(s)}),r.querySelectorAll(ku.page.class).forEach(function(s){var l=r.removeChild(s);l.destroy()})},n.prototype.renderItems=function(r){var s=this.attributes,l=s.click,u=s.mouseenter,h=s.mouseleave;this.flattenPage(r);var f=this.dispatchCustomEvent.bind(this);Kt(r).selectAll(ku.item.class).data(this.renderData,function(d){return d.id}).join(function(d){return d.append(function(v){var p=v.style;return new h6({style:p})}).attr("className",ku.item.name).on("click",function(){l==null||l(this),f("itemClick",{item:this})}).on("pointerenter",function(){u==null||u(this),f("itemMouseenter",{item:this})}).on("pointerleave",function(){h==null||h(this),f("itemMouseleave",{item:this})})},function(d){return d.each(function(v){var p=v.style;this.update(p)})},function(d){return d.remove()})},n.prototype.relayoutNavigator=function(){var r,s=this.attributes,l=s.layout,u=s.width,h=((r=this.pageViews.children[0])===null||r===void 0?void 0:r.getBBox().height)||0,f=(0,N.CR)(this.navigatorShape,2),d=f[0],v=f[1];this.navigator.update(l==="grid"?{pageWidth:u-d,pageHeight:h-v}:{})},n.prototype.adjustLayout=function(){var r=this,s=Object.entries(PD(this.itemsLayout,"page")).map(function(u){var h=(0,N.CR)(u,2),f=h[0],d=h[1];return{page:f,layouts:d}}),l=(0,N.ev)([],(0,N.CR)(this.navigator.getContainer().children),!1);s.forEach(function(u){var h=u.layouts,f=r.pageViews.appendChild(new kr({className:ku.page.name}));h.forEach(function(d){var v=d.x,p=d.y,g=d.index,m=d.width,b=d.height,E=l[g];f.appendChild(E),fv(E,"__layout__",d),E.update({x:v,y:p,width:m,height:b})})}),this.relayoutNavigator()},n.prototype.renderNavigator=function(r){var s=this.attributes.orientation,l=Te(this.attributes,"nav"),u=ui({orientation:s},l),h=this;return r.selectAll(ku.navigator.class).data(["nav"]).join(function(f){return f.append(function(){return new e6({style:u})}).attr("className",ku.navigator.name).each(function(){h.navigator=this})},function(f){return f.each(function(){this.update(u)})},function(f){return f.remove()}),this.navigator},n.prototype.getBBox=function(){return this.navigator.getBBox()},n.prototype.render=function(r,s){var l=this.attributes.data;if(!(!l||l.length===0)){var u=this.renderNavigator(Kt(s));this.renderItems(u.getContainer()),this.adjustLayout()}},n.prototype.dispatchCustomEvent=function(r,s){var l=new xr(r,{detail:s});this.dispatchEvent(l)},n}(Sr),kv=Js({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),uT={showLabel:!0,formatter:function(a){return a.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},f7=function(a){(0,N.ZT)(n,a);function n(r){return a.call(this,r,uT)||this}return n.prototype.render=function(r,s){var l=Kt(s).maybeAppendByClassName(kv.markerGroup,"g");this.renderMarker(l);var u=Kt(s).maybeAppendByClassName(kv.labelGroup,"g");this.renderLabel(u)},n.prototype.renderMarker=function(r){var s=this,l=this.attributes,u=l.orientation,h=l.markerSymbol,f=h===void 0?Y2(u,"horizontalHandle","verticalHandle"):h;Qa(!!f,r,function(d){var v=Te(s.attributes,"marker"),p=(0,N.pi)({symbol:f},v);s.marker=d.maybeAppendByClassName(kv.marker,function(){return new Zn({style:p})}).update(p)})},n.prototype.renderLabel=function(r){var s=this,l=this.attributes,u=l.showLabel,h=l.orientation,f=l.spacing,d=f===void 0?0:f,v=l.formatter;Qa(u,r,function(p){var g,m=Te(s.attributes,"label"),b=m.text,E=(0,N._T)(m,["text"]),w=((g=p.select(kv.marker.class))===null||g===void 0?void 0:g.node().getBBox())||{},S=w.width,M=S===void 0?0:S,C=w.height,T=C===void 0?0:C,k=(0,N.CR)(Y2(h,[0,T+d,"center","top"],[M+d,0,"start","middle"]),4),O=k[0],A=k[1],R=k[2],L=k[3];p.maybeAppendByClassName(kv.label,"text").styles((0,N.pi)((0,N.pi)({},E),{x:O,y:A,text:v(b).toString(),textAlign:R,textBaseline:L}))})},n}(Sr),hT={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},d6=ui({},hT,{}),d7=ui({},hT,yf(uT,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),v7=.01,p7=.5,Pv=Js({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),v6=function(a){(0,N.ZT)(n,a);function n(r){return a.call(this,r,d6)||this}return n.prototype.renderTitle=function(r,s,l){var u=this.attributes,h=u.showTitle,f=u.titleText,d=Te(this.attributes,"title"),v=(0,N.CR)(Ml(d),2),p=v[0],g=v[1];this.titleGroup=r.maybeAppendByClassName(Pv.titleGroup,"g").styles(g);var m=(0,N.pi)((0,N.pi)({width:s,height:l},p),{text:h?f:""});this.title=this.titleGroup.maybeAppendByClassName(Pv.title,function(){return new kD({style:m})}).update(m)},n.prototype.renderItems=function(r,s){var l=s.x,u=s.y,h=s.width,f=s.height,d=Te(this.attributes,"title",!0),v=(0,N.CR)(Ml(d),2),p=v[0],g=v[1],m=(0,N.pi)((0,N.pi)({},p),{width:h,height:f,x:0,y:0});this.itemsGroup=r.maybeAppendByClassName(Pv.itemsGroup,"g").styles((0,N.pi)((0,N.pi)({},g),{transform:"translate(".concat(l,", ").concat(u,")")}));var b=this;this.itemsGroup.selectAll(Pv.items.class).data(["items"]).join(function(E){return E.append(function(){return new f6({style:m})}).attr("className",Pv.items.name).each(function(){b.items=Kt(this)})},function(E){return E.update(m)},function(E){return E.remove()})},n.prototype.adjustLayout=function(){var r=this.attributes.showTitle;if(r){var s=this.title.node().getAvailableSpace(),l=s.x,u=s.y;this.itemsGroup.node().style.transform="translate(".concat(l,", ").concat(u,")")}},Object.defineProperty(n.prototype,"availableSpace",{get:function(){var r=this.attributes,s=r.showTitle,l=r.width,u=r.height;return s?this.title.node().getAvailableSpace():new Hi(0,0,l,u)},enumerable:!1,configurable:!0}),n.prototype.getBBox=function(){var r,s,l=(r=this.title)===null||r===void 0?void 0:r.node(),u=(s=this.items)===null||s===void 0?void 0:s.node();return!l||!u?a.prototype.getBBox.call(this):TD(l,u)},n.prototype.render=function(r,s){var l=this.attributes,u=l.width,h=l.height,f=l.x,d=f===void 0?0:f,v=l.y,p=v===void 0?0:v,g=Kt(s);s.style.transform="translate(".concat(d,", ").concat(p,")"),this.renderTitle(g,u,h),this.renderItems(g,this.availableSpace),this.adjustLayout()},n}(Sr);function q2(a){const{width:n,height:r,renderer:s}=a,l=p6(a),u=new tv({width:n,height:r,container:l,renderer:s||new gv});return[l,u]}function p6(a){var n;const{container:r,className:s,graphCanvas:l}=a;if(r)return typeof r=="string"?document.getElementById(r):r;const u=gf(s,!1),{width:h,height:f,containerStyle:d}=a,[v,p]=g6(a);return Object.assign(u.style,Object.assign({position:"absolute",left:v+"px",top:p+"px",width:h+"px",height:f+"px"},d)),(n=l.getContainer())===null||n===void 0||n.appendChild(u),u}function g6(a){const{width:n,height:r,placement:s,graphCanvas:l}=a,[u,h]=l.getSize(),[f,d]=hM(s);return[f*(u-n),d*(h-r)]}var y6=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class Vy extends Ai{constructor(n,r){super(n,Object.assign({},Vy.defaultOptions,r)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{const{graph:s}=this.context;s.on(Pt.AFTER_DRAW,this.createElement)},this.changeState=(s,l)=>{const{graph:u}=this.context,{typePrefix:h}=this,f=Ca(s,[h,"id"]),d=Ca(s,[h,"style","labelText"]),[v]=f.split("__"),p=this.fieldMap[v].get(d)||[];u.setElementState(Object.fromEntries(p==null?void 0:p.map(g=>[g,l])))},this.click=s=>{if(this.options.trigger==="hover")return;const l=Ca(s,[this.typePrefix,"id"]);this.selectedItems.includes(l)?(this.selectedItems=this.selectedItems.filter(u=>u!==l),this.changeState(s,[])):(this.selectedItems.push(l),this.changeState(s,"selected"))},this.mouseleave=s=>{this.options.trigger!=="click"&&(this.selectedItems=[],this.changeState(s,[]))},this.mouseenter=s=>{if(this.options.trigger==="click")return;const l=Ca(s,[this.typePrefix,"id"]);this.selectedItems.includes(l)?this.selectedItems=this.selectedItems.filter(u=>u!==l):(this.selectedItems.push(l),this.changeState(s,"active"))},this.setFieldMap=(s,l,u)=>{if(!s)return;const h=this.fieldMap[u];if(h)if(!h.has(s))h.set(s,[l]);else{const f=h.get(s);f&&(f.push(l),h.set(s,f))}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(s,l)=>{if(!s)return[];const{model:u,element:h}=this.context,{nodes:f,edges:d,combos:v}=u.getData(),p={},g=S=>(0,re.Z)(s)?s(S):s,m={node:"circle",edge:"line",combo:"rect"},b={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},E=(S,M)=>h==null?void 0:h.getElementComputedStyle(S,M),w=(S,M)=>{S.forEach(C=>{const{id:T}=C,k=Ca(C,["data",g(C)]),O=(h==null?void 0:h.getElementType(M,C))||"circle",A=E(M,C),R=(M==="edge"?A==null?void 0:A.stroke:A==null?void 0:A.fill)||"#1783ff";T&&k&&k.replace(/\s+/g,"")&&(this.setFieldMap(k,T,M),p[k]||(p[k]={id:`${M}__${T}`,label:k,marker:b[O]||m[M],elementType:M,lineWidth:1,stroke:R,fill:R}))})};switch(l){case"node":w(f,"node");break;case"edge":w(d,"edge");break;case"combo":w(v,"combo");break;default:return[]}return Object.values(p)},this.createElement=()=>{if(this.draw){this.updateElement();return}const s=this.options,{width:l,height:u,nodeField:h,edgeField:f,comboField:d,trigger:v,position:p,container:g,containerStyle:m,className:b}=s,E=y6(s,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),w=this.getMarkerData(h,"node"),S=this.getMarkerData(f,"edge"),M=this.getMarkerData(d,"combo"),C=[...w,...M,...S],T=Object.assign({width:l,height:u,data:C,itemMarkerLineWidth:({lineWidth:A})=>A,itemMarker:({marker:A})=>A,itemMarkerStroke:({stroke:A})=>A,itemMarkerFill:({fill:A})=>A,gridCol:w.length},E,this.getEvents()),k=new v6({className:"legend",style:T});this.category=k,this.upsertCanvas().appendChild(k),this.draw=!0},this.bindEvents()}update(n){super.update(n),this.clear(),this.createElement()}clear(){var n,r;(n=this.canvas)===null||n===void 0||n.destroy(),(r=this.container)===null||r===void 0||r.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:n})=>!this.selectedItems.length||this.selectedItems.includes(n)?1:.5,itemLabelOpacity:({id:n})=>!this.selectedItems.length||this.selectedItems.includes(n)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;const n=this.context.canvas,[r,s]=n.getSize(),{width:l=r,height:u=s,position:h,container:f,containerStyle:d,className:v}=this.options,[p,g]=q2({width:l,height:u,graphCanvas:n,container:f,containerStyle:d,placement:h,className:"legend"});return this.container=p,v&&p.classList.add(v),this.canvas=g,this.canvas}destroy(){this.clear(),this.context.graph.off(Pt.AFTER_DRAW,this.createElement),super.destroy()}}Vy.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};class Uy extends Ai{constructor(n,r){super(n,Object.assign({},Uy.defaultOptions,r)),this.onDraw=s=>{var l;!((l=s==null?void 0:s.data)===null||l===void 0)&&l.render||this.onRender()},this.shapes=new Map,this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=s=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(s.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd))},this.onMaskDrag=s=>{if(!this.mask||!this.isMaskDragging)return;const{size:[l,u]}=this.options,{movementX:h,movementY:f}=s,{left:d,top:v,width:p,height:g}=this.mask.style,[,,m,b]=this.maskBBox;let E=parseInt(d)+h,w=parseInt(v)+f,S=parseInt(p),M=parseInt(g);E<0&&(E=0),w<0&&(w=0),E+S>l&&(E=xc(l-S,0)),w+M>u&&(w=xc(u-M,0)),S<m&&(h>0?(E=xc(E-h,0),S=bc(S+h,l)):h<0&&(S=bc(S-h,l))),M<b&&(f>0?(w=xc(w-f,0),M=bc(M+f,u)):f<0&&(M=bc(M-f,u))),Object.assign(this.mask.style,{left:E+"px",top:w+"px",width:S+"px",height:M+"px"});const C=parseInt(d)-E,T=parseInt(v)-w;if(C===0&&T===0)return;const k=this.context.canvas.getCamera().getZoom(),O=this.canvas.getCamera().getZoom(),A=k/O;this.context.graph.translateBy([C*A,T*A],!1)},this.onMaskDragEnd=s=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(s.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd))},this.onTransform=x_(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())},32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(n){this.unbindEvents(),super.update(n),"delay"in n&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=_v(()=>{this.renderMinimap(),this.renderMask()},this.options.delay)}bindEvents(){const{graph:n}=this.context;n.on(Pt.AFTER_DRAW,this.onDraw),n.on(Pt.AFTER_RENDER,this.onRender),n.on(Pt.AFTER_ANIMATE,this.onRender),n.on(Pt.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:n}=this.context;n.off(Pt.AFTER_DRAW,this.onDraw),n.off(Pt.AFTER_RENDER,this.onRender),n.off(Pt.AFTER_ANIMATE,this.onRender),n.off(Pt.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){const n=this.getElements(),r=this.initCanvas();this.setShapes(r,n)}getElements(){const{filter:n}=this.options,{model:r,element:s}=this.context,l=r.getData(),u={nodes:l.nodes.filter(v=>s==null?void 0:s.getElement(tt(v))),edges:l.edges.filter(v=>{const p=s==null?void 0:s.getElement(tt(v));return p&&fC(p)}),combos:l.combos.filter(v=>s==null?void 0:s.getElement(tt(v)))};if(!n)return u;const{nodes:h,edges:f,combos:d}=u;return{nodes:h.filter(v=>n(tt(v),"node")),edges:f.filter(v=>n(tt(v),"edge")),combos:d.filter(v=>n(tt(v),"combo"))}}setShapes(n,r){const{nodes:s,edges:l,combos:u}=r,{shape:h}=this.options,{element:f}=this.context;if(h==="key"){const v=new Set,p=g=>{const m=tt(g);v.add(m);const b=f.getElement(m);if(!b)return;const E=b.getShape("key"),w=this.shapes.get(m)||E.cloneNode();w.setPosition(E.getPosition()),b.style.zIndex&&(w.style.zIndex=b.style.zIndex),w.id=b.id,this.shapes.has(m)?Object.entries(E.attributes).forEach(([S,M])=>{w.style[S]!==M&&(w.style[S]=M)}):(n.appendChild(w),this.shapes.set(m,w))};l.forEach(p),u.forEach(p),s.forEach(p),this.shapes.forEach((g,m)=>{v.has(m)||(n.removeChild(g),this.shapes.delete(m))});return}const d=(v,p)=>{const m=f.getElement(v).getPosition();return p.setPosition(m),p};n.removeChildren(),l.forEach(v=>n.appendChild(h(tt(v),"edge"))),u.forEach(v=>{n.appendChild(d(tt(v),h(tt(v),"combo")))}),s.forEach(v=>{n.appendChild(d(tt(v),h(tt(v),"node")))})}initCanvas(){const{renderer:n,size:[r,s]}=this.options;if(this.canvas){const{width:l,height:u}=this.canvas.getConfig();(r!==l||s!==u)&&this.canvas.resize(r,s),n&&this.canvas.setRenderer(n)}else{const{className:l,position:u,container:h,containerStyle:f}=this.options,[d,v]=q2({renderer:n,width:r,height:s,placement:u,className:"minimap",container:h,containerStyle:f,graphCanvas:this.context.canvas});l&&d.classList.add(l),this.container=d,this.canvas=v}return this.setCamera(),this.canvas}createLandmark(n,r,s){const l=`${n.join(",")}-${r.join(",")}-${s}`;if(this.landmarkMap.has(l))return this.landmarkMap.get(l);const h=this.canvas.getCamera().createLandmark(l,{position:n,focalPoint:r,zoom:s});return this.landmarkMap.set(l,h),h}setCamera(){var n;const{canvas:r}=this.context,s=(n=this.canvas)===null||n===void 0?void 0:n.getCamera();if(!s)return;const{size:[l,u],padding:h}=this.options,[f,d,v,p]=$s(h),{min:g,max:m,center:b}=r.getBounds("elements"),E=m[0]-g[0],w=m[1]-g[1],S=l-p-d,M=u-f-v,C=S/E,T=M/w,k=Math.min(C,T),O=this.createLandmark(b,b,k);s.gotoLandmark(O,0)}get maskBBox(){const{canvas:n}=this.context,r=n.getSize(),s=n.getCanvasByViewport([0,0]),l=n.getCanvasByViewport(r),u=this.canvas.canvas2Viewport(Xs(s)),h=this.canvas.canvas2Viewport(Xs(l)),f=h.x-u.x,d=h.y-u.y;return[u.x,u.y,f,d]}calculateMaskBBox(){const{size:[n,r]}=this.options;let[s,l,u,h]=this.maskBBox;return s<0&&(u=bc(u+s,n),s=0),l<0&&(h=bc(h+l,r),l=0),s+u>n&&(u=xc(n-s,0)),l+h>r&&(h=xc(r-l,0)),[bc(s,n),bc(l,r),xc(u,0),xc(h,0)]}renderMask(){const{maskStyle:n}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",r=>r.preventDefault&&r.preventDefault())),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},n),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}updateMask(){if(!this.mask)return;const[n,r,s,l]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:r+"px",left:n+"px",width:s+"px",height:l+"px"})}destroy(){var n,r,s;this.unbindEvents(),(n=this.canvas)===null||n===void 0||n.destroy(),(r=this.mask)===null||r===void 0||r.remove(),(s=this.container)===null||s===void 0||s.remove(),super.destroy()}}Uy.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};const bc=(a,n)=>Math.min(a,n),xc=(a,n)=>Math.max(a,n);var Q2=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};const J2={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class Yy extends Ai{constructor(n,r){super(n,Object.assign({},Yy.defaultOptions,r)),this.initSnapline=()=>{const s=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=s.appendChild(new pl({style:Object.assign(Object.assign({},J2),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=s.appendChild(new pl({style:Object.assign(Object.assign({},J2),this.options.verticalLineStyle)})))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(s,l,u)=>Q2(this,void 0,void 0,function*(){const{verticalX:h,horizontalY:f}=u,{tolerance:d}=this.options,{min:[v,p],max:[g,m],center:[b,E]}=l;let w=0,S=0;h!==null&&(Vi(g,h)<d&&(w=h-g),Vi(v,h)<d&&(w=h-v),Vi(b,h)<d&&(w=h-b),w!==0&&(this.isVerticalSticking=!0)),f!==null&&(Vi(m,f)<d&&(S=f-m),Vi(p,f)<d&&(S=f-p),Vi(E,f)<d&&(S=f-E),S!==0&&(this.isHorizontalSticking=!0)),(w!==0||S!==0)&&(yield this.context.graph.translateElementBy({[s]:[w,S]},!1))}),this.enableSnap=s=>{const{target:l}=s,u=.5;if(this.isHorizontalSticking||this.isVerticalSticking){const[h,f]=this.getDelta(s);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(h)<=u&&Math.abs(f)<=u)return this.context.graph.translateElementBy({[l.id]:[-h,-f]},!1),!1;if(this.isHorizontalSticking&&Math.abs(f)<=u)return this.context.graph.translateElementBy({[l.id]:[0,-f]},!1),!1;if(this.isVerticalSticking&&Math.abs(h)<=u)return this.context.graph.translateElementBy({[l.id]:[-h,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0},200)}return this.enableStick},this.calcSnaplineMetadata=(s,l)=>{const{tolerance:u,shape:h}=this.options,{min:[f,d],max:[v,p],center:[g,m]}=l;let b=null,E=null,w=null,S=null,M=null,C=null;return this.getNodes().some(T=>{if(Rr(s.id,T.id))return!1;const k=fT(T,h).getRenderBounds(),{min:[O,A],max:[R,L],center:[D,z]}=k;return b===null&&(Vi(D,g)<u?b=D:Vi(O,f)<u||Vi(O,v)<u?b=O:(Vi(R,v)<u||Vi(R,f)<u)&&(b=R),b!==null&&(E=Math.min(A,d),w=Math.max(L,p))),S===null&&(Vi(z,m)<u?S=z:Vi(A,d)<u||Vi(A,p)<u?S=A:(Vi(L,p)<u||Vi(L,d)<u)&&(S=L),S!==null&&(M=Math.min(O,f),C=Math.max(R,v))),b!==null&&S!==null}),{verticalX:b,verticalMinY:E,verticalMaxY:w,horizontalY:S,horizontalMinX:M,horizontalMaxX:C}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=s=>Q2(this,void 0,void 0,function*(){const{target:l}=s;if(this.options.autoSnap&&!this.enableSnap(s))return;const u=fT(l,this.options.shape).getRenderBounds(),h=this.calcSnaplineMetadata(l,u);this.hideSnapline(),(h.verticalX!==null||h.horizontalY!==null)&&this.updateSnapline(h),this.options.autoSnap&&(yield this.autoSnapToLine(l.id,u,h))}),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){var n;const{filter:r}=this.options,l=(((n=this.context.element)===null||n===void 0?void 0:n.getNodes())||[]).filter(u=>{var h;return fC(u)&&((h=this.context.viewport)===null||h===void 0?void 0:h.isInViewport(u.getRenderBounds()))});return r?l.filter(u=>r(u)):l}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}getLineWidth(n){const{lineWidth:r}=this.options[`${n}LineStyle`];return+(r||J2.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(n){const{verticalX:r,verticalMinY:s,verticalMaxY:l,horizontalY:u,horizontalMinX:h,horizontalMaxX:f}=n,[d,v]=this.context.canvas.getSize(),{offset:p}=this.options;u!==null?Object.assign(this.horizontalLine.style,{x1:p===1/0?0:h-p,y1:u,x2:p===1/0?d:f+p,y2:u,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",r!==null?Object.assign(this.verticalLine.style,{x1:r,y1:p===1/0?0:s-p,x2:r,y2:p===1/0?v:l+p,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}getDelta(n){const r=this.context.graph.getZoom();return Ys([n.dx,n.dy],r)}bindEvents(){return Q2(this,void 0,void 0,function*(){const{graph:n}=this.context;n.on(Ss.DRAG_START,this.onDragStart),n.on(Ss.DRAG,this.onDrag),n.on(Ss.DRAG_END,this.onDragEnd)})}unbindEvents(){const{graph:n}=this.context;n.off(Ss.DRAG_START,this.onDragStart),n.off(Ss.DRAG,this.onDrag),n.off(Ss.DRAG_END,this.onDragEnd)}destroyElements(){var n,r;(n=this.horizontalLine)===null||n===void 0||n.destroy(),(r=this.verticalLine)===null||r===void 0||r.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}}Yy.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};const Vi=(a,n)=>Math.abs(a-n),fT=(a,n)=>typeof n=="function"?n(a):a.getShape(n);var dT=null,m6=null;function Xy(a){return a instanceof Date?a:new Date(a)}function b6(a){for(var n=__read(a,2),r=n[0],s=n[1],l=dT.indexOf(r),u=dT.indexOf(s),h="",f=l;f<=u;f+=1)if(h+=m6[f],f<u){var d="-";f===2?d=" ":f>2&&(d=":"),h+=d}return h}function oa(a,n){var r={YYYY:a.getFullYear(),MM:a.getMonth()+1,DD:a.getDate(),HH:a.getHours(),mm:a.getMinutes(),ss:a.getSeconds()},s=n;return Object.keys(r).forEach(function(l){var u=r[l];s=s.replace(l,l==="YYYY"?"".concat(u):"".concat(u).padStart(2,"0"))}),s}function g7(a,n){return Xy(a).getTime()-Xy(n).getTime()}function y7(a,n){var r=__read([Xy(a),Xy(n)],2),s=r[0],l=r[1];return s.getFullYear()!==l.getFullYear()?"year":s.getMonth()!==l.getMonth()?"month":s.getDay()!==l.getDay()?"day":s.getHours()!==l.getHours()?"hour":s.getMinutes()!==l.getMinutes()?"minute":"second"}function m7(a,n){var r=new Date(a),s={year:function(l){l.setMonth(0),l.setHours(0,0,0,0)},month:function(l){l.setDate(1),l.setHours(0,0,0,0)},day:function(l){return l.setHours(0,0,0,0)},hour:function(l){return l.setMinutes(0,0,0)},minute:function(l){return l.setSeconds(0,0)},second:function(l){return l.setMilliseconds(0)}};return s[n](r),oa(r,b6(["year",n]))}function x6(a,n){if(a.length<=n)return a;for(var r=Math.floor(a.length/n),s=[],l=0;l<a.length;l+=r)s.push(a[l]);return s}var tw={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new na({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},b7=(0,Ka.Z)({},tw,{style:{type:"arc"}}),x7=(0,Ka.Z)({},tw,{style:{}}),Ln=Js({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis");function Tl(a,n){return[a[0]*n,a[1]*n]}function Rv(a,n){return[a[0]+n[0],a[1]+n[1]]}function ew(a,n){return[a[0]-n[0],a[1]-n[1]]}function Pu(a,n){return[Math.min(a[0],n[0]),Math.min(a[1],n[1])]}function Ru(a,n){return[Math.max(a[0],n[0]),Math.max(a[1],n[1])]}function Nv(a,n){return Math.sqrt(Math.pow(a[0]-n[0],2)+Math.pow(a[1]-n[1],2))}function vT(a){if(a[0]===0&&a[1]===0)return[0,0];var n=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2));return[a[0]/n,a[1]/n]}function E7(a,n,r){var s=__read(a,2),l=s[0],u=s[1],h=__read(n,2),f=h[0],d=h[1],v=l-f,p=u-d,g=Math.sin(r),m=Math.cos(r);return[v*m-p*g+f,v*g+p*m+d]}function E6(a,n){return n?[a[1],-a[0]]:[-a[1],a[0]]}function bf(a){return a*Math.PI/180}function pT(a){return Number((a*180/Math.PI).toPrecision(5))}function Ky(a,n){return a.style.opacity||(a.style.opacity=1),to(a,{opacity:0},n)}var w6=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function S6(a){return w6.includes(a)}function gT(a){var n={};for(var r in a)S6(r)&&(n[r]=a[r]);return n}var xf=Js({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function yT(a){return a.reduce(function(n,r,s){return n.push((0,N.ev)([s===0?"M":"L"],(0,N.CR)(r),!1)),n},[])}function _6(a,n,r){var s=n.connect,l=s===void 0?"line":s,u=n.center;if(l==="line")return yT(a);if(!u)return[];var h=Nv(a[0],u),f=r?0:1;return a.reduce(function(d,v,p){return p===0?d.push((0,N.ev)(["M"],(0,N.CR)(v),!1)):d.push((0,N.ev)(["A",h,h,0,0,f],(0,N.CR)(v),!1)),d},[])}function nw(a,n,r){return n.type==="surround"?_6(a,n,r):yT(a)}function M6(a,n,r){var s=r.type,l=r.connect,u=r.center,h=r.closed,f=h?[["Z"]]:[],d=(0,N.CR)([nw(a,r),nw(n.slice().reverse(),r,!0)],2),v=d[0],p=d[1],g=(0,N.CR)([a[0],n.slice(-1)[0]],2),m=g[0],b=g[1],E=function(C,T){return[v,C,p,T,f].flat()};if(l==="line"||s==="surround")return E([(0,N.ev)(["L"],(0,N.CR)(b),!1)],[(0,N.ev)(["L"],(0,N.CR)(m),!1)]);if(!u)throw new Error("Arc grid need to specified center");var w=(0,N.CR)([Nv(b,u),Nv(m,u)],2),S=w[0],M=w[1];return E([(0,N.ev)(["A",S,S,0,0,1],(0,N.CR)(b),!1),(0,N.ev)(["L"],(0,N.CR)(b),!1)],[(0,N.ev)(["A",M,M,0,0,0],(0,N.CR)(m),!1),(0,N.ev)(["L"],(0,N.CR)(m),!1)])}function C6(a,n,r,s){var l=r.animate,u=r.isBillboard,h=n.map(function(f,d){return{id:f.id||"grid-line-".concat(d),d:nw(f.points,r)}});return a.selectAll(xf.line.class).data(h,function(f){return f.id}).join(function(f){return f.append("path").each(function(d,v){var p=Ja(gT((0,N.pi)({d:d.d},s)),[d,v,h]);this.attr((0,N.pi)({class:xf.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:u},p))})},function(f){return f.transition(function(d,v){var p=Ja(gT((0,N.pi)({d:d.d},s)),[d,v,h]);return to(this,p,l.update)})},function(f){return f.transition(function(){var d=this,v=Ky(this,l.exit);return mf(v,function(){return d.remove()}),v})}).transitions()}function T6(a,n,r){var s=r.animate,l=r.connect,u=r.areaFill;if(n.length<2||!u||!l)return[];for(var h=Array.isArray(u)?u:[u,"transparent"],f=function(E){return h[E%h.length]},d=[],v=0;v<n.length-1;v++){var p=(0,N.CR)([n[v].points,n[v+1].points],2),g=p[0],m=p[1],b=M6(g,m,r);d.push({d:b,fill:f(v)})}return a.selectAll(xf.region.class).data(d,function(E,w){return w}).join(function(E){return E.append("path").each(function(w,S){var M=Ja(w,[w,S,d]);this.attr(M)}).attr("className",xf.region.name)},function(E){return E.transition(function(w,S){var M=Ja(w,[w,S,d]);return to(this,M,s.update)})},function(E){return E.transition(function(){var w=this,S=Ky(this,s.exit);return mf(S,function(){return w.remove()}),S})}).transitions()}function O6(a){var n=a.data,r=n===void 0?[]:n,s=a.closed;return s?r.map(function(l){var u=l.points,h=(0,N.CR)(u,1),f=h[0];return(0,N.pi)((0,N.pi)({},l),{points:(0,N.ev)((0,N.ev)([],(0,N.CR)(u),!1),[f],!1)})}):r}var A6=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(r,s){var l=r.type,u=r.center,h=r.areaFill,f=r.closed,d=(0,N._T)(r,["type","center","areaFill","closed"]),v=O6(r),p=Kt(s).maybeAppendByClassName(xf.lineGroup,"g"),g=Kt(s).maybeAppendByClassName(xf.regionGroup,"g"),m=C6(p,v,r,d),b=T6(g,v,r);return(0,N.ev)((0,N.ev)([],(0,N.CR)(m),!1),(0,N.CR)(b),!1)},n}(Sr),k6=function(a,n){return function(r){return a*(1-r)+n*r}};function P6(a,n){var r=n?n.length:0,s=a?Math.min(r,a.length):0;return function(l){var u=new Array(s),h=new Array(r),f=0;for(f=0;f<s;++f)u[f]=rw(a[f],n[f]);for(;f<r;++f)h[f]=n[f];for(f=0;f<s;++f)h[f]=u[f](l);return h}}function R6(a,n){a===void 0&&(a={}),n===void 0&&(n={});var r={},s={};return Object.entries(n).forEach(function(l){var u=(0,N.CR)(l,2),h=u[0],f=u[1];h in a?r[h]=rw(a[h],f):s[h]=f}),function(l){return Object.entries(r).forEach(function(u){var h=(0,N.CR)(u,2),f=h[0],d=h[1];return s[f]=d(l)}),s}}function rw(a,n){return typeof a=="number"&&typeof n=="number"?k6(a,n):Array.isArray(a)&&Array.isArray(n)?P6(a,n):typeof a=="object"&&typeof n=="object"?R6(a,n):function(r){return a}}function N6(a,n,r,s){if(!s)return a.attr("__keyframe_data__",r),null;var l=s.duration,u=l===void 0?0:l,h=rw(n,r),f=Math.ceil(+u/16),d=new Array(f).fill(0).map(function(v,p,g){return{__keyframe_data__:h(p/(g.length-1))}});return a.animate(d,(0,N.pi)({fill:"both"},s))}function mT(a,n){var r={},s=Array.isArray(n)?n:[n];for(var l in a)s.includes(l)||(r[l]=a[l]);return r}function bT(a,n){return Object.fromEntries(Object.entries(a).map(function(r){var s=(0,N.CR)(r,2),l=s[0],u=s[1];return[l,Ja(u,n)]}))}function w7(a){if(a.type==="linear"){var n=a.startPos,r=a.endPos;return __spreadArray(__spreadArray([],__read(n),!1),__read(r),!1)}var s=a.startAngle,l=a.endAngle,u=a.center,h=a.radius;return __spreadArray(__spreadArray([s,l],__read(u),!1),[h],!1)}function iw(a,n){return n&&(0,re.Z)(n)?a.filter(n):a}function xT(a,n){var r=n.startAngle,s=n.endAngle;return(s-r)*a+r}function qy(a,n){if(n.type==="linear"){var r=(0,N.CR)(n.startPos,2),s=r[0],l=r[1],u=(0,N.CR)(n.endPos,2),h=u[0],f=u[1],d=(0,N.CR)([h-s,f-l],2),v=d[0],p=d[1];return vT([v,p])}var g=bf(xT(a,n));return[-Math.sin(g),Math.cos(g)]}function aw(a,n,r){var s=qy(a,r);return E6(s,n!=="positive")}function Lv(a,n){return aw(a,n.labelDirection,n)}function L6(a,n){var r=(0,N.CR)(n.startPos,2),s=r[0],l=r[1],u=(0,N.CR)(n.endPos,2),h=u[0],f=u[1],d=(0,N.CR)([h-s,f-l],2),v=d[0],p=d[1];return[s+v*a,l+p*a]}function I6(a,n){var r=n.radius,s=(0,N.CR)(n.center,2),l=s[0],u=s[1],h=bf(xT(a,n));return[l+r*Math.cos(h),u+r*Math.sin(h)]}function Qy(a,n){return n.type==="linear"?L6(a,n):I6(a,n)}function sw(a){return qy(0,a)[1]===0}function ET(a){return qy(0,a)[0]===0}function wT(a,n){return n-a===360}function ST(a,n,r,s,l){var u=n-a,h=(0,N.CR)([l,l],2),f=h[0],d=h[1],v=(0,N.CR)([bf(a),bf(n)],2),p=v[0],g=v[1],m=function(z){return[r+l*Math.cos(z),s+l*Math.sin(z)]},b=(0,N.CR)(m(p),2),E=b[0],w=b[1],S=(0,N.CR)(m(g),2),M=S[0],C=S[1];if(wT(a,n)){var T=(g+p)/2,k=(0,N.CR)(m(T),2),O=k[0],A=k[1];return[["M",E,w],["A",f,d,0,1,0,O,A],["A",f,d,0,1,0,M,C]]}var R=u>180?1:0,L=a>n?0:1,D=!1;return D?"M".concat(r,",").concat(s,",L").concat(E,",").concat(w,",A").concat(f,",").concat(d,",0,").concat(R,",").concat(L,",").concat(M,",").concat(C,",L").concat(r,",").concat(s):"M".concat(E,",").concat(w,",A").concat(f,",").concat(d,",0,").concat(R,",").concat(L,",").concat(M,",").concat(C)}function D6(a){var n=a.attributes,r=n.startAngle,s=n.endAngle,l=n.center,u=n.radius;return(0,N.ev)((0,N.ev)([r,s],(0,N.CR)(l),!1),[u],!1)}function B6(a,n,r,s){var l=n.startAngle,u=n.endAngle,h=n.center,f=n.radius;return a.selectAll(Ln.line.class).data([{d:ST.apply(void 0,(0,N.ev)((0,N.ev)([l,u],(0,N.CR)(h),!1),[f],!1))}],function(d,v){return v}).join(function(d){return d.append("path").attr("className",Ln.line.name).styles(n).styles({d:function(v){return v.d}})},function(d){return d.transition(function(){var v=this,p=N6(this,D6(this),(0,N.ev)((0,N.ev)([l,u],(0,N.CR)(h),!1),[f],!1),s.update);if(p){var g=function(){var m=Ca(v.attributes,"__keyframe_data__");v.style.d=ST.apply(void 0,(0,N.ev)([],(0,N.CR)(m),!1))};p.onframe=g,p.onfinish=g}return p}).styles(n)},function(d){return d.remove()}).styles(r).transitions()}function F6(a,n){var r=n.truncRange,s=n.truncShape,l=n.lineExtension}function z6(a,n,r){r===void 0&&(r=[0,0]);var s=(0,N.CR)([a,n,r],3),l=(0,N.CR)(s[0],2),u=l[0],h=l[1],f=(0,N.CR)(s[1],2),d=f[0],v=f[1],p=(0,N.CR)(s[2],2),g=p[0],m=p[1],b=(0,N.CR)([d-u,v-h],2),E=b[0],w=b[1],S=Math.sqrt(Math.pow(E,2)+Math.pow(w,2)),M=(0,N.CR)([-g/S,m/S],2),C=M[0],T=M[1];return[C*E,C*w,T*E,T*w]}function _T(a){var n=(0,N.CR)(a,2),r=(0,N.CR)(n[0],2),s=r[0],l=r[1],u=(0,N.CR)(n[1],2),h=u[0],f=u[1];return{x1:s,y1:l,x2:h,y2:f}}function Z6(a,n,r,s){var l=n.showTrunc,u=n.startPos,h=n.endPos,f=n.truncRange,d=n.lineExtension,v=(0,N.CR)([u,h],2),p=(0,N.CR)(v[0],2),g=p[0],m=p[1],b=(0,N.CR)(v[1],2),E=b[0],w=b[1],S=(0,N.CR)(d?z6(u,h,d):new Array(4).fill(0),4),M=S[0],C=S[1],T=S[2],k=S[3],O=function(mt){return a.selectAll(Ln.line.class).data(mt,function(at,Et){return Et}).join(function(at){return at.append("line").attr("className",function(Et){return"".concat(Ln.line.name," ").concat(Et.className)}).styles(r).transition(function(Et){return to(this,_T(Et.line),!1)})},function(at){return at.styles(r).transition(function(Et){var It=Et.line;return to(this,_T(It),s.update)})},function(at){return at.remove()}).transitions()};if(!l||!f)return O([{line:[[g+M,m+C],[E+T,w+k]],className:Ln.line.name}]);var A=(0,N.CR)(f,2),R=A[0],L=A[1],D=E-g,z=w-m,W=(0,N.CR)([g+D*R,m+z*R],2),G=W[0],Y=W[1],q=(0,N.CR)([g+D*L,m+z*L],2),rt=q[0],yt=q[1],st=O([{line:[[g+M,m+C],[G,Y]],className:Ln.lineFirst.name},{line:[[rt,yt],[E+T,w+k]],className:Ln.lineSecond.name}]);return F6(a,n),st}function W6(a,n,r,s){var l=r.showArrow,u=r.showTrunc,h=r.lineArrow,f=r.lineArrowOffset,d=r.lineArrowSize,v;if(n==="arc"?v=a.select(Ln.line.class):u?v=a.select(Ln.lineSecond.class):v=a.select(Ln.line.class),!l||!h||r.type==="arc"&&wT(r.startAngle,r.endAngle)){var p=v.node();p&&(p.style.markerEnd=void 0);return}var g=Cl(h);g.attr(s),U2(g,d,!0),v.style("markerEnd",g).style("markerEndOffset",-f)}function G6(a,n,r){var s=n.type,l,u=Te(n,"line");return s==="linear"?l=Z6(a,n,mT(u,"arrow"),r):l=B6(a,n,mT(u,"arrow"),r),W6(a,s,n,u),l}function j6(a,n){return aw(a,n.gridDirection,n)}function MT(a){var n=a.type,r=a.gridCenter;return n==="linear"?r:r||a.center}function $6(a,n){var r=n.gridLength;return a.map(function(s,l){var u=s.value,h=(0,N.CR)(Qy(u,n),2),f=h[0],d=h[1],v=(0,N.CR)(Tl(j6(u,n),r),2),p=v[0],g=v[1];return{id:l,points:[[f,d],[f+p,d+g]]}})}function H6(a,n){var r=n.gridControlAngles,s=MT(n);if(!s)throw new Error("grid center is not provide");if(a.length<2)throw new Error("Invalid grid data");if(!r||r.length===0)throw new Error("Invalid gridControlAngles");var l=(0,N.CR)(s,2),u=l[0],h=l[1];return a.map(function(f,d){var v=f.value,p=(0,N.CR)(Qy(v,n),2),g=p[0],m=p[1],b=(0,N.CR)([g-u,m-h],2),E=b[0],w=b[1],S=[];return r.forEach(function(M){var C=bf(M),T=(0,N.CR)([Math.cos(C),Math.sin(C)],2),k=T[0],O=T[1],A=E*k-w*O+u,R=E*O+w*k+h;S.push([A,R])}),{points:S,id:d}})}function V6(a,n,r,s){var l=Te(r,"grid"),u=l.type,h=l.areaFill,f=MT(r),d=iw(n,r.gridFilter),v=u==="segment"?$6(d,r):H6(d,r),p=(0,N.pi)((0,N.pi)({},l),{center:f,areaFill:(0,re.Z)(h)?d.map(function(g,m){return Ja(h,[g,m,d])}):h,animate:s,data:v});return a.selectAll(Ln.grid.class).data([1]).join(function(g){return g.append(function(){return new A6({style:p})}).attr("className",Ln.grid.name)},function(g){return g.transition(function(){return this.update(p)})},function(g){return g.remove()}).transitions()}function Pi(a,n,r,s,l){return s===void 0&&(s=!0),l===void 0&&(l=!1),s&&a===n||l&&a===r?!0:a>n&&a<r}function U6(a,n,r,s){r===void 0&&(r=2),s===void 0&&(s="top"),lT(a,{wordWrap:!0,wordWrapWidth:n,maxLines:r,textBaseline:s})}function Y6(a,n,r){var s=a.getBBox(),l=s.width,u=s.height,h=(0,N.CR)([n,r].map(function(v,p){var g;return v.includes("%")?parseFloat(((g=v.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||g===void 0?void 0:g[0])||"0")/100*(p===0?l:u):v}),2),f=h[0],d=h[1];return[f,d]}function CT(a,n){if(n)try{var r=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,s=n.replace(r,function(l,u,h){return"translate(".concat(Y6(a,u,h),")")});a.attr("transform",s)}catch(l){}}var ow=function(){function a(n,r,s,l){this.set(n,r,s,l)}return Object.defineProperty(a.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),a.prototype.rotatedPoints=function(n,r,s){var l=this,u=l.x1,h=l.y1,f=l.x2,d=l.y2,v=Math.cos(n),p=Math.sin(n),g=r-r*v+s*p,m=s-r*p-s*v,b=[[v*u-p*d+g,p*u+v*d+m],[v*f-p*d+g,p*f+v*d+m],[v*u-p*h+g,p*u+v*h+m],[v*f-p*h+g,p*f+v*h+m]];return b},a.prototype.set=function(n,r,s,l){return s<n?(this.x2=n,this.x1=s):(this.x1=n,this.x2=s),l<r?(this.y2=r,this.y1=l):(this.y1=r,this.y2=l),this},a.prototype.defined=function(n){return this[n]!==Number.MAX_VALUE&&this[n]!==-Number.MAX_VALUE},a}();function Jy(a,n){var r=a.getEulerAngles()||0;a.setEulerAngles(0);var s=a.getBounds(),l=(0,N.CR)(s.min,2),u=l[0],h=l[1],f=(0,N.CR)(s.max,2),d=f[0],v=f[1],p=a.getBBox(),g=p.width,m=p.height,b=m,E=0,w=0,S=u,M=h,C=oT(a);if(C){b-=1.5;var T=C.style.textAlign,k=C.style.textBaseline;T==="center"?S=(u+d)/2:(T==="right"||T==="end")&&(S=d),k==="middle"?M=(h+v)/2:k==="bottom"&&(M=v)}var O=(0,N.CR)(ki(n),4),A=O[0],R=A===void 0?0:A,L=O[1],D=L===void 0?0:L,z=O[2],W=z===void 0?R:z,G=O[3],Y=G===void 0?D:G,q=new ow((E+=u)-Y,(w+=h)-R,E+g+D,w+b+W);return a.setEulerAngles(r),q.rotatedPoints(bf(r),S,M)}function Iv(a,n){return n[0]<=Math.max(a[0][0],a[1][0])&&n[0]<=Math.min(a[0][0],a[1][0])&&n[1]<=Math.max(a[0][1],a[1][1])&&n[1]<=Math.min(a[0][1],a[1][1])}function Dv(a,n,r){var s=(n[1]-a[1])*(r[0]-n[0])-(n[0]-a[0])*(r[1]-n[1]);return s===0?0:s<0?2:1}function X6(a,n){var r=Dv(a[0],a[1],n[0]),s=Dv(a[0],a[1],n[1]),l=Dv(n[0],n[1],a[0]),u=Dv(n[0],n[1],a[1]);return!!(r!==s&&l!==u||r===0&&Iv(a,n[0])||s===0&&Iv(a,n[1])||l===0&&Iv(n,a[0])||u===0&&Iv(n,a[1]))}function K6(a,n){var r=a.length;if(r<3)return!1;var s=[n,[9999,n[1]]],l=0,u=0;do{var h=[a[u],a[(u+1)%r]];if(X6(h,s)){if(Dv(h[0],n,h[1])===0)return Iv(h,n);l++}u=(u+1)%r}while(u!==0);return!!(l&1)}function q6(a,n){return n.every(function(r){return K6(a,r)})}function Q6(a,n,r){var s=a.x1,l=a.x2,u=a.y1,h=a.y2,f=[[s,u],[l,u],[l,h],[s,h]],d=Jy(n,r);return q6(f,d)}function TT(a,n){var r=(0,N.CR)(a,4),s=r[0],l=r[1],u=r[2],h=r[3],f=(0,N.CR)(n,4),d=f[0],v=f[1],p=f[2],g=f[3],m=u-s,b=h-l,E=p-d,w=g-v,S=m*w-E*b;if(S===0)return!1;var M=S>0,C=s-d,T=l-v,k=m*T-b*C;if(k<0===M)return!1;var O=E*T-w*C;return!(O<0===M||k>S===M||O>S===M)}function OT(a,n){var r=[[a[0],a[1],a[2],a[3]],[a[2],a[3],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[6],a[7],a[0],a[1]]];return r.some(function(s){return TT(n,s)})}var S7={lineToLine:TT,intersectBoxLine:OT,getBounds:Jy};function J6(a,n,r){var s,l,u=Jy(a,r).flat(1),h=Jy(n,r).flat(1),f=[[u[0],u[1],u[2],u[3]],[u[0],u[1],u[4],u[5]],[u[4],u[5],u[6],u[7]],[u[2],u[3],u[6],u[7]]];try{for(var d=(0,N.XA)(f),v=d.next();!v.done;v=d.next()){var p=v.value;if(OT(h,p))return!0}}catch(g){s={error:g}}finally{try{v&&!v.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return!1}function t5(a,n){var r=a.type,s=a.labelDirection,l=a.crossSize;if(!l)return!1;if(r==="arc"){var u=a.center,h=a.radius,f=(0,N.CR)(u,2),d=f[0],v=f[1],p=s==="negative"?0:l,g=-h-p,m=h+p,b=(0,N.CR)(ki(n),4),E=b[0],w=b[1],S=b[2],M=b[3];return new ow(d+g-M,v+g-E,d+m+w,v+m+S)}var C=(0,N.CR)(a.startPos,2),T=C[0],k=C[1],O=(0,N.CR)(a.endPos,2),A=O[0],R=O[1],L=(0,N.CR)(ET(a)?[-n,0,n,0]:[0,n,0,-n],4),D=L[0],z=L[1],W=L[2],G=L[3],Y=Lv(0,a),q=Tl(Y,l),rt=new ow(T,k,A,R);return rt.x1+=G,rt.y1+=D,rt.x2+=z+q[0],rt.y2+=W+q[1],rt}function tm(a,n,r){var s,l,u=n.crossPadding,h=new Set,f=null,d=t5(n,u),v=function(E){return d?Q6(d,E):!0},p=function(E,w){return!E||!E.firstChild?!0:!J6(E.firstChild,w.firstChild,ki(r))};try{for(var g=(0,N.XA)(a),m=g.next();!m.done;m=g.next()){var b=m.value;v(b)?!f||p(f,b)?f=b:(h.add(f),h.add(b)):h.add(b)}}catch(E){s={error:E}}finally{try{m&&!m.done&&(l=g.return)&&l.call(g)}finally{if(s)throw s.error}}return Array.from(h)}function lw(a,n){return n===void 0&&(n={}),(0,le.Z)(a)?0:typeof a=="number"?a:Math.floor(c6(a,n))}function e5(a,n,r,s){if(!(a.length<=0)){var l=n.suffix,u=l===void 0?"...":l,h=n.minLength,f=n.maxLength,d=f===void 0?1/0:f,v=n.step,p=v===void 0?" ":v,g=n.margin,m=g===void 0?[0,0,0,0]:g,b=sT(s.getTextShape(a[0])),E=lw(p,b),w=h?lw(h,b):E,S=lw(d,b);((0,le.Z)(S)||S===1/0)&&(S=Math.max.apply(null,a.map(function(q){return q.getBBox().width})));for(var M=a.slice(),C=(0,N.CR)(m,4),T=C[0],k=T===void 0?0:T,O=C[1],A=O===void 0?0:O,R=C[2],L=R===void 0?k:R,D=C[3],z=D===void 0?A:D,W=function(q){if(M.forEach(function(rt){s.ellipsis(s.getTextShape(rt),q,u)}),M=tm(a,r,m),M.length<1)return{value:void 0}},G=S;G>w+E;G-=E){var Y=W(G);if(typeof Y=="object")return Y.value}}}var n5=function(a){return a!==void 0&&a!=null&&!Number.isNaN(a)},r5={parity:function(a,n){var r=n.seq,s=r===void 0?2:r;return a.filter(function(l,u){return u%s?(Qs(l),!1):!0})}},i5=function(a){return a.filter(n5)};function a5(a,n,r,s){var l=a.length,u=n.keepHeader,h=n.keepTail;if(!(l<=1||l===2&&u&&h)){var f=r5.parity,d=function(T){return T.forEach(s.show),T},v=2,p=a.slice(),g=a.slice(),m=Math.min.apply(Math,(0,N.ev)([1],(0,N.CR)(a.map(function(T){return T.getBBox().width})),!1));if(r.type==="linear"&&(sw(r)||ET(r))){var b=aT(a[0]).left,E=aT(a[l-1]).right,w=Math.abs(E-b)||1;v=Math.max(Math.floor(l*m/w),v)}var S,M;for(u&&(S=p.splice(0,1)[0]),h&&(M=p.splice(-1,1)[0],p.reverse()),d(p);v<a.length&&tm(i5(M?(0,N.ev)((0,N.ev)([M],(0,N.CR)(g),!1),[S],!1):(0,N.ev)([S],(0,N.CR)(g),!1)),r,n==null?void 0:n.margin).length;){if(M&&!S&&v%2===0){var C=p.splice(0,1);C.forEach(s.hide)}else if(M&&S){var C=p.splice(0,1);C.forEach(s.hide)}g=f(d(p),{seq:v}),v++}}}function s5(a,n,r,s){var l,u,h=n.optionalAngles,f=h===void 0?[0,45,90]:h,d=n.margin,v=n.recoverWhenFailed,p=v===void 0?!0:v,g=a.map(function(M){return M.getLocalEulerAngles()}),m=function(){return tm(a,r,d).length<1},b=function(M){return a.forEach(function(C,T){var k=Array.isArray(M)?M[T]:M;s.rotate(C,+k)})};try{for(var E=(0,N.XA)(f),w=E.next();!w.done;w=E.next()){var S=w.value;if(b(S),m())return}}catch(M){l={error:M}}finally{try{w&&!w.done&&(u=E.return)&&u.call(E)}finally{if(l)throw l.error}}p&&b(g)}function o5(a){var n=a.type,r=a.labelDirection;return n==="linear"&&sw(a)?r==="negative"?"bottom":"top":"middle"}function l5(a,n,r,s,l){var u,h=n.maxLines,f=h===void 0?3:h,d=n.recoverWhenFailed,v=d===void 0?!0:d,p=n.margin,g=p===void 0?[0,0,0,0]:p,m=Ja((u=n.wordWrapWidth)!==null&&u!==void 0?u:50,[l]),b=a.map(function(T){return T.attr("maxLines")||1}),E=Math.min.apply(Math,(0,N.ev)([],(0,N.CR)(b),!1)),w=function(){return tm(a,r,g).length<1},S=o5(r),M=function(T){return a.forEach(function(k,O){var A=Array.isArray(T)?T[O]:T;s.wrap(k,m,A,S)})};if(!(E>f)){if(r.type==="linear"&&sw(r)){if(M(f),w())return}else for(var C=E;C<=f;C++)if(M(C),w())return;v&&M(b)}}var c5=new Map([["hide",a5],["rotate",s5],["ellipsis",e5],["wrap",l5]]);function u5(a,n,r){return n.labelOverlap.length<1?!1:r==="hide"?!gD(a[0]):r==="rotate"?!a.some(function(s){var l;return!!(!((l=s.attr("transform"))===null||l===void 0)&&l.includes("rotate"))}):r==="ellipsis"||r==="wrap"?a.filter(function(s){return s.querySelector("text")}).length>=1:!0}function h5(a,n,r,s){var l=n.labelOverlap,u=l===void 0?[]:l;u.length&&u.forEach(function(h){var f=h.type,d=c5.get(f);u5(a,n,f)&&(d==null||d(a,h,n,s,r))})}function f5(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];var r=function(s){return s==="positive"?-1:1};return a.reduce(function(s,l){return s*r(l)},1)}function AT(a){for(var n=a;n<0;)n+=360;return Math.round(n%360)}function cw(a,n){var r=(0,N.CR)(a,2),s=r[0],l=r[1],u=(0,N.CR)(n,2),h=u[0],f=u[1],d=(0,N.CR)([s*h+l*f,s*f-l*h],2),v=d[0],p=d[1];return Math.atan2(p,v)}function d5(a){var n=(a+360)%180;return Pi(n,-90,90)||(n+=180),n}function v5(a,n,r){var s,l=r.labelAlign,u=(s=n.style.transform)===null||s===void 0?void 0:s.includes("rotate");if(u)return n.getLocalEulerAngles();var h=0,f=Lv(a.value,r),d=qy(a.value,r);return l==="horizontal"?0:(l==="perpendicular"?h=cw([1,0],f):h=cw([d[0]<0?-1:1,0],d),d5(pT(h)))}function kT(a,n,r){var s=r.type,l=r.labelAlign,u=Lv(a,r),h=AT(n),f=AT(pT(cw([1,0],u))),d="center",v="middle";return s==="linear"?[90,270].includes(f)&&h===0?(d="center",v=u[1]===1?"top":"bottom"):!(f%180)&&[90,270].includes(h)?d="center":f===0?(Pi(h,0,90,!1,!0)||Pi(h,0,90)||Pi(h,270,360))&&(d="start"):f===90?Pi(h,0,90,!1,!0)?d="start":(Pi(h,90,180)||Pi(h,270,360))&&(d="end"):f===270?Pi(h,0,90,!1,!0)?d="end":(Pi(h,90,180)||Pi(h,270,360))&&(d="start"):f===180&&(h===90?d="start":(Pi(h,0,90)||Pi(h,270,360))&&(d="end")):l==="parallel"?Pi(f,0,180,!0)?v="top":v="bottom":l==="horizontal"?Pi(f,90,270,!1)?d="end":(Pi(f,270,360,!1)||Pi(f,0,90))&&(d="start"):l==="perpendicular"&&(Pi(f,90,270)?d="end":d="start"),{textAlign:d,textBaseline:v}}function p5(a,n,r){n.setLocalEulerAngles(a);var s=n.__data__.value,l=kT(s,a,r),u=n.querySelector(Ln.labelItem.class);u&&RT(u,l)}function PT(a,n,r){var s=r.showTick,l=r.tickLength,u=r.tickDirection,h=r.labelDirection,f=r.labelSpacing,d=n.indexOf(a),v=Ja(f,[a,d,n]),p=(0,N.CR)([Lv(a.value,r),f5(h,u)],2),g=p[0],m=p[1],b=m===1?Ja(s?l:0,[a,d,n]):0,E=(0,N.CR)(Rv(Tl(g,v+b),Qy(a.value,r)),2),w=E[0],S=E[1];return{x:w,y:S}}function g5(a,n,r,s){var l=s.labelFormatter,u=(0,re.Z)(l)?function(){return Cl(Ja(l,[a,n,r,Lv(a.value,s)]))}:function(){return Cl(a.label||"")};return u}function RT(a,n){a.nodeName==="text"&&a.attr(n)}function y5(a,n){h5(this.node().childNodes,a,n,{hide:Qs,show:Av,rotate:function(r,s){p5(+s,r,a)},ellipsis:function(r,s,l){r&&K2(r,s||1/0,l)},wrap:function(r,s,l){r&&U6(r,s,l)},getTextShape:function(r){return r.querySelector("text")}})}function NT(a,n,r,s,l){var u=r.indexOf(n),h=Kt(a).append(g5(n,u,r,l)).attr("className",Ln.labelItem.name).node(),f=(0,N.CR)(Ml(bT(s,[n,u,r])),2),d=f[0],v=f[1],p=v.transform,g=(0,N._T)(v,["transform"]);CT(h,p);var m=v5(n,h,l);return h.getLocalEulerAngles()||h.setLocalEulerAngles(m),RT(h,(0,N.pi)((0,N.pi)({},kT(n.value,m,l)),d)),a.attr(g),h}function m5(a,n,r,s,l){var u=iw(n,r.labelFilter),h=Te(r,"label"),f,d=a.selectAll(Ln.label.class).data(u,function(v,p){return p}).join(function(v){return v.append("g").attr("className",Ln.label.name).transition(function(p){NT(this,p,n,h,r);var g=PT(p,n,r),m=g.x,b=g.y;return this.style.transform="translate(".concat(m,", ").concat(b,")"),null})},function(v){return v.transition(function(p){var g=this.querySelector(Ln.labelItem.class),m=NT(this,p,n,h,r),b=ID(g,m,s.update),E=PT(p,n,r),w=E.x,S=E.y,M=to(this,{transform:"translate(".concat(w,", ").concat(S,")")},s.update);return(0,N.ev)((0,N.ev)([],(0,N.CR)(b),!1),[M],!1)})},function(v){return f=v,v.transition(function(){var p=this,g=Ky(this.childNodes[0],s.exit);return mf(g,function(){return Kt(p).remove()}),g}),f}).transitions();return ND(d,function(){y5.call(a,r,l)}),d}function LT(a,n){return aw(a,n.tickDirection,n)}function b5(a,n){var r=(0,N.CR)(a,2),s=r[0],l=r[1];return[[0,0],[s*n,l*n]]}function x5(a,n,r,s,l){var u=l.tickLength,h=(0,N.CR)(b5(s,Ja(u,[a,n,r])),2),f=(0,N.CR)(h[0],2),d=f[0],v=f[1],p=(0,N.CR)(h[1],2),g=p[0],m=p[1];return{x1:d,x2:g,y1:v,y2:m}}function E5(a,n,r,s,l){var u=l.tickFormatter,h=LT(n.value,l),f="line";return(0,re.Z)(u)&&(f=function(){return Ja(u,[n,r,s,h])}),a.append(f).attr("className",Ln.tickItem.name)}function w5(a,n,r,s,l,u,h){var f=LT(a.value,u),d=x5(a,n,r,f,u),v=d.x1,p=d.x2,g=d.y1,m=d.y2,b=(0,N.CR)(Ml(bT(h,[a,n,r,f])),2),E=b[0],w=b[1];s.node().nodeName==="line"&&s.styles((0,N.pi)({x1:v,x2:p,y1:g,y2:m},E)),l.attr(w),s.styles(E)}function IT(a,n,r,s,l,u){var h=E5(Kt(this),a,n,r,s);w5(a,n,r,h,this,s,l);var f=(0,N.CR)(Qy(a.value,s),2),d=f[0],v=f[1];return to(this,{transform:"translate(".concat(d,", ").concat(v,")")},u)}function S5(a,n,r,s){var l=iw(n,r.tickFilter),u=Te(r,"tick");return a.selectAll(Ln.tick.class).data(l,function(h){return h.id||h.label}).join(function(h){return h.append("g").attr("className",Ln.tick.name).transition(function(f,d){return IT.call(this,f,d,l,r,u,!1)})},function(h){return h.transition(function(f,d){return this.removeChildren(),IT.call(this,f,d,l,r,u,s.update)})},function(h){return h.transition(function(){var f=this,d=Ky(this.childNodes[0],s.exit);return mf(d,function(){return f.remove()}),d})}).transitions()}function _5(a,n,r){var s=r.titlePosition,l=s===void 0?"lb":s,u=r.titleSpacing,h=$y(l),f=a.node().getLocalBounds(),d=(0,N.CR)(f.min,2),v=d[0],p=d[1],g=(0,N.CR)(f.halfExtents,2),m=g[0],b=g[1],E=(0,N.CR)(n.node().getLocalBounds().halfExtents,2),w=E[0],S=E[1],M=(0,N.CR)([v+m,p+b],2),C=M[0],T=M[1],k=(0,N.CR)(ki(u),4),O=k[0],A=k[1],R=k[2],L=k[3];if(["start","end"].includes(l)&&r.type==="linear"){var D=r.startPos,z=r.endPos,W=(0,N.CR)(l==="start"?[D,z]:[z,D],2),G=W[0],Y=W[1],q=vT([-Y[0]+G[0],-Y[1]+G[1]]),rt=(0,N.CR)(Tl(q,O),2),yt=rt[0],st=rt[1];return{x:G[0]+yt,y:G[1]+st}}return h.includes("t")&&(T-=b+S+O),h.includes("r")&&(C+=m+w+A),h.includes("l")&&(C-=m+w+L),h.includes("b")&&(T+=b+S+R),{x:C,y:T}}function M5(a,n,r){var s=a.getGeometryBounds().halfExtents,l=s[1]*2;if(n==="vertical"){if(r==="left")return"rotate(-90) translate(0, ".concat(l/2,")");if(r==="right")return"rotate(-90) translate(0, -".concat(l/2,")")}return""}function DT(a,n,r,s,l){var u=Te(s,"title"),h=(0,N.CR)(Ml(u),2),f=h[0],d=h[1],v=d.transform,p=d.transformOrigin,g=(0,N._T)(d,["transform","transformOrigin"]);n.styles(g);var m=v||M5(a.node(),f.direction,f.position);a.styles((0,N.pi)((0,N.pi)({},f),{transformOrigin:p})),CT(a.node(),m);var b=_5(Kt(r._offscreen||r.querySelector(Ln.mainGroup.class)),n,s),E=b.x,w=b.y,S=to(n.node(),{transform:"translate(".concat(E,", ").concat(w,")")},l);return S}function C5(a,n,r,s){var l=r.titleText;return a.selectAll(Ln.title.class).data([{title:l}].filter(function(u){return!!u.title}),function(u,h){return u.title}).join(function(u){return u.append(function(){return Cl(l)}).attr("className",Ln.title.name).transition(function(){return DT(Kt(this),a,n,r,s.enter)})},function(u){return u.transition(function(){return DT(Kt(this),a,n,r,s.update)})},function(u){return u.remove()}).transitions()}function BT(a,n,r,s){var l=a.showLine,u=a.showTick,h=a.showLabel,f=n.maybeAppendByClassName(Ln.lineGroup,"g"),d=Qa(l,f,function(b){return G6(b,a,s)})||[],v=n.maybeAppendByClassName(Ln.tickGroup,"g"),p=Qa(u,v,function(b){return S5(b,r,a,s)})||[],g=n.maybeAppendByClassName(Ln.labelGroup,"g"),m=Qa(h,g,function(b){return m5(b,r,a,s,n.node())})||[];return(0,N.ev)((0,N.ev)((0,N.ev)([],(0,N.CR)(d),!1),(0,N.CR)(p),!1),(0,N.CR)(m),!1).filter(function(b){return!!b})}var T5=function(a){(0,N.ZT)(n,a);function n(r){return a.call(this,r,tw)||this}return n.prototype.render=function(r,s,l){var u=this,h=r.titleText,f=r.data,d=r.animate,v=r.showTitle,p=r.showGrid,g=r.dataThreshold,m=r.truncRange,b=x6(f,g).filter(function(O){var A=O.value;return!(m&&A>m[0]&&A<m[1])}),E=qC(l===void 0?d:l),w=Kt(s).maybeAppendByClassName(Ln.gridGroup,"g"),S=Qa(p,w,function(O){return V6(O,b,r,E)})||[],M=Kt(s).maybeAppendByClassName(Ln.mainGroup,"g");h&&(!this.initialized&&E.enter||this.initialized&&E.update)&&BT(r,Kt(this.offscreenGroup),b,qC(!1));var C=BT(r,Kt(M.node()),b,E),T=Kt(s).maybeAppendByClassName(Ln.titleGroup,"g"),k=Qa(v,T,function(O){return C5(O,u,r,E)})||[];return(0,N.ev)((0,N.ev)((0,N.ev)([],(0,N.CR)(S),!1),(0,N.CR)(C),!1),(0,N.CR)(k),!1).flat().filter(function(O){return!!O})},n}(Sr);function FT(a){var n=a.canvas,r=a.touches,s=a.offsetX,l=a.offsetY;if(n){var u=n.x,h=n.y;return[u,h]}if(r){var f=r[0],d=f.clientX,v=f.clientY;return[d,v]}return s&&l?[s,l]:[0,0]}function uw(a,n){return+a.toPrecision(n)}function _7(a){return a.toLocaleString()}function M7(a){return a.toExponential()}function C7(a,n){return n===void 0&&(n=0),Math.abs(a)<1e3?String(a):"".concat(uw(a/1e3,n).toLocaleString(),"K")}var T7=function(a,n,r){return a<0&&Number.isFinite(a)?n:r},O7=function(a,n,r){return a>0&&Number.isFinite(a)?n:r},A7=function(a,n){return a*n},k7=function(a,n){return a/2+(n||0)/2},hw=function(a){return a};class zT{constructor(n){this.options=(0,Ka.Z)({},this.getDefaultOptions()),this.update(n)}getOptions(){return this.options}update(n={}){this.options=(0,Ka.Z)({},this.options,n),this.rescale(n)}rescale(n){}}function fw(a,n){return n-a?r=>(r-a)/(n-a):r=>.5}function em(a,...n){return n.reduce((r,s)=>l=>r(s(l)),a)}function O5(a,n,r,s,l){let u=r||0,h=s||a.length;const f=l||(d=>d);for(;u<h;){const d=Math.floor((u+h)/2);f(a[d])>n?h=d:u=d+1}return u}var A5=K(19818),k5=K.n(A5);function dw(a,n,r){let s=r;return s<0&&(s+=1),s>1&&(s-=1),s<1/6?a+(n-a)*6*s:s<1/2?n:s<2/3?a+(n-a)*(2/3-s)*6:a}function P5(a){const n=a[0]/360,r=a[1]/100,s=a[2]/100,l=a[3];if(r===0)return[s*255,s*255,s*255,l];const u=s<.5?s*(1+r):s+r-s*r,h=2*s-u,f=dw(h,u,n+1/3),d=dw(h,u,n),v=dw(h,u,n-1/3);return[f*255,d*255,v*255,l]}function ZT(a){const n=k5().get(a);if(!n)return null;const{model:r,value:s}=n;return r==="rgb"?s:r==="hsl"?P5(s):null}const nm=(a,n)=>r=>a*(1-r)+n*r,R5=(a,n)=>{const r=ZT(a),s=ZT(n);return r===null||s===null?r?()=>a:()=>n:l=>{const u=new Array(4);for(let p=0;p<4;p+=1){const g=r[p],m=s[p];u[p]=g*(1-l)+m*l}const[h,f,d,v]=u;return`rgba(${Math.round(h)}, ${Math.round(f)}, ${Math.round(d)}, ${v})`}},N5=(a,n)=>typeof a=="number"&&typeof n=="number"?nm(a,n):typeof a=="string"&&typeof n=="string"?R5(a,n):()=>a,L5=(a,n)=>{const r=nm(a,n);return s=>Math.round(r(s))};function I5(a){return a===null}function WT(a){return!xe(a)&&!I5(a)&&!Number.isNaN(a)}const vw=Math.sqrt(50),pw=Math.sqrt(10),gw=Math.sqrt(2);function rm(a,n,r){const s=(n-a)/Math.max(0,r),l=Math.floor(Math.log(s)/Math.LN10),u=s/qv(10,l);return l>=0?(u>=vw?10:u>=pw?5:u>=gw?2:1)*qv(10,l):-qv(10,-l)/(u>=vw?10:u>=pw?5:u>=gw?2:1)}function P7(a,n,r){const s=Math.abs(n-a)/Math.max(0,r);let l=qv(10,Math.floor(Math.log(s)/Math.LN10));const u=s/l;return u>=vw?l*=10:u>=pw?l*=5:u>=gw&&(l*=2),n<a?-l:l}const D5=(a,n,r=5)=>{const s=[a,n];let l=0,u=s.length-1,h=s[l],f=s[u],d;return f<h&&([h,f]=[f,h],[l,u]=[u,l]),d=rm(h,f,r),d>0?(h=Math.floor(h/d)*d,f=Math.ceil(f/d)*d,d=rm(h,f,r)):d<0&&(h=Math.ceil(h*d)/d,f=Math.floor(f*d)/d,d=rm(h,f,r)),d>0?(s[l]=Math.floor(h/d)*d,s[u]=Math.ceil(f/d)*d):d<0&&(s[l]=Math.ceil(h*d)/d,s[u]=Math.floor(f*d)/d),s};function B5(a,n){const r=n<a?n:a,s=a>n?a:n;return l=>Math.min(Math.max(r,l),s)}const F5=(a,n,r)=>{const[s,l]=a,[u,h]=n;let f,d;return s<l?(f=fw(s,l),d=r(u,h)):(f=fw(l,s),d=r(h,u)),em(d,f)},z5=(a,n,r)=>{const s=Math.min(a.length,n.length)-1,l=new Array(s),u=new Array(s),h=a[0]>a[s],f=h?[...a].reverse():a,d=h?[...n].reverse():n;for(let v=0;v<s;v+=1)l[v]=fw(f[v],f[v+1]),u[v]=r(d[v],d[v+1]);return v=>{const p=O5(a,v,1,s)-1,g=l[p],m=u[p];return em(m,g)(v)}},GT=(a,n,r,s)=>(Math.min(a.length,n.length)>2?z5:F5)(a,n,s?L5:r);class Z5 extends zT{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:nm,tickCount:5}}map(n){return WT(n)?this.output(n):this.options.unknown}invert(n){return WT(n)?this.input(n):this.options.unknown}nice(){if(!this.options.nice)return;const[n,r,s,...l]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(n,r,s,...l)}getTicks(){const{tickMethod:n}=this.options,[r,s,l,...u]=this.getTickMethodOptions();return n(r,s,l,...u)}getTickMethodOptions(){const{domain:n,tickCount:r}=this.options,s=n[0],l=n[n.length-1];return[s,l,r]}chooseNice(){return D5}rescale(){this.nice();const[n,r]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n)),this.composeInput(n,r,this.chooseClamp(r))}chooseClamp(n){const{clamp:r,range:s}=this.options,l=this.options.domain.map(n),u=Math.min(l.length,s.length);return r?B5(l[0],l[u-1]):hw}composeOutput(n,r){const{domain:s,range:l,round:u,interpolate:h}=this.options,f=GT(s.map(n),l,h,u);this.output=em(f,r,n)}composeInput(n,r,s){const{domain:l,range:u}=this.options,h=GT(u,l.map(n),nm);this.input=em(r,s,h)}}const W5=(a,n,r)=>{let s,l,u=a,h=n;if(u===h&&r>0)return[u];let f=rm(u,h,r);if(f===0||!Number.isFinite(f))return[];if(f>0){u=Math.ceil(u/f),h=Math.floor(h/f),l=new Array(s=Math.ceil(h-u+1));for(let d=0;d<s;d+=1)l[d]=(u+d)*f}else{f=-f,u=Math.ceil(u*f),h=Math.floor(h*f),l=new Array(s=Math.ceil(h-u+1));for(let d=0;d<s;d+=1)l[d]=(u+d)/f}return l};class Bv extends Z5{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:N5,tickMethod:W5,tickCount:5}}chooseTransforms(){return[hw,hw]}clone(){return new Bv(this.options)}}function jT({map:a,initKey:n},r){const s=n(r);return a.has(s)?a.get(s):r}function G5({map:a,initKey:n},r){const s=n(r);return a.has(s)?a.get(s):(a.set(s,r),r)}function j5({map:a,initKey:n},r){const s=n(r);return a.has(s)&&(r=a.get(s),a.delete(s)),r}function $5(a){return typeof a=="object"?a.valueOf():a}class $T extends Map{constructor(n){if(super(),this.map=new Map,this.initKey=$5,n!==null)for(const[r,s]of n)this.set(r,s)}get(n){return super.get(jT({map:this.map,initKey:this.initKey},n))}has(n){return super.has(jT({map:this.map,initKey:this.initKey},n))}set(n,r){return super.set(G5({map:this.map,initKey:this.initKey},n),r)}delete(n){return super.delete(j5({map:this.map,initKey:this.initKey},n))}}const yw=Symbol("defaultUnknown");function HT(a,n,r){for(let s=0;s<n.length;s+=1)a.has(n[s])||a.set(r(n[s]),s)}function VT(a){const{value:n,from:r,to:s,mapper:l,notFoundReturn:u}=a;let h=l.get(n);if(h===void 0){if(u!==yw)return u;h=r.push(n)-1,l.set(n,h)}return s[h%s.length]}function UT(a){return a instanceof Date?n=>`${n}`:typeof a=="object"?n=>JSON.stringify(n):n=>n}class mw extends zT{getDefaultOptions(){return{domain:[],range:[],unknown:yw}}constructor(n){super(n)}map(n){return this.domainIndexMap.size===0&&HT(this.domainIndexMap,this.getDomain(),this.domainKey),VT({value:this.domainKey(n),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(n){return this.rangeIndexMap.size===0&&HT(this.rangeIndexMap,this.getRange(),this.rangeKey),VT({value:this.rangeKey(n),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(n){const[r]=this.options.domain,[s]=this.options.range;if(this.domainKey=UT(r),this.rangeKey=UT(s),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!n||n.range)&&this.rangeIndexMap.clear(),(!n||n.domain||n.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new mw(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:n,compare:r}=this.options;return this.sortedDomain=r?[...n].sort(r):n,this.sortedDomain}}function H5(a){const n=Math.min(...a);return a.map(r=>r/n)}function V5(a,n){const r=a.length,s=n-r;return s>0?[...a,...new Array(s).fill(1)]:s<0?a.slice(0,n):a}function U5(a){return Math.round(a*1e12)/1e12}function Y5(a){const{domain:n,range:r,paddingOuter:s,paddingInner:l,flex:u,round:h,align:f}=a,d=n.length,v=V5(u,d),[p,g]=r,m=g-p,b=2/d*s+1-1/d*l,E=m/b,w=E*l/d,S=E-d*w,M=H5(v),C=M.reduce((G,Y)=>G+Y),T=S/C,k=new $T(n.map((G,Y)=>{const q=M[Y]*T;return[G,h?Math.floor(q):q]})),O=new $T(n.map((G,Y)=>{const rt=M[Y]*T+w;return[G,h?Math.floor(rt):rt]})),A=Array.from(O.values()).reduce((G,Y)=>G+Y),L=(m-(A-A/d*l))*f,D=p+L;let z=h?Math.round(D):D;const W=new Array(d);for(let G=0;G<d;G+=1){W[G]=U5(z);const Y=n[G];z+=O.get(Y)}return{valueBandWidth:k,valueStep:O,adjustedRange:W}}function X5(a){var n;const{domain:r}=a,s=r.length;if(s===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((n=a.flex)===null||n===void 0)&&n.length))return Y5(a);const{range:u,paddingOuter:h,paddingInner:f,round:d,align:v}=a;let p,g,m=u[0];const E=u[1]-m,w=h*2,S=s-f;p=E/Math.max(1,w+S),d&&(p=Math.floor(p)),m+=(E-p*(s-f))*v,g=p*(1-f),d&&(m=Math.round(m),g=Math.round(g));const M=new Array(s).fill(0).map((C,T)=>m+T*p);return{valueStep:p,valueBandWidth:g,adjustedRange:M}}class bw extends mw{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:yw,flex:[]}}constructor(n){super(n)}clone(){return new bw(this.options)}getStep(n){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:n===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(n)}getBandWidth(n){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:n===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(n)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:n,paddingInner:r}=this.options;return n>0?n:r}getPaddingOuter(){const{padding:n,paddingOuter:r}=this.options;return n>0?n:r}rescale(){super.rescale();const{align:n,domain:r,range:s,round:l,flex:u}=this.options,{adjustedRange:h,valueBandWidth:f,valueStep:d}=X5({align:n,range:s,round:l,flex:u,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:r});this.valueStep=d,this.valueBandWidth=f,this.adjustedRange=h}}var K5=function(a){(0,N.ZT)(n,a);function n(r){var s=this,l=r.style,u=(0,N._T)(r,["style"]);return s=a.call(this,(0,Ka.Z)({},{type:"column"},(0,N.pi)({style:l},u)))||this,s.columnsGroup=new kr({name:"columns"}),s.appendChild(s.columnsGroup),s.render(),s}return n.prototype.render=function(){var r=this.attributes,s=r.columns,l=r.x,u=r.y;this.columnsGroup.style.transform="translate(".concat(l,", ").concat(u,")"),Kt(this.columnsGroup).selectAll(".column").data(s.flat()).join(function(h){return h.append("rect").attr("className","column").each(function(f){this.attr(f)})},function(h){return h.each(function(f){this.attr(f)})},function(h){return h.remove()})},n.prototype.update=function(r){this.attr(ui({},this.attributes,r)),this.render()},n.prototype.clear=function(){this.removeChildren()},n}(Fn),q5=function(a){(0,N.ZT)(n,a);function n(r){var s=this,l=r.style,u=(0,N._T)(r,["style"]);return s=a.call(this,(0,Ka.Z)({},{type:"lines"},(0,N.pi)({style:l},u)))||this,s.linesGroup=s.appendChild(new kr),s.areasGroup=s.appendChild(new kr),s.render(),s}return n.prototype.render=function(){var r=this.attributes,s=r.lines,l=r.areas,u=r.x,h=r.y;this.style.transform="translate(".concat(u,", ").concat(h,")"),s&&this.renderLines(s),l&&this.renderAreas(l)},n.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},n.prototype.update=function(r){this.attr(ui({},this.attributes,r)),this.render()},n.prototype.renderLines=function(r){Kt(this.linesGroup).selectAll(".line").data(r).join(function(s){return s.append("path").attr("className","line").each(function(l){this.attr(l)})},function(s){return s.each(function(l){this.attr(l)})},function(s){return s.remove()})},n.prototype.renderAreas=function(r){Kt(this.linesGroup).selectAll(".area").data(r).join(function(s){return s.append("path").attr("className","area").each(function(l){this.attr(l)})},function(s){return s.each(function(l){this.style(l)})},function(s){return s.remove()})},n}(Fn);function Q5(a,n,r,s){var l,u=[],h=!!s,f,d,v=[1/0,1/0],p=[-1/0,-1/0],g,m,b;if(h){l=(0,N.CR)(s,2),v=l[0],p=l[1];for(var E=0,w=a.length;E<w;E+=1){var S=a[E];v=Pu(v,S),p=Ru(p,S)}}for(var E=0,M=a.length;E<M;E+=1){var S=a[E];if(E===0&&!r)b=S;else if(E===M-1&&!r)m=S,u.push(b),u.push(m);else{var C=[E?E-1:M-1,E-1][r?0:1];f=a[C],d=a[r?(E+1)%M:E+1];var T=[0,0];T=ew(d,f),T=Tl(T,n);var k=Nv(S,f),O=Nv(S,d),A=k+O;A!==0&&(k/=A,O/=A);var R=Tl(T,-k),L=Tl(T,O);m=Rv(S,R),g=Rv(S,L),g=Pu(g,Ru(d,S)),g=Ru(g,Pu(d,S)),R=ew(g,S),R=Tl(R,-k/O),m=Rv(S,R),m=Pu(m,Ru(f,S)),m=Ru(m,Pu(f,S)),L=ew(S,m),L=Tl(L,O/k),g=Rv(S,L),h&&(m=Ru(m,v),m=Pu(m,p),g=Ru(g,v),g=Pu(g,p)),u.push(b),u.push(m),b=g}}return r&&u.push(u.shift()),u}function J5(a,n,r){var s;n===void 0&&(n=!1),r===void 0&&(r=[[0,0],[1,1]]);for(var l=!!n,u=[],h=0,f=a.length;h<f;h+=2)u.push([a[h],a[h+1]]);for(var d=Q5(u,.4,l,r),v=u.length,p=[],g,m,b,h=0;h<v-1;h+=1)g=d[h*2],m=d[h*2+1],b=u[h+1],p.push(["C",g[0],g[1],m[0],m[1],b[0],b[1]]);return l&&(g=d[v],m=d[v+1],s=(0,N.CR)(u,1),b=s[0],p.push(["C",g[0],g[1],m[0],m[1],b[0],b[1]])),p}function t4(a,n){var r,s=n.x,l=n.y,u=(0,N.CR)(l.getOptions().range||[0,0],2),h=u[0],f=u[1];return f>h&&(r=(0,N.CR)([h,f],2),f=r[0],h=r[1]),a.map(function(d){var v=d.map(function(p,g){return[s.map(g),Le(l.map(p),f,h)]});return v})}function Fv(a,n){n===void 0&&(n=!1);var r=n?a.length-1:0,s=a.map(function(l,u){return(0,N.ev)([u===r?"M":"L"],(0,N.CR)(l),!1)});return n?s.reverse():s}function im(a,n){if(n===void 0&&(n=!1),a.length<=2)return Fv(a);for(var r=[],s=a.length,l=0;l<s;l+=1){var u=n?a[s-l-1]:a[l];Rr(u,r.slice(-2))||r.push.apply(r,(0,N.ev)([],(0,N.CR)(u),!1))}var h=J5(r,!1);return n?h.unshift((0,N.ev)(["M"],(0,N.CR)(a[s-1]),!1)):h.unshift((0,N.ev)(["M"],(0,N.CR)(a[0]),!1)),h}function xw(a,n,r){var s=(0,gg.Z)(a);return s.push(["L",n,r],["L",0,r],["Z"]),s}function e4(a,n,r,s){return a.map(function(l){return xw(n?im(l):Fv(l),r,s)})}function n4(a,n,r){for(var s=[],l=a.length-1;l>=0;l-=1){var u=a[l],h=Fv(u),f=void 0;if(l===0)f=xw(h,n,r);else{var d=a[l-1],v=Fv(d,!0);v[0][0]="L",f=(0,N.ev)((0,N.ev)((0,N.ev)([],(0,N.CR)(h),!1),(0,N.CR)(v),!1),[["Z"]],!1)}s.push(f)}return s}function r4(a,n,r){for(var s=[],l=a.length-1;l>=0;l-=1){var u=a[l],h=im(u),f=void 0;if(l===0)f=xw(h,n,r);else{var d=a[l-1],v=im(d,!0),p=u[0];v[0][0]="L",f=(0,N.ev)((0,N.ev)((0,N.ev)([],(0,N.CR)(h),!1),(0,N.CR)(v),!1),[(0,N.ev)(["M"],(0,N.CR)(p),!1),["Z"]],!1)}s.push(f)}return s}var i4=function(a,n){if((0,za.Z)(a)){for(var r,s=1/0,l=0;l<a.length;l++){var u=a[l],h=(0,re.Z)(n)?n(u):u[n];h<s&&(r=u,s=h)}return r}},a4=function(a,n){if((0,za.Z)(a)){for(var r,s=-1/0,l=0;l<a.length;l++){var u=a[l],h=(0,re.Z)(n)?n(u):u[n];h>s&&(r=u,s=h)}return r}};function YT(a){return a.length===0?[0,0]:[sh(i4(a,function(n){return sh(n)||0})),oh(a4(a,function(n){return oh(n)||0}))]}function XT(a){for(var n=(0,gg.Z)(a),r=n[0].length,s=(0,N.CR)([Array(r).fill(0),Array(r).fill(0)],2),l=s[0],u=s[1],h=0;h<n.length;h+=1)for(var f=n[h],d=0;d<r;d+=1)f[d]>=0?(f[d]+=l[d],l[d]=f[d]):(f[d]+=u[d],u[d]=f[d]);return n}var s4=function(a){(0,N.ZT)(n,a);function n(r){return a.call(this,r,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(n.prototype,"rawData",{get:function(){var r=this.attributes.data;if(!r||(r==null?void 0:r.length)===0)return[[]];var s=(0,gg.Z)(r);return(0,tn.Z)(s[0])?[s]:s},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this.attributes.isStack?XT(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"baseline",{get:function(){var r=this.scales.y,s=(0,N.CR)(r.getOptions().domain||[0,0],2),l=s[0],u=s[1];return u<0?r.map(u):r.map(l<0?0:l)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"containerShape",{get:function(){var r=this.attributes,s=r.width,l=r.height;return{width:s,height:l}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"linesStyle",{get:function(){var r=this,s=this.attributes,l=s.type,u=s.isStack,h=s.smooth;if(l!=="line")throw new Error("linesStyle can only be used in line type");var f=Te(this.attributes,"area"),d=Te(this.attributes,"line"),v=this.containerShape.width,p=this.data;if(p[0].length===0)return{lines:[],areas:[]};var g=this.scales,m=g.x,b=g.y,E=t4(p,{type:"line",x:m,y:b}),w=[];if(f){var S=this.baseline;u?w=h?r4(E,v,S):n4(E,v,S):w=e4(E,h,v,S)}return{lines:E.map(function(M,C){return(0,N.pi)({stroke:r.getColor(C),d:h?im(M):Fv(M)},d)}),areas:w.map(function(M,C){return(0,N.pi)({d:M,fill:r.getColor(C)},f)})}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnsStyle",{get:function(){var r=this,s=Te(this.attributes,"column"),l=this.attributes,u=l.isStack,h=l.type,f=l.scale;if(h!=="column")throw new Error("columnsStyle can only be used in column type");var d=this.containerShape.height,v=this.rawData;if(!v)return{columns:[]};u&&(v=XT(v));var p=this.createScales(v),g=p.x,m=p.y,b=(0,N.CR)(YT(v),2),E=b[0],w=b[1],S=new Bv({domain:[0,w-(E>0?0:E)],range:[0,d*f]}),M=g.getBandWidth(),C=this.rawData;return{columns:v.map(function(T,k){return T.map(function(O,A){var R=M/v.length,L=function(){return{x:g.map(A)+R*k,y:O>=0?m.map(O):m.map(0),width:R,height:S.map(Math.abs(O))}},D=function(){return{x:g.map(A),y:m.map(O),width:M,height:S.map(C[k][A])}};return(0,N.pi)((0,N.pi)({fill:r.getColor(k)},s),u?D():L())})})}},enumerable:!1,configurable:!0}),n.prototype.render=function(r,s){CD(s,".container","rect").attr("className","container").node();var l=r.type,u=r.x,h=r.y,f="spark".concat(l),d=(0,N.pi)({x:u,y:h},l==="line"?this.linesStyle:this.columnsStyle);Kt(s).selectAll(".spark").data([l]).join(function(v){return v.append(function(p){return p==="line"?new q5({className:f,style:d}):new K5({className:f,style:d})}).attr("className","spark ".concat(f))},function(v){return v.update(d)},function(v){return v.remove()})},n.prototype.getColor=function(r){var s=this.attributes.color;return(0,za.Z)(s)?s[r%s.length]:(0,re.Z)(s)?s.call(null,r):s},n.prototype.createScales=function(r){var s,l,u=this.attributes,h=u.type,f=u.scale,d=u.range,v=d===void 0?[]:d,p=u.spacing,g=this.containerShape,m=g.width,b=g.height,E=(0,N.CR)(YT(r),2),w=E[0],S=E[1],M=new Bv({domain:[(s=v[0])!==null&&s!==void 0?s:w,(l=v[1])!==null&&l!==void 0?l:S],range:[b,b*(1-f)]});return h==="line"?{type:h,x:new Bv({domain:[0,r[0].length-1],range:[0,m]}),y:M}:{type:h,x:new bw({domain:r[0].map(function(C,T){return T}),range:[0,m],paddingInner:p,paddingOuter:p/2,align:.5}),y:M}},n.tag="sparkline",n}(Sr),KT={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},qT={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},QT={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},No=Js({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Ec=Js({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),o4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(r,s){var l=r.x,u=r.y,h=r.size,f=h===void 0?10:h,d=r.radius,v=d===void 0?f/4:d,p=r.orientation,g=(0,N._T)(r,["x","y","size","radius","orientation"]),m=f,b=m*2.4,E=Kt(s).maybeAppendByClassName(Ec.iconRect,"rect").styles((0,N.pi)((0,N.pi)({},g),{width:m,height:b,radius:v,x:l-m/2,y:u-b/2,transformOrigin:"center"})),w=l+1/3*m-m/2,S=l+2/3*m-m/2,M=u+1/4*b-b/2,C=u+3/4*b-b/2;E.maybeAppendByClassName("".concat(Ec.iconLine,"-1"),"line").styles((0,N.pi)({x1:w,x2:w,y1:M,y2:C},g)),E.maybeAppendByClassName("".concat(Ec.iconLine,"-2"),"line").styles((0,N.pi)({x1:S,x2:S,y1:M,y2:C},g)),p==="vertical"&&(E.node().style.transform="rotate(90)")},n}(Sr),l4=function(a){(0,N.ZT)(n,a);function n(r){return a.call(this,r,QT)||this}return n.prototype.renderLabel=function(r){var s=this,l=this.attributes,u=l.x,h=l.y,f=l.showLabel,d=Te(this.attributes,"label"),v=d.x,p=v===void 0?0:v,g=d.y,m=g===void 0?0:g,b=d.transform,E=d.transformOrigin,w=(0,N._T)(d,["x","y","transform","transformOrigin"]),S=(0,N.CR)(Ml(w,[]),2),M=S[0],C=S[1],T=Kt(r).maybeAppendByClassName(Ec.labelGroup,"g").styles(C),k=(0,N.pi)((0,N.pi)({},qT),M),O=k.text,A=(0,N._T)(k,["text"]);Qa(!!f,T,function(R){s.label=R.maybeAppendByClassName(Ec.label,"text").styles((0,N.pi)((0,N.pi)({},A),{x:u+p,y:h+m,transform:b,transformOrigin:E,text:"".concat(O)})),s.label.on("mousedown",function(L){L.stopPropagation()}),s.label.on("touchstart",function(L){L.stopPropagation()})})},n.prototype.renderIcon=function(r){var s=this.attributes,l=s.x,u=s.y,h=s.orientation,f=s.type,d=(0,N.pi)((0,N.pi)({x:l,y:u,orientation:h},KT),Te(this.attributes,"icon")),v=this.attributes.iconShape,p=v===void 0?function(){return new o4({style:d})}:v,g=Kt(r).maybeAppendByClassName(Ec.iconGroup,"g");g.selectAll(Ec.icon.class).data([p]).join(function(m){return m.append(typeof p=="string"?p:function(){return p(f)}).attr("className",Ec.icon.name)},function(m){return m.update(d)},function(m){return m.remove()})},n.prototype.render=function(r,s){this.renderIcon(s),this.renderLabel(s)},n}(Sr),c4=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,r,(0,N.pi)((0,N.pi)((0,N.pi)({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(l){return l.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},yf(QT,"handle")),yf(KT,"handleIcon")),yf(qT,"handleLabel")))||this;return s.range=[0,1],s.onDragStart=function(l){return function(u){u.stopPropagation(),s.target=l,s.prevPos=s.getOrientVal(FT(u));var h=s.availableSpace,f=h.x,d=h.y,v=s.getBBox(),p=v.x,g=v.y;s.selectionStartPos=s.getRatio(s.prevPos-s.getOrientVal([f,d])-s.getOrientVal([+p,+g])),s.selectionWidth=0,document.addEventListener("pointermove",s.onDragging),document.addEventListener("pointerup",s.onDragEnd)}},s.onDragging=function(l){var u=s.attributes,h=u.slidable,f=u.brushable,d=u.type;l.stopPropagation();var v=s.getOrientVal(FT(l)),p=v-s.prevPos;if(p){var g=s.getRatio(p);switch(s.target){case"start":h&&s.setValuesOffset(g);break;case"end":h&&s.setValuesOffset(0,g);break;case"selection":h&&s.setValuesOffset(g,g);break;case"track":if(!f)return;s.selectionWidth+=g,d==="range"?s.innerSetValues([s.selectionStartPos,s.selectionStartPos+s.selectionWidth].sort(),!0):s.innerSetValues([0,s.selectionStartPos+s.selectionWidth],!0);break;default:break}s.prevPos=v}},s.onDragEnd=function(){document.removeEventListener("pointermove",s.onDragging),document.removeEventListener("pointermove",s.onDragging),document.removeEventListener("pointerup",s.onDragEnd),s.target="",s.updateHandlesPosition(!1)},s.onValueChange=function(l){var u=s.attributes,h=u.onChange,f=u.type,d=f==="range"?l:l[1],v=f==="range"?s.getValues():s.getValues()[1],p=new xr("valuechange",{detail:{oldValue:d,value:v}});s.dispatchEvent(p),h==null||h(v)},s.selectionStartPos=0,s.selectionWidth=0,s.prevPos=0,s.target="",s}return Object.defineProperty(n.prototype,"values",{get:function(){return this.attributes.values},set:function(r){this.attributes.values=this.clampValues(r)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sparklineStyle",{get:function(){var r=this.attributes.orientation;if(r!=="horizontal")return null;var s=Te(this.attributes,"sparkline");return(0,N.pi)((0,N.pi)({zIndex:0},this.availableSpace),s)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shape",{get:function(){var r=this.attributes,s=r.trackLength,l=r.trackSize,u=(0,N.CR)(this.getOrientVal([[s,l],[l,s]]),2),h=u[0],f=u[1];return{width:h,height:f}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"availableSpace",{get:function(){var r=this.attributes,s=r.x,l=r.y,u=r.padding,h=(0,N.CR)(ki(u),4),f=h[0],d=h[1],v=h[2],p=h[3],g=this.shape,m=g.width,b=g.height;return{x:p,y:f,width:m-(p+d),height:b-(f+v)}},enumerable:!1,configurable:!0}),n.prototype.getValues=function(){return this.values},n.prototype.setValues=function(r,s){r===void 0&&(r=[0,0]),s===void 0&&(s=!1),this.attributes.values=r;var l=s===!1?!1:this.attributes.animate;this.updateSelectionArea(l),this.updateHandlesPosition(l)},n.prototype.updateSelectionArea=function(r){var s=this.calcSelectionArea();this.foregroundGroup.selectAll(No.selection.class).each(function(l,u){to(this,s[u],r)})},n.prototype.updateHandlesPosition=function(r){this.attributes.showHandle&&(this.startHandle&&to(this.startHandle,this.getHandleStyle("start"),r),this.endHandle&&to(this.endHandle,this.getHandleStyle("end"),r))},n.prototype.innerSetValues=function(r,s){r===void 0&&(r=[0,0]),s===void 0&&(s=!1);var l=this.values,u=this.clampValues(r);this.attributes.values=u,this.setValues(u),s&&this.onValueChange(l)},n.prototype.renderTrack=function(r){var s=this.attributes,l=s.x,u=s.y,h=Te(this.attributes,"track");this.trackShape=Kt(r).maybeAppendByClassName(No.track,"rect").styles((0,N.pi)((0,N.pi)({x:l,y:u},this.shape),h))},n.prototype.renderBrushArea=function(r){var s=this.attributes,l=s.x,u=s.y,h=s.brushable;this.brushArea=Kt(r).maybeAppendByClassName(No.brushArea,"rect").styles((0,N.pi)({x:l,y:u,fill:"transparent",cursor:h?"crosshair":"default"},this.shape))},n.prototype.renderSparkline=function(r){var s=this,l=this.attributes,u=l.x,h=l.y,f=l.orientation,d=Kt(r).maybeAppendByClassName(No.sparklineGroup,"g");Qa(f==="horizontal",d,function(v){var p=(0,N.pi)((0,N.pi)({},s.sparklineStyle),{x:u,y:h});v.maybeAppendByClassName(No.sparkline,function(){return new s4({style:p})}).update(p)})},n.prototype.renderHandles=function(){var r=this,s,l=this.attributes,u=l.showHandle,h=l.type,f=h==="range"?["start","end"]:["end"],d=u?f:[],v=this;(s=this.foregroundGroup)===null||s===void 0||s.selectAll(No.handle.class).data(d.map(function(p){return{type:p}}),function(p){return p.type}).join(function(p){return p.append(function(g){var m=g.type;return new l4({style:r.getHandleStyle(m)})}).each(function(g){var m=g.type;this.attr("class","".concat(No.handle.name," ").concat(m,"-handle"));var b="".concat(m,"Handle");v[b]=this,this.addEventListener("pointerdown",v.onDragStart(m))})},function(p){return p.each(function(g){var m=g.type;this.update(v.getHandleStyle(m))})},function(p){return p.each(function(g){var m=g.type,b="".concat(m,"Handle");v[b]=void 0}).remove()})},n.prototype.renderSelection=function(r){var s=this.attributes,l=s.x,u=s.y,h=s.type,f=s.selectionType;this.foregroundGroup=Kt(r).maybeAppendByClassName(No.foreground,"g");var d=Te(this.attributes,"selection"),v=function(g){return g.style("visibility",function(m){return m.show?"visible":"hidden"}).style("cursor",function(m){return f==="select"?"grab":f==="invert"?"crosshair":"default"}).styles((0,N.pi)((0,N.pi)({},d),{transform:"translate(".concat(l,", ").concat(u,")")}))},p=this;this.foregroundGroup.selectAll(No.selection.class).data(h==="value"?[]:this.calcSelectionArea().map(function(g,m){return{style:(0,N.pi)({},g),index:m,show:f==="select"?m===1:m!==1}}),function(g){return g.index}).join(function(g){return g.append("rect").attr("className",No.selection.name).call(v).each(function(m,b){var E=this;b===1?(p.selectionShape=Kt(this),this.on("pointerdown",function(w){E.attr("cursor","grabbing"),p.onDragStart("selection")(w)}),p.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),p.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),p.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){E.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){E.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){E.attr("cursor","pointer")})):this.on("pointerdown",p.onDragStart("track"))})},function(g){return g.call(v)},function(g){return g.remove()}),this.updateSelectionArea(!1),this.renderHandles()},n.prototype.render=function(r,s){this.renderTrack(s),this.renderSparkline(s),this.renderBrushArea(s),this.renderSelection(s)},n.prototype.clampValues=function(r,s){var l;s===void 0&&(s=4);var u=(0,N.CR)(this.range,2),h=u[0],f=u[1],d=(0,N.CR)(this.getValues().map(function(S){return uw(S,s)}),2),v=d[0],p=d[1],g=Array.isArray(r)?r:[v,r!=null?r:p],m=(0,N.CR)((g||[v,p]).map(function(S){return uw(S,s)}),2),b=m[0],E=m[1];if(this.attributes.type==="value")return[0,Le(E,h,f)];b>E&&(l=(0,N.CR)([E,b],2),b=l[0],E=l[1]);var w=E-b;return w>f-h?[h,f]:b<h?v===h&&p===E?[h,E]:[h,w+h]:E>f?p===f&&v===b?[b,f]:[f-w,f]:[b,E]},n.prototype.calcSelectionArea=function(r){var s=(0,N.CR)(this.clampValues(r),2),l=s[0],u=s[1],h=this.availableSpace,f=h.x,d=h.y,v=h.width,p=h.height;return this.getOrientVal([[{y:d,height:p,x:f,width:l*v},{y:d,height:p,x:l*v+f,width:(u-l)*v},{y:d,height:p,x:u*v,width:(1-u)*v}],[{x:f,width:v,y:d,height:l*p},{x:f,width:v,y:l*p+d,height:(u-l)*p},{x:f,width:v,y:u*p,height:(1-u)*p}]])},n.prototype.calcHandlePosition=function(r){var s=this.attributes.handleIconOffset,l=this.availableSpace,u=l.x,h=l.y,f=l.width,d=l.height,v=(0,N.CR)(this.clampValues(),2),p=v[0],g=v[1],m=r==="start"?-s:s,b=(r==="start"?p:g)*this.getOrientVal([f,d])+m;return{x:u+this.getOrientVal([b,f/2]),y:h+this.getOrientVal([d/2,b])}},n.prototype.inferTextStyle=function(r){var s=this.attributes.orientation;return s==="horizontal"?{}:r==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:r==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},n.prototype.calcHandleText=function(r){var s,l=this.attributes,u=l.type,h=l.orientation,f=l.formatter,d=l.autoFitLabel,v=Te(this.attributes,"handle"),p=Te(v,"label"),g=v.spacing,m=this.getHandleSize(),b=this.clampValues(),E=r==="start"?b[0]:b[1],w=f(E),S=new H2({style:(0,N.pi)((0,N.pi)((0,N.pi)({},p),this.inferTextStyle(r)),{text:w})}),M=S.getBBox(),C=M.width,T=M.height;if(S.destroy(),!d){if(u==="value")return{text:w,x:0,y:-T-g};var k=g+m+(h==="horizontal"?C/2:0);return s={text:w},s[h==="horizontal"?"x":"y"]=r==="start"?-k:k,s}var O=0,A=0,R=this.availableSpace,L=R.width,D=R.height,z=this.calcSelectionArea()[1],W=z.x,G=z.y,Y=z.width,q=z.height,rt=g+m;if(h==="horizontal"){var yt=rt+C/2;if(r==="start"){var st=W-rt-C;O=st>0?-yt:yt}else{var mt=L-W-Y-rt>C;O=mt?yt:-yt}}else{var at=rt,Et=T+rt;r==="start"?A=G-m>T?-Et:at:A=D-(G+q)-m>T?Et:-at}return{x:O,y:A,text:w}},n.prototype.getHandleLabelStyle=function(r){var s=Te(this.attributes,"handleLabel");return(0,N.pi)((0,N.pi)((0,N.pi)({},s),this.calcHandleText(r)),this.inferTextStyle(r))},n.prototype.getHandleIconStyle=function(){var r=this.attributes.handleIconShape,s=Te(this.attributes,"handleIcon"),l=this.getOrientVal(["ew-resize","ns-resize"]),u=this.getHandleSize();return(0,N.pi)({cursor:l,shape:r,size:u},s)},n.prototype.getHandleStyle=function(r){var s=this.attributes,l=s.x,u=s.y,h=s.showLabel,f=s.showLabelOnInteraction,d=s.orientation,v=this.calcHandlePosition(r),p=v.x,g=v.y,m=this.calcHandleText(r),b=h;return!h&&f&&(this.target?b=!0:b=!1),(0,N.pi)((0,N.pi)((0,N.pi)({},yf(this.getHandleIconStyle(),"icon")),yf((0,N.pi)((0,N.pi)({},this.getHandleLabelStyle(r)),m),"label")),{transform:"translate(".concat(p+l,", ").concat(g+u,")"),orientation:d,showLabel:b,type:r,zIndex:3})},n.prototype.getHandleSize=function(){var r=this.attributes,s=r.handleIconSize,l=r.width,u=r.height;return s||Math.floor((this.getOrientVal([+u,+l])+4)/2.4)},n.prototype.getOrientVal=function(r){var s=(0,N.CR)(r,2),l=s[0],u=s[1],h=this.attributes.orientation;return h==="horizontal"?l:u},n.prototype.setValuesOffset=function(r,s,l){s===void 0&&(s=0),l===void 0&&(l=!1);var u=this.attributes.type,h=(0,N.CR)(this.getValues(),2),f=h[0],d=h[1],v=u==="range"?r:0,p=[f+v,d+s].sort();l?this.setValues(p):this.innerSetValues(p,!0)},n.prototype.getRatio=function(r){var s=this.availableSpace,l=s.width,u=s.height;return r/this.getOrientVal([l,u])},n.prototype.dispatchCustomEvent=function(r,s,l){var u=this;r.on(s,function(h){h.stopPropagation(),u.dispatchEvent(new xr(l,{detail:h}))})},n.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var r=this.brushArea;this.dispatchCustomEvent(r,"click","trackClick"),this.dispatchCustomEvent(r,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(r,"pointerleave","trackMouseleave"),r.on("pointerdown",this.onDragStart("track"))},n.prototype.onScroll=function(r){var s=this.attributes.scrollable;if(s){var l=r.deltaX,u=r.deltaY,h=u||l,f=this.getRatio(h);this.setValuesOffset(f,f,!0)}},n.tag="slider",n}(Sr),u4={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(a){return a.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},Ew=Js({background:"background",labelGroup:"label-group",label:"label"},"indicator"),h4=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,r,u4)||this;return s.point=[0,0],s.group=s.appendChild(new kr({})),s.isMutationObserved=!0,s}return n.prototype.renderBackground=function(){if(this.label){var r=this.attributes,s=r.position,l=r.padding,u=(0,N.CR)(ki(l),4),h=u[0],f=u[1],d=u[2],v=u[3],p=this.label.node().getLocalBounds(),g=p.min,m=p.max,b=new Hi(g[0]-v,g[1]-h,m[0]+f-g[0]+v,m[1]+d-g[1]+h),E=this.getPath(s,b),w=Te(this.attributes,"background");this.background=Kt(this.group).maybeAppendByClassName(Ew.background,"path").styles((0,N.pi)((0,N.pi)({},w),{d:E})),this.group.appendChild(this.label.node())}},n.prototype.renderLabel=function(){var r=this.attributes,s=r.formatter,l=r.labelText,u=Te(this.attributes,"label"),h=(0,N.CR)(Ml(u),2),f=h[0],d=h[1],v=f.text,p=(0,N._T)(f,["text"]);if(this.label=Kt(this.group).maybeAppendByClassName(Ew.labelGroup,"g").styles(d),!!l){var g=this.label.maybeAppendByClassName(Ew.label,function(){return Cl(s(l))}).style("text",s(l).toString());g.selectAll("text").styles(p)}},n.prototype.adjustLayout=function(){var r=(0,N.CR)(this.point,2),s=r[0],l=r[1],u=this.attributes,h=u.x,f=u.y;this.group.attr("transform","translate(".concat(h-s,", ").concat(f-l,")"))},n.prototype.getPath=function(r,s){var l=this.attributes.radius,u=s.x,h=s.y,f=s.width,d=s.height,v=[["M",u+l,h],["L",u+f-l,h],["A",l,l,0,0,1,u+f,h+l],["L",u+f,h+d-l],["A",l,l,0,0,1,u+f-l,h+d],["L",u+l,h+d],["A",l,l,0,0,1,u,h+d-l],["L",u,h+l],["A",l,l,0,0,1,u+l,h],["Z"]],p={top:4,right:6,bottom:0,left:2},g=p[r],m=this.createCorner([v[g].slice(-2),v[g+1].slice(-2)]);return v.splice.apply(v,(0,N.ev)([g+1,1],(0,N.CR)(m),!1)),v[0][0]="M",v},n.prototype.createCorner=function(r,s){s===void 0&&(s=10);var l=.8,u=o6.apply(void 0,(0,N.ev)([],(0,N.CR)(r),!1)),h=(0,N.CR)(r,2),f=(0,N.CR)(h[0],2),d=f[0],v=f[1],p=(0,N.CR)(h[1],2),g=p[0],m=p[1],b=(0,N.CR)(u?[g-d,[d,g]]:[m-v,[v,m]],2),E=b[0],w=(0,N.CR)(b[1],2),S=w[0],M=w[1],C=E/2,T=E/Math.abs(E),k=s*T,O=k/2,A=k*Math.sqrt(3)/2*l,R=(0,N.CR)([S,S+C-O,S+C,S+C+O,M],5),L=R[0],D=R[1],z=R[2],W=R[3],G=R[4];return u?(this.point=[z,v-A],[["L",L,v],["L",D,v],["L",z,v-A],["L",W,v],["L",G,v]]):(this.point=[d+A,z],[["L",d,L],["L",d,D],["L",d+A,z],["L",d,W],["L",d,G]])},n.prototype.applyVisibility=function(){var r=this.attributes.visibility;r==="hidden"?Qs(this):Av(this)},n.prototype.bindEvents=function(){this.label.on(De.BOUNDS_CHANGED,this.renderBackground)},n.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},n}(Sr),f4=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,ui({},n.defaultOptions,r))||this;return s.hoverColor="#f5f5f5",s.selectedColor="#e6f7ff",s.background=s.appendChild(new Pr({})),s.label=s.background.appendChild(new kr({})),s}return Object.defineProperty(n.prototype,"padding",{get:function(){return ki(this.style.padding)},enumerable:!1,configurable:!0}),n.prototype.renderLabel=function(){var r=this.style,s=r.label,l=r.value,u=Te(this.attributes,"label");Kt(this.label).maybeAppend(".label",function(){return Cl(s)}).attr("className","label").styles(u),this.label.attr("__data__",l)},n.prototype.renderBackground=function(){var r=this.label.getBBox(),s=(0,N.CR)(this.padding,4),l=s[0],u=s[1],h=s[2],f=s[3],d=r.width,v=r.height,p=d+f+u,g=v+l+h,m=Te(this.attributes,"background"),b=this.style,E=b.width,w=E===void 0?0:E,S=b.height,M=S===void 0?0:S,C=b.selected;this.background.attr((0,N.pi)((0,N.pi)({},m),{width:Math.max(p,w),height:Math.max(g,M),fill:C?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(f,", ").concat((g-v)/2,")")})},n.prototype.render=function(){this.renderLabel(),this.renderBackground()},n.prototype.bindEvents=function(){var r=this;this.addEventListener("pointerenter",function(){r.style.selected||r.background.attr("fill",r.hoverColor)}),this.addEventListener("pointerleave",function(){r.style.selected||r.background.attr("fill",r.style.backgroundFill)});var s=this;this.addEventListener("click",function(){var l=r.style,u=l.label,h=l.value,f=l.onClick;f==null||f(h,{label:u,value:h},s)})},n.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},n}(Sr),d4=function(a){(0,N.ZT)(n,a);function n(r){var s,l,u=a.call(this,ui({},n.defaultOptions,r))||this;u.currentValue=(s=n.defaultOptions.style)===null||s===void 0?void 0:s.defaultValue,u.isPointerInSelect=!1,u.select=u.appendChild(new Pr({className:"select",style:{cursor:"pointer",width:0,height:0}})),u.dropdown=u.appendChild(new Pr({className:"dropdown"}));var h=u.style.defaultValue;return h&&(!((l=u.style.options)===null||l===void 0)&&l.some(function(f){return f.value===h}))&&(u.currentValue=h),u}return n.prototype.setValue=function(r){this.currentValue=r,this.render()},n.prototype.getValue=function(){return this.currentValue},Object.defineProperty(n.prototype,"dropdownPadding",{get:function(){return ki(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),n.prototype.renderSelect=function(){var r=this,s,l=this.style,u=l.x,h=l.y,f=l.width,d=l.height,v=l.bordered,p=l.showDropdownIcon,g=Te(this.attributes,"select"),m=Te(this.attributes,"placeholder");this.select.attr((0,N.pi)((0,N.pi)({x:u,y:h,width:f,height:d},g),{fill:"#fff",strokeWidth:v?1:0}));var b=this.dropdownPadding,E=10;p&&Kt(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(u+f-E-b[1]-b[3],", ").concat(h+d/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var w=(s=this.style.options)===null||s===void 0?void 0:s.find(function(T){return T.value===r.currentValue}),S=(0,N.pi)({x:u+b[3]},m);Kt(this.select).selectAll(".placeholder").data(w?[]:[1]).join(function(T){return T.append("text").attr("className","placeholder").styles(S).style("y",function(){var k=this.getBBox();return h+(d-k.height)/2})},function(T){return T.styles(S)},function(T){return T.remove()});var M=Te(this.attributes,"optionLabel"),C=(0,N.pi)({x:u+b[3]},M);Kt(this.select).selectAll(".value").data(w?[w]:[]).join(function(T){return T.append(function(k){return Cl(k.label)}).attr("className","value").styles(C).style("y",function(){var k=this.getBBox();return h+(d-k.height)/2})},function(T){return T.styles(C)},function(T){return T.remove()})},n.prototype.renderDropdown=function(){var r=this,s,l,u=this.style,h=u.x,f=u.y,d=u.width,v=u.height,p=u.options,g=u.onSelect,m=u.open,b=Te(this.attributes,"dropdown"),E=Te(this.attributes,"option"),w=this.dropdownPadding;Kt(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(p,function(C){return C.value}).join(function(C){return C.append(function(T){return new f4({className:"dropdown-item",style:(0,N.pi)((0,N.pi)((0,N.pi)({},T),E),{width:d-w[1]-w[3],selected:T.value===r.currentValue,onClick:function(k,O,A){r.setValue(k),g==null||g(k,O,A),r.dispatchEvent(new xr("change",{detail:{value:k,option:O,item:A}})),Qs(r.dropdown)}})})}).each(function(T,k){var O,A=(O=this.parentNode)===null||O===void 0?void 0:O.children,R=A.reduce(function(L,D,z){return z<k&&(L+=D.getBBox().height),L},0);this.attr("transform","translate(".concat(w[3],", ").concat(w[0]+R,")"))})},function(C){return C.update(function(T){return{selected:T.value===r.currentValue}})},function(C){return C.remove()});var S=(l=(s=this.dropdown.getElementsByClassName("dropdown-container"))===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.getBBox(),M=b.spacing;this.dropdown.attr((0,N.pi)({transform:"translate(".concat(h,", ").concat(f+v+M,")"),width:S.width+w[1]+w[3],height:S.height+w[0]+w[2]},b)),!m&&Qs(this.dropdown)},n.prototype.render=function(){this.renderSelect(),this.renderDropdown()},n.prototype.bindEvents=function(){var r=this;this.addEventListener("click",function(s){s.stopPropagation()}),this.select.addEventListener("click",function(){r.dropdown.style.visibility==="visible"?Qs(r.dropdown):Av(r.dropdown)}),this.addEventListener("pointerenter",function(){r.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){r.isPointerInSelect=!1}),document==null||document.addEventListener("click",function(){r.isPointerInSelect||Qs(r.dropdown)})},n.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"\u8BF7\u9009\u62E9",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},n}(Sr),eo=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,ui({},{style:{backgroundOpacity:n.backgroundOpacities.default}},n.defaultOptions,r))||this;return s.showBackground=!0,s.background=s.appendChild(new Pr({})),s.icon=s.appendChild(new kr({})),s}return Object.defineProperty(n.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return ki(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"iconSize",{get:function(){var r=this.attributes.size,s=(0,N.CR)(this.padding,4),l=s[0],u=s[1],h=s[2],f=s[3];return Math.max(r-Math.max(f+u,l+h),this.lineWidth*2+1)},enumerable:!1,configurable:!0}),n.prototype.renderBackground=function(){var r=this.attributes,s=r.x,l=r.y,u=r.size,h=u/2,f=Te(this.attributes,"background");this.background.attr((0,N.pi)({x:s-h,y:l-h,width:u,height:u},f))},n.prototype.showIndicator=function(){if(this.label){var r=this.attributes.size,s=this.background.getBBox(),l=s.x,u=s.y;this.indicator.update({x:l+r/2,y:u-5,labelText:this.label,visibility:"visible"})}},n.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},n.prototype.connectedCallback=function(){var r;a.prototype.connectedCallback.call(this);var s=this.attributes.size,l=this.background.getBBox(),u=l.x,h=l.y,f=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView;f&&(this.indicator=f.appendChild(new h4({style:{x:u+s/2,y:h-s/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},n.prototype.disconnectedCallback=function(){this.indicator.destroy()},n.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},n.prototype.bindEvents=function(){var r=this,s=this.attributes.onClick;if(this.addEventListener("click",function(){s==null||s(r)}),this.showBackground){var l=function(){return r.background.attr({opacity:n.backgroundOpacities.default})},u=function(){return r.background.attr({opacity:n.backgroundOpacities.hover})},h=function(){return r.background.attr({opacity:n.backgroundOpacities.active})};this.addEventListener("pointerenter",function(){u(),r.showIndicator()}),this.addEventListener("pointerleave",function(){l(),r.hideIndicator()}),this.addEventListener("pointerdown",function(){h()}),this.addEventListener("pointerup",function(){l()})}},n.tag="IconBase",n.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},n.backgroundOpacities={default:0,hover:.8,active:1},n}(Sr),zv=function(a,n){return n===void 0&&(n="#565758"),new na({style:{fill:n,d:"M ".concat(a,",").concat(a," L -").concat(a,",0 L ").concat(a,",-").concat(a," Z"),transformOrigin:"center"}})},v4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.arcPath=function(r,s,l){var u=(0,N.CR)([l,l],2),h=u[0],f=u[1],d=function(w){return[r+l*Math.cos(w),s+l*Math.sin(w)]},v=(0,N.CR)(d(-5/4*Math.PI),2),p=v[0],g=v[1],m=(0,N.CR)(d(1/4*Math.PI),2),b=m[0],E=m[1];return"M".concat(p,",").concat(g,",A").concat(h,",").concat(f,",0,1,1,").concat(b,",").concat(E)},Object.defineProperty(n.prototype,"label",{get:function(){return"\u91CD\u7F6E"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.color,h=this.iconSize,f=this.lineWidth,d=f+.5;Kt(this.icon).maybeAppend(".reset","path").styles({stroke:u,lineWidth:f,d:this.arcPath(s,l,h/2-f),markerStart:zv(d,u)})},n}(eo),p4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"label",{get:function(){return"\u5FEB\u9000"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.color,h=this.iconSize,f=h/2,d=h/2/Math.pow(3,.5),v=[[s,l],[s,l-d],[s-f,l],[s,l+d],[s,l],[s+f,l-d],[s+f,l+d],[s,l]];Kt(this.icon).maybeAppend(".backward","polygon").styles({points:v,fill:u})},n}(eo),g4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"label",{get:function(){return"\u5FEB\u8FDB"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.color,h=this.iconSize,f=h/2,d=h/2/Math.pow(3,.5),v=[[s,l],[s,l-d],[s+f,l],[s,l+d],[s,l],[s-f,l-d],[s-f,l+d],[s,l]];Kt(this.icon).maybeAppend(".forward","polygon").styles({points:v,fill:u})},n}(eo),y4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"label",{get:function(){return"\u64AD\u653E"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.color,h=this.iconSize,f=h/3*Math.pow(3,.5)*.8,d=[[s+f,l],[s-f/2,l-h/2*.8],[s-f/2,l+h/2*.8],[s+f,l]];Kt(this.icon).maybeAppend(".play","polygon").styles({points:d,fill:u})},n}(eo),m4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"label",{get:function(){return"\u6682\u505C"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.color,h=this.iconSize,f=h/3,d=[[s-f,l-h/2],[s-f,l+h/2],[s-f/2,l+h/2],[s-f/2,l-h/2],[s-f,l-h/2],[s+f/2,l-h/2],[s+f/2,l+h/2],[s+f,l+h/2],[s+f,l-h/2]];Kt(this.icon).maybeAppend(".pause","polygon").styles({points:d,fill:u})},n}(eo),b4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"label",{get:function(){return"\u8303\u56F4\u65F6\u95F4"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.color,h=this,f=h.iconSize,d=h.lineWidth,v=d;Kt(this.icon).maybeAppend(".left-line","line").styles({x1:s-f/2,y1:l-f/2,x2:s-f/2,y2:l+f/2,stroke:u,lineWidth:d}),Kt(this.icon).maybeAppend(".right-line","line").styles({x1:s+f/2,y1:l-f/2,x2:s+f/2,y2:l+f/2,stroke:u,lineWidth:d}),Kt(this.icon).maybeAppend(".left-arrow","line").styles({x1:s,y1:l,x2:s-f/2+v*2,y2:l,stroke:u,lineWidth:d,markerEnd:zv(d*2,u)}),Kt(this.icon).maybeAppend(".right-arrow","line").styles({x1:s,y1:l,x2:s+f/2-v*2,y2:l,stroke:u,lineWidth:d,markerEnd:zv(d*2,u)})},n}(eo),x4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"label",{get:function(){return"\u5355\u4E00\u65F6\u95F4"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.color,h=this,f=h.iconSize,d=h.lineWidth;Kt(this.icon).maybeAppend(".line","line").styles({x1:s,y1:l-f/2,x2:s,y2:l+f/2,stroke:u,lineWidth:d});var v=d;Kt(this.icon).maybeAppend(".left-arrow","line").styles({x1:s-f/2-v*2,y1:l,x2:s-v*2,y2:l,stroke:u,lineWidth:d,markerEnd:zv(d*2,u)}),Kt(this.icon).maybeAppend(".right-arrow","line").styles({x1:s+f/2+v*2,y1:l,x2:s+v*2,y2:l,stroke:u,lineWidth:d,markerEnd:zv(d*2,u)})},n}(eo),JT=function(a){return[[-a/2,-a/2],[-a/2,a/2],[a/2,a/2]]},E4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"label",{get:function(){return"\u6298\u7EBF\u56FE"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.color,h=this,f=h.iconSize,d=h.lineWidth,v=d,p=(f-v*2-d)/4,g=(f-v*2-d)/2,m=(0,N.CR)([s-f/2+v,l+f/2-v*2],2),b=m[0],E=m[1];Kt(this.icon).maybeAppend(".coordinate","polyline").styles({points:JT(f).map(function(w){var S=(0,N.CR)(w,2),M=S[0],C=S[1];return[M+s,C+l]}),stroke:u,lineWidth:d}),Kt(this.icon).maybeAppend(".line","polyline").styles({points:[[b,E],[b+p,E-g],[b+p*2,E],[b+p*4,E-g*2]],stroke:u,lineWidth:d})},n}(eo),w4=function(a){(0,N.ZT)(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"label",{get:function(){return"\u6761\u5F62\u56FE"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.data,s=this.attributes,l=s.x,u=s.y,h=s.color,f=this,d=f.iconSize,v=f.lineWidth,p=v,g=(d-p)/r.length,m=(d-p*2)/4,b=(0,N.CR)([l-d/2+p*2,u+d/2-p],2),E=b[0],w=b[1];Kt(this.icon).maybeAppend(".coordinate","polyline").styles({points:JT(d).map(function(S){var M=(0,N.CR)(S,2),C=M[0],T=M[1];return[C+l,T+u]}),stroke:h,lineWidth:v}),Kt(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(S,M){return{value:S,index:M}})).join(function(S){return S.append("line").attr("className","column").style("x1",function(M){var C=M.index;return E+g*C}).style("y1",w).style("x2",function(M){var C=M.index;return E+g*C}).style("y2",function(M){var C=M.value;return w-m*C}).styles({y1:w,stroke:h,lineWidth:v})})},n}(eo),S4=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,ui({},{style:{color:"#d8d9d9"}},r))||this;return s.showBackground=!1,s}return n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.color,h=this,f=h.iconSize,d=h.lineWidth;Kt(this.icon).maybeAppend(".split","line").styles({x1:s,y1:l-f/2,x2:s,y2:l+f/2,stroke:u,lineWidth:d})},n}(eo),ww=function(a){(0,N.ZT)(n,a);function n(){var r=a.apply(this,(0,N.ev)([],(0,N.CR)(arguments),!1))||this;return r.showBackground=!1,r}return Object.defineProperty(n.prototype,"padding",{get:function(){return ki(0)},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var r=this.iconSize,s=this.attributes,l=s.x,u=s.y,h=s.speed,f=h===void 0?1:h,d=L2(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),v=Le(r,20,1/0),p=20,g=(0,N.pi)((0,N.pi)({},d),{x:l-v/2,y:u-p/2,width:v,height:p,defaultValue:f,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:r/5,placeholderFontSize:r/2,optionPadding:0,optionLabelFontSize:r/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});Kt(this.icon).maybeAppend(".speed",function(){return new d4({style:g})}).attr("className","speed").each(function(){this.update(g)})},n.tag="SpeedSelect",n}(eo),Sw=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,r)||this;return s.icon=s.appendChild(new kr({})),s.currentType=s.attributes.type,s}return n.prototype.getType=function(){return this.currentType},n.prototype.render=function(){var r=this,s=this.attributes,l=s.onChange,u=(0,N._T)(s,["onChange"]);Kt(this.icon).selectAll(".icon").data([this.currentType]).join(function(h){return h.append(function(f){var d,v=(d=r.toggles.find(function(p){var g=(0,N.CR)(p,1),m=g[0];return m===f}))===null||d===void 0?void 0:d[1];if(!v)throw new Error("Invalid type: ".concat(f));return new v({})}).attr("className","icon").styles(u,!1).update({})},function(h){return h.styles({restStyles:u}).update({})},function(h){return h.remove()})},n.prototype.bindEvents=function(){var r=this,s=this.attributes.onChange;this.addEventListener("click",function(l){l.preventDefault(),l.stopPropagation();var u=(r.toggles.findIndex(function(f){var d=(0,N.CR)(f,1),v=d[0];return v===r.currentType})+1)%r.toggles.length,h=r.toggles[u][0];s==null||s(r.currentType),r.currentType=h,r.render()})},n.tag="ToggleIcon",n}(Sr),_w=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,ui({},{style:{type:"play"}},r))||this;return s.toggles=[["play",y4],["pause",m4]],s}return n}(Sw),Mw=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,ui({},{style:{type:"range"}},r))||this;return s.toggles=[["range",b4],["value",x4]],s}return n}(Sw),Cw=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,ui({},{style:{type:"column"}},r))||this;return s.toggles=[["line",E4],["column",w4]],s}return n}(Sw),_4={reset:v4,speed:ww,backward:p4,playPause:_w,forward:g4,selectionType:Mw,chartType:Cw,split:S4},M4=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,ui({},n.defaultOptions,r))||this;return s.background=s.appendChild(new Pr({})),s.functions=s.appendChild(new kr({})),s}return Object.defineProperty(n.prototype,"padding",{get:function(){return ki(this.attributes.padding)},enumerable:!1,configurable:!0}),n.prototype.renderBackground=function(){var r=this.style,s=r.x,l=r.y,u=r.width,h=r.height,f=Te(this.attributes,"background");this.background.attr((0,N.pi)({x:s,y:l,width:u,height:h},f))},n.prototype.renderFunctions=function(){var r=this,s,l=this.attributes,u=l.functions,h=l.iconSize,f=l.iconSpacing,d=l.x,v=l.y,p=l.width,g=l.height,m=l.align,b=(0,N.CR)(this.padding,4),E=b[1],w=b[3],S=u.reduce(function(T,k){return T.length&&k.length?T.concat.apply(T,(0,N.ev)(["split"],(0,N.CR)(k),!1)):T.concat.apply(T,(0,N.ev)([],(0,N.CR)(k),!1))},[]),M=S.length*(h+f)-f,C={left:w+h/2,center:(p-M)/2+h/2,right:p-M-w-E+h/2}[m]||0;(s=this.speedSelect)===null||s===void 0||s.destroy(),this.functions.removeChildren(),S.forEach(function(T,k){var O,A=_4[T],R={x:d+k*(h+f)+C,y:v+g/2,size:h};if(A===ww?(R.speed=r.attributes.speed,R.onSelect=function(D){return r.handleFunctionChange(T,{value:D})}):[_w,Mw,Cw].includes(A)?(R.onChange=function(D){return r.handleFunctionChange(T,{value:D})},A===_w&&(R.type=r.attributes.state==="play"?"pause":"play"),A===Mw&&(R.type=r.attributes.selectionType==="range"?"value":"range"),A===Cw&&(R.type=r.attributes.chartType==="line"?"column":"line")):R.onClick=function(){return r.handleFunctionChange(T,{value:T})},A===ww){var L=(O=r.ownerDocument)===null||O===void 0?void 0:O.defaultView;L&&(r.speedSelect=new A({style:(0,N.pi)((0,N.pi)({},R),{zIndex:100})}),L.appendChild(r.speedSelect))}else r.functions.appendChild(new A({style:R}))})},n.prototype.disconnectedCallback=function(){var r;a.prototype.disconnectedCallback.call(this),(r=this.speedSelect)===null||r===void 0||r.destroy()},n.prototype.render=function(){this.renderBackground(),this.renderFunctions()},n.prototype.handleFunctionChange=function(r,s){var l=this.attributes.onChange;l==null||l(r,s)},n.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},n}(Sr),C4=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,ui({},n.defaultOptions,r))||this;return s.bindEvents(),s}return n.prototype.bindEvents=function(){var r=this;this.addEventListener("mouseenter",function(){r.attr("lineWidth",Math.ceil(+(r.style.r||0)/2))}),this.addEventListener("mouseleave",function(){r.attr("lineWidth",0)})},n.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},n}(ur),T4=function(a){(0,N.ZT)(n,a);function n(r){return a.call(this,ui({},n.defaultOptions,r))||this}return n.prototype.renderBackground=function(){var r=this.attributes,s=r.x,l=r.y,u=r.width,h=r.height,f=Te(this.attributes,"background");Kt(this).maybeAppend("background","rect").attr("className","background").styles((0,N.pi)({x:s-u/2,y:l-h/2,width:u,height:h},f))},n.prototype.renderIcon=function(){var r=this.attributes,s=r.x,l=r.y,u=r.iconSize,h=Te(this.attributes,"icon"),f=1,d=u/2;Kt(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles((0,N.pi)({x1:s-f,y1:l-d,x2:s-f,y2:l+d},h)),Kt(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles((0,N.pi)({x1:s+f,y1:l-d,x2:s+f,y2:l+d},h))},n.prototype.renderBorder=function(){var r=this.attributes,s=r.x,l=r.y,u=r.width,h=r.height,f=r.type,d=Te(this.attributes,"border"),v=f==="start"?+u/2:-u/2;Kt(this).maybeAppend("border","line").attr("className","border").styles((0,N.pi)({x1:v+s,y1:l-h/2,x2:v+s,y2:l+h/2},d))},n.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},n.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},n}(Sr);function O4(a,n){return typeof a=="number"?tO(a):A4(a,n)}function A4(a,n){var r=new Date(a);switch(n){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(r.getHours())&&r.getMinutes()===0?oa(r,`HH:mm
YYYY-MM-DD`):oa(r,"HH:mm");case"half-day":return r.getHours()<12?`AM
`.concat(oa(r,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(r.getDate())?oa(r,`DD
YYYY-MM`):oa(r,"DD");case"week":return r.getDate()<=7?oa(r,`DD
YYYY-MM`):oa(r,"DD");case"month":return[0,6].includes(r.getMonth())?oa(r,`MM\u6708
YYYY`):oa(r,"MM\u6708");case"season":return[0].includes(r.getMonth())?oa(r,`MM\u6708
YYYY`):oa(r,"MM\u6708");case"year":return oa(r,"YYYY");default:return oa(r,"YYYY-MM-DD HH:mm")}}function tO(a){var n=String(Math.floor(a/3600)).padStart(2,"0"),r=String(Math.floor(a%3600/60)).padStart(2,"0"),s=String(Math.floor(a%60)).padStart(2,"0");return a<3600?"".concat(r,":").concat(s):"".concat(n,":").concat(r,":").concat(s)}var k4=function(a){(0,N.ZT)(n,a);function n(r){var s=a.call(this,ui({},n.defaultOptions,r))||this;s.axis=s.appendChild(new T5({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),s.timeline=s.appendChild(new c4({style:{onChange:function(g){s.handleSliderChange(g)}}})),s.controller=s.appendChild(new M4({})),s.states={},s.handleSliderChange=function(g){var m=function(){var b=s.states.values;return Array.isArray(b)?(0,N.ev)([],(0,N.CR)(b),!1):b}();s.setBySliderValues(g),s.dispatchOnChange(m)};var l=s.attributes,u=l.selectionType,h=l.chartType,f=l.speed,d=l.state,v=l.playMode,p=l.values;return s.states={chartType:h,playMode:v,selectionType:u,speed:f,state:d},s.setByTimebarValues(p),s}return Object.defineProperty(n.prototype,"data",{get:function(){var r=this.attributes.data,s=function(l,u){return l.time<u.time?-1:l.time>u.time?1:0};return r.sort(s)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"space",{get:function(){var r=this.attributes,s=r.x,l=r.y,u=r.width,h=r.height,f=r.type,d=r.controllerHeight,v=Le(+h-d,0,+h),p=new Hi(s,l+ +h-d,+u,d),g,m=0;f==="chart"?(m=35,g=new Hi(s,l+v-m,+u,m)):g=new Hi;var b=f==="time"?10:v,E=new Hi(s,l+(f==="time"?v:v-b),+u,b-m);return{axisBBox:g,controllerBBox:p,timelineBBox:E}},enumerable:!1,configurable:!0}),n.prototype.setBySliderValues=function(r){var s,l,u=this.data,h=(0,N.CR)(Array.isArray(r)?r:[0,r],2),f=h[0],d=h[1],v=u.length,p=u[Math.floor(f*v)],g=u[Math.ceil(d*v)-(Array.isArray(r)?0:1)];this.states.values=[(s=p==null?void 0:p.time)!==null&&s!==void 0?s:u[0].time,(l=g==null?void 0:g.time)!==null&&l!==void 0?l:1/0]},n.prototype.setByTimebarValues=function(r){var s,l,u,h=this.data,f=(0,N.CR)(Array.isArray(r)?r:[void 0,r],2),d=f[0],v=f[1],p=h.find(function(m){var b=m.time;return b===d}),g=h.find(function(m){var b=m.time;return b===v});this.states.values=[(s=p==null?void 0:p.time)!==null&&s!==void 0?s:(l=h[0])===null||l===void 0?void 0:l.time,(u=g==null?void 0:g.time)!==null&&u!==void 0?u:1/0]},n.prototype.setByIndex=function(r){var s,l,u,h,f=this.data,d=(0,N.CR)(r,2),v=d[0],p=d[1];this.states.values=[(l=(s=f[v])===null||s===void 0?void 0:s.time)!==null&&l!==void 0?l:f[0].time,(h=(u=this.data[p])===null||u===void 0?void 0:u.time)!==null&&h!==void 0?h:1/0]},Object.defineProperty(n.prototype,"sliderValues",{get:function(){var r=this.states,s=r.values,l=r.selectionType,u=(0,N.CR)(Array.isArray(s)?s:[void 0,s],2),h=u[0],f=u[1],d=this.data,v=d.length,p=l==="value",g=function(){var b=d.findIndex(function(E){var w=E.time;return w===h});return p?0:b>-1?b/v:0},m=function(){if(f===1/0)return 1;var b=d.findIndex(function(E){var w=E.time;return w===f});return b>-1?b/v:p?.5:1};return[g(),m()]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){var r=this.states,s=r.values,l=r.selectionType,u=(0,N.CR)(Array.isArray(s)?s:[this.data[0].time,s],2),h=u[0],f=u[1];return l==="value"?f:[h,f]},enumerable:!1,configurable:!0}),n.prototype.getDatumByRatio=function(r){var s=this.data,l=s.length,u=Math.floor(r*(l-1));return s[u]},Object.defineProperty(n.prototype,"chartHandleIconShape",{get:function(){var r=this.states.selectionType,s=this.space.timelineBBox.height;return r==="range"?function(l){return new T4({style:{type:l,height:s,iconSize:s/6}})}:function(){return new pl({style:{x1:0,y1:-s/2,x2:0,y2:s/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),n.prototype.getChartStyle=function(r){var s=this,l=r.x,u=r.y,h=r.width,f=r.height,d=this.states,v=d.selectionType,p=d.chartType,g=this.data,m=this.attributes,b=m.type,E=m.labelFormatter,w=Te(this.attributes,"chart"),S=w.type,M=(0,N._T)(w,["type"]),C=v==="range";if(b==="time")return(0,N.pi)({handleIconShape:function(){return new C4({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:C?-15:0,autoFitLabel:C,handleSpacing:C?-15:0,trackFill:"#edeeef",trackLength:h,trackOpacity:.5,trackRadius:f/2,trackSize:f/2,type:v,values:this.sliderValues,formatter:function(O){if(E)return E(O);var A=s.getDatumByRatio(O).time;return typeof A=="number"?tO(A):oa(A,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(l,", ").concat(u,")"),zIndex:1},M);var T=v==="range"?5:0,k=g.map(function(O){var A=O.value;return A});return(0,N.pi)({handleIconOffset:T,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:k,sparklineType:p,sparklineScale:.8,trackLength:h,trackSize:f,type:v,values:this.sliderValues,transform:"translate(".concat(l,", ").concat(u,")"),zIndex:1},M)},n.prototype.renderChart=function(r){r===void 0&&(r=this.space.timelineBBox),this.timeline.update(this.getChartStyle(r))},n.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},n.prototype.getAxisStyle=function(r){var s=this.data,l=this.attributes,u=l.interval,h=l.labelFormatter,f=Te(this.attributes,"axis"),d=r.x,v=r.y,p=r.width,g=(0,N.ev)((0,N.ev)([],(0,N.CR)(s),!1),[{time:0}],!1).map(function(b,E,w){var S=b.time;return{label:"".concat(S),value:E/(w.length-1),time:S}}),m=(0,N.pi)({startPos:[d,v],endPos:[d+p,v],data:g,labelFilter:function(b,E){return E<g.length-1},labelFormatter:function(b){var E=b.time;return h?h(E):O4(E,u)}},f);return m},n.prototype.renderAxis=function(r){r===void 0&&(r=this.space.axisBBox);var s=this.attributes.type;s==="chart"&&this.axis.update(this.getAxisStyle(r))},n.prototype.renderController=function(r){r===void 0&&(r=this.space.controllerBBox);var s=this.attributes.type,l=this.states,u=l.state,h=l.speed,f=l.selectionType,d=l.chartType,v=Te(this.attributes,"controller"),p=this,g=(0,N.pi)((0,N.pi)((0,N.pi)({},r),{iconSize:20,speed:h,state:u,selectionType:f,chartType:d,onChange:function(m,b){var E=b.value;switch(m){case"reset":p.internalReset();break;case"speed":p.handleSpeedChange(E);break;case"backward":p.internalBackward();break;case"playPause":E==="play"?p.internalPlay():p.internalPause();break;case"forward":p.internalForward();break;case"selectionType":p.handleSelectionTypeChange(E);break;case"chartType":p.handleChartTypeChange(E);break;default:break}}}),v);s==="time"&&(g.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(g)},n.prototype.dispatchOnChange=function(r){var s=this.data,l=this.attributes.onChange,u=this.states,h=u.values,f=u.selectionType,d=(0,N.CR)(h,2),v=d[0],p=d[1],g=p===1/0?s.at(-1).time:p,m=f==="range"?[v,g]:g,b=function(E,w){return Array.isArray(E)?Array.isArray(w)?E[0]===w[0]&&(E[1]===w[1]||E[1]===1/0||w[1]===1/0):!1:Array.isArray(w)?!1:E===w};(!r||!b(r,m))&&(l==null||l(f==="range"?[v,g]:g))},n.prototype.internalReset=function(r){var s,l,u=this.states.selectionType;this.internalPause(),this.setBySliderValues(u==="range"?[0,1]:[0,0]),this.renderController(),this.updateSelection(),r||((l=(s=this.attributes)===null||s===void 0?void 0:s.onReset)===null||l===void 0||l.call(s),this.dispatchOnChange())},n.prototype.reset=function(){this.internalReset()},n.prototype.moveSelection=function(r,s){var l=this.data,u=l.length,h=this.states,f=h.values,d=h.selectionType,v=h.playMode,p=(0,N.CR)(f,2),g=p[0],m=p[1],b=l.findIndex(function(T){var k=T.time;return k===g}),E=l.findIndex(function(T){var k=T.time;return k===m});E===-1&&(E=u);var w=r==="backward"?-1:1,S;d==="range"?v==="acc"?(S=[b,E+w],w===-1&&b===E&&(S=[b,u])):S=[b+w,E+w]:S=[b,E+w];var M=function(T){var k=(0,N.CR)(T.sort(function(L,D){return L-D}),2),O=k[0],A=k[1],R=function(L){return Le(L,0,u)};return A>u?d==="value"?[0,0]:v==="acc"?[R(O),R(O)]:[0,R(A-O)]:O<0?v==="acc"?[0,R(A)]:[R(O+u-A),u]:[R(O),R(A)]},C=M(S);return this.setByIndex(C),this.updateSelection(),C},n.prototype.internalBackward=function(r){var s,l,u=this.moveSelection("backward",r);return r||((l=(s=this.attributes)===null||s===void 0?void 0:s.onBackward)===null||l===void 0||l.call(s),this.dispatchOnChange()),u},n.prototype.backward=function(){this.internalBackward()},n.prototype.internalPlay=function(r){var s=this,l,u,h=this.data,f=this.attributes.loop,d=this.states.speed,v=d===void 0?1:d;this.playInterval=window.setInterval(function(){var p=s.internalForward();p[1]===h.length&&!f&&(s.internalPause(),s.renderController())},1e3/v),this.states.state="play",!r&&((u=(l=this.attributes)===null||l===void 0?void 0:l.onPlay)===null||u===void 0||u.call(l))},n.prototype.play=function(){this.internalPlay()},n.prototype.internalPause=function(r){var s,l;clearInterval(this.playInterval),this.states.state="pause",!r&&((l=(s=this.attributes)===null||s===void 0?void 0:s.onPause)===null||l===void 0||l.call(s))},n.prototype.pause=function(){this.internalPause()},n.prototype.internalForward=function(r){var s,l,u=this.moveSelection("forward",r);return r||((l=(s=this.attributes)===null||s===void 0?void 0:s.onForward)===null||l===void 0||l.call(s),this.dispatchOnChange()),u},n.prototype.forward=function(){this.internalForward()},n.prototype.handleSpeedChange=function(r){var s,l;this.states.speed=r;var u=this.states.state;u==="play"&&(this.internalPause(!0),this.internalPlay(!0)),(l=(s=this.attributes)===null||s===void 0?void 0:s.onSpeedChange)===null||l===void 0||l.call(s,r)},n.prototype.handleSelectionTypeChange=function(r){var s,l;this.states.selectionType=r,this.renderChart(),(l=(s=this.attributes)===null||s===void 0?void 0:s.onSelectionTypeChange)===null||l===void 0||l.call(s,r)},n.prototype.handleChartTypeChange=function(r){var s,l;this.states.chartType=r,this.renderChart(),(l=(s=this.attributes)===null||s===void 0?void 0:s.onChartTypeChange)===null||l===void 0||l.call(s,r)},n.prototype.render=function(){var r=this.space,s=r.axisBBox,l=r.controllerBBox,u=r.timelineBBox;this.renderController(l),this.renderAxis(s),this.renderChart(u),this.states.state==="play"&&this.internalPlay()},n.prototype.destroy=function(){a.prototype.destroy.call(this),this.internalPause(!0)},n.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},n}(Sr);function P4(a){return a instanceof Date}var R4=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})},N4=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};const L4=["timestamp","time","date","datetime"];class am extends Ai{get padding(){return $s(this.options.padding)}constructor(n,r){super(n,Object.assign({},am.defaultOptions,r)),this.backup(),this.upsertTimebar()}play(){var n;(n=this.timebar)===null||n===void 0||n.play()}pause(){var n;(n=this.timebar)===null||n===void 0||n.pause()}forward(){var n;(n=this.timebar)===null||n===void 0||n.forward()}backward(){var n;(n=this.timebar)===null||n===void 0||n.backward()}reset(){var n;(n=this.timebar)===null||n===void 0||n.reset()}update(n){super.update(n),this.backup(),this.upsertTimebar()}backup(){this.originalData=eO(this.context.graph.getData())}upsertTimebar(){const{canvas:n}=this.context,r=this.options,{onChange:s,timebarType:l,data:u,x:h,y:f,width:d,height:v,mode:p}=r,g=N4(r,["onChange","timebarType","data","x","y","width","height","mode"]),m=n.getSize(),[b]=this.padding;this.upsertCanvas().ready.then(()=>{var E;const w=Object.assign(Object.assign({x:m[0]/2-d/2,y:b,onChange:S=>{const M=((0,za.Z)(S)?S:[S,S]).map(C=>P4(C)?C.getTime():C);this.options.mode==="modify"?this.filterElements(M):this.hiddenElements(M),s==null||s(M)}},g),{data:u.map(S=>(0,tn.Z)(S)?{time:S,value:0}:S),width:d,height:v,type:l});this.timebar?this.timebar.update(w):(this.timebar=new k4({style:w}),(E=this.canvas)===null||E===void 0||E.appendChild(this.timebar))})}upsertCanvas(){if(this.canvas)return this.canvas;const{className:n,height:r,position:s}=this.options,l=this.context.canvas,[u]=l.getSize(),[h,,f]=this.padding,[d,v]=q2({width:u,height:r+h+f,graphCanvas:l,className:"timebar",placement:s});return this.container=d,n&&d.classList.add(n),this.canvas=v,this.canvas}filterElements(n){return R4(this,void 0,void 0,function*(){var r;if(!this.originalData)return;const{elementTypes:s,getTime:l}=this.options,{graph:u,element:h}=this.context,f=eO(this.originalData);s.forEach(v=>{const p=`${v}s`;f[p]=(this.originalData[p]||[]).filter(g=>{const m=l(g);return!!nO(m,n)})});const d=[...f.nodes,...f.combos].map(v=>tt(v));f.edges=f.edges.filter(v=>{const p=v.source,g=v.target;return d.includes(p)&&d.includes(g)}),u.setData(f),yield(r=h.draw({animation:!1,silence:!0}))===null||r===void 0?void 0:r.finished})}hiddenElements(n){const{graph:r}=this.context,{elementTypes:s,getTime:l}=this.options,u=[],h=[];s.forEach(f=>{var d;const v=`${f}s`;(((d=this.originalData)===null||d===void 0?void 0:d[v])||[]).forEach(g=>{const m=tt(g),b=l(g);nO(b,n)?h.push(m):u.push(m)})}),r.hideElement(u,!1),r.showElement(h,!1)}destroy(){var n,r,s;const{graph:l}=this.context;this.originalData&&l.setData(Object.assign({},this.originalData)),(n=this.timebar)===null||n===void 0||n.destroy(),(r=this.canvas)===null||r===void 0||r.destroy(),(s=this.container)===null||s===void 0||s.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}}am.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:a=>I4(a,L4,void 0),loop:!1};const eO=a=>{const{nodes:n=[],edges:r=[],combos:s=[]}=a;return{nodes:[...n],edges:[...r],combos:[...s]}},nO=(a,n)=>{if((0,tn.Z)(n))return a===n;const[r,s]=n;return a>=r&&a<=s},I4=(a,n,r)=>{var s;for(let l=0;l<n.length;l++){const u=n[l],h=(s=a.data)===null||s===void 0?void 0:s[u];if(h)return h}return r};function D4(a){const n={top:"unset",right:"unset",bottom:"unset",left:"unset"};return a.split("-").forEach(s=>{n[s]="8px"}),n.flexDirection=a.startsWith("top")||a.startsWith("bottom")?"row":"column",n}const B4=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,F4=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;var rO=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class sm extends Ai{constructor(n,r){super(n,Object.assign({},sm.defaultOptions,r)),this.$element=gf("toolbar",!1),this.onToolbarItemClick=l=>{const{onClick:u}=this.options;if(l.target instanceof Element&&l.target.className.includes("g6-toolbar-item")){const h=l.target.getAttribute("value");u==null||u(h,l.target)}};const s=this.context.canvas.getContainer();this.$element.style.display="flex",s.appendChild(this.$element),I2("g6-toolbar-css","style",{},B4,document.head),I2("g6-toolbar-svgicon","div",{display:"none"},F4),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(r)}update(n){const r=Object.create(null,{update:{get:()=>super.update}});return rO(this,void 0,void 0,function*(){r.update.call(this,n);const{className:s,position:l,style:u}=this.options;this.$element.className=`g6-toolbar ${s||""}`,Object.assign(this.$element.style,u,D4(l)),this.$element.innerHTML=yield this.getDOMContent()})}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return rO(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(r=>{var s;return`
          <div class="g6-toolbar-item" value="${r.value}" title="${(s=r.title)!==null&&s!==void 0?s:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${r.id}"></use>
            </svg>
          </div>`}).join("")})}}sm.defaultOptions={position:"top-left"};function Tw(a){var n=document.createElement("div");n.innerHTML=a;var r=n.childNodes[0];return r&&n.contains(r)&&n.removeChild(r),r}function z4(a,n){return!a||!n?a:a.replace(/\\?\{([^{}]+)\}/g,function(r,s){return r.charAt(0)==="\\"?r.slice(1):n[s]===void 0?"":n[s]})}var Z4=z4,iO=function(a,n){if(n==null){a.innerHTML="";return}a.replaceChildren?Array.isArray(n)?a.replaceChildren.apply(a,(0,N.ev)([],(0,N.CR)(n),!1)):a.replaceChildren(n):(a.innerHTML="",Array.isArray(n)?n.forEach(function(r){return a.appendChild(r)}):a.appendChild(n))};function Ow(a){return a===void 0&&(a=""),{CONTAINER:"".concat(a,"tooltip"),TITLE:"".concat(a,"tooltip-title"),LIST:"".concat(a,"tooltip-list"),LIST_ITEM:"".concat(a,"tooltip-list-item"),NAME:"".concat(a,"tooltip-list-item-name"),MARKER:"".concat(a,"tooltip-list-item-marker"),NAME_LABEL:"".concat(a,"tooltip-list-item-name-label"),VALUE:"".concat(a,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(a,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(a,"tooltip-crosshair-y")}}var aO={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function W4(a){var n;a===void 0&&(a="");var r=Ow(a);return n={},n[".".concat(r.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},n[".".concat(r.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},n[".".concat(r.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},n[".".concat(r.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},n[".".concat(r.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},n[".".concat(r.NAME)]={display:"flex","align-items":"center","max-width":"216px"},n[".".concat(r.NAME_LABEL)]=(0,N.pi)({flex:1},aO),n[".".concat(r.VALUE)]=(0,N.pi)({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},aO),n[".".concat(r.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},n[".".concat(r.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},n}var G4=function(a){(0,N.ZT)(n,a);function n(r){var s=this,l,u,h=(u=(l=r.style)===null||l===void 0?void 0:l.template)===null||u===void 0?void 0:u.prefixCls,f=Ow(h);return s=a.call(this,r,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(f.CONTAINER,'"></div>'),title:'<div class="'.concat(f.TITLE,'"></div>'),item:'<li class="'.concat(f.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(f.NAME,`">
          <span class="`).concat(f.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(f.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(f.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:W4(h)})||this,s.timestamp=-1,s.prevCustomContentKey=s.attributes.contentKey,s.initShape(),s.render(s.attributes,s),s}return Object.defineProperty(n.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),n.prototype.getContainer=function(){return this.element},Object.defineProperty(n.prototype,"elementSize",{get:function(){var r=this.element.offsetWidth,s=this.element.offsetHeight;return{width:r,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"HTMLTooltipItemsElements",{get:function(){var r=this.attributes,s=r.data,l=r.template;return s.map(function(u,h){var f=u.name,d=f===void 0?"":f,v=u.color,p=v===void 0?"black":v,g=u.index,m=(0,N._T)(u,["name","color","index"]),b=(0,N.pi)({name:d,color:p,index:g!=null?g:h},m);return Tw(Z4(l.item,b))})},enumerable:!1,configurable:!0}),n.prototype.render=function(r,s){this.renderHTMLTooltipElement(),this.updatePosition()},n.prototype.destroy=function(){var r;(r=this.element)===null||r===void 0||r.remove(),a.prototype.destroy.call(this)},n.prototype.show=function(r,s){var l=this;if(r!==void 0&&s!==void 0){var u=this.element.style.visibility==="hidden",h=function(){l.attributes.x=r!=null?r:l.attributes.x,l.attributes.y=s!=null?s:l.attributes.y,l.updatePosition()};u?this.closeTransition(h):h()}this.element.style.visibility="visible"},n.prototype.hide=function(r,s){r===void 0&&(r=0),s===void 0&&(s=0);var l=this.attributes.enterable;l&&this.isCursorEntered(r,s)||(this.element.style.visibility="hidden")},n.prototype.initShape=function(){var r=this.attributes.template;this.element=Tw(r.container),this.id&&this.element.setAttribute("id",this.id)},n.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var r=this.attributes.content;r&&(typeof r=="string"?this.element.innerHTML=r:iO(this.element,r))}},n.prototype.renderHTMLTooltipElement=function(){var r,s,l=this.attributes,u=l.template,h=l.title,f=l.enterable,d=l.style,v=l.content,p=Ow(u.prefixCls),g=this.element;if(this.element.style.pointerEvents=f?"auto":"none",v)this.renderCustomContent();else{h?(g.innerHTML=u.title,g.getElementsByClassName(p.TITLE)[0].innerHTML=h):(s=(r=g.getElementsByClassName(p.TITLE))===null||r===void 0?void 0:r[0])===null||s===void 0||s.remove();var m=this.HTMLTooltipItemsElements,b=document.createElement("ul");b.className=p.LIST,iO(b,m);var E=this.element.querySelector(".".concat(p.LIST));E?E.replaceWith(b):g.appendChild(b)}xD(g,d)},n.prototype.getRelativeOffsetFromCursor=function(r){var s=this.attributes,l=s.position,u=s.offset,h=r||l,f=h.split("-"),d={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},v=this.elementSize,p=v.width,g=v.height,m=[-p/2,-g/2];return f.forEach(function(b){var E=(0,N.CR)(m,2),w=E[0],S=E[1],M=(0,N.CR)(d[b],2),C=M[0],T=M[1];m=[w+(p/2+u[0])*C,S+(g/2+u[1])*T]}),m},n.prototype.setOffsetPosition=function(r){var s=(0,N.CR)(r,2),l=s[0],u=s[1],h=this.attributes,f=h.x,d=f===void 0?0:f,v=h.y,p=v===void 0?0:v,g=h.container,m=g.x,b=g.y;this.element.style.left="".concat(+d+m+l,"px"),this.element.style.top="".concat(+p+b+u,"px")},n.prototype.updatePosition=function(){var r=this.attributes.showDelay,s=r===void 0?60:r,l=Date.now();this.timestamp>0&&l-this.timestamp<s||(this.timestamp=l,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},n.prototype.autoPosition=function(r){var s=(0,N.CR)(r,2),l=s[0],u=s[1],h=this.attributes,f=h.x,d=h.y,v=h.bounding,p=h.position;if(!v)return[l,u];var g=this.element,m=g.offsetWidth,b=g.offsetHeight,E=(0,N.CR)([+f+l,+d+u],2),w=E[0],S=E[1],M={left:"right",right:"left",top:"bottom",bottom:"top"},C=v.x,T=v.y,k=v.width,O=v.height,A={left:w<C,right:w+m>C+k,top:S<T,bottom:S+b>T+O},R=[];p.split("-").forEach(function(D){A[D]?R.push(M[D]):R.push(D)});var L=R.join("-");return this.getRelativeOffsetFromCursor(L)},n.prototype.isCursorEntered=function(r,s){if(this.element){var l=this.element.getBoundingClientRect(),u=l.x,h=l.y,f=l.width,d=l.height;return new Hi(u,h,f,d).isPointIn(r,s)}return!1},n.prototype.closeTransition=function(r){var s=this,l=this.element.style.transition;this.element.style.transition="none",r(),setTimeout(function(){s.element.style.transition=l},10)},n.tag="tooltip",n}(Sr),sO=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class om extends Ai{constructor(n,r){super(n,Object.assign({},om.defaultOptions,r)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(s,l)=>{const{enable:u}=this.options;return typeof u=="function"?u(s,l):u},this.onClick=s=>{const{target:{id:l}}=s;this.currentTarget===l?this.hide(s):this.show(s)},this.onPointerMove=s=>{const{target:l}=s;!this.currentTarget||l.id===this.currentTarget||this.show(s)},this.onPointerLeave=s=>{this.hide(s)},this.onCanvasMove=s=>{this.hide(s)},this.onPointerOver=s=>{this.show(s)},this.showById=s=>sO(this,void 0,void 0,function*(){const l={target:{id:s}};yield this.show(l)}),this.getElementData=(s,l)=>{const{model:u}=this.context;switch(l){case"node":return u.getNodeData([s]);case"edge":return u.getEdgeData([s]);case"combo":return u.getComboData([s]);default:return[]}},this.show=s=>sO(this,void 0,void 0,function*(){var l,u;const{client:h,target:{id:f}}=s;if(Sv(s.target))return;const d=this.context.graph.getElementType(f),{getContent:v,title:p}=this.options,g=this.getElementData(f,d);if(!this.tooltipElement||!this.isEnable(s,g))return;let m={};if(v){if(m.content=yield v(s,g),!m.content)return}else{const w=this.context.graph.getElementRenderStyle(f),S=d==="node"?w.fill:w.stroke;m={title:p||d,data:g.map(M=>({name:"ID",value:M.id||`${M.source} -> ${M.target}`,color:S}))}}this.currentTarget=f;let b,E;if(h)b=h.x,E=h.y;else{const w=Ca(g,"0.style",{x:0,y:0});b=w.x,E=w.y}(u=(l=this.options).onOpenChange)===null||u===void 0||u.call(l,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:b,y:E,style:{".tooltip":{visibility:"visible"}}}),m))}),this.hide=s=>{var l,u,h,f,d;if(!s){(u=(l=this.options).onOpenChange)===null||u===void 0||u.call(l,!1),(h=this.tooltipElement)===null||h===void 0||h.hide(),this.currentTarget=null;return}if(!this.tooltipElement||!this.currentTarget)return;const{client:{x:v,y:p}}=s;(d=(f=this.options).onOpenChange)===null||d===void 0||d.call(f,!1),this.tooltipElement.hide(v,p),this.currentTarget=null},this.initTooltip=()=>{var s;const l=new G4({className:"tooltip",style:this.tooltipStyleProps});return(s=this.container)===null||s===void 0||s.appendChild(l.HTMLTooltipElement),l},this.render(),this.bindEvents()}getEvents(){return this.options.trigger==="click"?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerover":this.onPointerOver,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerover":this.onPointerOver,"edge:pointermove":this.onPointerMove,"combo:pointerover":this.onPointerOver,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(n){var r;this.unbindEvents(),super.update(n),this.tooltipElement&&((r=this.container)===null||r===void 0||r.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){const{canvas:n}=this.context,r=n.getContainer();r&&(this.container=r,this.tooltipElement=this.initTooltip())}unbindEvents(){const{graph:n}=this.context,r=this.getEvents();Object.keys(r).forEach(s=>{n.off(s,r[s])})}bindEvents(){const{graph:n}=this.context,r=this.getEvents();Object.keys(r).forEach(s=>{n.on(s,r[s])})}get tooltipStyleProps(){const{canvas:n}=this.context,{center:r}=n.getBounds(),s=n.getContainer(),{top:l,left:u}=s.getBoundingClientRect(),{style:h,position:f,enterable:d,container:v={x:-u,y:-l},title:p,offset:g}=this.options,[m,b]=r,[E,w]=n.getSize();return{x:m,y:b,container:v,title:p,bounding:{x:0,y:0,width:E,height:w},position:f,enterable:d,offset:g,style:h}}destroy(){var n;this.unbindEvents(),this.tooltipElement&&((n=this.container)===null||n===void 0||n.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}}om.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var oO=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};let Ef;function lO(a,n){return Ef||(Ef=document.createElement("canvas")),Ef.width=a,Ef.height=n,Ef.getContext("2d").clearRect(0,0,a,n),Ef}function j4(a,n,r,s){return oO(this,void 0,void 0,function*(){const l=lO(a,n),u=l.getContext("2d"),{rotate:h,opacity:f,textFill:d,textFontSize:v,textFontFamily:p,textFontVariant:g,textFontWeight:m,textAlign:b,textBaseline:E}=s;return u.textAlign=b,u.textBaseline=E,u.translate(a/2,n/2),u.font=`${v}px ${p} ${g} ${m}`,h&&u.rotate(h),f&&(u.globalAlpha=f),d&&(u.fillStyle=d,u.fillText(`${r}`,0,0)),l.toDataURL()})}function $4(a,n,r,s){return oO(this,void 0,void 0,function*(){const l=lO(a,n),u=l.getContext("2d"),{rotate:h,opacity:f}=s;h&&u.rotate(h),f&&(u.globalAlpha=f);const d=new Image;return d.crossOrigin="anonymous",d.src=r,new Promise(v=>{d.onload=function(){const p=a>d.width?(a-d.width)/2:0,g=n>d.height?(n-d.height)/2:0;u.drawImage(d,0,0,d.width,d.height,p,g,a-p*2,n-g*2),v(l.toDataURL())}})})}var H4=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})},V4=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class lm extends Ai{constructor(n,r){super(n,Object.assign({},lm.defaultOptions,r)),this.$element=gf("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(r)}update(n){const r=Object.create(null,{update:{get:()=>super.update}});return H4(this,void 0,void 0,function*(){r.update.call(this,n);const s=this.options,{width:l,height:u,text:h,imageURL:f}=s,d=V4(s,["width","height","text","imageURL"]);Object.keys(d).forEach(p=>{p.startsWith("background")&&(this.$element.style[p]=n[p])});const v=f?yield $4(l,u,f,d):yield j4(l,u,h,d);this.$element.style.backgroundImage=`url(${v})`})}destroy(){super.destroy(),this.$element.remove()}}lm.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};const U4=["#7E92B5","#F4664A","#FFBE3A"],Y4={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},X4={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function cO(a){const{bgColor:n,textColor:r,nodeColor:s,nodeColorDisabled:l,nodeStroke:u,nodeHaloStrokeOpacityActive:h=.15,nodeHaloStrokeOpacitySelected:f=.25,nodeOpacityDisabled:d=.06,nodeIconOpacityInactive:v=.85,nodeOpacityInactive:p=.25,nodeBadgePalette:g=U4,nodePaletteOptions:m=Y4,edgeColor:b,edgeColorDisabled:E,edgePaletteOptions:w=X4,comboColor:S,comboColorDisabled:M,comboStroke:C,comboStrokeDisabled:T,edgeColorInactive:k}=a;return{background:n,node:{palette:m,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:g,fill:s,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:n,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:r,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:s,portLineWidth:1,portStroke:u,portStrokeOpacity:.65,size:32,stroke:u,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:f,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:u},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:h},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:u,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:p,donutOpacity:p,fillOpacity:p,iconOpacity:v,labelFill:r,labelFillOpacity:p,strokeOpacity:p},disabled:{badgeBackgroundOpacity:.25,donutOpacity:d,fill:l,fillOpacity:d,iconFill:l,iconOpacity:.25,labelFill:r,labelFillOpacity:.25,strokeOpacity:d}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:w,style:{badgeBackgroundFill:b,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:n,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:r,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:b,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:k,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:E,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:n,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:S,halo:!1,haloLineWidth:12,haloStroke:C,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:n,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:r,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:C},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:M,fillOpacity:.25,labelOpacity:.25,stroke:T,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}const K4=cO({bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:{type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"}),q4=cO({bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"});class es extends QE{beforeDraw(n,r){return n}afterLayout(n,r){}}class Q4 extends es{beforeDraw(n){const{model:r}=this.context,s=n.add.combos,l=u=>{const h=[];return u.forEach((f,d)=>{const p=r.getAncestorsData(d,"combo").map(g=>tt(g)).reverse();h.push([d,f,p.length])}),new Map(h.sort(([,,f],[,,d])=>d-f).map(([f,d])=>[f,d]))};return n.add.combos=l(s),n.update.combos=l(n.update.combos),n}}function ns(a,n,r,s,l){const u=tt(s),h=`${r}s`,f=l?s:a.add[h].get(u)||a.update[h].get(u)||a.remove[h].get(u)||s;Object.entries(a).forEach(([d,v])=>{n===d?v[h].set(u,f):v[h].delete(u)})}function cm(a,n){return Object.keys(a).every(r=>a[r]===n[r])}class J4 extends es{beforeDraw(n,r){if(r.stage==="visibility"||!this.context.model.model.hasTreeStructure(zn))return n;const{model:s}=this.context,{add:l,update:u}=n,h=[...n.update.combos.entries(),...n.add.combos.entries()];for(;h.length;){const[f,d]=h.pop();if(Ma(d)){const v=s.getDescendantsData(f),p=v.map(tt),{internal:g,external:m}=w2(p,b=>s.getRelatedEdgesData(b));v.forEach(b=>{const E=tt(b),w=h.findIndex(([M])=>M===E);w!==-1&&h.splice(w,1);const S=s.getElementType(E);ns(n,"remove",S,b)}),g.forEach(b=>ns(n,"remove","edge",b)),m.forEach(b=>{var E;const w=tt(b);((E=this.context.element)===null||E===void 0?void 0:E.getElement(w))?u.edges.set(w,b):l.edges.set(w,b)})}else{const v=s.getChildrenData(f),p=v.map(tt),{edges:g}=w2(p,m=>s.getRelatedEdgesData(m));[...v,...g].forEach(m=>{var b;const E=tt(m),w=s.getElementType(E);((b=this.context.element)===null||b===void 0?void 0:b.getElement(E))?ns(n,"update",w,m):ns(n,"add",w,m),w==="combo"&&h.push([E,m])})}}return n}}const uO=(a,n,r,s)=>{const l=`${r}s`,u=tt(s);!a.add[l].has(u)&&!a.update[l].has(u)&&a[n][l].set(tt(s),s)};class tB extends es{getElement(n){return this.context.element.getElement(n)}handleExpand(n,r){if(uO(r,"add","node",n),Ma(n))return;const s=tt(n);uO(r,"add","node",n),this.context.model.getRelatedEdgesData(s).forEach(h=>{ns(r,"add","edge",h)}),this.context.model.getChildrenData(s).forEach(h=>{this.handleExpand(h,r)})}beforeDraw(n){const{graph:r,model:s}=this.context;if(!s.model.hasTreeStructure(Ya))return n;const{add:{nodes:l,edges:u},update:{nodes:h}}=n,f=new Map,d=new Map;l.forEach((p,g)=>{Ma(p)&&f.set(g,p)}),u.forEach(p=>{if(r.getElementType(p.source)!=="node")return;const g=r.getNodeData(p.source);Ma(g)&&f.set(p.source,g)}),h.forEach((p,g)=>{const m=this.getElement(g);if(!m)return;const b=m.attributes.collapsed;Ma(p)?b||f.set(g,p):b&&d.set(g,p)});const v=new Set;return f.forEach((p,g)=>{s.getDescendantsData(g).forEach(b=>{const E=tt(b);if(v.has(E))return;ns(n,"remove","node",b),s.getRelatedEdgesData(E).forEach(S=>{ns(n,"remove","edge",S)}),v.add(E)})}),d.forEach((p,g)=>{if(s.getAncestorsData(g,Ya).some(Ma)){ns(n,"remove","node",p);return}this.handleExpand(p,n)}),n}}const Aw=new WeakMap;function I7(a,n,r){Aw.has(a)||Aw.set(a,{});const s=Aw.get(a);if(!s[n])return s[n]=r,!0;const l=s[n];return hO(l,r)?!1:(s[n]=r,!0)}const hO=(a,n,r=2)=>{if(typeof a!="object"||typeof n!="object")return a===n;const s=Object.keys(a),l=Object.keys(n);if(s.length!==l.length)return!1;for(const u of s){const h=a[u],f=n[u];if(r>1&&typeof h=="object"&&typeof f=="object"){if(!hO(h,f,r-1))return!1}else if(h!==f)return!1}return!0};function fO(a,n,r){DE[a][n]&&_a.warn(`The extension ${n} of ${a} has been registered before, and will be overridden.`),Object.assign(DE[a],{[n]:r})}var dO=function(){function a(n){(0,H.Z)(this,a),this.dragndropPluginOptions=n}return(0,j.Z)(a,[{key:"apply",value:function(r){var s=this,l=r.renderingService,u=r.renderingContext,h=u.root.ownerDocument,f=h.defaultView,d=function(p){var g=p.target,m=g===h,b=m&&s.dragndropPluginOptions.isDocumentDraggable?h:g.closest&&g.closest("[draggable=true]");if(b){var E=!1,w=p.timeStamp,S=[p.clientX,p.clientY],M=null,C=[p.clientX,p.clientY],T=function(){var O=(0,Or.Z)((0,si.Z)().mark(function A(R){var L,D,z,W,G,Y;return(0,si.Z)().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(E){rt.next=8;break}if(L=R.timeStamp-w,D=Bi([R.clientX,R.clientY],S),!(L<=s.dragndropPluginOptions.dragstartTimeThreshold||D<=s.dragndropPluginOptions.dragstartDistanceThreshold)){rt.next=5;break}return rt.abrupt("return");case 5:R.type="dragstart",b.dispatchEvent(R),E=!0;case 8:if(R.type="drag",R.dx=R.clientX-C[0],R.dy=R.clientY-C[1],b.dispatchEvent(R),C=[R.clientX,R.clientY],m){rt.next=21;break}return z=s.dragndropPluginOptions.overlap==="pointer"?[R.canvasX,R.canvasY]:g.getBounds().center,rt.next=17,h.elementsFromPoint(z[0],z[1]);case 17:W=rt.sent,G=W[W.indexOf(g)+1],Y=(G==null?void 0:G.closest("[droppable=true]"))||(s.dragndropPluginOptions.isDocumentDroppable?h:null),M!==Y&&(M&&(R.type="dragleave",R.target=M,M.dispatchEvent(R)),Y&&(R.type="dragenter",R.target=Y,Y.dispatchEvent(R)),M=Y,M&&(R.type="dragover",R.target=M,M.dispatchEvent(R)));case 21:case"end":return rt.stop()}},A)}));return function(R){return O.apply(this,arguments)}}();f.addEventListener("pointermove",T);var k=function(A){if(E){A.detail={preventClick:!0};var R=A.clone();M&&(R.type="drop",R.target=M,M.dispatchEvent(R)),R.type="dragend",b.dispatchEvent(R),E=!1}f.removeEventListener("pointermove",T)};g.addEventListener("pointerup",k,{once:!0}),g.addEventListener("pointerupoutside",k,{once:!0})}};l.hooks.init.tap(a.tag,function(){f.addEventListener("pointerdown",d)}),l.hooks.destroy.tap(a.tag,function(){f.removeEventListener("pointerdown",d)})}}])}();dO.tag="Dragndrop";var eB=function(a){function n(){var r,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,H.Z)(this,n),r=(0,$.Z)(this,n),r.name="dragndrop",r.options=s,r}return(0,X.Z)(n,a),(0,j.Z)(n,[{key:"init",value:function(){this.addRenderingPlugin(new dO((0,gt.Z)({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(s){Object.assign(this.plugins[0].dragndropPluginOptions,s)}}])}(ps),vO=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})},pO=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};const gO=["main"],yO=["background","main","label","transient"];function nB(a){return a.main}class mO{getConfig(){return this.config}getLayer(n="main"){return this.extends.layers[n]||nB(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(n){return this.extends.renderers[n]}getCamera(n="main"){return this.getLayer(n).getCamera()}getRoot(n="main"){return this.getLayer(n).getRoot()}getContextService(n="main"){return this.getLayer(n).getContextService()}setCursor(n){this.config.cursor=n,this.getLayer().setCursor(n)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(n){this.config={enableMultiLayer:!0},Object.assign(this.config,n);const r=this.config,{renderer:s,background:l,cursor:u,enableMultiLayer:h}=r,f=pO(r,["renderer","background","cursor","enableMultiLayer"]),d=h?yO:gO,v=bO(s,d),p=Object.fromEntries(d.map(g=>{const m=new tv(Object.assign(Object.assign({},f),{supportsMutipleCanvasesInOneContainer:h,renderer:v[g],background:h?g==="background"?l:void 0:l}));return[g,m]}));xO(p),this.extends={config:this.config,renderer:s,renderers:v,layers:p}}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,n])=>n.ready))}resize(n,r){Object.assign(this.extends.config,{width:n,height:r}),Object.values(this.getLayers()).forEach(s=>{const l=s.getCamera(),u=l.getPosition(),h=l.getFocalPoint();s.resize(n,r),l.setPosition(u),l.setFocalPoint(h)})}getBounds(n){return av(Object.values(this.getLayers()).map(r=>n?r.getRoot().childNodes.find(l=>l.classList.includes(n)):r.getRoot()).filter(r=>(r==null?void 0:r.childNodes.length)>0).map(r=>r.getBounds()))}getContainer(){const n=this.extends.config.container;return typeof n=="string"?document.getElementById(n):n}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(n,r){var s;const l=((s=n.style)===null||s===void 0?void 0:s.$layer)||"main";return this.getLayer(l).appendChild(n,r)}setRenderer(n){if(n===this.extends.renderer)return;const r=bO(n,this.config.enableMultiLayer?yO:gO);this.extends.renderers=r,Object.entries(r).forEach(([s,l])=>this.getLayer(s).setRenderer(l)),xO(this.getLayers())}getCanvasByViewport(n){return Oi(this.getLayer().viewport2Canvas(Xs(n)))}getViewportByCanvas(n){return Oi(this.getLayer().canvas2Viewport(Xs(n)))}getViewportByClient(n){return Oi(this.getLayer().client2Viewport(Xs(n)))}getClientByViewport(n){return Oi(this.getLayer().viewport2Client(Xs(n)))}getClientByCanvas(n){return this.getClientByViewport(this.getViewportByCanvas(n))}getCanvasByClient(n){const r=this.getLayer(),s=r.client2Viewport(Xs(n));return Oi(r.viewport2Canvas(s))}toDataURL(){return vO(this,arguments,void 0,function*(n={}){const r=globalThis.devicePixelRatio||1,{mode:s="viewport"}=n,l=pO(n,["mode"]);let[u,h,f,d]=[0,0,0,0];if(s==="viewport")[f,d]=this.getSize();else if(s==="overall"){const M=this.getBounds(),C=oc(M);[u,h]=M.min,[f,d]=C}const v=Tw('<div id="virtual-image"></div>'),p=new tv({width:f,height:d,renderer:new gv,devicePixelRatio:r,container:v,background:this.extends.config.background});yield p.ready,p.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),p.appendChild(this.getRoot().cloneNode(!0));const g=this.getLayer("label").getRoot().cloneNode(!0),m=p.viewport2Canvas({x:0,y:0}),b=this.getCanvasByViewport([0,0]);g.translate([b[0]-m.x,b[1]-m.y]),g.scale(1/this.getCamera().getZoom()),p.appendChild(g),p.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));const E=this.getCamera(),w=p.getCamera();if(s==="viewport")w.setZoom(E.getZoom()),w.setPosition(E.getPosition()),w.setFocalPoint(E.getFocalPoint());else if(s==="overall"){const[M,C,T]=w.getPosition(),[k,O,A]=w.getFocalPoint();w.setPosition([M+u,C+h,T]),w.setFocalPoint([k+u,O+h,A])}const S=p.getContextService();return new Promise(M=>{p.addEventListener(ra.RERENDER,()=>vO(this,void 0,void 0,function*(){yield new Promise(T=>setTimeout(T,300));const C=yield S.toDataURL(l);M(C)}))})})}destroy(){Object.values(this.getLayers()).forEach(n=>{n.getCamera().cancelLandmarkAnimation(),n.destroy()})}}function bO(a,n){return Object.fromEntries(n.map(r=>{const s=(a==null?void 0:a(r))||new gv;return s instanceof gv&&s.setConfig({enableDirtyRectangleRendering:!1}),r==="main"?s.registerPlugin(new eB({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):s.unregisterPlugin(s.getPlugin("dom-interaction")),[r,s]}))}function xO(a){Object.entries(a).forEach(([n,r])=>{const s=r.getContextService().getDomElement();s!=null&&s.style&&(s.style.gridArea="1 / 1 / 2 / 2",s.style.outline="none",s.tabIndex=1,n!=="main"&&(s.style.pointerEvents="none")),s!=null&&s.parentElement&&(s.parentElement.style.display="grid",s.parentElement.style.isolation="isolate")})}const wf=a=>a?parseInt(a):0;function rB(a){const n=getComputedStyle(a),r=a.clientWidth||wf(n.width),s=a.clientHeight||wf(n.height),l=wf(n.paddingLeft)+wf(n.paddingRight),u=wf(n.paddingTop)+wf(n.paddingBottom);return[r-l,s-u]}function EO(a){if(!a)return[0,0];let n=640,r=480;const[s,l]=rB(a);n=s||n,r=l||r;const u=1,h=1;return[Math.max((0,tn.Z)(n)?n:u,u),Math.max((0,tn.Z)(r)?r:h,h)]}class um{constructor(n){this.type=n}}class Hr extends um{constructor(n,r){super(n),this.data=r}}class Ts extends um{constructor(n,r,s,l){super(n),this.animationType=r,this.animation=s,this.data=l}}class Sf extends um{constructor(n,r,s){super(n),this.elementType=r,this.data=s}}class hm extends um{constructor(n,r){super(n),this.data=r}}function Qr(a,n){a.emit(n.type,n)}function iB(a){if(!a)return null;if(a instanceof Vp)return{type:"canvas",element:a};let n=a;for(;n;){if(Ev(n))return{type:"node",element:n};if(oC(n))return{type:"edge",element:n};if(S2(n))return{type:"combo",element:n};n=n.parentElement}return null}function wO(a){var n;return((n=a==null?void 0:a.style)===null||n===void 0?void 0:n.zIndex)||0}const _f="cachedStyle",fm=a=>`__${a}__`;function aB(a,n){const r=Array.isArray(n)?n:[n];Ca(a,_f)||fv(a,_f,{}),r.forEach(s=>{fv(Ca(a,_f),fm(s),a.attributes[s])})}function SO(a,n){return Ca(a,[_f,fm(n)])}function sB(a,n){return fm(n)in(Ca(a,_f)||{})}function D7(a,n,r){set(a,[_f,fm(n)],r)}class oB{constructor(n){this.tasks=[],this.animations=new Set,this.context=n}getTasks(){const n=[...this.tasks];return this.tasks=[],n}add(n,r){this.tasks.push([n,r])}animate(n,r,s){var l,u,h;(l=r==null?void 0:r.before)===null||l===void 0||l.call(r);const f=this.getTasks().map(([v,p])=>{var g,m,b;const{element:E,elementType:w,stage:S}=v,M=Fk(this.context.options,w,S,n);(g=p==null?void 0:p.before)===null||g===void 0||g.call(p);const C=M.length?Zk(E,this.inferStyle(v,s),M):null;return C?((m=p==null?void 0:p.beforeAnimate)===null||m===void 0||m.call(p,C),C.finished.then(()=>{var T,k;(T=p==null?void 0:p.afterAnimate)===null||T===void 0||T.call(p,C),(k=p==null?void 0:p.after)===null||k===void 0||k.call(p),this.animations.delete(C)})):(b=p==null?void 0:p.after)===null||b===void 0||b.call(p),C}).filter(Boolean);f.forEach(v=>this.animations.add(v));const d=BE(f);return d?((u=r==null?void 0:r.beforeAnimate)===null||u===void 0||u.call(r,d),d.finished.then(()=>{var v,p;(v=r==null?void 0:r.afterAnimate)===null||v===void 0||v.call(r,d),(p=r==null?void 0:r.after)===null||p===void 0||p.call(r),this.release()})):(h=r==null?void 0:r.after)===null||h===void 0||h.call(r),d}inferStyle(n,r){var s,l;const{element:u,elementType:h,stage:f,originalStyle:d,updatedStyle:v={}}=n;n.modifiedStyle||(n.modifiedStyle=Object.assign(Object.assign({},d),v));const{modifiedStyle:p}=n,g={},m={};if(f==="enter")Object.assign(g,{opacity:0});else if(f==="exit")Object.assign(m,{opacity:0});else if(f==="show")Object.assign(g,{opacity:0}),Object.assign(m,{opacity:(s=SO(u,"opacity"))!==null&&s!==void 0?s:iv("opacity")});else if(f==="hide")Object.assign(g,{opacity:(l=SO(u,"opacity"))!==null&&l!==void 0?l:iv("opacity")}),Object.assign(m,{opacity:0});else if(f==="collapse"){const{collapse:b}=r||{},{target:E,descendants:w,position:S}=b;if(h==="node"){if(w.includes(u.id)){const[M,C,T]=S;Object.assign(m,{x:M,y:C,z:T})}}else if(h==="combo"){if(u.id===E||w.includes(u.id)){const[M,C]=S;Object.assign(m,{x:M,y:C,childrenNode:d.childrenNode})}}else h==="edge"&&Object.assign(m,{sourceNode:p.sourceNode,targetNode:p.targetNode})}else if(f==="expand"){const{expand:b}=r||{},{target:E,descendants:w,position:S}=b;if(h==="node"){if(u.id===E||w.includes(u.id)){const[M,C,T]=S;Object.assign(g,{x:M,y:C,z:T})}}else if(h==="combo"){if(u.id===E||w.includes(u.id)){const[M,C,T]=S;Object.assign(g,{x:M,y:C,z:T,childrenNode:p.childrenNode})}}else h==="edge"&&Object.assign(g,{sourceNode:p.sourceNode,targetNode:p.targetNode})}return[Object.keys(g).length>0?Object.assign({},d,g):d,Object.keys(m).length>0?Object.assign({},p,m):p]}stop(){this.animations.forEach(n=>n.cancel())}clear(){this.tasks=[]}release(){var n,r;const{canvas:s}=this.context,l=(r=(n=s.document)===null||n===void 0?void 0:n.timeline)===null||r===void 0?void 0:r.animationsWithPromises;l&&(s.document.timeline.animationsWithPromises=l.filter(u=>u.playState!=="finished"))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}}class lB{constructor(n){this.batchCount=0,this.context=n}emit(n){const{graph:r}=this.context;r.emit(n.type,n)}startBatch(n=!0){this.batchCount++,this.batchCount===1&&this.emit(new Hr(Pt.BATCH_START,{initiate:n}))}endBatch(){this.batchCount--,this.batchCount===0&&this.emit(new Hr(Pt.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}}class cB extends qE{constructor(n){super(n),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=r=>{const{target:s}=r,l=iB(s);if(!l)return;const{graph:u,canvas:h}=this.context,{type:f,element:d}=l;if("destroyed"in d&&(Sv(d)||d.destroyed))return;const{type:v,detail:p,button:g}=r,m=Object.assign(Object.assign({},r),{target:d,targetType:f,originalTarget:s});v===pt.POINTER_MOVE&&(this.currentTarget!==d&&(this.currentTarget&&u.emit(`${this.currentTargetType}:${pt.POINTER_LEAVE}`,Object.assign(Object.assign({},m),{type:pt.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),d&&(Object.assign(m,{type:pt.POINTER_ENTER}),u.emit(`${f}:${pt.POINTER_ENTER}`,m))),this.currentTarget=d,this.currentTargetType=f),v===pt.CLICK&&g===2||(u.emit(`${f}:${v}`,m),u.emit(v,m)),v===pt.CLICK&&p===2&&(Object.assign(m,{type:pt.DBLCLICK}),u.emit(`${f}:${pt.DBLCLICK}`,m),u.emit(pt.DBLCLICK,m)),v===pt.POINTER_DOWN&&g===2&&(Object.assign(m,{type:pt.CONTEXT_MENU,preventDefault:()=>{var b;(b=h.getContainer())===null||b===void 0||b.addEventListener(pt.CONTEXT_MENU,E=>E.preventDefault(),{once:!0})}}),u.emit(`${f}:${pt.CONTEXT_MENU}`,m),u.emit(pt.CONTEXT_MENU,m))},this.forwardContainerEvents=r=>{this.context.graph.emit(r.type,r)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(n){this.setExtensions(n)}forwardEvents(){const n=this.context.canvas.getContainer();n&&[lf.KEY_DOWN,lf.KEY_UP].forEach(s=>{n.addEventListener(s,this.forwardContainerEvents)});const r=this.context.canvas.document;r&&[pt.CLICK,pt.DBLCLICK,pt.POINTER_OVER,pt.POINTER_LEAVE,pt.POINTER_ENTER,pt.POINTER_MOVE,pt.POINTER_OUT,pt.POINTER_DOWN,pt.POINTER_UP,pt.CONTEXT_MENU,pt.DRAG_START,pt.DRAG,pt.DRAG_END,pt.DRAG_ENTER,pt.DRAG_OVER,pt.DRAG_LEAVE,pt.DROP,pt.WHEEL].forEach(s=>{r.addEventListener(s,this.forwardCanvasEvents)})}destroy(){const n=this.context.canvas.getContainer();n&&[lf.KEY_DOWN,lf.KEY_UP].forEach(r=>{n.removeEventListener(r,this.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),super.destroy()}}function uB(a,n){n===void 0&&(n=new Map);var r=[];if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var u=a[s];n.has(u)||(r.push(u),n.set(u,!0))}return r}var Zv=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};function wc(a,n){const{data:r,style:s}=a,l=Zv(a,["data","style"]),{data:u,style:h}=n,f=Zv(n,["data","style"]),d=Object.assign(Object.assign({},l),f);return(r||u)&&Object.assign(d,{data:Object.assign(Object.assign({},r),u)}),(s||h)&&Object.assign(d,{style:Object.assign(Object.assign({},s),h)}),d}function kw(a){const{data:n,style:r}=a,l=Zv(a,["data","style"]);return n&&(l.data=Object.assign({},n)),r&&(l.style=Object.assign({},r)),l}function B7(a){return!get(a,["nodes","length"])&&!get(a,["edges","length"])&&!get(a,["combos","length"])}function Mf(a={},n={}){const{states:r=[],data:s={},style:l={},children:u=[]}=a,h=Zv(a,["states","data","style","children"]),{states:f=[],data:d={},style:v={},children:p=[]}=n,g=Zv(n,["states","data","style","children"]),m=(E,w)=>E.length!==w.length?!1:E.every((S,M)=>S===w[M]),b=(E,w)=>{const S=Object.keys(E),M=Object.keys(w);return S.length!==M.length?!1:S.every(C=>E[C]===w[C])};return!(!b(h,g)||!m(u,p)||!m(r,f)||!b(s,d)||!b(l,v))}var hB=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};function Pw(a){const{id:n=tt(a),style:r,data:s}=a,l=hB(a,["id","style","data"]),u=Object.assign(Object.assign({},a),{style:Object.assign({},r),data:Object.assign({},s)});return Yk(a)?Object.assign({id:n,data:u},l):{id:n,data:u}}function hi(a){return a.data}function fB(a){if(a.hasTreeStructure(Ya))return;a.attachTreeStructure(Ya);const n=a.getAllEdges();for(const r of n){const{source:s,target:l}=r;a.setParent(l,s,Ya)}}class dB{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new O2.k}pushChange(n){if(this.isTraceless)return;const{type:r}=n;if(r===ir.NodeUpdated||r===ir.EdgeUpdated||r===ir.ComboUpdated){const{value:s,original:l}=n;this.changes.push({value:kw(s),original:kw(l),type:r})}else this.changes.push({value:kw(n.value),type:r})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(n){this.batchCount++,this.model.batch(n),this.batchCount--}isBatching(){return this.batchCount>0}silence(n){this.isTraceless=!0,n(),this.isTraceless=!1}isCombo(n){return this.comboIds.has(n)||this.latestRemovedComboIds.has(n)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(n){return this.model.getAllNodes().reduce((r,s)=>{const l=hi(s);return this.isCombo(tt(l))||(n===void 0||n.includes(tt(l)))&&r.push(l),r},[])}getEdgeDatum(n){return hi(this.model.getEdge(n))}getEdgeData(n){return this.model.getAllEdges().reduce((r,s)=>{const l=hi(s);return(n===void 0||n.includes(tt(l)))&&r.push(l),r},[])}getComboData(n){return this.model.getAllNodes().reduce((r,s)=>{const l=hi(s);return this.isCombo(tt(l))&&(n===void 0||n.includes(tt(l)))&&r.push(l),r},[])}getRootsData(n=Ya){return this.model.getRoots(n).map(hi)}getAncestorsData(n,r){const{model:s}=this;return!s.hasNode(n)||!s.hasTreeStructure(r)?[]:s.getAncestors(n,r).map(hi)}getDescendantsData(n){const r=this.getElementDataById(n),s=[];return wu(r,l=>{l!==r&&s.push(l)},l=>this.getChildrenData(tt(l)),"TB"),s}getParentData(n,r){const{model:s}=this;if(!r){_a.warn("The hierarchy structure key is not specified");return}if(!s.hasNode(n)||!s.hasTreeStructure(r))return;const l=s.getParent(n,r);return l?hi(l):void 0}getChildrenData(n){const r=this.getElementType(n)==="node"?Ya:zn,{model:s}=this;return!s.hasNode(n)||!s.hasTreeStructure(r)?[]:s.getChildren(n,r).map(hi)}getElementsDataByType(n){return n==="node"?this.getNodeData():n==="edge"?this.getEdgeData():n==="combo"?this.getComboData():[]}getElementDataById(n){return this.getElementType(n)==="edge"?this.getEdgeDatum(n):this.getNodeLikeDatum(n)}getNodeLikeDatum(n){const r=this.model.getNode(n);return hi(r)}getNodeLikeData(n){return this.model.getAllNodes().reduce((r,s)=>{const l=hi(s);return n?n.includes(tt(l))&&r.push(l):r.push(l),r},[])}getElementDataByState(n,r){return this.getElementsDataByType(n).filter(l=>{var u;return(u=l.states)===null||u===void 0?void 0:u.includes(r)})}getElementState(n){var r;return((r=this.getElementDataById(n))===null||r===void 0?void 0:r.states)||[]}hasNode(n){return this.model.hasNode(n)&&!this.isCombo(n)}hasEdge(n){return this.model.hasEdge(n)}hasCombo(n){return this.model.hasNode(n)&&this.isCombo(n)}getRelatedEdgesData(n,r="both"){return this.model.getRelatedEdges(n,r).map(hi)}getNeighborNodesData(n){return this.model.getNeighbors(n).map(hi)}setData(n){const{nodes:r=[],edges:s=[],combos:l=[]}=n,{nodes:u,edges:h,combos:f}=this.getData(),d=uc(u,r,g=>tt(g),Mf),v=uc(h,s,g=>tt(g),Mf),p=uc(f,l,g=>tt(g),Mf);this.batch(()=>{const g={nodes:d.enter,edges:v.enter,combos:p.enter};this.addData(g),this.computeZIndex(g,"add",!0);const m={nodes:d.update,edges:v.update,combos:p.update};this.updateData(m),this.computeZIndex(m,"update",!0);const b={nodes:d.exit.map(tt),edges:v.exit.map(tt),combos:p.exit.map(tt)};this.removeData(b)})}addData(n){const{nodes:r,edges:s,combos:l}=n;this.batch(()=>{this.addComboData(l),this.addNodeData(r),this.addEdgeData(s)}),this.computeZIndex(n,"add")}addNodeData(n=[]){n.length&&(this.model.addNodes(n.map(r=>(this.pushChange({value:r,type:ir.NodeAdded}),Pw(r)))),this.updateNodeLikeHierarchy(n),this.computeZIndex({nodes:n},"add"))}addEdgeData(n=[]){n.length&&(this.model.addEdges(n.map(r=>(this.pushChange({value:r,type:ir.EdgeAdded}),Pw(r)))),this.computeZIndex({edges:n},"add"))}addComboData(n=[]){if(!n.length)return;const{model:r}=this;r.hasTreeStructure(zn)||r.attachTreeStructure(zn),r.addNodes(n.map(s=>(this.comboIds.add(tt(s)),this.pushChange({value:s,type:ir.ComboAdded}),Pw(s)))),this.updateNodeLikeHierarchy(n),this.computeZIndex({combos:n},"add")}addChildrenData(n,r){const s=this.getNodeLikeDatum(n),l=r.map(tt);this.addNodeData(r),this.updateNodeData([{id:n,children:[...s.children||[],...l]}]),this.addEdgeData(l.map(u=>({source:n,target:u})))}computeZIndex(n,r,s=!1){!s&&this.isBatching()||this.batch(()=>{const{nodes:l=[],edges:u=[],combos:h=[]}=n;h.forEach(f=>{var d,v,p;const g=tt(f);if(r==="add"&&(0,tn.Z)((d=f.style)===null||d===void 0?void 0:d.zIndex)||r==="update"&&!("combo"in f))return;const m=this.getParentData(g,zn),b=m?((p=(v=m.style)===null||v===void 0?void 0:v.zIndex)!==null&&p!==void 0?p:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:g,style:{zIndex:b}}])})}),l.forEach(f=>{var d,v,p;const g=tt(f);if(r==="add"&&(0,tn.Z)((d=f.style)===null||d===void 0?void 0:d.zIndex)||r==="update"&&!("combo"in f)&&!("children"in f))return;let m=0;const b=this.getParentData(g,zn);if(b)m=(((v=b.style)===null||v===void 0?void 0:v.zIndex)||0)+1;else{const E=this.getParentData(g,Ya);E&&(m=((p=E==null?void 0:E.style)===null||p===void 0?void 0:p.zIndex)||0)}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:g,style:{zIndex:m}}])})}),u.forEach(f=>{var d,v,p,g,m;if((0,tn.Z)((d=f.style)===null||d===void 0?void 0:d.zIndex))return;let{id:b,source:E,target:w}=f;if(!b)b=tt(f);else{const C=this.getEdgeDatum(b);E=C.source,w=C.target}if(!E||!w)return;const S=((p=(v=this.getNodeLikeDatum(E))===null||v===void 0?void 0:v.style)===null||p===void 0?void 0:p.zIndex)||0,M=((m=(g=this.getNodeLikeDatum(w))===null||g===void 0?void 0:g.style)===null||m===void 0?void 0:m.zIndex)||0;this.updateEdgeData([{id:tt(f),style:{zIndex:Math.max(S,M)-1}}])})})}getFrontZIndex(n){var r;const s=this.getElementType(n),l=this.getElementDataById(n),u=this.getData();if(Object.assign(u,{[`${s}s`]:u[`${s}s`].filter(h=>tt(h)!==n)}),s==="combo"&&!Ma(l)){const h=new Set(this.getAncestorsData(n,zn).map(tt));u.nodes=u.nodes.filter(f=>!h.has(tt(f))),u.combos=u.combos.filter(f=>!h.has(tt(f))),u.edges=u.edges.filter(({source:f,target:d})=>!h.has(f)&&!h.has(d))}return Math.max(((r=l.style)===null||r===void 0?void 0:r.zIndex)||0,0,...Object.values(u).flat().map(h=>{var f;return(((f=h==null?void 0:h.style)===null||f===void 0?void 0:f.zIndex)||0)+1}))}updateNodeLikeHierarchy(n){if(!this.enableUpdateNodeLikeHierarchy)return;const{model:r}=this;n.forEach(s=>{const l=tt(s),u=kg(s);u!==void 0&&(r.hasTreeStructure(zn)||r.attachTreeStructure(zn),u===null&&this.refreshComboData(l),this.setParent(l,kg(s),zn));const h=s.children||[];if(h.length){r.hasTreeStructure(Ya)||r.attachTreeStructure(Ya);const f=h.filter(d=>r.hasNode(d));f.forEach(d=>this.setParent(d,l,Ya)),f.length!==h.length&&this.updateNodeData([{id:l,children:f}])}})}preventUpdateNodeLikeHierarchy(n){this.enableUpdateNodeLikeHierarchy=!1,n(),this.enableUpdateNodeLikeHierarchy=!0}updateData(n){const{nodes:r,edges:s,combos:l}=n;this.batch(()=>{this.updateNodeData(r),this.updateComboData(l),this.updateEdgeData(s)}),this.computeZIndex(n,"update")}updateNodeData(n=[]){if(!n.length)return;const{model:r}=this;this.batch(()=>{const s=[];n.forEach(l=>{const u=tt(l),h=hi(r.getNode(u));if(Mf(h,l))return;const f=wc(h,l);this.pushChange({value:f,original:h,type:ir.NodeUpdated}),r.mergeNodeData(u,f),s.push(f)}),this.updateNodeLikeHierarchy(s)}),this.computeZIndex({nodes:n},"update")}refreshData(){const{nodes:n,edges:r,combos:s}=this.getData();n.forEach(l=>{this.pushChange({value:l,original:l,type:ir.NodeUpdated})}),r.forEach(l=>{this.pushChange({value:l,original:l,type:ir.EdgeUpdated})}),s.forEach(l=>{this.pushChange({value:l,original:l,type:ir.ComboUpdated})})}syncNodeLikeDatum(n){const{model:r}=this,s=tt(n);if(!r.hasNode(s))return;const l=hi(r.getNode(s)),u=wc(l,n);r.mergeNodeData(s,u)}syncEdgeDatum(n){const{model:r}=this,s=tt(n);if(!r.hasEdge(s))return;const l=hi(r.getEdge(s)),u=wc(l,n);r.mergeEdgeData(s,u)}updateEdgeData(n=[]){if(!n.length)return;const{model:r}=this;this.batch(()=>{n.forEach(s=>{const l=tt(s),u=hi(r.getEdge(l));if(Mf(u,s))return;s.source&&u.source!==s.source&&r.updateEdgeSource(l,s.source),s.target&&u.target!==s.target&&r.updateEdgeTarget(l,s.target);const h=wc(u,s);this.pushChange({value:h,original:u,type:ir.EdgeUpdated}),r.mergeEdgeData(l,h)})}),this.computeZIndex({edges:n},"update")}updateComboData(n=[]){if(!n.length)return;const{model:r}=this;r.batch(()=>{const s=[];n.forEach(l=>{const u=tt(l),h=hi(r.getNode(u));if(Mf(h,l))return;const f=wc(h,l);this.pushChange({value:f,original:h,type:ir.ComboUpdated}),r.mergeNodeData(u,f),s.push(f)}),this.updateNodeLikeHierarchy(s)}),this.computeZIndex({combos:n},"update")}setParent(n,r,s,l=!0){if(n===r)return;const u=this.getNodeLikeDatum(n),h=kg(u);if(h!==r&&s===zn){const f={id:n,combo:r};this.isCombo(n)?this.syncNodeLikeDatum(f):this.syncNodeLikeDatum(f)}this.model.setParent(n,r,s),l&&s===zn&&uB([h,r]).forEach(f=>{f!==void 0&&this.refreshComboData(f)})}refreshComboData(n){const r=this.getComboData([n])[0],s=this.getAncestorsData(n,zn);r&&this.pushChange({value:r,original:r,type:ir.ComboUpdated}),s.forEach(l=>{this.pushChange({value:l,original:l,type:ir.ComboUpdated})})}getElementPosition(n){const r=this.getElementDataById(n);return pr(r)}translateNodeLikeBy(n,r){this.isCombo(n)?this.translateComboBy(n,r):this.translateNodeBy(n,r)}translateNodeLikeTo(n,r){this.isCombo(n)?this.translateComboTo(n,r):this.translateNodeTo(n,r)}translateNodeBy(n,r){const s=this.getElementPosition(n),l=Ce(s,[...r,0].slice(0,3));this.translateNodeTo(n,l)}translateNodeTo(n,r){const[s=0,l=0,u=0]=r;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:n,style:{x:s,y:l,z:u}}])})}translateComboBy(n,r){const[s=0,l=0,u=0]=r;if([s,l,u].some(isNaN)||[s,l,u].every(d=>d===0))return;const h=this.getComboData([n])[0];if(!h)return;const f=new Set;wu(h,d=>{const v=tt(d);if(f.has(v))return;f.add(v);const[p,g,m]=pr(d),b=wc(d,{style:{x:p+s,y:g+l,z:m+u}});this.pushChange({value:b,original:d,type:this.isCombo(v)?ir.ComboUpdated:ir.NodeUpdated}),this.model.mergeNodeData(v,b)},d=>this.getChildrenData(tt(d)),"BT")}translateComboTo(n,r){var s;if(r.some(isNaN))return;const[l=0,u=0,h=0]=r,f=(s=this.getComboData([n]))===null||s===void 0?void 0:s[0];if(!f)return;const[d,v,p]=pr(f),g=l-d,m=u-v,b=h-p;wu(f,E=>{const w=tt(E),[S,M,C]=pr(E),T=wc(E,{style:{x:S+g,y:M+m,z:C+b}});this.pushChange({value:T,original:E,type:this.isCombo(w)?ir.ComboUpdated:ir.NodeUpdated}),this.model.mergeNodeData(w,T)},E=>this.getChildrenData(tt(E)),"BT")}removeData(n){const{nodes:r,edges:s,combos:l}=n;this.batch(()=>{this.removeEdgeData(s),this.removeNodeData(r),this.removeComboData(l),this.latestRemovedComboIds=new Set(l)})}removeNodeData(n=[]){n.length&&this.batch(()=>{n.forEach(r=>{this.removeEdgeData(this.getRelatedEdgesData(r).map(tt)),this.pushChange({value:this.getNodeData([r])[0],type:ir.NodeRemoved}),this.removeNodeLikeHierarchy(r)}),this.model.removeNodes(n)})}removeEdgeData(n=[]){n.length&&(n.forEach(r=>this.pushChange({value:this.getEdgeData([r])[0],type:ir.EdgeRemoved})),this.model.removeEdges(n))}removeComboData(n=[]){n.length&&this.batch(()=>{n.forEach(r=>{this.pushChange({value:this.getComboData([r])[0],type:ir.ComboRemoved}),this.removeNodeLikeHierarchy(r),this.comboIds.delete(r)}),this.model.removeNodes(n)})}removeNodeLikeHierarchy(n){if(this.model.hasTreeStructure(zn)){const r=kg(this.getNodeLikeDatum(n));this.setParent(n,void 0,zn,!1),this.model.getChildren(n,zn).forEach(s=>{const l=hi(s),u=tt(l);this.setParent(tt(l),r,zn,!1);const h=wc(l,{id:tt(l),combo:r});this.pushChange({value:h,original:l,type:this.isCombo(u)?ir.ComboUpdated:ir.NodeUpdated}),this.model.mergeNodeData(tt(l),h)}),(0,le.Z)(r)||this.refreshComboData(r)}}getElementType(n){if(this.model.hasNode(n))return this.isCombo(n)?"combo":"node";if(this.model.hasEdge(n))return"edge";throw new Error(xl(`Unknown element type of id: ${n}`))}destroy(){const{model:n}=this,r=n.getAllNodes(),s=n.getAllEdges();n.removeEdges(s.map(l=>l.id)),n.removeNodes(r.map(l=>l.id)),this.context={}}}var Wv=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class vB{constructor(n){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=n}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){const{canvas:n}=this.context;this.container=n.appendChild(new kr({className:"elements"}))}}emit(n,r){r.silence||Qr(this.context.graph,n)}forEachElementData(n){Eu.forEach(r=>{const s=this.context.model.getElementsDataByType(r);n(r,s)})}getElementType(n,r){var s;const{options:l,graph:u}=this.context,h=((s=l[n])===null||s===void 0?void 0:s.type)||r.type;return h?typeof h=="string"?h:h.call(u,r):n==="edge"?"line":"circle"}getTheme(n){return v_(this.context.options)[n]||{}}getThemeStyle(n){return this.getTheme(n).style||{}}getThemeStateStyle(n,r){const{state:s={}}=this.getTheme(n);return Object.assign({},...r.map(l=>s[l]||{}))}computePaletteStyle(){const{options:n}=this.context;this.paletteStyle={},this.forEachElementData((r,s)=>{var l,u;const h=Object.assign({},MM((l=this.getTheme(r))===null||l===void 0?void 0:l.palette),MM((u=n[r])===null||u===void 0?void 0:u.palette));h!=null&&h.field&&Object.assign(this.paletteStyle,nR(s,h))})}getPaletteStyle(n,r){const s=this.paletteStyle[r];return s?n==="edge"?{stroke:s}:{fill:s}:{}}computeElementDefaultStyle(n,r){var s;const{options:l}=this.context,u=((s=l[n])===null||s===void 0?void 0:s.style)||{};"transform"in u&&Array.isArray(u.transform)&&(u.transform=[...u.transform]),this.defaultStyle[tt(r.datum)]=_M(u,r)}computeElementsDefaultStyle(n){const{graph:r}=this.context;this.forEachElementData((s,l)=>{const u=l.length;for(let h=0;h<u;h++){const f=l[h];(n===void 0||n.includes(tt(f)))&&this.computeElementDefaultStyle(s,{datum:f,graph:r})}})}getDefaultStyle(n){return this.defaultStyle[n]||{}}getElementState(n){try{const{model:r}=this.context;return r.getElementState(n)}catch(r){return[]}}getElementStateStyle(n,r,s){var l,u;const{options:h}=this.context,f=((u=(l=h[n])===null||l===void 0?void 0:l.state)===null||u===void 0?void 0:u[r])||{};return _M(f,s)}computeElementStatesStyle(n,r,s){this.stateStyle[tt(s.datum)]=Object.assign({},...r.map(l=>this.getElementStateStyle(n,l,s)))}computeElementsStatesStyle(n){const{graph:r}=this.context;this.forEachElementData((s,l)=>{const u=l.length;for(let h=0;h<u;h++){const f=l[h];if(n===void 0||n.includes(tt(f))){const d=this.getElementState(tt(f));this.computeElementStatesStyle(s,d,{datum:f,graph:r})}}})}getStateStyle(n){return this.stateStyle[n]||{}}computeStyle(n,r){n&&["translate","zIndex"].includes(n)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(r),this.computeElementsStatesStyle(r))}getElement(n){return this.elementMap[n]}getNodes(){return this.context.model.getNodeData().map(({id:n})=>this.elementMap[n])}getEdges(){return this.context.model.getEdgeData().map(n=>this.elementMap[tt(n)])}getCombos(){return this.context.model.getComboData().map(({id:n})=>this.elementMap[n])}getElementComputedStyle(n,r){const s=tt(r),l=this.getThemeStyle(n),u=this.getPaletteStyle(n,s),h=r.style||{},f=this.getDefaultStyle(s),d=this.getThemeStateStyle(n,this.getElementState(s)),v=this.getStateStyle(s),p=Object.assign({},l,u,h,f,d,v);if(n==="combo"){const g=this.context.model.getChildrenData(s),b=!!p.collapsed?[]:g.map(tt).filter(E=>this.getElement(E));Object.assign(p,{childrenNode:b,childrenData:g})}return p}getDrawData(n){this.init();const r=this.computeChangesAndDrawData(n);if(!r)return null;const{type:s="draw",stage:l=s}=n;return this.markDestroyElement(r.drawData),this.computeStyle(l),{type:s,stage:l,data:r}}draw(n={animation:!0}){const r=this.getDrawData(n);if(!r)return;const{data:{drawData:{add:s,update:l,remove:u}}}=r;return this.destroyElements(u,n),this.createElements(s,n),this.updateElements(l,n),this.setAnimationTask(n,r)}preLayoutDraw(){return Wv(this,arguments,void 0,function*(n={animation:!0}){var r,s;const l=this.getDrawData(n);if(!l)return;const{data:{drawData:u}}=l;yield(s=(r=this.context.layout)===null||r===void 0?void 0:r.preLayout)===null||s===void 0?void 0:s.call(r,u);const{add:h,update:f,remove:d}=u;return this.destroyElements(d,n),this.createElements(h,n),this.updateElements(f,n),this.setAnimationTask(n,l)})}setAnimationTask(n,r){const{animation:s,silence:l}=n,{data:{dataChanges:u,drawData:h},stage:f,type:d}=r;return this.context.animation.animate(s,l?{}:{before:()=>this.emit(new Hr(Pt.BEFORE_DRAW,{dataChanges:u,animation:s,stage:f,render:d==="render"}),n),beforeAnimate:v=>this.emit(new Ts(Pt.BEFORE_ANIMATE,Sa.DRAW,v,h),n),afterAnimate:v=>this.emit(new Ts(Pt.AFTER_ANIMATE,Sa.DRAW,v,h),n),after:()=>this.emit(new Hr(Pt.AFTER_DRAW,{dataChanges:u,animation:s,stage:f,render:d==="render",firstRender:this.context.graph.rendered===!1}),n)})}computeChangesAndDrawData(n){const{model:r}=this.context,s=r.getChanges(),l=W2(s);if(l.length===0)return null;const{NodeAdded:u=[],NodeUpdated:h=[],NodeRemoved:f=[],EdgeAdded:d=[],EdgeUpdated:v=[],EdgeRemoved:p=[],ComboAdded:g=[],ComboUpdated:m=[],ComboRemoved:b=[]}=pg(l,M=>M.type),E=M=>new Map(M.map(C=>{const T=C.value;return[tt(T),T]})),w={add:{nodes:E(u),edges:E(d),combos:E(g)},update:{nodes:E(h),edges:E(v),combos:E(m)},remove:{nodes:E(f),edges:E(p),combos:E(b)}},S=this.transformData(w,n);return r.clearChanges(),{dataChanges:s,drawData:S}}transformData(n,r){const s=this.context.transform.getTransformInstance();return Object.values(s).reduce((l,u)=>u.beforeDraw(l,r),n)}createElement(n,r,s){var l;const u=tt(r);if(this.getElement(u))return;const f=this.getElementType(n,r),d=this.getElementComputedStyle(n,r),v=bl(n,f);if(!v)return _a.warn(`The element ${f} of ${n} is not registered.`);this.emit(new Sf(Pt.BEFORE_ELEMENT_CREATE,n,r),s);const p=this.container.appendChild(new v({id:u,context:this.context,style:d}));this.shapeTypeMap[u]=f,this.elementMap[u]=p;const{stage:g="enter"}=s;(l=this.context.animation)===null||l===void 0||l.add({element:p,elementType:n,stage:g,originalStyle:Object.assign({},p.attributes),updatedStyle:d},{after:()=>{var m;this.emit(new Sf(Pt.AFTER_ELEMENT_CREATE,n,r),s),(m=p.onCreate)===null||m===void 0||m.call(p)}})}createElements(n,r){const{nodes:s,edges:l,combos:u}=n;[["node",s],["combo",u],["edge",l]].forEach(([f,d])=>{d.forEach(v=>this.createElement(f,v,r))})}getUpdateStageStyle(n,r,s){const{stage:l="update"}=s;if(l==="translate")if(n==="node"||n==="combo"){const{style:{x:u=0,y:h=0,z:f=0}={}}=r;return{x:u,y:h,z:f}}else return{};return this.getElementComputedStyle(n,r)}updateElement(n,r,s){var l;const u=tt(r),{stage:h="update"}=s,f=this.getElement(u);if(!f)return()=>null;this.emit(new Sf(Pt.BEFORE_ELEMENT_UPDATE,n,r),s);const d=this.getElementType(n,r),v=this.getUpdateStageStyle(n,r,s);this.shapeTypeMap[u]!==d&&(f.destroy(),delete this.shapeTypeMap[u],delete this.elementMap[u],this.createElement(n,r,{animation:!1,silence:!0}));const p=h!=="visibility"?h:v.visibility==="hidden"?"hide":"show";p==="hide"&&delete v.visibility,(l=this.context.animation)===null||l===void 0||l.add({element:f,elementType:n,stage:p,originalStyle:Object.assign({},f.attributes),updatedStyle:v},{before:()=>{const g=this.elementMap[u];h!=="collapse"&&T2(g,v),h==="visibility"&&(sB(g,"opacity")||aB(g,"opacity"),this.visibilityCache.set(g,p==="show"?"visible":"hidden"),p==="show"&&bu(g,"visible"))},after:()=>{var g;const m=this.elementMap[u];h==="collapse"&&T2(m,v),p==="hide"&&bu(m,this.visibilityCache.get(m)),this.emit(new Sf(Pt.AFTER_ELEMENT_UPDATE,n,r),s),(g=m.onUpdate)===null||g===void 0||g.call(m)}})}updateElements(n,r){const{nodes:s,edges:l,combos:u}=n;[["node",s],["combo",u],["edge",l]].forEach(([f,d])=>{d.forEach(v=>this.updateElement(f,v,r))})}markDestroyElement(n){Object.values(n.remove).forEach(r=>{r.forEach(s=>{const l=tt(s),u=this.getElement(l);u&&fL(u)})})}destroyElement(n,r,s){var l;const{stage:u="exit"}=s,h=tt(r),f=this.elementMap[h];if(!f)return()=>null;this.emit(new Sf(Pt.BEFORE_ELEMENT_DESTROY,n,r),s),(l=this.context.animation)===null||l===void 0||l.add({element:f,elementType:n,stage:u,originalStyle:Object.assign({},f.attributes),updatedStyle:{}},{after:()=>{var d;this.clearElement(h),f.destroy(),(d=f.onDestroy)===null||d===void 0||d.call(f),this.emit(new Sf(Pt.AFTER_ELEMENT_DESTROY,n,r),s)}})}destroyElements(n,r){const{nodes:s,edges:l,combos:u}=n;[["combo",u],["edge",l],["node",s]].forEach(([f,d])=>{d.forEach(v=>this.destroyElement(f,v,r))})}clearElement(n){delete this.paletteStyle[n],delete this.defaultStyle[n],delete this.stateStyle[n],delete this.elementMap[n],delete this.shapeTypeMap[n]}alignLayoutResultToElement(n,r){var s,l;const u=(s=n.nodes)===null||s===void 0?void 0:s.find(h=>tt(h)===r);if(u){const h=pr(this.context.model.getNodeLikeDatum(r)),f=pr(u),d=Nn(h,f);(l=n.nodes)===null||l===void 0||l.forEach(v=>{var p,g,m;!((p=v.style)===null||p===void 0)&&p.x&&(v.style.x+=d[0]),!((g=v.style)===null||g===void 0)&&g.y&&(v.style.y+=d[1]),!((m=v.style)===null||m===void 0)&&m.z&&(v.style.z+=d[2]||0)})}}collapseNode(n,r){return Wv(this,void 0,void 0,function*(){var s;const{animation:l}=r,{model:u}=this.context,h=this.computeChangesAndDrawData({stage:"collapse",animation:l});if(!h)return;const{drawData:f}=h,{add:d,remove:v,update:p}=f;this.markDestroyElement(f);const g={animation:l,stage:"collapse",data:f};this.destroyElements(v,g),this.createElements(d,g),this.updateElements(p,g),yield(s=this.context.animation.animate(l,{beforeAnimate:m=>this.emit(new Ts(Pt.BEFORE_ANIMATE,Sa.COLLAPSE,m,f),g),afterAnimate:m=>this.emit(new Ts(Pt.AFTER_ANIMATE,Sa.COLLAPSE,m,f),g)},{collapse:{target:n,descendants:Array.from(v.nodes).map(([,m])=>tt(m)),position:pr(p.nodes.get(n))}}))===null||s===void 0?void 0:s.finished})}expandNode(n,r){return Wv(this,void 0,void 0,function*(){var s;const{model:l,layout:u}=this.context,{animation:h,align:f}=r,d=pr(l.getNodeData([n])[0]),v=this.computeChangesAndDrawData({stage:"expand",animation:h});if(this.createElements(v.drawData.add,{animation:!1,stage:"expand",target:n}),this.context.animation.clear(),this.computeStyle("expand"),!v)return;const{drawData:p}=v,{update:g,add:m}=p,b={animation:h,stage:"expand",data:p};m.edges.forEach(E=>g.edges.set(tt(E),E)),m.nodes.forEach(E=>g.nodes.set(tt(E),E)),this.updateElements(g,b),yield(s=this.context.animation.animate(h,{beforeAnimate:E=>this.emit(new Ts(Pt.BEFORE_ANIMATE,Sa.EXPAND,E,p),b),afterAnimate:E=>this.emit(new Ts(Pt.AFTER_ANIMATE,Sa.EXPAND,E,p),b)},{expand:{target:n,descendants:Array.from(m.nodes).map(([,E])=>tt(E)),position:d}}))===null||s===void 0?void 0:s.finished})}collapseCombo(n,r){return Wv(this,void 0,void 0,function*(){var s;const{model:l,element:u}=this.context;if(l.getAncestorsData(n,zn).some(w=>Ma(w)))return;const h=u.getElement(n),f=h.getComboPosition(Object.assign(Object.assign({},h.attributes),{collapsed:!0})),d=this.computeChangesAndDrawData({stage:"collapse",animation:r});if(!d)return;const{dataChanges:v,drawData:p}=d;this.markDestroyElement(p);const{update:g,remove:m}=p,b={animation:r,stage:"collapse",data:p};this.destroyElements(m,b),this.updateElements(g,b);const E=w=>Array.from(w).map(([,S])=>tt(S));yield(s=this.context.animation.animate(r,{before:()=>this.emit(new Hr(Pt.BEFORE_DRAW,{dataChanges:v,animation:r}),b),beforeAnimate:w=>this.emit(new Ts(Pt.BEFORE_ANIMATE,Sa.COLLAPSE,w,p),b),afterAnimate:w=>this.emit(new Ts(Pt.AFTER_ANIMATE,Sa.COLLAPSE,w,p),b),after:()=>this.emit(new Hr(Pt.AFTER_DRAW,{dataChanges:v,animation:r}),b)},{collapse:{target:n,descendants:[...E(m.nodes),...E(m.combos)],position:f}}))===null||s===void 0?void 0:s.finished})}expandCombo(n,r){return Wv(this,void 0,void 0,function*(){var s;const{model:l}=this.context,u=pr(l.getComboData([n])[0]);this.computeStyle("expand");const h=this.computeChangesAndDrawData({stage:"expand",animation:r});if(!h)return;const{dataChanges:f,drawData:d}=h,{add:v,update:p}=d,g={animation:r,stage:"expand",data:d,target:n};this.createElements(v,g),this.updateElements(p,g);const m=b=>Array.from(b).map(([,E])=>tt(E));yield(s=this.context.animation.animate(r,{before:()=>this.emit(new Hr(Pt.BEFORE_DRAW,{dataChanges:f,animation:r}),g),beforeAnimate:b=>this.emit(new Ts(Pt.BEFORE_ANIMATE,Sa.EXPAND,b,d),g),afterAnimate:b=>this.emit(new Ts(Pt.AFTER_ANIMATE,Sa.EXPAND,b,d),g),after:()=>this.emit(new Hr(Pt.AFTER_DRAW,{dataChanges:f,animation:r}),g)},{expand:{target:n,descendants:[...m(v.nodes),...m(v.combos)],position:u}}))===null||s===void 0?void 0:s.finished})}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}}const _O=Symbol("Comlink.proxy"),pB=Symbol("Comlink.endpoint"),MO=Symbol("Comlink.releaseProxy"),Rw=Symbol("Comlink.finalizer"),dm=Symbol("Comlink.thrown"),CO=a=>typeof a=="object"&&a!==null||typeof a=="function",gB={canHandle:a=>CO(a)&&a[_O],serialize(a){const{port1:n,port2:r}=new MessageChannel;return OO(a,n),[r,[r]]},deserialize(a){return a.start(),kO(a)}},yB={canHandle:a=>CO(a)&&dm in a,serialize({value:a}){let n;return a instanceof Error?n={isError:!0,value:{message:a.message,name:a.name,stack:a.stack}}:n={isError:!1,value:a},[n,[]]},deserialize(a){throw a.isError?Object.assign(new Error(a.value.message),a.value):a.value}},TO=new Map([["proxy",gB],["throw",yB]]);function mB(a,n){for(const r of a)if(n===r||r==="*"||r instanceof RegExp&&r.test(n))return!0;return!1}function OO(a,n=globalThis,r=["*"]){n.addEventListener("message",function s(l){if(!l||!l.data)return;if(!mB(r,l.origin)){console.warn(`Invalid origin '${l.origin}' for comlink proxy`);return}const{id:u,type:h,path:f}=Object.assign({path:[]},l.data),d=(l.data.argumentList||[]).map(Nu);let v;try{const p=f.slice(0,-1).reduce((m,b)=>m[b],a),g=f.reduce((m,b)=>m[b],a);switch(h){case"GET":v=g;break;case"SET":p[f.slice(-1)[0]]=Nu(l.data.value),v=!0;break;case"APPLY":v=g.apply(p,d);break;case"CONSTRUCT":{const m=new g(...d);v=_B(m)}break;case"ENDPOINT":{const{port1:m,port2:b}=new MessageChannel;OO(a,b),v=SB(m,[m])}break;case"RELEASE":v=void 0;break;default:return}}catch(p){v={value:p,[dm]:0}}Promise.resolve(v).catch(p=>({value:p,[dm]:0})).then(p=>{const[g,m]=ym(p);n.postMessage(Object.assign(Object.assign({},g),{id:u}),m),h==="RELEASE"&&(n.removeEventListener("message",s),AO(n),Rw in a&&typeof a[Rw]=="function"&&a[Rw]())}).catch(p=>{const[g,m]=ym({value:new TypeError("Unserializable return value"),[dm]:0});n.postMessage(Object.assign(Object.assign({},g),{id:u}),m)})}),n.start&&n.start()}function bB(a){return a.constructor.name==="MessagePort"}function AO(a){bB(a)&&a.close()}function kO(a,n){const r=new Map;return a.addEventListener("message",function(l){const{data:u}=l;if(!u||!u.id)return;const h=r.get(u.id);if(h)try{h(u)}finally{r.delete(u.id)}}),Nw(a,r,[],n)}function vm(a){if(a)throw new Error("Proxy has been released and is not useable")}function PO(a){return Cf(a,new Map,{type:"RELEASE"}).then(()=>{AO(a)})}const pm=new WeakMap,gm="FinalizationRegistry"in globalThis&&new FinalizationRegistry(a=>{const n=(pm.get(a)||0)-1;pm.set(a,n),n===0&&PO(a)});function xB(a,n){const r=(pm.get(n)||0)+1;pm.set(n,r),gm&&gm.register(a,n,a)}function EB(a){gm&&gm.unregister(a)}function Nw(a,n,r=[],s=function(){}){let l=!1;const u=new Proxy(s,{get(h,f){if(vm(l),f===MO)return()=>{EB(u),PO(a),n.clear(),l=!0};if(f==="then"){if(r.length===0)return{then:()=>u};const d=Cf(a,n,{type:"GET",path:r.map(v=>v.toString())}).then(Nu);return d.then.bind(d)}return Nw(a,n,[...r,f])},set(h,f,d){vm(l);const[v,p]=ym(d);return Cf(a,n,{type:"SET",path:[...r,f].map(g=>g.toString()),value:v},p).then(Nu)},apply(h,f,d){vm(l);const v=r[r.length-1];if(v===pB)return Cf(a,n,{type:"ENDPOINT"}).then(Nu);if(v==="bind")return Nw(a,n,r.slice(0,-1));const[p,g]=RO(d);return Cf(a,n,{type:"APPLY",path:r.map(m=>m.toString()),argumentList:p},g).then(Nu)},construct(h,f){vm(l);const[d,v]=RO(f);return Cf(a,n,{type:"CONSTRUCT",path:r.map(p=>p.toString()),argumentList:d},v).then(Nu)}});return xB(u,a),u}function wB(a){return Array.prototype.concat.apply([],a)}function RO(a){const n=a.map(ym);return[n.map(r=>r[0]),wB(n.map(r=>r[1]))]}const NO=new WeakMap;function SB(a,n){return NO.set(a,n),a}function _B(a){return Object.assign(a,{[_O]:!0})}function F7(a,n=globalThis,r="*"){return{postMessage:(s,l)=>a.postMessage(s,r,l),addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}function ym(a){for(const[n,r]of TO)if(r.canHandle(a)){const[s,l]=r.serialize(a);return[{type:"HANDLER",name:n,value:s},l]}return[{type:"RAW",value:a},NO.get(a)||[]]}function Nu(a){switch(a.type){case"HANDLER":return TO.get(a.name).deserialize(a.value);case"RAW":return a.value}}function Cf(a,n,r,s){return new Promise(l=>{const u=MB();n.set(u,l),a.start&&a.start(),a.postMessage(Object.assign({id:u},r),s)})}function MB(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class CB extends Z2.Z{constructor(n,r,s){super(),this.graph=n,this.layout=r,this.options=s,this.spawnWorker()}spawnWorker(){this.proxy=kO(new Worker(new URL(K.p+K.u(230),K.b),{type:void 0})),this.running&&(this.running=!1,this.execute())}execute(){var n;return(0,N.mG)(this,void 0,void 0,function*(){if(this.running)return this;this.running=!0;const r=this.layout.options,{onTick:s}=r,l=(0,N._T)(r,["onTick"]),u={};Object.keys(l).forEach(v=>{(0,re.Z)(l[v])||(u[v]=l[v])});const h={layout:{id:this.layout.id,options:u,iterations:(n=this.options)===null||n===void 0?void 0:n.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},f=new Float32Array([0]),[d]=yield this.proxy.calculateLayout(h,[f]);return d})}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[MO]()}isRunning(){return this.running}}var LO=K(10779),Tf=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})},TB=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};class OB{get presetOptions(){return{animation:!!p_(this.context.options,!0)}}get options(){const{options:n}=this.context;return n.layout}constructor(n){this.instances=[],this.context=n}getLayoutInstance(){return this.instances}preLayout(n){return Tf(this,void 0,void 0,function*(){var r,s,l,u;const{graph:h,model:f}=this.context,{add:d}=n;Qr(h,new Hr(Pt.BEFORE_LAYOUT,{type:"pre"}));const v=yield(r=this.context.layout)===null||r===void 0?void 0:r.simulate();(s=v==null?void 0:v.nodes)===null||s===void 0||s.forEach(p=>{const g=tt(p),m=d.nodes.get(g);f.syncNodeLikeDatum(p),m&&Object.assign(m.style,p.style)}),(l=v==null?void 0:v.edges)===null||l===void 0||l.forEach(p=>{const g=tt(p),m=d.edges.get(g);f.syncEdgeDatum(p),m&&Object.assign(m.style,p.style)}),(u=v==null?void 0:v.combos)===null||u===void 0||u.forEach(p=>{const g=tt(p),m=d.combos.get(g);f.syncNodeLikeDatum(p),m&&Object.assign(m.style,p.style)}),Qr(h,new Hr(Pt.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",n)})}postLayout(){return Tf(this,arguments,void 0,function*(n=this.options){if(!n)return;const r=Array.isArray(n)?n:[n],{graph:s}=this.context;Qr(s,new Hr(Pt.BEFORE_LAYOUT,{type:"post"}));for(let l=0;l<r.length;l++){const u=r[l],h=this.getLayoutData(u),f=Object.assign(Object.assign({},this.presetOptions),u);Qr(s,new Hr(Pt.BEFORE_STAGE_LAYOUT,{options:f,index:l}));const d=yield this.stepLayout(h,f,l);Qr(s,new Hr(Pt.AFTER_STAGE_LAYOUT,{options:f,index:l})),u.animation||this.updateElementPosition(d,!1)}Qr(s,new Hr(Pt.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post")})}transformDataAfterLayout(n,r){const s=this.context.transform.getTransformInstance();Object.values(s).forEach(l=>l.afterLayout(n,r))}simulate(){return Tf(this,void 0,void 0,function*(){if(!this.options)return{};const n=Array.isArray(this.options)?this.options:[this.options];let r={};for(let s=0;s<n.length;s++){const l=n[s],u=this.getLayoutData(l);r=yield this.stepLayout(u,Object.assign(Object.assign(Object.assign({},this.presetOptions),l),{animation:!1}),s)}return r})}stepLayout(n,r,s){return Tf(this,void 0,void 0,function*(){return bL(r)?yield this.treeLayout(n,r,s):yield this.graphLayout(n,r,s)})}graphLayout(n,r,s){return Tf(this,void 0,void 0,function*(){const{animation:l,enableWorker:u,iterations:h=300}=r,f=this.initGraphLayout(r);if(!f)return{};if(this.instances[s]=f,this.instance=f,u){const v=f;return this.supervisor=new CB(v.graphData2LayoutModel(n),v.instance,{iterations:h}),fy(yield this.supervisor.execute())}if((0,LO.h)(f))return l?yield f.execute(n,{onTick:v=>{this.updateElementPosition(v,!1)}}):(f.execute(n),f.stop(),f.tick(h));const d=yield f.execute(n);if(l){const v=this.updateElementPosition(d,l);yield v==null?void 0:v.finished}return d})}treeLayout(n,r,s){return Tf(this,void 0,void 0,function*(){const{type:l,animation:u}=r,h=bl("layout",l);if(!h)return{};const{nodes:f=[],edges:d=[]}=n,v=new O2.k({nodes:f.map(E=>({id:tt(E),data:E.data||{}})),edges:d.map(E=>({id:tt(E),source:E.source,target:E.target,data:E.data||{}}))});fB(v);const p={nodes:[],edges:[]},g={nodes:[],edges:[]};v.getRoots(Ya).forEach(E=>{wu(E,T=>{T.children=v.getSuccessors(T.id)},T=>v.getSuccessors(T.id),"TB");const w=h(E,r),{x:S,y:M,z:C=0}=w;wu(w,T=>{const{id:k,x:O,y:A,z:R=0}=T;p.nodes.push({id:k,style:{x:S,y:M,z:C}}),g.nodes.push({id:k,style:{x:O,y:A,z:R}})},T=>T.children,"TB")});const b=this.inferTreeLayoutOffset(g);if(IO(g,b),u){IO(p,b),this.updateElementPosition(p,!1);const E=this.updateElementPosition(g,u);yield E==null?void 0:E.finished}return g})}inferTreeLayoutOffset(n){var r;let[s,l]=[1/0,-1/0],[u,h]=[1/0,-1/0];(r=n.nodes)===null||r===void 0||r.forEach(w=>{const{x:S=0,y:M=0}=w.style||{};s=Math.min(s,S),l=Math.max(l,S),u=Math.min(u,M),h=Math.max(h,M)});const{canvas:f}=this.context,d=f.getSize(),[v,p]=f.getCanvasByViewport([0,0]),[g,m]=f.getCanvasByViewport(d);if(s>=v&&l<=g&&u>=p&&h<=m)return[0,0];const b=(v+g)/2,E=(p+m)/2;return[b-(s+l)/2,E-(u+h)/2]}stopLayout(){this.instance&&(0,LO.h)(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}getLayoutData(n){const{nodeFilter:r=()=>!0,preLayout:s=!1,isLayoutInvisibleNodes:l=!1}=n,{nodes:u,edges:h,combos:f}=this.context.model.getData(),{element:d,model:v}=this.context,p=w=>d.getElement(w),g=s?w=>{var S;return!l&&(((S=w.style)===null||S===void 0?void 0:S.visibility)==="hidden"||v.getAncestorsData(w.id,Ya).some(Ma)||v.getAncestorsData(w.id,zn).some(Ma))?!1:r(w)}:w=>{const S=tt(w),M=p(S);return!M||Sv(M)?!1:r(w)},m=u.filter(g),b=new Map(m.map(w=>[tt(w),w]));f.forEach(w=>b.set(tt(w),w));const E=h.filter(({source:w,target:S})=>b.has(w)&&b.has(S));return{nodes:m,edges:E,combos:f}}initGraphLayout(n){var r;const{element:s,viewport:l}=this.context,{type:u,enableWorker:h,animation:f,iterations:d}=n,v=TB(n,["type","enableWorker","animation","iterations"]),[p,g]=l.getCanvasSize(),m=[p/2,g/2],b=(r=n==null?void 0:n.nodeSize)!==null&&r!==void 0?r:C=>{const T=s==null?void 0:s.getElement(C.id);return T?T.attributes.size:s==null?void 0:s.getElementComputedStyle("node",C).size},E=bl("layout",u);if(!E)return _a.warn(`The layout of ${u} is not registered.`);const w=Object.getPrototypeOf(E.prototype)===hy.prototype?E:EL(E,this.context),S=new w(this.context),M={nodeSize:b,width:p,height:g,center:m};switch(S.id){case"d3-force":case"d3-force-3d":Object.assign(M,{center:{x:p/2,y:g/2,z:0}});break;default:break}return(0,Ka.Z)(S.options,M,v),S}updateElementPosition(n,r){const{model:s,element:l}=this.context;return l?(s.updateData(n),l.draw({animation:r,silence:!0})):null}destroy(){var n;this.stopLayout(),this.context={},(n=this.supervisor)===null||n===void 0||n.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}const IO=(a,n)=>{var r;const[s,l]=n;(r=a.nodes)===null||r===void 0||r.forEach(u=>{if(u.style){const{x:h=0,y:f=0}=u.style;u.style.x=h+s,u.style.y=f+l}else u.style={x:s,y:l}})};function AB(a){return[kB].reduce((r,s)=>s(r),a)}function kB(a){return!a.layout||Array.isArray(a.layout)||"preLayout"in a.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(a.layout.type)&&(a.layout.preLayout=!0),a}class PB extends qE{constructor(n){super(n),this.category="plugin",this.setPlugins(this.context.options.plugins||[])}setPlugins(n){this.setExtensions(n)}getPluginInstance(n){const r=this.extensionMap[n];if(r)return r;_a.warn(`Cannot find the plugin ${n}, will try to find it by type.`);const s=this.extensions.find(l=>l.type===n);if(s)return this.extensionMap[s.key]}}const mm=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class RB extends qE{constructor(n){super(n),this.category="transform",this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(n){this.setExtensions([...mm.slice(0,mm.length-1),...n,mm[mm.length-1]])}getTransformInstance(n){return n?this.extensionMap[n]:this.extensionMap}}var Gv=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class NB{get padding(){return $s(this.context.options.padding)}get paddingOffset(){const[n,r,s,l]=this.padding,[u,h,f]=[(l-r)/2,(n-s)/2,0];return[u,h,f]}constructor(n){this.landmarkCounter=0,this.context=n;const[r,s]=this.paddingOffset,{zoom:l,rotation:u,x:h=r,y:f=s}=n.options;this.transform({mode:"absolute",scale:l,translate:[h,f],rotate:u},!1)}get camera(){const{canvas:n}=this.context;return new Proxy(n.getCamera(),{get:(r,s)=>{const u=Object.entries(n.getLayers()).filter(([f])=>!["main"].includes(f)).map(([,f])=>f.getCamera()),h=r[s];if(typeof h=="function")return(...f)=>{const d=h.apply(r,f);return u.forEach(v=>{v[s].apply(v,f)}),d}}})}createLandmark(n){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,n)}getAnimation(n){const r=p_(this.context.options,n);return r?(0,yv.Z)(Object.assign({},r),["easing","duration"]):!1}getCanvasSize(){const{canvas:n}=this.context,{width:r=0,height:s=0}=n.getConfig();return[r,s]}getCanvasCenter(){const{canvas:n}=this.context,{width:r=0,height:s=0}=n.getConfig();return[r/2,s/2,0]}getViewportCenter(){const[n,r]=this.camera.getPosition();return[n,r,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(n){const{camera:r}=this,{mode:s,translate:l=[]}=n,u=this.getZoom(),h=r.getPosition(),f=r.getFocalPoint(),[d,v]=this.getCanvasCenter(),[p=0,g=0,m=0]=l,b=Ys([-p,-g,-m],u);return s==="relative"?{position:Ce(h,b),focalPoint:Ce(f,b)}:{position:Ce([d,v,h[2]],b),focalPoint:Ce([d,v,f[2]],b)}}getRotateOptions(n){const{mode:r,rotate:s=0}=n;return{roll:r==="relative"?this.camera.getRoll()+s:s}}getZoomOptions(n){const{zoomRange:r}=this.context.options,s=this.camera.getZoom(),{mode:l,scale:u=1}=n;return Le(l==="relative"?s*u:u,...r)}transform(n,r){return Gv(this,void 0,void 0,function*(){const{graph:s}=this.context,{translate:l,rotate:u,scale:h,origin:f}=n;this.cancelAnimation();const d=this.getAnimation(r);if(Qr(s,new hm(Pt.BEFORE_TRANSFORM,n)),!u&&h&&!l&&f&&!d){this.camera.setZoomByViewportPoint(this.getZoomOptions(n),f),Qr(s,new hm(Pt.AFTER_TRANSFORM,n));return}const v={};if(l&&Object.assign(v,this.getTranslateOptions(n)),(0,tn.Z)(u)&&Object.assign(v,this.getRotateOptions(n)),(0,tn.Z)(h)&&Object.assign(v,{zoom:this.getZoomOptions(n)}),d)return Qr(s,new Ts(Pt.BEFORE_ANIMATE,Sa.TRANSFORM,null,n)),new Promise(p=>{this.transformResolver=p,this.camera.gotoLandmark(this.createLandmark(v),Object.assign(Object.assign({},d),{onfinish:()=>{Qr(s,new Ts(Pt.AFTER_ANIMATE,Sa.TRANSFORM,null,n)),Qr(s,new hm(Pt.AFTER_TRANSFORM,n)),this.transformResolver=void 0,p()}}))});this.camera.gotoLandmark(this.createLandmark(v),{duration:0}),Qr(s,new hm(Pt.AFTER_TRANSFORM,n))})}fitView(n,r){return Gv(this,void 0,void 0,function*(){const[s,l,u,h]=this.padding,{when:f="always",direction:d="both"}=n||{},[v,p]=this.context.canvas.getSize(),g=v-h-l,m=p-s-u,b=this.context.canvas.getBounds(),E=this.getBBoxInViewport(b),[w,S]=oc(E),M=d==="x"&&w>=g||d==="y"&&S>=m||d==="both"&&w>=g&&S>=m;if(f==="overflow"&&!M)return yield this.fitCenter({animation:r});const C=g/w,T=m/S,k=d==="x"?C:d==="y"?T:Math.min(C,T),O=this.getAnimation(r);yield this.transform({mode:"relative",scale:k,translate:Ce(Nn(this.getCanvasCenter(),this.getBBoxInViewport(b).center),Ys(this.paddingOffset,k))},O)})}fitCenter(n){return Gv(this,void 0,void 0,function*(){const r=this.context.canvas.getBounds();yield this.focus(r,n)})}focusElements(n){return Gv(this,arguments,void 0,function*(r,s={}){const{element:l}=this.context;if(!l)return;const u=f=>s.shapes?f.getShape(s.shapes).getRenderBounds():f.getRenderBounds(),h=av(r.map(f=>u(l.getElement(f))));yield this.focus(h,s)})}focus(n,r){return Gv(this,void 0,void 0,function*(){const s=this.context.graph.getViewportByCanvas(n.center),l=r.position||this.getCanvasCenter(),u=Nn(l,s);yield this.transform({mode:"relative",translate:Ce(u,this.paddingOffset)},r.animation)})}getBBoxInViewport(n){const{min:r,max:s}=n,{graph:l}=this.context,[u,h]=l.getViewportByCanvas(r),[f,d]=l.getViewportByCanvas(s),v=new en;return v.setMinMax([u,h,0],[f,d,0]),v}isInViewport(n,r=!1,s=0){const{graph:l}=this.context,u=this.getCanvasSize(),[h,f]=l.getCanvasByViewport([0,0]),[d,v]=l.getCanvasByViewport(u);let p=new en;return p.setMinMax([h,f,0],[d,v,0]),s&&(p=cc(p,s)),cf(n)?Hs(n,p):r?qk(n,p):p.intersects(n)}cancelAnimation(){var n,r;!((n=this.camera.landmarks)===null||n===void 0)&&n.length&&this.camera.cancelLandmarkAnimation(),(r=this.transformResolver)===null||r===void 0||r.call(this)}}var Hn=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};class bm extends Z2.Z{constructor(n){var r;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new dB},this.isCollapsingExpanding=!1,this.onResize=_v(()=>{this.resize()},300),this._setOptions(Object.assign({},bm.defaultOptions,n),!0),this.context.graph=this,this.options.autoResize&&((r=globalThis.addEventListener)===null||r===void 0||r.call(globalThis,"resize",this.onResize))}getOptions(){return this.options}setOptions(n){this._setOptions(n,!1)}_setOptions(n,r){if(this.updateCanvas(n),Object.assign(this.options,AB(n)),r){const{data:m}=n;m&&this.addData(m);return}const{behaviors:s,combo:l,data:u,edge:h,layout:f,node:d,plugins:v,theme:p,transforms:g}=n;s&&this.setBehaviors(s),u&&this.setData(u),d&&this.setNode(d),h&&this.setEdge(h),l&&this.setCombo(l),f&&this.setLayout(f),p&&this.setTheme(p),v&&this.setPlugins(v),g&&this.setTransforms(g)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(n,r){n&&(this.options.width=n),r&&(this.options.height=r),this.resize(n,r)}setZoomRange(n){this.options.zoomRange=n}getZoomRange(){return this.options.zoomRange}setNode(n){this.options.node=n,this.context.model.refreshData()}setEdge(n){this.options.edge=n,this.context.model.refreshData()}setCombo(n){this.options.combo=n,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(n){this.options.theme=(0,re.Z)(n)?n(this.getTheme()):n}setLayout(n){this.options.layout=(0,re.Z)(n)?n(this.getLayout()):n}getLayout(){return this.options.layout}setBehaviors(n){var r;this.options.behaviors=(0,re.Z)(n)?n(this.getBehaviors()):n,(r=this.context.behavior)===null||r===void 0||r.setBehaviors(this.options.behaviors)}updateBehavior(n){this.setBehaviors(r=>r.map(s=>typeof s=="object"&&s.key===n.key?Object.assign(Object.assign({},s),n):s))}getBehaviors(){return this.options.behaviors||[]}setPlugins(n){var r;this.options.plugins=(0,re.Z)(n)?n(this.getPlugins()):n,(r=this.context.plugin)===null||r===void 0||r.setPlugins(this.options.plugins)}updatePlugin(n){this.setPlugins(r=>r.map(s=>typeof s=="object"&&s.key===n.key?Object.assign(Object.assign({},s),n):s))}getPlugins(){return this.options.plugins||[]}getPluginInstance(n){return this.context.plugin.getPluginInstance(n)}setTransforms(n){var r;this.options.transforms=(0,re.Z)(n)?n(this.getTransforms()):n,(r=this.context.transform)===null||r===void 0||r.setTransforms(this.options.transforms)}updateTransform(n){this.setTransforms(r=>r.map(s=>typeof s=="object"&&s.key===n.key?Object.assign(Object.assign({},s),n):s)),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}getElementData(n){return Array.isArray(n)?n.map(r=>this.context.model.getElementDataById(r)):this.context.model.getElementDataById(n)}getNodeData(n){return n===void 0?this.context.model.getNodeData():Array.isArray(n)?this.context.model.getNodeData(n):this.context.model.getNodeLikeDatum(n)}getEdgeData(n){return n===void 0?this.context.model.getEdgeData():Array.isArray(n)?this.context.model.getEdgeData(n):this.context.model.getEdgeDatum(n)}getComboData(n){return n===void 0?this.context.model.getComboData():Array.isArray(n)?this.context.model.getComboData(n):this.context.model.getNodeLikeDatum(n)}setData(n){this.context.model.setData((0,re.Z)(n)?n(this.getData()):n)}addData(n){this.context.model.addData((0,re.Z)(n)?n(this.getData()):n)}addNodeData(n){this.context.model.addNodeData((0,re.Z)(n)?n(this.getNodeData()):n)}addEdgeData(n){this.context.model.addEdgeData((0,re.Z)(n)?n(this.getEdgeData()):n)}addComboData(n){this.context.model.addComboData((0,re.Z)(n)?n(this.getComboData()):n)}addChildrenData(n,r){this.context.model.addChildrenData(n,r)}updateData(n){this.context.model.updateData((0,re.Z)(n)?n(this.getData()):n)}updateNodeData(n){this.context.model.updateNodeData((0,re.Z)(n)?n(this.getNodeData()):n)}updateEdgeData(n){this.context.model.updateEdgeData((0,re.Z)(n)?n(this.getEdgeData()):n)}updateComboData(n){this.context.model.updateComboData((0,re.Z)(n)?n(this.getComboData()):n)}removeData(n){this.context.model.removeData((0,re.Z)(n)?n(this.getData()):n)}removeNodeData(n){this.context.model.removeNodeData((0,re.Z)(n)?n(this.getNodeData()):n)}removeEdgeData(n){this.context.model.removeEdgeData((0,re.Z)(n)?n(this.getEdgeData()):n)}removeComboData(n){this.context.model.removeComboData((0,re.Z)(n)?n(this.getComboData()):n)}getElementType(n){return this.context.model.getElementType(n)}getRelatedEdgesData(n,r="both"){return this.context.model.getRelatedEdgesData(n,r)}getNeighborNodesData(n){return this.context.model.getNeighborNodesData(n)}getAncestorsData(n,r){return this.context.model.getAncestorsData(n,r)}getParentData(n,r){return this.context.model.getParentData(n,r)}getChildrenData(n){return this.context.model.getChildrenData(n)}getDescendantsData(n){return this.context.model.getDescendantsData(n)}getElementDataByState(n,r){return this.context.model.getElementDataByState(n,r)}initCanvas(){return Hn(this,void 0,void 0,function*(){var n;if(this.context.canvas)return yield this.context.canvas.ready;const{container:r="container",width:s,height:l,renderer:u,cursor:h,background:f,canvas:d,devicePixelRatio:v=(n=globalThis.devicePixelRatio)!==null&&n!==void 0?n:1}=this.options;if(r instanceof mO)this.context.canvas=r,h&&r.setCursor(h),u&&r.setRenderer(u),yield r.ready;else{const p=(0,xn.Z)(r)?document.getElementById(r):r,g=EO(p);this.emit(Pt.BEFORE_CANVAS_INIT,{container:p,width:s,height:l});const m=Object.assign(Object.assign({},d),{container:p,width:s||g[0],height:l||g[1],background:f,renderer:u,cursor:h,devicePixelRatio:v}),b=new mO(m);this.context.canvas=b,yield b.ready,this.emit(Pt.AFTER_CANVAS_INIT,{canvas:b})}})}updateCanvas(n){var r,s;const{renderer:l,cursor:u,height:h,width:f}=n,d=this.context.canvas;d&&(l&&(this.emit(Pt.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),d.setRenderer(l),this.emit(Pt.AFTER_RENDERER_CHANGE,{renderer:l})),u&&d.setCursor(u),((0,tn.Z)(f)||(0,tn.Z)(h))&&this.setSize((r=f!=null?f:this.options.width)!==null&&r!==void 0?r:0,(s=h!=null?h:this.options.height)!==null&&s!==void 0?s:0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new lB(this.context)),this.context.plugin||(this.context.plugin=new PB(this.context)),this.context.viewport||(this.context.viewport=new NB(this.context)),this.context.transform||(this.context.transform=new RB(this.context)),this.context.element||(this.context.element=new vB(this.context)),this.context.animation||(this.context.animation=new oB(this.context)),this.context.layout||(this.context.layout=new OB(this.context)),this.context.behavior||(this.context.behavior=new cB(this.context))}prepare(){return Hn(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed){console.error(xl("The graph instance has been destroyed"));return}yield this.initCanvas(),this.initRuntime()})}render(){return Hn(this,void 0,void 0,function*(){if(yield this.prepare(),Qr(this,new Hr(Pt.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&xL(this.options.layout)){const n=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([n==null?void 0:n.finished,this.autoFit()])}else{const n=this.context.element.draw({type:"render"});yield Promise.all([n==null?void 0:n.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{const n=this.context.element.draw({type:"render"});yield Promise.all([n==null?void 0:n.finished,this.autoFit()])}this.rendered=!0,Qr(this,new Hr(Pt.AFTER_RENDER))})}draw(){return Hn(this,void 0,void 0,function*(){var n;yield this.prepare(),yield(n=this.context.element.draw())===null||n===void 0?void 0:n.finished})}layout(n){return Hn(this,void 0,void 0,function*(){yield this.context.layout.postLayout(n)})}stopLayout(){this.context.layout.stopLayout()}clear(){return Hn(this,void 0,void 0,function*(){const{model:n,element:r}=this.context;n.setData({}),n.clearChanges(),r==null||r.clear()})}destroy(){var n;Qr(this,new Hr(Pt.BEFORE_DESTROY));const{layout:r,animation:s,element:l,model:u,canvas:h,behavior:f,plugin:d}=this.context;d==null||d.destroy(),f==null||f.destroy(),r==null||r.destroy(),s==null||s.destroy(),l==null||l.destroy(),u.destroy(),h==null||h.destroy(),this.options={},this.context={},this.off(),(n=globalThis.removeEventListener)===null||n===void 0||n.call(globalThis,"resize",this.onResize),this.destroyed=!0,Qr(this,new Hr(Pt.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(n,r){var s;const l=EO((s=this.context.canvas)===null||s===void 0?void 0:s.getContainer()),u=[n||l[0],r||l[1]];if(!this.context.canvas)return;const h=this.context.canvas.getSize();Rr(u,h)||(Qr(this,new Hr(Pt.BEFORE_SIZE_CHANGE,{size:u})),this.context.canvas.resize(...u),Qr(this,new Hr(Pt.AFTER_SIZE_CHANGE,{size:u})))}fitView(n,r){return Hn(this,void 0,void 0,function*(){var s;yield(s=this.context.viewport)===null||s===void 0?void 0:s.fitView(n,r)})}fitCenter(n){return Hn(this,void 0,void 0,function*(){var r;yield(r=this.context.viewport)===null||r===void 0?void 0:r.fitCenter({animation:n})})}autoFit(){return Hn(this,void 0,void 0,function*(){const{autoFit:n}=this.context.options;if(n)if((0,xn.Z)(n))n==="view"?yield this.fitView():n==="center"&&(yield this.fitCenter());else{const{type:r,animation:s}=n;r==="view"?yield this.fitView(n.options,s):r==="center"&&(yield this.fitCenter(s))}})}focusElement(n,r){return Hn(this,void 0,void 0,function*(){var s;yield(s=this.context.viewport)===null||s===void 0?void 0:s.focusElements(Array.isArray(n)?n:[n],{animation:r})})}zoomBy(n,r,s){return Hn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:n,origin:s},r)})}zoomTo(n,r,s){return Hn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:n,origin:s},r)})}getZoom(){return this.context.viewport.getZoom()}rotateBy(n,r,s){return Hn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:n,origin:s},r)})}rotateTo(n,r,s){return Hn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:n,origin:s},r)})}getRotation(){return this.context.viewport.getRotation()}translateBy(n,r){return Hn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:n},r)})}translateTo(n,r){return Hn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:n},r)})}getPosition(){return Nn([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(n,r){return Hn(this,arguments,void 0,function*(s,l,u=!0){var h,f;const[d,v]=(0,ai.Z)(s)?[s,(h=l)!==null&&h!==void 0?h:!0]:[{[s]:l},u];Object.entries(d).forEach(([p,g])=>this.context.model.translateNodeLikeBy(p,g)),yield(f=this.context.element.draw({animation:v,stage:"translate"}))===null||f===void 0?void 0:f.finished})}translateElementTo(n,r){return Hn(this,arguments,void 0,function*(s,l,u=!0){var h,f;const[d,v]=(0,ai.Z)(s)?[s,(h=l)!==null&&h!==void 0?h:!0]:[{[s]:l},u];Object.entries(d).forEach(([p,g])=>this.context.model.translateNodeLikeTo(p,g)),yield(f=this.context.element.draw({animation:v,stage:"translate"}))===null||f===void 0?void 0:f.finished})}getElementPosition(n){return this.context.model.getElementPosition(n)}getElementRenderStyle(n){return L2(this.context.element.getElement(n).attributes,["context"])}setElementVisibility(n,r){return Hn(this,arguments,void 0,function*(s,l,u=!0){var h,f;const[d,v]=(0,ai.Z)(s)?[s,(h=l)!==null&&h!==void 0?h:!0]:[{[s]:l},u],p={nodes:[],edges:[],combos:[]};Object.entries(d).forEach(([b,E])=>{const w=this.getElementType(b);p[`${w}s`].push({id:b,style:{visibility:E}})});const{model:g,element:m}=this.context;g.preventUpdateNodeLikeHierarchy(()=>{g.updateData(p)}),yield(f=m.draw({animation:v,stage:"visibility"}))===null||f===void 0?void 0:f.finished})}showElement(n,r){return Hn(this,void 0,void 0,function*(){const s=Array.isArray(n)?n:[n];yield this.setElementVisibility(Object.fromEntries(s.map(l=>[l,"visible"])),r)})}hideElement(n,r){return Hn(this,void 0,void 0,function*(){const s=Array.isArray(n)?n:[n];yield this.setElementVisibility(Object.fromEntries(s.map(l=>[l,"hidden"])),r)})}getElementVisibility(n){var r,s;const l=this.context.element.getElement(n);return(s=(r=l==null?void 0:l.style)===null||r===void 0?void 0:r.visibility)!==null&&s!==void 0?s:"visible"}setElementZIndex(n,r){return Hn(this,void 0,void 0,function*(){var s;const l={nodes:[],edges:[],combos:[]},u=(0,ai.Z)(n)?n:{[n]:r};Object.entries(u).forEach(([d,v])=>{const p=this.getElementType(d);l[`${p}s`].push({id:d,style:{zIndex:v}})});const{model:h,element:f}=this.context;h.preventUpdateNodeLikeHierarchy(()=>h.updateData(l)),yield(s=f.draw({animation:!1,stage:"zIndex"}))===null||s===void 0?void 0:s.finished})}frontElement(n){return Hn(this,void 0,void 0,function*(){const r=Array.isArray(n)?n:[n],{model:s}=this.context,l={};r.map(u=>{const h=s.getFrontZIndex(u);if(s.getElementType(u)==="combo"){const d=s.getAncestorsData(u,zn).at(-1)||this.getComboData(u),v=[d,...s.getDescendantsData(tt(d))],p=h-wO(d);v.forEach(m=>{l[tt(m)]=this.getElementZIndex(tt(m))+p});const{internal:g}=w2(v.map(tt),m=>s.getRelatedEdgesData(m));g.forEach(m=>{const b=tt(m);l[b]=this.getElementZIndex(b)+p})}else l[u]=h}),yield this.setElementZIndex(l)})}getElementZIndex(n){return wO(this.context.model.getElementDataById(n))}setElementState(n,r){return Hn(this,arguments,void 0,function*(s,l,u=!0){var h,f;const[d,v]=(0,ai.Z)(s)?[s,(h=l)!==null&&h!==void 0?h:!0]:[{[s]:l},u],p=m=>m?Array.isArray(m)?m:[m]:[],g={nodes:[],edges:[],combos:[]};Object.entries(d).forEach(([m,b])=>{const E=this.getElementType(m);g[`${E}s`].push({id:m,states:p(b)})}),this.updateData(g),yield(f=this.context.element.draw({animation:v,stage:"state"}))===null||f===void 0?void 0:f.finished})}getElementState(n){return this.context.model.getElementState(n)}getElementRenderBounds(n){return this.context.element.getElement(n).getRenderBounds()}collapseElement(n){return Hn(this,arguments,void 0,function*(r,s=!0){const{model:l,element:u}=this.context;if(Ma(l.getNodeLikeData([r])[0])||this.isCollapsingExpanding)return;typeof s=="boolean"&&(s={animation:s,align:!0});const h=l.getElementType(r);yield this.frontElement(r),this.isCollapsingExpanding=!0,l.updateData(h==="node"?{nodes:[{id:r,style:{collapsed:!0}}]}:{combos:[{id:r,style:{collapsed:!0}}]}),h==="node"?yield u.collapseNode(r,s):h==="combo"&&(yield u.collapseCombo(r,!!s.animation)),this.isCollapsingExpanding=!1})}expandElement(n){return Hn(this,arguments,void 0,function*(r,s=!0){const{model:l,element:u}=this.context;if(!Ma(l.getNodeLikeData([r])[0])||this.isCollapsingExpanding)return;typeof s=="boolean"&&(s={animation:s,align:!0});const h=l.getElementType(r);this.isCollapsingExpanding=!0,l.updateData(h==="node"?{nodes:[{id:r,style:{collapsed:!1}}]}:{combos:[{id:r,style:{collapsed:!1}}]}),h==="node"?yield u.expandNode(r,s):h==="combo"&&(yield u.expandCombo(r,!!s.animation)),this.isCollapsingExpanding=!1})}setElementCollapsibility(n,r){const s=this.getElementType(n);s==="node"?this.updateNodeData([{id:n,style:{collapsed:r}}]):s==="combo"&&this.updateComboData([{id:n,style:{collapsed:r}}])}toDataURL(){return Hn(this,arguments,void 0,function*(n={}){return this.context.canvas.toDataURL(n)})}getCanvasByViewport(n){return this.context.canvas.getCanvasByViewport(n)}getViewportByCanvas(n){return this.context.canvas.getViewportByCanvas(n)}getClientByCanvas(n){return this.context.canvas.getClientByCanvas(n)}getCanvasByClient(n){return this.context.canvas.getCanvasByClient(n)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(n,r,s){return super.on(n,r,s)}once(n,r){return super.once(n,r)}off(n,r){return super.off(n,r)}}bm.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};var LB=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r};function IB(a,n){const{getNodeData:r=(f,d)=>{if(f.depth=d,!f.children)return f;const{children:v}=f,p=LB(f,["children"]);return Object.assign(Object.assign({},p),{children:v.map(g=>g.id)})},getEdgeData:s=(f,d)=>({source:f.id,target:d.id}),getChildren:l=f=>f.children||[]}=n||{},u=[],h=[];return wu(a,(f,d)=>{u.push(r(f,d));const v=l(f);for(const p of v)h.push(s(f,p))},f=>l(f),"TB"),{nodes:u,edges:h}}class DB extends es{beforeDraw(n){const{add:r,update:s}=n,{model:l}=this.context;return[...r.edges.entries(),...s.edges.entries()].forEach(([,u])=>{DO(l,u)}),n}}const DO=(a,n)=>{const{source:r,target:s}=n,l=a.getElementDataById(r),u=a.getElementDataById(s),h=eC(l,g=>a.getParentData(g,zn)),f=eC(u,g=>a.getParentData(g,zn)),d=tt(h),v=tt(f),p={sourceNode:d,targetNode:v};return n.style?Object.assign(n.style,p):n.style=p,n},BB=(a,n,r)=>{const[s,l]=n,[u,h]=r;if(l===s)return u;const f=(a-s)/(l-s);return u+f*(h-u)},FB=(a,n,r)=>{const[s,l]=n,[u,h]=r,f=Math.log(a-s+1)/Math.log(l-s+1);return u+f*(h-u)},zB=(a,n,r,s=2)=>{const[l,u]=n,[h,f]=r,d=Math.pow((a-l)/(u-l),s);return h+d*(f-h)},ZB=(a,n,r)=>{const[s,l]=n,[u,h]=r,f=Math.sqrt((a-s)/(l-s));return u+f*(h-u)};class xm extends es{constructor(n,r){super(n,(0,Ka.Z)({},xm.defaultOptions,r)),this.assignSizeByCentrality=(s,l,u,h,f,d)=>{const v=[l,u],p=[h[0],f[0]],g=[h[1],f[1]],m=[h[2],f[2]],b=(E,w)=>{if(typeof d=="function")return d(E,v,w);switch(d){case"linear":return BB(E,v,w);case"log":return FB(E,v,w);case"pow":return zB(E,v,w,2);case"sqrt":return ZB(E,v,w);default:return w[0]}};return[b(s,p),b(s,g),b(s,m)]}}beforeDraw(n){const{model:r}=this.context,s=r.getNodeData(),l=Ta(this.options.maxSize),u=Ta(this.options.minSize),h=this.getCentralities(this.options.centrality),f=h.size>0?Math.max(...h.values()):0,d=h.size>0?Math.min(...h.values()):0;return s.forEach(v=>{var p;const g=this.assignSizeByCentrality(h.get(tt(v))||0,d,f,u,l,this.options.scale),m=(p=this.context.element)===null||p===void 0?void 0:p.getElement(tt(v)),b={size:g};this.assignLabelStyle(b,g,v,m),(!m||!cm(b,m.attributes))&&ns(n,m?"update":"add","node",(0,Ka.Z)(v,{style:b}),!0)}),n}assignLabelStyle(n,r,s,l){var u;const h=l?l.config.style:(u=this.context.element)===null||u===void 0?void 0:u.getElementComputedStyle("node",s);if(Object.assign(n,(0,yv.Z)(h,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){const f=this.getLabelSizeByNodeSize(r,1/0,Number(n.labelFontSize));Object.assign(n,{labelFontSize:f,labelLineHeight:f+Kk(n.labelPadding)})}return n}getLabelSizeByNodeSize(n,r,s){const l=Math.min(...n)/2,[u,h]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[s,r];return Math.min(h,Math.max(l,u))}getCentralities(n){const{model:r}=this.context,s=r.getData();if(typeof n=="function")return n(s);const l=r.getRelatedEdgesData.bind(r);return sM(s,l,n)}}xm.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};class Em extends es{constructor(n,r){super(n,Object.assign({},Em.defaultOptions,r))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var n;const r=pr(this.ref),{graph:s,model:l}=this.context;(n=l.getData().nodes)===null||n===void 0||n.forEach(h=>{var f;if(tt(h)===tt(this.ref))return;const d=cM(Nn(pr(h),r)),v=Math.abs(d)>Math.PI/2,p=!h.children||h.children.length===0,g=tt(h),m=(f=this.context.element)===null||f===void 0?void 0:f.getElement(g);if(!m||!m.isVisible())return;const b=Ta(s.getElementRenderStyle(g).size)[0]/2,E=(p?1:-1)*(b+this.options.offset),w=[["translate",E*Math.cos(d),E*Math.sin(d)],["rotate",v?nr(d)+180:nr(d)]];l.updateNodeData([{id:tt(h),style:{labelTextAlign:v===p?"right":"left",labelTextBaseline:"middle",labelTransform:w}}])}),s.draw()}}Em.defaultOptions={offset:5};const WB="quadratic",BO=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class wm extends es{constructor(n,r){super(n,Object.assign({},wm.defaultOptions,r)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=s=>{const{add:{edges:l},update:{nodes:u,edges:h,combos:f},remove:{edges:d}}=s,{model:v}=this.context,p=new Map,g=(E,w)=>{v.getRelatedEdgesData(w).forEach(M=>!p.has(tt(M))&&p.set(tt(M),M))};u.forEach(g),f.forEach(g);const m=E=>{const w=v.getEdgeData().map(M=>DO(v,M));GB(E,w,!0).forEach(M=>!p.has(tt(M))&&p.set(tt(M),M))};if(d.size&&d.forEach(m),l.size&&l.forEach(m),h.size){const E=IC(W2(v.getChanges())).update.edges;h.forEach(w=>{var S;m(w);const M=(S=E.find(C=>tt(C.value)===tt(w)))===null||S===void 0?void 0:S.original;M&&!Lw(w,M)&&m(M)})}Po(this.options.edges)||p.forEach((E,w)=>!this.options.edges.includes(w)&&p.delete(w));const b=v.getEdgeData().map(tt);return new Map([...p].sort((E,w)=>b.indexOf(E[0])-b.indexOf(w[0])))},this.applyBundlingStyle=(s,l,u)=>{const{edgeMap:h,reverses:f}=FO(l);h.forEach(d=>{d.forEach((v,p,g)=>{var m;const b=g.length,E=v.style||{};if(v.source===v.target){const M=BO.length;E.loopPlacement=BO[p%M],E.loopDist=Math.floor(p/M)*u+50}else if(b===1)E.curveOffset=0;else{const M=(p%2===0?1:-1)*(f[`${v.source}|${v.target}|${p}`]?-1:1);E.curveOffset=b%2===1?M*Math.ceil(p/2)*u*2:M*(Math.floor(p/2)*u*2+u)}const w=Object.assign(v,{type:WB,style:E}),S=(m=this.context.element)===null||m===void 0?void 0:m.getElement(tt(v));(!S||!cm(w.style,S.attributes))&&ns(s,S?"update":"add","edge",w,!0)})})},this.resetEdgeStyle=s=>{const l=s.style||{},u=this.cacheMergeStyle.get(tt(s))||{};return Object.keys(u).forEach(h=>{Rr(l[h],u[h])&&(s[h]?l[h]=s[h]:delete l[h])}),Object.assign(s,{style:l})},this.applyMergingStyle=(s,l)=>{const{edgeMap:u,reverses:h}=FO(l);u.forEach(f=>{var d;if(f.length===1){const p=f[0],g=(d=this.context.element)===null||d===void 0?void 0:d.getElement(tt(p)),m=this.resetEdgeStyle(p);(!g||!cm(m,g.attributes))&&ns(s,g?"update":"add","edge",m);return}const v=f.map(({source:p,target:g,style:m={}},b)=>{const{startArrow:E,endArrow:w}=m,S={},[M,C]=h[`${p}|${g}|${b}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return go(E)&&(S[M]=E),go(w)&&(S[C]=w),S}).reduce((p,g)=>Object.assign(Object.assign({},p),g),{});f.forEach((p,g,m)=>{var b;if(g!==0){ns(s,"remove","edge",p);return}const E=Object.assign({},(0,re.Z)(this.options.style)?this.options.style(m):this.options.style,{childrenData:m});this.cacheMergeStyle.set(tt(p),E);const w=Object.assign(Object.assign({},p),{type:"line",style:Object.assign(Object.assign(Object.assign({},p.style),v),E)}),S=(b=this.context.element)===null||b===void 0?void 0:b.getElement(tt(p));(!S||!cm(w.style,S.attributes))&&ns(s,S?"update":"add","edge",w,!0)})})}}beforeDraw(n){const r=this.getAffectedParallelEdges(n);return r.size===0||(this.options.mode==="bundle"?this.applyBundlingStyle(n,r,this.options.distance):this.applyMergingStyle(n,r)),n}}wm.defaultOptions={mode:"bundle",distance:15};const FO=a=>{const n=new Map,r=new Set,s={},l=new Map;for(const[u,h]of a){if(r.has(u))continue;const{source:f,target:d}=h,v=`${f}-${d}`;n.has(v)||(n.set(v,[]),l.set(v,new Set));const p=n.get(v),g=l.get(v);p&&g&&!g.has(u)&&(p.push(h),g.add(u),r.add(u));for(const[m,b]of a)if(!(r.has(m)||m===u)&&Lw(h,b)){const E=n.get(v),w=l.get(v);E&&w&&!w.has(m)&&(E.push(b),w.add(m),f===b.target&&d===b.source&&(s[`${b.source}|${b.target}|${E.length-1}`]=!0),r.add(m))}}return{edgeMap:n,reverses:s}},GB=(a,n,r)=>n.filter(s=>(r||tt(s)!==tt(a))&&Lw(s,a)),Lw=(a,n)=>{const{sourceNode:r,targetNode:s}=a.style||{},{sourceNode:l,targetNode:u}=n.style||{};return r===l&&s===u||r===u&&s===l};class jB extends es{beforeDraw(n,r){const{stage:s}=r;if(s==="visibility")return n;const{model:l}=this.context,{update:{nodes:u,edges:h,combos:f}}=n,d=(v,p)=>{l.getRelatedEdgesData(p).forEach(m=>!h.has(tt(m))&&h.set(tt(m),m))};return u.forEach(d),f.forEach(d),n}}const $B={animation:{"combo-collapse":b_,"combo-expand":Hk,"node-collapse":y_,"node-expand":jk,"path-in":m_,"path-out":$k,fade:Wk,translate:Gk},behavior:{"brush-select":hv,"click-select":Bg,"collapse-expand":ay,"create-edge":cy,"drag-canvas":uy,"drag-element-force":SL,"drag-element":Mv,"fix-element-size":dy,"focus-element":vy,"hover-activate":vf,"lasso-select":ML,"auto-adapt-label":Pg,"optimize-viewport-transform":py,"scroll-canvas":gy,"zoom-canvas":yy},combo:{circle:mN,rect:bN},edge:{cubic:Mu,line:ry,polyline:xv,quadratic:iy,"cubic-horizontal":ty,"cubic-radial":ey,"cubic-vertical":ny},layout:{"antv-dagre":CL.b,"combo-combined":OL.u,"compact-box":my.compactBox,"d3-force":kL.j,"force-atlas2":RL.E,circular:TL.S,concentric:AL.W,dagre:PL.V,dendrogram:my.dendrogram,fishbone:by,force:NL.y,fruchterman:LL.O,grid:IL.M,indented:my.indented,mds:DL.A,mindmap:my.mindmap,radial:BL.D,random:FL._,snake:xy},node:{circle:Su,diamond:ER,ellipse:Gg,hexagon:CR,html:mv,image:Kg,rect:gN,star:yN,donut:Zg,triangle:qg},palette:{spectral:jL,tableau:$L,oranges:HL,greens:VL,blues:UL},theme:{dark:K4,light:q4},plugin:{"bubble-sets":ky,"edge-bundling":Ry,"edge-filter-lens":Ny,"grid-line":Dy,background:Ey,contextmenu:Py,fisheye:Ly,fullscreen:Iy,history:By,hull:Wy,legend:Vy,minimap:Uy,snapline:Yy,timebar:am,toolbar:sm,tooltip:om,watermark:lm},transform:{"arrange-draw-order":Q4,"collapse-expand-combo":J4,"collapse-expand-node":tB,"get-edge-actual-ends":DB,"map-node-size":xm,"place-radial-labels":Em,"process-parallel-edges":wm,"update-related-edges":jB},shape:{circle:ur,ellipse:vu,group:kr,html:pu,image:o2,line:pl,path:na,polygon:gl,polyline:af,rect:Pr,text:yl,label:dc,badge:hf}};function HB(){Object.entries($B).forEach(([a,n])=>{Object.entries(n).forEach(([r,s])=>{fO(a,r,s)})})}HB();const z7={css:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.css",js:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.js"};var VB=K(73935),zO=K.t(VB,2),Sm=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})};const ZO=Object.assign({},zO),{version:UB,render:YB,unmountComponentAtNode:XB}=ZO;let jv;function WO(){return Sm(this,void 0,void 0,function*(){if(jv)return;if(Number((UB||"").split(".")[0])>=18)try{const n=yield Promise.resolve().then(K.t.bind(K,20745,19));n.createRoot&&(jv=n.createRoot)}catch(n){}})}function GO(a){const{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:n}=ZO;n&&typeof n=="object"&&(n.usingClientEntryPoint=a)}const _m="__rc_react_root__";function KB(a,n){GO(!0);const r=n[_m]||jv(n);GO(!1),r.render(a),n[_m]=r}function qB(a,n){YB(a,n)}function jO(a,n){return Sm(this,void 0,void 0,function*(){yield WO(),jv?KB(a,n):qB(a,n)})}function QB(a){return Sm(this,void 0,void 0,function*(){return Promise.resolve().then(()=>{var n;(n=a[_m])===null||n===void 0||n.unmount(),delete a[_m]})})}function JB(a){XB(a)}function t8(a){return Sm(this,void 0,void 0,function*(){if(yield WO(),jv)return QB(a);JB(a)})}class e8 extends mv{getKeyStyle(n){return Object.assign({},super.getKeyStyle(n))}constructor(n){super(n)}update(n){super.update(n)}connectedCallback(){super.connectedCallback();const{component:n}=this.attributes;jO(n,this.getDomElement())}attributeChangedCallback(n,r,s){super.attributeChangedCallback(n,r,s),n==="component"&&r!==s&&jO(this.attributes.component,this.getDomElement())}destroy(){t8(this.getDomElement()),super.destroy()}}class n8 extends vf{getActiveIds(n){const{model:r,graph:s}=this.context,l=n.target.id,u=s.getElementType(l),h=[l];if(u==="edge"){const f=r.getEdgeDatum(l);this.collectChainNodes(f.source,"in",h),this.collectChainNodes(f.target,"out",h)}else u==="node"&&this.collectChainNodes(l,"both",h);return s.frontElement(h),h}collectChainNodes(n,r,s){const{model:l}=this.context;l.getRelatedEdgesData(n,r).forEach(h=>{s.includes(tt(h))||s.push(tt(h)),s.includes(h.source)||(s.push(h.source),this.collectChainNodes(h.source,"in",s)),s.includes(h.target)||(s.push(h.target),this.collectChainNodes(h.target,"out",s))})}}class r8 extends vf{getActiveIds(n){const{model:r,graph:s}=this.context,l=n.target.id,u=s.getElementType(l),h=[l];if(u==="edge"){const f=r.getEdgeDatum(l);h.push(f.source,f.target)}else u==="node"&&h.push(...r.getRelatedEdgesData(l).map(tt));return s.frontElement(h),h}}class i8 extends xv{getControlPoints(n){const[r,s]=this.getEndpoints(n,!1),[l]=r,[,u]=s;return[[l,u]]}}class a8 extends es{beforeDraw(n){const{model:r}=this.context,{nodes:s,edges:l}=r.getData(),u=s.filter(f=>f.depth===1),h=u.map(f=>f.id);return l.forEach(f=>{h.includes(f.target)&&(f.style||(f.style={}),f.style.zIndex=u.length-u.findIndex(d=>d.id===f.target))}),n}}const Ym=class Ym extends es{constructor(n,r){super(n,Object.assign({},Ym.defaultOptions,r))}beforeDraw(n){const r=this.context.model.getNodeData();if(r.length===0)return n;let s=0;const l=(u,h)=>{var d;const f=r.find(v=>v.id==u);f&&(f.style||(f.style={}),f.style.color=h||this.options.colors[s++%this.options.colors.length],(d=f.children)==null||d.forEach(v=>{var p;return l(v,(p=f.style)==null?void 0:p.color)}))};return r.filter(u=>u.depth===1).forEach(u=>l(u.id)),n}};Qv(Ym,"defaultOptions",{colors:["#1783FF","#F08F56","#D580FF","#00C9C9","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]});let Iw=Ym;var _r=K(96486),kt=K(67294),Dw=function(a,n){return Dw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])},Dw(a,n)};function s8(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Dw(a,n);function r(){this.constructor=a}a.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var Ui=function(){return Ui=Object.assign||function(n){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(n[u]=r[u])}return n},Ui.apply(this,arguments)};function o8(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r}function l8(a,n,r,s){var l=arguments.length,u=l<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,r):s,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(a,n,r,s);else for(var f=a.length-1;f>=0;f--)(h=a[f])&&(u=(l<3?h(u):l>3?h(n,r,u):h(n,r))||u);return l>3&&u&&Object.defineProperty(n,r,u),u}function c8(a,n){return function(r,s){n(r,s,a)}}function Z7(a,n,r,s,l,u){function h(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var f=s.kind,d=f==="getter"?"get":f==="setter"?"set":"value",v=!n&&a?s.static?a:a.prototype:null,p=n||(v?Object.getOwnPropertyDescriptor(v,s.name):{}),g,m=!1,b=r.length-1;b>=0;b--){var E={};for(var w in s)E[w]=w==="access"?{}:s[w];for(var w in s.access)E.access[w]=s.access[w];E.addInitializer=function(M){if(m)throw new TypeError("Cannot add initializers after decoration has completed");u.push(h(M||null))};var S=(0,r[b])(f==="accessor"?{get:p.get,set:p.set}:p[d],E);if(f==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(g=h(S.get))&&(p.get=g),(g=h(S.set))&&(p.set=g),(g=h(S.init))&&l.unshift(g)}else(g=h(S))&&(f==="field"?l.unshift(g):p[d]=g)}v&&Object.defineProperty(v,s.name,p),m=!0}function W7(a,n,r){for(var s=arguments.length>2,l=0;l<n.length;l++)r=s?n[l].call(a,r):n[l].call(a);return s?r:void 0}function G7(a){return typeof a=="symbol"?a:"".concat(a)}function j7(a,n,r){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:r?"".concat(r," ",n):n})}function u8(a,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,n)}function h8(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})}function f8(a,n){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(v){return function(p){return d([v,p])}}function d(v){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(r=0)),r;)try{if(s=1,l&&(u=v[0]&2?l.return:v[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,v[1])).done)return u;switch(l=0,u&&(v=[v[0]&2,u.value]),v[0]){case 0:case 1:u=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,l=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){r.label=v[1];break}if(v[0]===6&&r.label<u[1]){r.label=u[1],u=v;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(v);break}u[2]&&r.ops.pop(),r.trys.pop();continue}v=n.call(a,r)}catch(p){v=[6,p],l=0}finally{s=u=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}var Bw=Object.create?function(a,n,r,s){s===void 0&&(s=r);var l=Object.getOwnPropertyDescriptor(n,r);(!l||("get"in l?!n.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(a,s,l)}:function(a,n,r,s){s===void 0&&(s=r),a[s]=n[r]};function d8(a,n){for(var r in a)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&Bw(n,a,r)}function Fw(a){var n=typeof Symbol=="function"&&Symbol.iterator,r=n&&a[n],s=0;if(r)return r.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&s>=a.length&&(a=void 0),{value:a&&a[s++],done:!a}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function $O(a,n){var r=typeof Symbol=="function"&&a[Symbol.iterator];if(!r)return a;var s=r.call(a),l,u=[],h;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)u.push(l.value)}catch(f){h={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(h)throw h.error}}return u}function v8(){for(var a=[],n=0;n<arguments.length;n++)a=a.concat($O(arguments[n]));return a}function p8(){for(var a=0,n=0,r=arguments.length;n<r;n++)a+=arguments[n].length;for(var s=Array(a),l=0,n=0;n<r;n++)for(var u=arguments[n],h=0,f=u.length;h<f;h++,l++)s[l]=u[h];return s}function $v(a,n,r){if(r||arguments.length===2)for(var s=0,l=n.length,u;s<l;s++)(u||!(s in n))&&(u||(u=Array.prototype.slice.call(n,0,s)),u[s]=n[s]);return a.concat(u||Array.prototype.slice.call(n))}function Hv(a){return this instanceof Hv?(this.v=a,this):new Hv(a)}function g8(a,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(a,n||[]),l,u=[];return l={},h("next"),h("throw"),h("return"),l[Symbol.asyncIterator]=function(){return this},l;function h(m){s[m]&&(l[m]=function(b){return new Promise(function(E,w){u.push([m,b,E,w])>1||f(m,b)})})}function f(m,b){try{d(s[m](b))}catch(E){g(u[0][3],E)}}function d(m){m.value instanceof Hv?Promise.resolve(m.value.v).then(v,p):g(u[0][2],m)}function v(m){f("next",m)}function p(m){f("throw",m)}function g(m,b){m(b),u.shift(),u.length&&f(u[0][0],u[0][1])}}function y8(a){var n,r;return n={},s("next"),s("throw",function(l){throw l}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(l,u){n[l]=a[l]?function(h){return(r=!r)?{value:Hv(a[l](h)),done:!1}:u?u(h):h}:u}}function m8(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=a[Symbol.asyncIterator],r;return n?n.call(a):(a=typeof Fw=="function"?Fw(a):a[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(u){r[u]=a[u]&&function(h){return new Promise(function(f,d){h=a[u](h),l(f,d,h.done,h.value)})}}function l(u,h,f,d){Promise.resolve(d).then(function(v){u({value:v,done:f})},h)}}function b8(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a}var x8=Object.create?function(a,n){Object.defineProperty(a,"default",{enumerable:!0,value:n})}:function(a,n){a.default=n};function E8(a){if(a&&a.__esModule)return a;var n={};if(a!=null)for(var r in a)r!=="default"&&Object.prototype.hasOwnProperty.call(a,r)&&Bw(n,a,r);return x8(n,a),n}function w8(a){return a&&a.__esModule?a:{default:a}}function S8(a,n,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?a!==n||!s:!n.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(a):s?s.value:n.get(a)}function _8(a,n,r,s,l){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?a!==n||!l:!n.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?l.call(a,r):l?l.value=r:n.set(a,r),r}function M8(a,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof a=="function"?n===a:a.has(n)}function C8(a,n,r){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=n[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=n[Symbol.dispose]}if(typeof s!="function")throw new TypeError("Object not disposable.");a.stack.push({value:n,dispose:s,async:r})}else r&&a.stack.push({async:!0});return n}var T8=typeof SuppressedError=="function"?SuppressedError:function(a,n,r){var s=new Error(r);return s.name="SuppressedError",s.error=a,s.suppressed=n,s};function O8(a){function n(s){a.error=a.hasError?new T8(s,a.error,"An error was suppressed during disposal."):s,a.hasError=!0}function r(){for(;a.stack.length;){var s=a.stack.pop();try{var l=s.dispose&&s.dispose.call(s.value);if(s.async)return Promise.resolve(l).then(r,function(u){return n(u),r()})}catch(u){n(u)}}if(a.hasError)throw a.error}return r()}var $7={__extends:s8,__assign:Ui,__rest:o8,__decorate:l8,__param:c8,__metadata:u8,__awaiter:h8,__generator:f8,__createBinding:Bw,__exportStar:d8,__values:Fw,__read:$O,__spread:v8,__spreadArrays:p8,__spreadArray:$v,__await:Hv,__asyncGenerator:g8,__asyncDelegator:y8,__asyncValues:m8,__makeTemplateObject:b8,__importStar:E8,__importDefault:w8,__classPrivateFieldGet:S8,__classPrivateFieldSet:_8,__classPrivateFieldIn:M8,__addDisposableResource:C8,__disposeResources:O8},A8=K(96774),k8=K.n(A8),sr="-ms-",Vv="-moz-",Mn="-webkit-",HO="comm",Mm="rule",zw="decl",H7="@page",V7="@media",P8="@import",U7="@charset",Y7="@viewport",X7="@supports",K7="@document",q7="@namespace",VO="@keyframes",Q7="@font-face",J7="@counter-style",tW="@font-feature-values",R8="@layer",eW="@scope",UO=Math.abs,Zw=String.fromCharCode,Ww=Object.assign;function N8(a,n){return fi(a,0)^45?(((n<<2^fi(a,0))<<2^fi(a,1))<<2^fi(a,2))<<2^fi(a,3):0}function YO(a){return a.trim()}function Ol(a,n){return(a=n.exec(a))?a[0]:a}function je(a,n,r){return a.replace(n,r)}function Cm(a,n,r){return a.indexOf(n,r)}function fi(a,n){return a.charCodeAt(n)|0}function Of(a,n,r){return a.slice(n,r)}function Lo(a){return a.length}function XO(a){return a.length}function Uv(a,n){return n.push(a),a}function L8(a,n){return a.map(n).join("")}function KO(a,n){return a.filter(function(r){return!Ol(r,n)})}var Tm=1,Af=1,qO=0,rs=0,yr=0,kf="";function Om(a,n,r,s,l,u,h,f){return{value:a,root:n,parent:r,type:s,props:l,children:u,line:Tm,column:Af,length:h,return:"",siblings:f}}function Sc(a,n){return Ww(Om("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},n)}function Pf(a){for(;a.root;)a=Sc(a.root,{children:[a]});Uv(a,a.siblings)}function I8(){return yr}function D8(){return yr=rs>0?fi(kf,--rs):0,Af--,yr===10&&(Af=1,Tm--),yr}function Os(){return yr=rs<qO?fi(kf,rs++):0,Af++,yr===10&&(Af=1,Tm++),yr}function Lu(){return fi(kf,rs)}function Am(){return rs}function km(a,n){return Of(kf,a,n)}function Pm(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QO(a){return Tm=Af=1,qO=Lo(kf=a),rs=0,[]}function JO(a){return kf="",a}function Rm(a){return YO(km(rs-1,Gw(a===91?a+2:a===40?a+1:a)))}function nW(a){return JO(F8(QO(a)))}function B8(a){for(;(yr=Lu())&&yr<33;)Os();return Pm(a)>2||Pm(yr)>3?"":" "}function F8(a){for(;Os();)switch(Pm(yr)){case 0:append(tA(rs-1),a);break;case 2:append(Rm(yr),a);break;default:append(from(yr),a)}return a}function z8(a,n){for(;--n&&Os()&&!(yr<48||yr>102||yr>57&&yr<65||yr>70&&yr<97););return km(a,Am()+(n<6&&Lu()==32&&Os()==32))}function Gw(a){for(;Os();)switch(yr){case a:return rs;case 34:case 39:a!==34&&a!==39&&Gw(yr);break;case 40:a===41&&Gw(a);break;case 92:Os();break}return rs}function Z8(a,n){for(;Os()&&a+yr!==57;)if(a+yr===84&&Lu()===47)break;return"/*"+km(n,rs-1)+"*"+Zw(a===47?a:Os())}function tA(a){for(;!Pm(Lu());)Os();return km(a,rs)}function Nm(a,n){for(var r="",s=0;s<a.length;s++)r+=n(a[s],s,a,n)||"";return r}function W8(a,n,r,s){switch(a.type){case R8:if(a.children.length)break;case P8:case zw:return a.return=a.return||a.value;case HO:return"";case VO:return a.return=a.value+"{"+Nm(a.children,s)+"}";case Mm:if(!Lo(a.value=a.props.join(",")))return""}return Lo(r=Nm(a.children,s))?a.return=a.value+"{"+r+"}":""}function eA(a,n,r){switch(N8(a,n)){case 5103:return Mn+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Mn+a+a;case 4789:return Vv+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return Mn+a+Vv+a+sr+a+a;case 5936:switch(fi(a,n+11)){case 114:return Mn+a+sr+je(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return Mn+a+sr+je(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return Mn+a+sr+je(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return Mn+a+sr+a+a;case 6165:return Mn+a+sr+"flex-"+a+a;case 5187:return Mn+a+je(a,/(\w+).+(:[^]+)/,Mn+"box-$1$2"+sr+"flex-$1$2")+a;case 5443:return Mn+a+sr+"flex-item-"+je(a,/flex-|-self/g,"")+(Ol(a,/flex-|baseline/)?"":sr+"grid-row-"+je(a,/flex-|-self/g,""))+a;case 4675:return Mn+a+sr+"flex-line-pack"+je(a,/align-content|flex-|-self/g,"")+a;case 5548:return Mn+a+sr+je(a,"shrink","negative")+a;case 5292:return Mn+a+sr+je(a,"basis","preferred-size")+a;case 6060:return Mn+"box-"+je(a,"-grow","")+Mn+a+sr+je(a,"grow","positive")+a;case 4554:return Mn+je(a,/([^-])(transform)/g,"$1"+Mn+"$2")+a;case 6187:return je(je(je(a,/(zoom-|grab)/,Mn+"$1"),/(image-set)/,Mn+"$1"),a,"")+a;case 5495:case 3959:return je(a,/(image-set\([^]*)/,Mn+"$1$`$1");case 4968:return je(je(a,/(.+:)(flex-)?(.*)/,Mn+"box-pack:$3"+sr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Mn+a+a;case 4200:if(!Ol(a,/flex-|baseline/))return sr+"grid-column-align"+Of(a,n)+a;break;case 2592:case 3360:return sr+je(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return n=l,Ol(s.props,/grid-\w+-end/)})?~Cm(a+(r=r[n].value),"span",0)?a:sr+je(a,"-start","")+a+sr+"grid-row-span:"+(~Cm(r,"span",0)?Ol(r,/\d+/):+Ol(r,/\d+/)-+Ol(a,/\d+/))+";":sr+je(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return Ol(s.props,/grid-\w+-start/)})?a:sr+je(je(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return je(a,/(.+)-inline(.+)/,Mn+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Lo(a)-1-n>6)switch(fi(a,n+1)){case 109:if(fi(a,n+4)!==45)break;case 102:return je(a,/(.+:)(.+)-([^]+)/,"$1"+Mn+"$2-$3$1"+Vv+(fi(a,n+3)==108?"$3":"$2-$3"))+a;case 115:return~Cm(a,"stretch",0)?eA(je(a,"stretch","fill-available"),n,r)+a:a}break;case 5152:case 5920:return je(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,u,h,f,d,v){return sr+l+":"+u+v+(h?sr+l+"-span:"+(f?d:+d-+u)+v:"")+a});case 4949:if(fi(a,n+6)===121)return je(a,":",":"+Mn)+a;break;case 6444:switch(fi(a,fi(a,14)===45?18:11)){case 120:return je(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Mn+(fi(a,14)===45?"inline-":"")+"box$3$1"+Mn+"$2$3$1"+sr+"$2box$3")+a;case 100:return je(a,":",":"+sr)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return je(a,"scroll-","scroll-snap-")+a}return a}function G8(a){var n=XO(a);return function(r,s,l,u){for(var h="",f=0;f<n;f++)h+=a[f](r,s,l,u)||"";return h}}function j8(a){return function(n){n.root||(n=n.return)&&a(n)}}function $8(a,n,r,s){if(a.length>-1&&!a.return)switch(a.type){case zw:a.return=eA(a.value,a.length,r);return;case VO:return Nm([Sc(a,{value:je(a.value,"@","@"+Mn)})],s);case Mm:if(a.length)return L8(r=a.props,function(l){switch(Ol(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Pf(Sc(a,{props:[je(l,/:(read-\w+)/,":"+Vv+"$1")]})),Pf(Sc(a,{props:[l]})),Ww(a,{props:KO(r,s)});break;case"::placeholder":Pf(Sc(a,{props:[je(l,/:(plac\w+)/,":"+Mn+"input-$1")]})),Pf(Sc(a,{props:[je(l,/:(plac\w+)/,":"+Vv+"$1")]})),Pf(Sc(a,{props:[je(l,/:(plac\w+)/,sr+"input-$1")]})),Pf(Sc(a,{props:[l]})),Ww(a,{props:KO(r,s)});break}return""})}}function rW(a){switch(a.type){case RULESET:a.props=a.props.map(function(n){return combine(tokenize(n),function(r,s,l){switch(charat(r,0)){case 12:return substr(r,1,strlen(r));case 0:case 40:case 43:case 62:case 126:return r;case 58:l[++s]==="global"&&(l[s]="",l[++s]="\f"+substr(l[s],s=1,-1));case 32:return s===1?"":r;default:switch(s){case 0:return a=r,sizeof(l)>1?"":r;case(s=sizeof(l)-1):case 2:return s===2?r+a+a:r+a;default:return r}}})})}}function H8(a){return JO(Lm("",null,null,null,[""],a=QO(a),0,[0],a))}function Lm(a,n,r,s,l,u,h,f,d){for(var v=0,p=0,g=h,m=0,b=0,E=0,w=1,S=1,M=1,C=0,T="",k=l,O=u,A=s,R=T;S;)switch(E=C,C=Os()){case 40:if(E!=108&&fi(R,g-1)==58){Cm(R+=je(Rm(C),"&","&\f"),"&\f",UO(v?f[v-1]:0))!=-1&&(M=-1);break}case 34:case 39:case 91:R+=Rm(C);break;case 9:case 10:case 13:case 32:R+=B8(E);break;case 92:R+=z8(Am()-1,7);continue;case 47:switch(Lu()){case 42:case 47:Uv(V8(Z8(Os(),Am()),n,r,d),d);break;default:R+="/"}break;case 123*w:f[v++]=Lo(R)*M;case 125*w:case 59:case 0:switch(C){case 0:case 125:S=0;case 59+p:M==-1&&(R=je(R,/\f/g,"")),b>0&&Lo(R)-g&&Uv(b>32?rA(R+";",s,r,g-1,d):rA(je(R," ","")+";",s,r,g-2,d),d);break;case 59:R+=";";default:if(Uv(A=nA(R,n,r,v,p,l,f,T,k=[],O=[],g,u),u),C===123)if(p===0)Lm(R,n,A,A,k,u,g,f,O);else switch(m===99&&fi(R,3)===110?100:m){case 100:case 108:case 109:case 115:Lm(a,A,A,s&&Uv(nA(a,A,A,0,0,l,f,T,l,k=[],g,O),O),l,O,g,f,s?k:O);break;default:Lm(R,A,A,A,[""],O,0,f,O)}}v=p=b=0,w=M=1,T=R="",g=h;break;case 58:g=1+Lo(R),b=E;default:if(w<1){if(C==123)--w;else if(C==125&&w++==0&&D8()==125)continue}switch(R+=Zw(C),C*w){case 38:M=p>0?1:(R+="\f",-1);break;case 44:f[v++]=(Lo(R)-1)*M,M=1;break;case 64:Lu()===45&&(R+=Rm(Os())),m=Lu(),p=g=Lo(T=R+=tA(Am())),C++;break;case 45:E===45&&Lo(R)==2&&(w=0)}}return u}function nA(a,n,r,s,l,u,h,f,d,v,p,g){for(var m=l-1,b=l===0?u:[""],E=XO(b),w=0,S=0,M=0;w<s;++w)for(var C=0,T=Of(a,m+1,m=UO(S=h[w])),k=a;C<E;++C)(k=YO(S>0?b[C]+" "+T:je(T,/&\f/g,b[C])))&&(d[M++]=k);return Om(a,n,r,l===0?Mm:f,d,v,p,g)}function V8(a,n,r,s){return Om(a,n,r,HO,Zw(I8()),Of(a,2,-2),0,s)}function rA(a,n,r,s,l){return Om(a,n,r,zw,Of(a,0,s),Of(a,s+1,-1),s,l)}var U8={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jw=K(34155),Al=typeof jw!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}!==void 0&&({NODE_ENV:"production",PUBLIC_PATH:"/"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_PATH:"/"}.SC_ATTR)||"data-styled",iA="active",Im="data-styled-version",Rf="6.1.19",$w=`/*!sc*/
`,Dm=typeof window!="undefined"&&typeof document!="undefined",Y8=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof jw!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}!==void 0&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REACT_APP_SC_DISABLE_SPEEDY!==""?{NODE_ENV:"production",PUBLIC_PATH:"/"}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.REACT_APP_SC_DISABLE_SPEEDY:typeof jw!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}!==void 0&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.SC_DISABLE_SPEEDY!==void 0&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.SC_DISABLE_SPEEDY!==""&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.SC_DISABLE_SPEEDY!=="false"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.SC_DISABLE_SPEEDY),X8={},iW=/invalid hook call/i,aW=new Set,sW=function(a,n){if(0)var r,s,l,u},Bm=Object.freeze([]),Nf=Object.freeze({});function Hw(a,n,r){return r===void 0&&(r=Nf),a.theme!==r.theme&&a.theme||n||r.theme}var aA=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),K8=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,q8=/(^-|-$)/g;function sA(a){return a.replace(K8,"-").replace(q8,"")}var Q8=/(a)(d)/gi,Fm=52,oA=function(a){return String.fromCharCode(a+(a>25?39:97))};function Vw(a){var n,r="";for(n=Math.abs(a);n>Fm;n=n/Fm|0)r=oA(n%Fm)+r;return(oA(n%Fm)+r).replace(Q8,"$1-$2")}var Uw,lA=5381,Lf=function(a,n){for(var r=n.length;r;)a=33*a^n.charCodeAt(--r);return a},cA=function(a){return Lf(lA,a)};function Yw(a){return Vw(cA(a)>>>0)}function uA(a){return a.displayName||a.name||"Component"}function Xw(a){return typeof a=="string"&&!0}var hA=typeof Symbol=="function"&&Symbol.for,fA=hA?Symbol.for("react.memo"):60115,J8=hA?Symbol.for("react.forward_ref"):60112,tF={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},eF={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},nF=((Uw={})[J8]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Uw[fA]=dA,Uw);function vA(a){return("type"in(n=a)&&n.type.$$typeof)===fA?dA:"$$typeof"in a?nF[a.$$typeof]:tF;var n}var rF=Object.defineProperty,iF=Object.getOwnPropertyNames,pA=Object.getOwnPropertySymbols,aF=Object.getOwnPropertyDescriptor,sF=Object.getPrototypeOf,gA=Object.prototype;function Kw(a,n,r){if(typeof n!="string"){if(gA){var s=sF(n);s&&s!==gA&&Kw(a,s,r)}var l=iF(n);pA&&(l=l.concat(pA(n)));for(var u=vA(a),h=vA(n),f=0;f<l.length;++f){var d=l[f];if(!(d in eF||r&&r[d]||h&&d in h||u&&d in u)){var v=aF(n,d);try{rF(a,d,v)}catch(p){}}}}return a}function Iu(a){return typeof a=="function"}function qw(a){return typeof a=="object"&&"styledComponentId"in a}function Du(a,n){return a&&n?"".concat(a," ").concat(n):a||n||""}function Yv(a,n){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=n?n+a[s]:a[s];return r}function Xv(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function Qw(a,n,r){if(r===void 0&&(r=!1),!r&&!Xv(a)&&!Array.isArray(a))return n;if(Array.isArray(n))for(var s=0;s<n.length;s++)a[s]=Qw(a[s],n[s]);else if(Xv(n))for(var s in n)a[s]=Qw(a[s],n[s]);return a}function Jw(a,n){Object.defineProperty(a,"toString",{value:n})}var oW={};function lW(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];for(var r=a[0],s=[],l=1,u=a.length;l<u;l+=1)s.push(a[l]);return s.forEach(function(h){r=r.replace(/%[a-z]/,h)}),r}function As(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(n.length>0?" Args: ".concat(n.join(", ")):""))}var oF=function(){function a(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}return a.prototype.indexOfGroup=function(n){for(var r=0,s=0;s<n;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,u=l;n>=u;)if((u<<=1)<0)throw As(16,"".concat(n));this.groupSizes=new Uint32Array(u),this.groupSizes.set(s),this.length=u;for(var h=l;h<u;h++)this.groupSizes[h]=0}for(var f=this.indexOfGroup(n+1),d=(h=0,r.length);h<d;h++)this.tag.insertRule(f,r[h])&&(this.groupSizes[n]++,f++)},a.prototype.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],s=this.indexOfGroup(n),l=s+r;this.groupSizes[n]=0;for(var u=s;u<l;u++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var s=this.groupSizes[n],l=this.indexOfGroup(n),u=l+s,h=l;h<u;h++)r+="".concat(this.tag.getRule(h)).concat($w);return r},a}(),cW=null,zm=new Map,Zm=new Map,Wm=1,Gm=function(a){if(zm.has(a))return zm.get(a);for(;Zm.has(Wm);)Wm++;var n=Wm++;return zm.set(a,n),Zm.set(n,a),n},lF=function(a,n){Wm=n+1,zm.set(a,n),Zm.set(n,a)},cF="style[".concat(Al,"][").concat(Im,'="').concat(Rf,'"]'),uF=new RegExp("^".concat(Al,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),hF=function(a,n,r){for(var s,l=r.split(","),u=0,h=l.length;u<h;u++)(s=l[u])&&a.registerName(n,s)},fF=function(a,n){for(var r,s=((r=n.textContent)!==null&&r!==void 0?r:"").split($w),l=[],u=0,h=s.length;u<h;u++){var f=s[u].trim();if(f){var d=f.match(uF);if(d){var v=0|parseInt(d[1],10),p=d[2];v!==0&&(lF(p,v),hF(a,p,d[3]),a.getTag().insertRules(v,l)),l.length=0}else l.push(f)}}},yA=function(a){for(var n=document.querySelectorAll(cF),r=0,s=n.length;r<s;r++){var l=n[r];l&&l.getAttribute(Al)!==iA&&(fF(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function tS(){return K.nc}var mA=function(a){var n=document.head,r=a||n,s=document.createElement("style"),l=function(f){var d=Array.from(f.querySelectorAll("style[".concat(Al,"]")));return d[d.length-1]}(r),u=l!==void 0?l.nextSibling:null;s.setAttribute(Al,iA),s.setAttribute(Im,Rf);var h=tS();return h&&s.setAttribute("nonce",h),r.insertBefore(s,u),s},dF=function(){function a(n){this.element=mA(n),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,u=s.length;l<u;l++){var h=s[l];if(h.ownerNode===r)return h}throw As(17)}(this.element),this.length=0}return a.prototype.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch(s){return!1}},a.prototype.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},a.prototype.getRule=function(n){var r=this.sheet.cssRules[n];return r&&r.cssText?r.cssText:""},a}(),vF=function(){function a(n){this.element=mA(n),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(n,r){if(n<=this.length&&n>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[n]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},a.prototype.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},a}(),pF=function(){function a(n){this.rules=[],this.length=0}return a.prototype.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},a.prototype.deleteRule=function(n){this.rules.splice(n,1),this.length--},a.prototype.getRule=function(n){return n<this.length?this.rules[n]:""},a}(),bA=Dm,gF={isServer:!Dm,useCSSOMInjection:!Y8},If=function(){function a(n,r,s){n===void 0&&(n=Nf),r===void 0&&(r={});var l=this;this.options=Ui(Ui({},gF),n),this.gs=r,this.names=new Map(s),this.server=!!n.isServer,!this.server&&Dm&&bA&&(bA=!1,yA(this)),Jw(this,function(){return function(u){for(var h=u.getTag(),f=h.length,d="",v=function(g){var m=function(M){return Zm.get(M)}(g);if(m===void 0)return"continue";var b=u.names.get(m),E=h.getGroup(g);if(b===void 0||!b.size||E.length===0)return"continue";var w="".concat(Al,".g").concat(g,'[id="').concat(m,'"]'),S="";b!==void 0&&b.forEach(function(M){M.length>0&&(S+="".concat(M,","))}),d+="".concat(E).concat(w,'{content:"').concat(S,'"}').concat($w)},p=0;p<f;p++)v(p);return d}(l)})}return a.registerId=function(n){return Gm(n)},a.prototype.rehydrate=function(){!this.server&&Dm&&yA(this)},a.prototype.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new a(Ui(Ui({},this.options),n),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(n=function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new pF(l):s?new dF(l):new vF(l)}(this.options),new oF(n)));var n},a.prototype.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},a.prototype.registerName=function(n,r){if(Gm(n),this.names.has(n))this.names.get(n).add(r);else{var s=new Set;s.add(r),this.names.set(n,s)}},a.prototype.insertRules=function(n,r,s){this.registerName(n,r),this.getTag().insertRules(Gm(n),s)},a.prototype.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},a.prototype.clearRules=function(n){this.getTag().clearGroup(Gm(n)),this.clearNames(n)},a.prototype.clearTag=function(){this.tag=void 0},a}(),yF=/&/g,mF=/^\s*\/\/.*$/gm;function xA(a,n){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(n," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(n," ")),r.props=r.props.map(function(s){return"".concat(n," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=xA(r.children,n)),r})}function EA(a){var n,r,s,l=a===void 0?Nf:a,u=l.options,h=u===void 0?Nf:u,f=l.plugins,d=f===void 0?Bm:f,v=function(m,b,E){return E.startsWith(r)&&E.endsWith(r)&&E.replaceAll(r,"").length>0?".".concat(n):m},p=d.slice();p.push(function(m){m.type===Mm&&m.value.includes("&")&&(m.props[0]=m.props[0].replace(yF,r).replace(s,v))}),h.prefix&&p.push($8),p.push(W8);var g=function(m,b,E,w){b===void 0&&(b=""),E===void 0&&(E=""),w===void 0&&(w="&"),n=w,r=b,s=new RegExp("\\".concat(r,"\\b"),"g");var S=m.replace(mF,""),M=H8(E||b?"".concat(E," ").concat(b," { ").concat(S," }"):S);h.namespace&&(M=xA(M,h.namespace));var C=[];return Nm(M,G8(p.concat(j8(function(T){return C.push(T)})))),C};return g.hash=d.length?d.reduce(function(m,b){return b.name||As(15),Lf(m,b.name)},lA).toString():"",g}var wA=new If,eS=EA(),nS=kt.createContext({shouldForwardProp:void 0,styleSheet:wA,stylis:eS}),uW=nS.Consumer,bF=kt.createContext(void 0);function jm(){return(0,kt.useContext)(nS)}function xF(a){var n=(0,kt.useState)(a.stylisPlugins),r=n[0],s=n[1],l=jm().styleSheet,u=(0,kt.useMemo)(function(){var d=l;return a.sheet?d=a.sheet:a.target&&(d=d.reconstructWithOptions({target:a.target},!1)),a.disableCSSOMInjection&&(d=d.reconstructWithOptions({useCSSOMInjection:!1})),d},[a.disableCSSOMInjection,a.sheet,a.target,l]),h=(0,kt.useMemo)(function(){return EA({options:{namespace:a.namespace,prefix:a.enableVendorPrefixes},plugins:r})},[a.enableVendorPrefixes,a.namespace,r]);(0,kt.useEffect)(function(){k8()(r,a.stylisPlugins)||s(a.stylisPlugins)},[a.stylisPlugins]);var f=(0,kt.useMemo)(function(){return{shouldForwardProp:a.shouldForwardProp,styleSheet:u,stylis:h}},[a.shouldForwardProp,u,h]);return kt.createElement(nS.Provider,{value:f},kt.createElement(bF.Provider,{value:h},a.children))}var SA=function(){function a(n,r){var s=this;this.inject=function(l,u){u===void 0&&(u=eS);var h=s.name+u.hash;l.hasNameForId(s.id,h)||l.insertRules(s.id,h,u(s.rules,h,"@keyframes"))},this.name=n,this.id="sc-keyframes-".concat(n),this.rules=r,Jw(this,function(){throw As(12,String(s.name))})}return a.prototype.getName=function(n){return n===void 0&&(n=eS),this.name+n.hash},a}(),EF=function(a){return a>="A"&&a<="Z"};function _A(a){for(var n="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;EF(s)?n+="-"+s.toLowerCase():n+=s}return n.startsWith("ms-")?"-"+n:n}var MA=function(a){return a==null||a===!1||a===""},CA=function(a){var n,r,s=[];for(var l in a){var u=a[l];a.hasOwnProperty(l)&&!MA(u)&&(Array.isArray(u)&&u.isCss||Iu(u)?s.push("".concat(_A(l),":"),u,";"):Xv(u)?s.push.apply(s,$v($v(["".concat(l," {")],CA(u),!1),["}"],!1)):s.push("".concat(_A(l),": ").concat((n=l,(r=u)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||n in U8||n.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function _c(a,n,r,s){if(MA(a))return[];if(qw(a))return[".".concat(a.styledComponentId)];if(Iu(a)){if(!Iu(u=a)||u.prototype&&u.prototype.isReactComponent||!n)return[a];var l=a(n);return _c(l,n,r,s)}var u;return a instanceof SA?r?(a.inject(r,s),[a.getName(s)]):[a]:Xv(a)?CA(a):Array.isArray(a)?Array.prototype.concat.apply(Bm,a.map(function(h){return _c(h,n,r,s)})):[a.toString()]}function TA(a){for(var n=0;n<a.length;n+=1){var r=a[n];if(Iu(r)&&!qw(r))return!1}return!0}var wF=cA(Rf),SF=function(){function a(n,r,s){this.rules=n,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&TA(n),this.componentId=r,this.baseHash=Lf(wF,r),this.baseStyle=s,If.registerId(r)}return a.prototype.generateAndInjectStyles=function(n,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(n,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=Du(l,this.staticRulesId);else{var u=Yv(_c(this.rules,n,r,s)),h=Vw(Lf(this.baseHash,u)>>>0);if(!r.hasNameForId(this.componentId,h)){var f=s(u,".".concat(h),void 0,this.componentId);r.insertRules(this.componentId,h,f)}l=Du(l,h),this.staticRulesId=h}else{for(var d=Lf(this.baseHash,s.hash),v="",p=0;p<this.rules.length;p++){var g=this.rules[p];if(typeof g=="string")v+=g;else if(g){var m=Yv(_c(g,n,r,s));d=Lf(d,m+p),v+=m}}if(v){var b=Vw(d>>>0);r.hasNameForId(this.componentId,b)||r.insertRules(this.componentId,b,s(v,".".concat(b),void 0,this.componentId)),l=Du(l,b)}}return l},a}(),Bu=kt.createContext(void 0),hW=Bu.Consumer;function fW(){var a=c(Bu);if(!a)throw As(18);return a}function dW(a){var n=o.useContext(Bu),r=i(function(){return function(s,l){if(!s)throw As(14);if(Iu(s)){var u=s(l);return u}if(Array.isArray(s)||typeof s!="object")throw As(8);return l?t(t({},l),s):s}(a.theme,n)},[a.theme,n]);return a.children?o.createElement(Bu.Provider,{value:r},a.children):null}var rS={},vW=new Set;function _F(a,n,r){var s=qw(a),l=a,u=!Xw(a),h=n.attrs,f=h===void 0?Bm:h,d=n.componentId,v=d===void 0?function(k,O){var A=typeof k!="string"?"sc":sA(k);rS[A]=(rS[A]||0)+1;var R="".concat(A,"-").concat(Yw(Rf+A+rS[A]));return O?"".concat(O,"-").concat(R):R}(n.displayName,n.parentComponentId):d,p=n.displayName,g=p===void 0?function(k){return Xw(k)?"styled.".concat(k):"Styled(".concat(uA(k),")")}(a):p,m=n.displayName&&n.componentId?"".concat(sA(n.displayName),"-").concat(n.componentId):n.componentId||v,b=s&&l.attrs?l.attrs.concat(f).filter(Boolean):f,E=n.shouldForwardProp;if(s&&l.shouldForwardProp){var w=l.shouldForwardProp;if(n.shouldForwardProp){var S=n.shouldForwardProp;E=function(k,O){return w(k,O)&&S(k,O)}}else E=w}var M=new SF(r,m,s?l.componentStyle:void 0);function C(k,O){return function(A,R,L){var D=A.attrs,z=A.componentStyle,W=A.defaultProps,G=A.foldedComponentIds,Y=A.styledComponentId,q=A.target,rt=kt.useContext(Bu),yt=jm(),st=A.shouldForwardProp||yt.shouldForwardProp,mt=Hw(R,rt,W)||Nf,at=function(te,we,cn){for(var $e,qe=Ui(Ui({},we),{className:void 0,theme:cn}),Xe=0;Xe<te.length;Xe+=1){var Ir=Iu($e=te[Xe])?$e(qe):$e;for(var Ze in Ir)qe[Ze]=Ze==="className"?Du(qe[Ze],Ir[Ze]):Ze==="style"?Ui(Ui({},qe[Ze]),Ir[Ze]):Ir[Ze]}return we.className&&(qe.className=Du(qe.className,we.className)),qe}(D,R,mt),Et=at.as||q,It={};for(var Gt in at)at[Gt]===void 0||Gt[0]==="$"||Gt==="as"||Gt==="theme"&&at.theme===mt||(Gt==="forwardedAs"?It.as=at.forwardedAs:st&&!st(Gt,Et)||(It[Gt]=at[Gt]));var Jt=function(te,we){var cn=jm(),$e=te.generateAndInjectStyles(we,cn.styleSheet,cn.stylis);return $e}(z,at),Re=Du(G,Y);return Jt&&(Re+=" "+Jt),at.className&&(Re+=" "+at.className),It[Xw(Et)&&!aA.has(Et)?"class":"className"]=Re,L&&(It.ref=L),(0,kt.createElement)(Et,It)}(T,k,O)}C.displayName=g;var T=kt.forwardRef(C);return T.attrs=b,T.componentStyle=M,T.displayName=g,T.shouldForwardProp=E,T.foldedComponentIds=s?Du(l.foldedComponentIds,l.styledComponentId):"",T.styledComponentId=m,T.target=s?l.target:a,Object.defineProperty(T,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(k){this._foldedDefaultProps=s?function(O){for(var A=[],R=1;R<arguments.length;R++)A[R-1]=arguments[R];for(var L=0,D=A;L<D.length;L++)Qw(O,D[L],!0);return O}({},l.defaultProps,k):k}}),Jw(T,function(){return".".concat(T.styledComponentId)}),u&&Kw(T,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),T}function OA(a,n){for(var r=[a[0]],s=0,l=n.length;s<l;s+=1)r.push(n[s],a[s+1]);return r}var AA=function(a){return Object.assign(a,{isCss:!0})};function kl(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Iu(a)||Xv(a))return AA(_c(OA(Bm,$v([a],n,!0))));var s=a;return n.length===0&&s.length===1&&typeof s[0]=="string"?_c(s):AA(_c(OA(s,n)))}function iS(a,n,r){if(r===void 0&&(r=Nf),!n)throw As(1,n);var s=function(l){for(var u=[],h=1;h<arguments.length;h++)u[h-1]=arguments[h];return a(n,r,kl.apply(void 0,$v([l],u,!1)))};return s.attrs=function(l){return iS(a,n,Ui(Ui({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return iS(a,n,Ui(Ui({},r),l))},s}var kA=function(a){return iS(_F,a)},Fu=kA;aA.forEach(function(a){Fu[a]=kA(a)});var MF=function(){function a(n,r){this.rules=n,this.componentId=r,this.isStatic=TA(n),If.registerId(this.componentId+1)}return a.prototype.createStyles=function(n,r,s,l){var u=l(Yv(_c(this.rules,r,s,l)),""),h=this.componentId+n;s.insertRules(h,h,u)},a.prototype.removeStyles=function(n,r){r.clearRules(this.componentId+n)},a.prototype.renderStyles=function(n,r,s,l){n>2&&If.registerId(this.componentId+n),this.removeStyles(n,s),this.createStyles(n,r,s,l)},a}();function pW(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var s=kl.apply(void 0,e([a],n,!1)),l="sc-global-".concat(Yw(JSON.stringify(s))),u=new MF(s,l),h=function(d){var v=jm(),p=o.useContext(Bu),g=o.useRef(v.styleSheet.allocateGSInstance(l)).current;return v.styleSheet.server&&f(g,d,v.styleSheet,p,v.stylis),o.useLayoutEffect(function(){if(!v.styleSheet.server)return f(g,d,v.styleSheet,p,v.stylis),function(){return u.removeStyles(g,v.styleSheet)}},[g,d,v.styleSheet,p,v.stylis]),null};function f(d,v,p,g,m){if(u.isStatic)u.renderStyles(d,X8,p,m);else{var b=t(t({},v),{theme:Hw(v,g,h.defaultProps)});u.renderStyles(d,b,p,m)}}return o.memo(h)}function gW(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var s=Yv(kl.apply(void 0,e([a],n,!1))),l=Yw(s);return new SA(l,s)}function yW(a){var n=o.forwardRef(function(r,s){var l=Hw(r,o.useContext(Bu),a.defaultProps);return o.createElement(a,t({},r,{theme:l,ref:s}))});return n.displayName="WithTheme(".concat(uA(a),")"),Kw(n,a)}var mW=function(){function a(){var n=this;this._emitSheetCSS=function(){var r=n.instance.toString();if(!r)return"";var s=tS(),l=Yv([s&&'nonce="'.concat(s,'"'),"".concat(Al,'="true"'),"".concat(Im,'="').concat(Rf,'"')].filter(Boolean)," ");return"<style ".concat(l,">").concat(r,"</style>")},this.getStyleTags=function(){if(n.sealed)throw As(2);return n._emitSheetCSS()},this.getStyleElement=function(){var r;if(n.sealed)throw As(2);var s=n.instance.toString();if(!s)return[];var l=((r={})[Al]="",r[Im]=Rf,r.dangerouslySetInnerHTML={__html:s},r),u=tS();return u&&(l.nonce=u),[kt.createElement("style",Ui({},l,{key:"sc-0-0"}))]},this.seal=function(){n.sealed=!0},this.instance=new If({isServer:!0}),this.sealed=!1}return a.prototype.collectStyles=function(n){if(this.sealed)throw As(2);return kt.createElement(xF,{sheet:this.instance},n)},a.prototype.interleaveWithNodeStream=function(n){throw As(3)},a}(),bW={StyleSheet:If,mainSheet:wA},xW="__sc-".concat(Al,"__");const CF=Fu.div`
  ${({$placement:a})=>{switch(a){case"top":return"transform: translate(-50%, -100%); flex-direction: column-reverse;";case"right":return"transform: translate(0, -50%);";case"left":return"transform: translate(-100%, -50%); flex-direction: row-reverse;";default:return"transform: translate(-50%, 0); flex-direction: column;"}}}

  .arrow-count-icon-bar {
    ${({$placement:a})=>a==="top"||a==="bottom"?"width: 3px; height: 8px; margin: 0 7px;":"width: 8px; height: 3px; margin: 7px 0;"}
    background-color: ${({$color:a})=>a};
  }

  .arrow-count-icon-circle {
    width: 16px;
    height: 16px;
    color: #fff;
    font-weight: 600;
    font-size: 10px;
    line-height: ${({$isCollapsed:a})=>a?"16px":"14px"};
    text-align: center;
    background-color: ${({$color:a})=>a};
    border-radius: 50%;
  }

  .arrow-count-icon-circle-arrow {
    width: 16px;
    height: 16px;
    transform: ${({$isCollapsed:a,$placement:n})=>{if(a)return"none";switch(n){case"top":return"translateY(1px) rotate(-90deg)";case"right":return"translateX(-1px) rotate(0deg)";case"left":return"translateX(1px) rotate(180deg)";default:return"translateY(-1px) rotate(90deg)"}}};
  }

  display: ${({$isCollapsed:a})=>a?"flex":"none"};

  .collapsible-node-wrapper:hover & {
    display: flex;
  }
`,TF=a=>{var p;const{className:n,style:r,graph:s,data:l,isCollapsed:u,countType:h="descendant",placement:f="bottom"}=a,d=((p=s.getNodeData(l.id).style)==null?void 0:p.color)||"#99ADD1",v=(h==="descendant"?s.getDescendantsData(l.id):s.getChildrenData(l.id)).length;return kt.createElement(CF,{$color:d,$isCollapsed:u,$placement:f,className:`arrow-count-icon ${u?"arrow-count-icon-collapsed":""} ${n||""}`,style:r},kt.createElement("div",{className:"arrow-count-icon-bar"}),kt.createElement("div",{className:"arrow-count-icon-circle"},u?v:kt.createElement("div",{className:"arrow-count-icon-circle-arrow"},kt.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},kt.createElement("path",{d:"M11,4 L5.5,8 L11,12",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})))))},OF=Fu.div`
  height: 16px;
  width: 16px;
  transform: translate(-50%, -50%);
  background: #fff;
  border-radius: 50%;
  border: 2px solid #99add1;
  color: #99add1;
  font-weight: 800;
  line-height: 14px;
  text-align: center;
  box-sizing: content-box;
`,AF=a=>{const{isCollapsed:n,style:r,className:s}=a;return kt.createElement(OF,{className:s,style:r},n?"+":"-")},kF=Fu.div`
  height: inherit;
  width: inherit;
  border-radius: 8px;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.1);
  position: relative;
  border: none;
  background-color: #fff;
  box-sizing: content-box;

  ${a=>a.$isActive&&kl`
      transform: translate(-3px, -3px);
      border: 2px solid #1783ff;
    `}

  .org-chart-node-line {
    width: 100%;
    height: 6px;
    background-color: ${a=>a.$color};
    border-radius: 8px 8px 0 0;
  }

  .org-chart-node-content {
    height: calc(100% - 6px);
    margin: 0 16px 3px;
    display: flex;
    align-items: center;

    &-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 16px;
      background-color: ${a=>a.$color};
      font-weight: 600;
      font-size: 18px;
      text-align: center;
      line-height: 40px;
      color: #fff;
    }

    &-detail {
      width: calc(100% - 56px);
    }

    &-name {
      color: #242424;
      font-weight: 600;
      font-size: 18px;
      margin-bottom: 5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    &-post {
      color: #616161;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,PF=a=>{const{name:n,position:r,status:s="online",isActive:l,className:u,style:h}=a,f={online:"#1783FF",busy:"#00C9C9",offline:"#F08F56"};return kt.createElement(kF,{$color:f[s],$isActive:l,className:u,style:h},kt.createElement("div",{className:"org-chart-node-line"}),kt.createElement("div",{className:"org-chart-node-content"},kt.createElement("div",{className:"org-chart-node-content-avatar"},n.slice(0,1)),kt.createElement("div",{className:"org-chart-node-content-detail"},kt.createElement("div",{className:"org-chart-node-content-name"},n),r&&kt.createElement("div",{className:"org-chart-node-content-post"},r))))};var aS=function(){return aS=Object.assign||function(a){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(a[l]=n[l])}return a},aS.apply(this,arguments)},PA=function(a,n,r,s){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function f(p){try{v(s.next(p))}catch(g){h(g)}}function d(p){try{v(s.throw(p))}catch(g){h(g)}}function v(p){p.done?u(p.value):l(p.value).then(f,d)}v((s=s.apply(a,n||[])).next())})},RA=function(a,n){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=f(0),h.throw=f(1),h.return=f(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(v){return function(p){return d([v,p])}}function d(v){if(s)throw new TypeError("Generator is already executing.");for(;h&&(h=0,v[0]&&(r=0)),r;)try{if(s=1,l&&(u=v[0]&2?l.return:v[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,v[1])).done)return u;switch(l=0,u&&(v=[v[0]&2,u.value]),v[0]){case 0:case 1:u=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,l=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){r.label=v[1];break}if(v[0]===6&&r.label<u[1]){r.label=u[1],u=v;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(v);break}u[2]&&r.ops.pop(),r.trys.pop();continue}v=n.call(a,r)}catch(p){v=[6,p],l=0}finally{s=u=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Kv=aS({},zO),RF=Kv.version,NF=Kv.render,LF=Kv.unmountComponentAtNode,$m;try{var IF=Number((RF||"").split(".")[0]);IF>=18&&($m=Kv.createRoot)}catch(a){}function NA(a){var n=Kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;n&&typeof n=="object"&&(n.usingClientEntryPoint=a)}var Hm="__rc_react_root__";function DF(a,n){NA(!0);var r=n[Hm]||$m(n);NA(!1),r.render(a),n[Hm]=r}function BF(a,n){NF(a,n)}function EW(a,n){}function wW(a,n){if($m){DF(a,n);return}BF(a,n)}function FF(a){return PA(this,void 0,void 0,function(){return RA(this,function(n){return[2,Promise.resolve().then(function(){var r;(r=a[Hm])===null||r===void 0||r.unmount(),delete a[Hm]})]})})}function zF(a){LF(a)}function SW(a){}function _W(a){return PA(this,void 0,void 0,function(){return RA(this,function(n){return $m!==void 0?[2,FF(a)]:(zF(a),[2])})})}var Vm=new Map;typeof document!="undefined"&&Vm.set("tooltip",document.createElement("div"));var MW=function(a,n){n===void 0&&(n=!1);var r=null;if(n)r=Vm.get("tooltip");else if(r=document.createElement("div"),a!=null&&a.key){var s=Vm.get(a.key);s?r=s:Vm.set(a.key,r)}return render(a,r),r},ZF=function(a){if(typeof document=="undefined")return"loading";var n=a.attachShadow({mode:"open"}),r=document.createElement("div"),s=document.createElement("style");s.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,r.classList.add("loading"),r.innerHTML="<div></div><div></div><div></div><div></div>",n.appendChild(s),n.appendChild(r)},WF=function(a){var n=a.loadingTemplate,r=a.theme,s=r===void 0?"light":r,l=kt.useRef(null);kt.useEffect(function(){!n&&l.current&&ZF(l.current)},[]);var u=function(){return n||kt.createElement("div",{ref:l})};return kt.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:s==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},u())},GF=function(){var a=function(n,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(s[u]=l[u])},a(n,r)};return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");a(n,r);function s(){this.constructor=n}n.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),jF=function(a){GF(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.state={hasError:!1},r.renderError=function(s){var l=r.props.errorTemplate;switch(s){default:return typeof l=="function"?l(s):l||kt.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",s.message)}},r}return n.getDerivedStateFromError=function(r){return{hasError:!0,error:r}},n.getDerivedStateFromProps=function(r,s){return s.children!==r.children?{children:r.children,hasError:!1,error:void 0}:null},n.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):kt.createElement(kt.Fragment,null,this.props.children)},n}(kt.Component),sS,$F=function(){return sS||(sS=document.createElement("canvas").getContext("2d")),sS},HF=function(a,n,r){if(r||arguments.length===2)for(var s=0,l=n.length,u;s<l;s++)(u||!(s in n))&&(u||(u=Array.prototype.slice.call(n,0,s)),u[s]=n[s]);return a.concat(u||Array.prototype.slice.call(n))},LA=(0,_r.memoize)(function(a,n){n===void 0&&(n={});var r=n.fontSize,s=n.fontFamily,l=s===void 0?"sans-serif":s,u=n.fontWeight,h=n.fontStyle,f=n.fontVariant,d=$F();return d.font=[h,u,f,"".concat(r,"px"),l].join(" "),d.measureText((0,_r.isString)(a)?a:"")},function(a,n){return n===void 0&&(n={}),HF([a],(0,_r.values)(n),!0).join("")}),IA=function(a,n){return n===void 0&&(n={}),LA(a,n).width},VF=function(a,n){n===void 0&&(n={});var r=LA(a,n);return r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};function UF(a,n){let r=0,s=0,l=0;return a.length===4?(r=parseInt(a[1]+a[1],16),s=parseInt(a[2]+a[2],16),l=parseInt(a[3]+a[3],16)):a.length===7&&(r=parseInt(a[1]+a[2],16),s=parseInt(a[3]+a[4],16),l=parseInt(a[5]+a[6],16)),`rgba(${r}, ${s}, ${l}, ${n})`}function YF(a,n){let r=0,s=0,l=0;a.length===4?(r=parseInt(a[1]+a[1],16),s=parseInt(a[2]+a[2],16),l=parseInt(a[3]+a[3],16)):a.length===7&&(r=parseInt(a[1]+a[2],16),s=parseInt(a[3]+a[4],16),l=parseInt(a[5]+a[6],16)),r=Math.max(0,r-n),s=Math.max(0,s-n),l=Math.max(0,l-n);const u=h=>h.toString(16).padStart(2,"0");return`#${u(r)}${u(s)}${u(l)}`}const XF=Fu.div`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow-wrap: anywhere;
  line-height: 1.5em;
  text-align: center;
  height: inherit;
  width: inherit;
  box-sizing: content-box;
  font-size: 14px;

  ${({$type:a,$color:n,$borderWidth:r})=>{switch(a){case"normal":return`
          color: ${n};
        `;case"filled":return kl`
          color: #fff;
          background-color: ${n};
          border-radius: 8px;
        `;case"outlined":return kl`
          height: calc(100% - 2 * ${r}px);
          width: calc(100% - 2 * ${r}px);
          color: ${n};
          background-color: #fff;
          border: ${r}px solid ${n};
          border-radius: 8px;
        `;case"underlined":return kl`
          height: calc(100% - ${r}px / 2);
          width: inherit;
          border-bottom: ${r}px solid ${n};
          background-color: #fff;
          color: ${n};
        `}}}

  ${({$isActive:a,$isSelected:n,$borderWidth:r,$color:s})=>(a||n)&&kl`
      height: calc(100% - 2 * ${r}px);
      width: calc(100% - 2 * ${r}px);
      border: ${r}px solid ${YF(s,100)};
      ${n&&`box-shadow: 0 0 0 2px ${UF(s,.1)};`}
    `}
`,KF=a=>{const{className:n,style:r={},type:s="normal",text:l="",font:u,color:h="#1783ff",borderWidth:f=3,maxWidth:d=1/0,isActive:v=!1,isSelected:p=!1}=a,g=IA(l,u)>d;return kt.createElement(XF,{$type:s,$color:h,$borderWidth:f,$isActive:v,$isSelected:p,className:`text-node text-node-${s} ${n||""}`,style:Br(Br({},r),u)},kt.createElement("div",{style:g?{width:"calc(100% - 12px)"}:{}},l))},qF=Fu.div`
  position: relative;
  height: inherit;
  width: inherit;
`,QF=Fu.div`
  position: absolute;
  z-index: 10;

  &:hover {
    cursor: pointer;
  }

  ${({$placement:a,$offsetX:n,$offsetY:r})=>{const s={top:`left: calc(50% + ${n}px); top: ${r}px;`,bottom:`left: calc(50% + ${n}px); top: calc(100% + ${r}px);`,right:`left: calc(100% + ${n}px); top: calc(50% + ${r}px);`,left:`left: ${n}px; top: calc(50% + ${r}px);`};return kl`
      ${s[a]}
    `}}
`,JF=a=>n=>{const{data:r,graph:s,trigger:l,iconRender:u,iconPlacement:h,iconOffsetX:f,iconOffsetY:d,iconClassName:v,iconStyle:p,refreshLayout:g}=n,[m,b]=(0,kt.useState)((0,_r.get)(r,"style.collapsed",!1)),E=(0,kt.useRef)(null),w=(0,kt.useRef)(null),S=l==="icon"&&!(0,_r.isEmpty)(r.children),M=T=>KA(this,null,function*(){T.stopPropagation(),yield s[m?"expandElement":"collapseElement"](tt(r)),b(O=>!O),g&&(yield s.layout())});(0,kt.useEffect)(()=>{const T=l==="icon"?w.current:l==="node"?E.current:l;return T==null||T.addEventListener("click",M),()=>{T==null||T.removeEventListener("click",M)}},[l,m]);const C=T=>typeof T=="function"?T.call(s,r):T;return kt.createElement(qF,{ref:E,className:"collapsible-node-wrapper"},S&&kt.createElement(QF,{ref:w,$placement:C(h),$offsetX:C(f),$offsetY:C(d),className:v,style:p},u==null?void 0:u.call(s,m,r)),a.call(s,r))},t9=(a,n,r)=>{const s=(l=!1)=>{const[u,h]=l?["target","source"]:["source","target"];return n.filter(f=>f[u]===a).map(f=>f[h])};return r==="out"?s():r==="in"?s(!0):s().concat(s(!0))},oS={nodes:[],edges:[]};function DA(a){if(typeof a!="object"||a===null||!("id"in a))return!1;if("children"in a){if(!Array.isArray(a.children))return!1;for(const n of a.children)if(!DA(n))return!1}return!0}function BA(a){if(typeof a!="object"||a===null||!Object.keys(a).every(u=>["nodes","edges","combos"].includes(u)))return!1;const{nodes:n=[],edges:r=[],combos:s=[]}=a;if(!Array.isArray(n)||!Array.isArray(r)||!Array.isArray(s))return!1;const l=new Set(n.map(u=>u.id));return!(!n.every(u=>typeof u=="object"&&u!==null&&"id"in u)||!r.every(u=>l.has(u.source)&&l.has(u.target)))}function e9(a){if(!BA(a))return;const{nodes:n=[],edges:r=[]}=a,s=Object.fromEntries(n.map(d=>[d.id,d])),l=Object.fromEntries(n.map(d=>[d.id,0])),u=Object.fromEntries(n.map(d=>[d.id,[]]));for(const{source:d,target:v}of r)u[d].push(v),l[v]=(l[v]||0)+1;const h=Object.entries(l).filter(([d,v])=>v===0).map(([d])=>d);if(h.length!==1)return;const f=d=>{const v=s[d];return Ps(Br({},v),{children:u[d].map(f)})};return f(h[0])}function n9(a,n){return DA(a)?IB(a,{getNodeData:(r,s)=>{if(r.depth=s,r.style||(r.style={}),n&&(r.style.collapsed=s>=n),!r.children)return r;const h=r,{children:l}=h,u=Ur(h,["children"]);return Ps(Br({},u),{children:l.map(f=>f.id)})}}):oS}function Um(a,n){if(!a)return oS;const r=BA(a)?e9(a):a;return r?n9(r,n):oS}const{PlusMinusIcon:r9}=Nt,Xm=class Xm extends es{constructor(n,r){super(n,Object.assign({},Xm.defaultOptions,r))}afterLayout(){const{graph:n,element:r,model:s}=this.context,{nodes:l=[],edges:u=[]}=n.getData(),v=this.options,{enable:h}=v,f=Ur(v,["enable"]);l.forEach(p=>{const g=tt(p);if(!r.getElement(g)||p.children&&p.children.length>0)return;const b=t9(g,u,this.options.direction);b.length!==0&&s.updateNodeData([{id:g,children:b}])});const d=n.getOptions().node;if((0,_r.has)(d,"style.component")){const p=(0,_r.get)(d,"style.component");(0,_r.set)(d,"style.component",g=>{if(!(typeof h=="function"?h(g):h))return p.call(n,g);const m=JF(p);return kt.createElement(m,Br({data:g,graph:n},f))})}n.setNode(d),n.draw()}};Qv(Xm,"defaultOptions",{enable:!0,trigger:"icon",direction:"out",iconRender:n=>kt.createElement(r9,{isCollapsed:n}),iconPlacement:"bottom",iconOffsetX:0,iconOffsetY:0,iconClassName:"",iconStyle:{},refreshLayout:!1});let lS=Xm;const i9=(a,n,r)=>{const[s,l]=n,[u,h]=r;if(l===s)return u;const f=(a-s)/(l-s);return u+f*(h-u)},a9=(a,n,r)=>{const[s,l]=n,[u,h]=r,f=Math.log(a-s+1)/Math.log(l-s+1);return u+f*(h-u)},s9=(a,n,r,s=2)=>{const[l,u]=n,[h,f]=r,d=Math.pow((a-l)/(u-l),s);return h+d*(f-h)},o9=(a,n,r)=>{const[s,l]=n,[u,h]=r,f=Math.sqrt((a-s)/(l-s));return u+f*(h-u)},Km=class Km extends es{constructor(r,s){super(r,Object.assign({},Km.defaultOptions,s));Qv(this,"assignLineWidthByValue",(r,s,l,u,h,f)=>{const d=[s,l],v=[u,h];if(r<s||r>l||s===l)return v[0];if(typeof f=="function")return f(r,d,v);switch(f){case"linear":return i9(r,d,v);case"log":return a9(r,d,v);case"pow":return s9(r,d,v,2);case"sqrt":return o9(r,d,v);default:return v[0]}})}beforeDraw(r){const{maxValue:s,minValue:l,maxLineWidth:u,minLineWidth:h,scale:f,value:d}=this.options,v=this.context.model.getEdgeData(),p=typeof d=="function"?d:()=>d,g=Object.fromEntries(v.map(E=>[tt(E),p(E)])),{add:{edges:m},update:{edges:b}}=r;return[...m.values(),...b.values()].forEach(E=>{const w=this.assignLineWidthByValue(g[tt(E)]||0,typeof l=="function"?l(E,g):l,typeof s=="function"?s(E,g):s,typeof h=="function"?h(E):h,typeof u=="function"?u(E):u,f);E.style||(E.style={}),E.style.lineWidth=w}),r}};Qv(Km,"defaultOptions",{minValue:(r,s)=>Math.min(...Object.values(s)),maxValue:(r,s)=>Math.max(...Object.values(s)),minLineWidth:1,maxLineWidth:10,scale:"linear"});let cS=Km;class l9 extends es{beforeDraw(n){const{graph:r,element:s}=this.context,{add:{nodes:l},update:{nodes:u}}=n;return[...l.values(),...u.values()].forEach(h=>{s.computeElementDefaultStyle("node",{graph:r,datum:h});const f=s.getDefaultStyle(h.id),[d,v]=Ta(f.size);h.style||(h.style={}),h.style.dx=-d/2,h.style.dy=-v/2}),n}}const c9={node:{react:e8},edge:{indented:i8},behavior:{"hover-activate-neighbors":r8,"hover-activate-chain":n8},transform:{"translate-react-node-origin":l9,"collapse-expand-react-node":lS,"assign-color-by-branch":Iw,"map-edge-line-width":cS,"arrange-edge-z-index":a8}};function u9(){Object.entries(c9).forEach(([a,n])=>{Object.entries(n).forEach(([r,s])=>{fO(a,r,s)})})}u9();var FA=kt.createContext({graph:null,isReady:!1}),CW=function(){var a=React.useContext(FA);if(a===void 0||Object.keys(a).length===0)throw new Error("useGraphin must be used within a GraphinProvider.");return a},uS=function(){return uS=Object.assign||function(a){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(a[l]=n[l])}return a},uS.apply(this,arguments)},h9=function(a,n){var r=typeof Symbol=="function"&&a[Symbol.iterator];if(!r)return a;var s=r.call(a),l,u=[],h;try{for(;(n===void 0||n-- >0)&&!(l=s.next()).done;)u.push(l.value)}catch(f){h={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(h)throw h.error}}return u};function f9(a){var n=a.onInit,r=a.onReady,s=a.onDestroy,l=a.options,u=h9((0,kt.useState)(!1),2),h=u[0],f=u[1],d=(0,kt.useRef)(null),v=(0,kt.useRef)(null);return(0,kt.useEffect)(function(){if(!(d.current||!v.current)){var p=new bm(uS({container:v.current},l));return d.current=p,f(!0),n==null||n(d.current),function(){var g=d.current;g&&(g.destroy(),s==null||s(),d.current=null)}}},[]),(0,kt.useEffect)(function(){var p=v.current,g=d.current;!l||!p||!g||g.destroyed||(g.setOptions(l),g.render().then(function(){return r==null?void 0:r(g)}))},[l]),{graph:d.current,containerRef:v,isReady:h}}var hS=function(){return hS=Object.assign||function(a){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(a[l]=n[l])}return a},hS.apply(this,arguments)},d9=function(a,n){var r={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(r[s[l]]=a[s[l]]);return r},v9=(0,kt.forwardRef)(function(a,n){var r=a.style,s=a.children,l=d9(a,["style","children"]),u=f9(l),h=u.graph,f=u.containerRef,d=u.isReady;(0,kt.useImperativeHandle)(n,function(){return h},[h]);var v=hS({height:"inherit",position:"relative"},r);return s?kt.createElement(FA.Provider,{value:{graph:h,isReady:d}},kt.createElement("div",{ref:f,style:v},d&&s)):kt.createElement("div",{ref:f,style:v})}),p9=(0,kt.memo)(v9);const Mc=(0,kt.forwardRef)((s,r)=>{var l=s,{children:a}=l,n=Ur(l,["children"]);const w=n,{containerStyle:u,className:h,onInit:f,onReady:d,onDestroy:v,errorTemplate:p,loading:g,loadingTemplate:m}=w,b=Ur(w,["containerStyle","className","onInit","onReady","onDestroy","errorTemplate","loading","loadingTemplate"]),E=(0,kt.useRef)(null);return(0,kt.useImperativeHandle)(r,()=>E.current),kt.createElement(jF,{errorTemplate:p},g&&kt.createElement(WF,{loadingTemplate:m}),!(0,_r.isEmpty)(b.data)&&kt.createElement(p9,{ref:S=>{E.current=S},className:h,style:u,options:b,onInit:f,onReady:d,onDestroy:v},a))}),Cc={autoResize:!0,behaviors:[{key:"zoom-canvas",type:"zoom-canvas"},{key:"drag-canvas",type:"drag-canvas"}]};function Io(...a){if(a.length===0)return{};const n=Br({},a[0]);for(let r=1;r<a.length;r++){const s=a[r];for(const l in s)if(s.hasOwnProperty(l)){const u=s[l],h=n[l];["component","data"].includes(l)?n[l]=u:typeof u=="function"?["plugins","behaviors","transforms"].includes(l)?n[l]=u(h||[]):n[l]=function(f){const d=u.call(this,f);return(0,_r.isPlainObject)(d)?Io(h,d):d}:(0,_r.isPlainObject)(u)&&(0,_r.isPlainObject)(h)?n[l]=Io(h,u):n[l]=u}}return n}const g9={node:{type:"circle",style:{labelText:a=>a.id}}},y9=({direction:a,compact:n})=>{const r=l=>(0,_r.isEmpty)(l.children),s=n?"compact-box":"dendrogram";return a==="vertical"?{node:{style:{labelBackground:!0,labelPlacement:"right",labelTransform:l=>r(l)?"rotate(90deg) translate(18px)":"translate(18px)",ports:[{placement:"top"},{placement:"bottom"}]}},edge:{type:"cubic-vertical"},layout:{type:s,direction:"TB",nodeSep:40,rankSep:140,getVGap:()=>80,getHGap:()=>20}}:a==="horizontal"?{node:{style:{labelBackground:!0,labelPlacement:l=>r(l)?"right":"left",ports:[{placement:"left"},{placement:"right"}]}},edge:{type:"cubic-horizontal"},layout:{type:s,direction:"LR",nodeSep:40,rankSep:200,getVGap:()=>5,getHGap:()=>100}}:{node:{style:{labelBackground:!0}},edge:{type:"cubic-radial"},layout:{type:s,direction:"RL",radial:!0,nodeSep:40,rankSep:200,getVGap:()=>30,getHGap:()=>60},transforms:l=>[...l,"place-radial-labels"]}},TW=(0,kt.forwardRef)((s,r)=>{var l=s,{children:a}=l,n=Ur(l,["children"]);const u=(0,kt.useMemo)(()=>{const g=n,{data:h,defaultExpandLevel:f,direction:d="horizontal",compact:v=!1}=g,p=Ur(g,["data","defaultExpandLevel","direction","compact"]);return Io(Cc,g9,{data:Um(h,f)},y9({direction:d,compact:v}),p)},[n]);return kt.createElement(Mc,Ps(Br({},u),{ref:r}),a)});function Cn(a,n){const r=n?typeof n=="function"?n(a):(0,_r.get)(a,`data.${n}`,a.id):a.id;return String(r)}function Do(a,n=[0,0],r={fontSize:16,fontFamily:"PingFang SC"},s=0,l=1/0){const u=VF(a,r),h=IA(a,r)+4,f=l===1/0?1:Math.ceil(h/l),[d,v]=n;return[Math.max(s,Math.min(l,h))+d,v+u+u*1.5*(f-1)]}const m9={node:{style:{size:10,labelPlacement:"center"}},edge:{type:"polyline"},layout:{type:"fishbone",hGap:40,vGap:60},animation:!1},zA="system-ui, sans-serif",b9=(a,n)=>n===0?Do(a,[80,48],{fontSize:24,fontWeight:600,fontFamily:zA}):n===1?Do(a,[80,30],{fontSize:18,fontFamily:zA}):[2,30],x9=a=>{var r;const n=a.depth;return n===0?"#EFF0F0":n===1?((r=a.style)==null?void 0:r.color)||"#EFF0F0":"transparent"};function E9({type:a,labelField:n}){const r={node:{type:"rect",style:{fill:s=>x9(s),labelFill:s=>s.depth===1?"#fff":"#262626",labelFillOpacity:1,labelFontSize:s=>s.depth===0?24:s.depth===1?18:16,labelFontWeight:s=>s.depth===0?600:400,labelLineHeight:s=>s.depth===0?26:s.depth===1?20:18,labelText:s=>Cn(s,n),radius:8,size:s=>b9(s.id,s.depth)}},edge:{type:"polyline",style:{lineWidth:3,stroke:function(s){const l=this.getNodeData(s.target);return(0,_r.get)(l,"style.color","#99ADD1")}}},transforms:s=>[...s,{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}]};return r.layout||(r.layout={}),a==="decision"?(r.node.style.labelPlacement=s=>s.depth===0||s.depth===1?"center":"right",Object.assign(r.layout,{direction:"LR"})):a==="cause"&&(r.node.style.labelPlacement=s=>s.depth===0||s.depth===1?"center":"left",Object.assign(r.layout,{direction:"RL"})),r}const OW=(0,kt.forwardRef)((s,r)=>{var l=s,{children:a}=l,n=Ur(l,["children"]);const g=n,{data:u,defaultExpandLevel:h,type:f="cause",labelField:d}=g,v=Ur(g,["data","defaultExpandLevel","type","labelField"]),p=(0,kt.useMemo)(()=>Io(Cc,m9,{data:Um(u)},E9({type:f,labelField:d}),v),[n]);return kt.createElement(Mc,Ps(Br({},p),{ref:r}),a)}),{TextNode:w9}=Rt,S9={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{strokeOpacity:.5},state:{active:{strokeOpacity:1}}},layout:{type:"dagre",rankdir:"LR",animation:!1},transforms:["translate-react-node-origin"]},_9=({labelField:a})=>({node:{style:{component:r=>{const s=Cn(r,a);return kt.createElement(w9,{type:"filled",text:s})},size:[100,40],ports:[{placement:"left"},{placement:"right"}]}}}),AW=(0,kt.forwardRef)((s,r)=>{var l=s,{children:a}=l,n=Ur(l,["children"]);const d=n,{labelField:u}=d,h=Ur(d,["labelField"]),f=(0,kt.useMemo)(()=>Io(Cc,S9,_9({labelField:u}),h),[n]);return kt.createElement(Mc,Ps(Br({},f),{ref:r}),a)}),{TextNode:M9}=Rt,C9={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,endArrow:!0,radius:8,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]},T9=({direction:a,labelField:n})=>({node:{style:{component:s=>{const l=Cn(s,n);return kt.createElement(M9,{type:"filled",text:l})},size:[100,40],ports:a==="vertical"?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},layout:{type:"dagre",rankdir:a==="vertical"?"TB":"LR"}}),kW=(0,kt.forwardRef)((s,r)=>{var l=s,{children:a}=l,n=Ur(l,["children"]);const u=(0,kt.useMemo)(()=>{const v=n,{direction:h="horizontal",labelField:f}=v,d=Ur(v,["direction","labelField"]);return Io(Cc,C9,T9({direction:h,labelField:f}),d)},[n]);return kt.createElement(Mc,Ps(Br({},u),{ref:r}),a)}),O9=(0,_r.memoize)((a,n)=>{if(!n)return"center";const r=pr(a)[0];return pr(n)[0]>r?"left":"right"},(a,n)=>n?[pr(a),pr(n)].flat().join("-"):"center"),Pl=(a,n)=>{const r=a.getParentData(tt(n),"tree");return O9(n,r)},PW=a=>!a.children||a.children.length===0,Bo=(0,_r.memoize)((a,n,r,s=0)=>{const l={fontWeight:s===0?600:400,fontSize:s===0?24:16},h=Do(a,s===0?[64,30]:[12,12],l,n,r);return{font:l,size:h}}),Tc=(0,_r.memoize)((a,n,r,s=0)=>{const l={fontWeight:s===0||s===1?600:400,fontSize:s===0?24:16},h=Do(a,s===0?[64,30]:[36,24],l,n,r);return{font:l,size:h}}),{ArrowCountIcon:A9}=Nt,{TextNode:fS}=Rt,k9={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"indented",style:{lineWidth:3}},transforms:a=>[...a,{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(n,r){return kt.createElement(A9,{graph:this,data:r,isCollapsed:n})}}],layout:{type:"indented",direction:"LR",indent:a=>P9(a,20),getVGap:()=>14,preLayout:!1},animation:{duration:500}},P9=(a,n)=>{if(a.depth===0)return 0;let r=n,s=a.parent;for(;s;)r+=s.width/2,s=s.parent;return r/a.depth},ZA=(a,n)=>{const r=Pl(a,n);return r==="left"?"right":r==="center"?"center":"left"},R9=({type:a,nodeMinWidth:n,nodeMaxWidth:r,direction:s,labelField:l})=>{let u={};const h=n||0,f=r||300;if(a==="boxed")u={node:{style:{component:function(d){var E;const v=d.depth,p=(E=d.style)==null?void 0:E.color,g=Cn(d,l),{font:m}=Tc(g,h,f,v),b={type:v===0||v===1?"filled":"outlined",text:g,color:v===0?"#f1f4f5":p,maxWidth:f,font:m,style:Br({textAlign:ZA(this,d)},v===0?{color:"#252525"}:{})};return kt.createElement(fS,Br({},b))},size:d=>{const v=Cn(d,l);return Tc(v,h,f,d.depth).size}}},edge:{style:{stroke:function(d){const v=this.getNodeData(d.source);return(0,_r.get)(v,"style.color","#99ADD1")},radius:16}},transforms:d=>[...d,{type:"assign-color-by-branch",key:"assign-color-by-branch"}],layout:{type:"indented",getWidth:d=>{const v=Cn(d,l),[p]=Tc(v,h,f,d.depth).size;return p},getHeight:d=>{const v=Cn(d,l),[,p]=Tc(v,h,f,d.depth).size;return p}}};else if(a==="linear")u={node:{style:{component:function(d){var E;const v=d.depth,p=(E=d.style)==null?void 0:E.color,g=Cn(d,l),{font:m}=Bo(g,h,f,v),b={text:g,color:p,maxWidth:f,font:m};return Object.assign(b,v===0?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:{textAlign:ZA(this,d)}}),kt.createElement(fS,Br({},b))},size:d=>{const v=Cn(d,l);return Bo(v,h,f,d.depth).size},ports:function(d){const v=Pl(this,d);return v==="left"?[{placement:"bottom"},{placement:"bottom-right"}]:v==="center"?[{placement:"bottom"}]:[{placement:"bottom"},{placement:"bottom-left"}]}}},edge:{style:{stroke:function(d){const v=this.getNodeData(d.target);return(0,_r.get)(v,"style.color","#99ADD1")},radius:24}},layout:{type:"indented",getWidth:d=>{const v=Cn(d,l),[p]=Bo(v,h,f,d.depth).size;return p},getHeight:d=>{const v=Cn(d,l),[,p]=Bo(v,h,f,d.depth).size;return p},getVGap:()=>12},transforms:d=>[...d,{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}]};else{const d=[24,16];u={node:{style:{component:v=>{const p=Cn(v,l);return kt.createElement(fS,{type:"filled",text:p})},size:v=>{const p=Cn(v,l);return Do(p,d)}}},layout:{type:"indented",getWidth:v=>{const p=Cn(v,l),[g]=Do(p,d);return g},getHeight:v=>{const p=Cn(v,l),[,g]=Do(p,d);return g}}}}return s&&(u.layout||(u.layout={}),Object.assign(u.layout,{direction:s==="alternate"?"H":s==="left"?"RL":"LR"})),u},RW=(0,kt.forwardRef)((s,r)=>{var l=s,{children:a}=l,n=Ur(l,["children"]);const E=n,{data:u,defaultExpandLevel:h,type:f="default",nodeMinWidth:d,nodeMaxWidth:v,direction:p="right",labelField:g}=E,m=Ur(E,["data","defaultExpandLevel","type","nodeMinWidth","nodeMaxWidth","direction","labelField"]),b=(0,kt.useMemo)(()=>Io(Cc,k9,{data:Um(u,h)},R9({type:f,nodeMinWidth:d,nodeMaxWidth:v,direction:p,labelField:g}),m),[n]);return kt.createElement(Mc,Ps(Br({},b),{ref:r}),a)}),{ArrowCountIcon:N9}=Nt,{TextNode:dS}=Rt,L9={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{lineWidth:3}},transforms:a=>[...a,{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(n,r){const s=Pl(this,r);return kt.createElement(N9,{graph:this,data:r,isCollapsed:n,placement:s==="left"?"left":"right"})},iconPlacement:function(n){return Pl(this,n)==="left"?"left":"right"}}],layout:{type:"mindmap",direction:"H",preLayout:!1,getWidth:()=>120,getHGap:()=>64},animation:{duration:500}};function I9({type:a,direction:n,nodeMinWidth:r,nodeMaxWidth:s,labelField:l}){let u={};if(a==="boxed"){const h=r||120,f=s||300;u={node:{style:{component:d=>{var E;const v=d.depth,p=(E=d.style)==null?void 0:E.color,g=Cn(d,l),{font:m}=Tc(g,h,f,v),b={text:g,color:p,maxWidth:f,font:m};return Object.assign(b,v===0?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:v===1?{type:"filled"}:{type:"outlined"}),kt.createElement(dS,Br({},b))},size:d=>{const v=Cn(d,l);return Tc(v,h,f,d.depth).size},dx:function(d){const v=Pl(this,d),p=Cn(d,l),[g]=Tc(p,h,f,d.depth).size;return v==="left"?-g:v==="center"?-g/2:0},ports:[{placement:"left"},{placement:"right"}]}},edge:{style:{stroke:function(d){const v=this.getNodeData(d.source);return(0,_r.get)(v,"style.color","#99ADD1")}}},transforms:d=>[...d,{type:"assign-color-by-branch",key:"assign-color-by-branch"}],layout:{type:"mindmap",getHeight:d=>{const v=Cn(d,l),[,p]=Tc(v,h,f,d.depth).size;return p},getVGap:()=>14}}}else if(a==="linear"){const h=r||0,f=s||300;u={node:{style:{component:function(d){var w;const v=Pl(this,d),p=d.depth,g=(w=d.style)==null?void 0:w.color,m=Cn(d,l),{font:b}=Bo(m,h,f,p),E={text:m,color:g,maxWidth:f,font:b};return Object.assign(E,p===0?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:v==="left"?{textAlign:"right"}:v==="center"?{textAlign:"center"}:{}}),kt.createElement(dS,Br({},E))},size:d=>{const v=Cn(d,l);return Bo(v,h,f,d.depth).size},dx:function(d){const v=Pl(this,d),p=Cn(d,l),[g]=Bo(p,h,f,d.depth).size;return v==="left"?-g:v==="center"?-g/2:0},dy:function(d){const v=Cn(d,l),[,p]=Bo(v,h,f,d.depth).size;return p/2},ports:function(d){return Pl(this,d)==="center"?[{placement:"left"},{placement:"right"}]:[{placement:"left-bottom"},{placement:"right-bottom"}]}}},edge:{style:{stroke:function(d){const v=this.getNodeData(d.target);return(0,_r.get)(v,"style.color","#99ADD1")}}},layout:{type:"mindmap",getHeight:d=>{const v=Cn(d,l),[,p]=Bo(v,h,f,d.depth).size;return p},getVGap:()=>12},transforms:d=>[...d.filter(v=>v.key!=="collapse-expand-react-node"),{type:"assign-color-by-branch",key:"assign-color-by-branch"},Ps(Br({},d.find(v=>v.key==="collapse-expand-react-node")),{iconOffsetY:v=>{if(v.depth===0)return 0;const p=Cn(v,l),[,g]=Bo(p,h,f,v.depth).size;return g/2}})]}}else{const h=[24,16];u={node:{style:{component:f=>{const d=Cn(f,l);return kt.createElement(dS,{type:"filled",text:d})},size:f=>{const d=Cn(f,l);return Do(d,h)},dx:function(f){const d=Pl(this,f),v=Cn(f,l),[p]=Do(v,h);return d==="left"?-p:d==="center"?-p/2:0},ports:[{placement:"left"},{placement:"right"}]}},layout:{type:"mindmap",getHeight:f=>{const d=Cn(f,l),[,v]=Do(d,h);return v}}}}return n&&(u.layout||(u.layout={}),u.layout.direction=n==="alternate"?"H":n==="left"?"RL":"LR"),u}const NW=(0,kt.forwardRef)((s,r)=>{var l=s,{children:a}=l,n=Ur(l,["children"]);const u=(0,kt.useMemo)(()=>{const w=n,{data:h,type:f="default",nodeMinWidth:d,nodeMaxWidth:v,direction:p="alternate",labelField:g,defaultExpandLevel:m}=w,b=Ur(w,["data","type","nodeMinWidth","nodeMaxWidth","direction","labelField","defaultExpandLevel"]);return Io(Cc,L9,{data:Um(h,m)},I9({type:f,nodeMinWidth:d,nodeMaxWidth:v,direction:p,labelField:g}),b)},[n]);return kt.createElement(Mc,Ps(Br({},u),{ref:r}),a)}),vS=32,D9={node:{type:"circle"},layout:{type:"d3-force",link:{distance:vS*4},collide:{radius:vS},manyBody:{strength:-vS*22},x:{},y:{}}},LW=(0,kt.forwardRef)((s,r)=>{var l=s,{children:a}=l,n=Ur(l,["children"]);const u=(0,kt.useMemo)(()=>Io(Cc,D9,n),[n]);return kt.createElement(Mc,Ps(Br({},u),{ref:r}),a)}),{TextNode:B9}=Rt,F9={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]};function z9({direction:a,labelField:n}){return{node:{style:{component:s=>{const l=Cn(s,n);return kt.createElement(B9,{type:"filled",text:l})},size:[100,40],ports:a==="vertical"?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},transforms:s=>[...s,{type:"collapse-expand-react-node",key:"collapse-expand-react-node",iconPlacement:a==="vertical"?"bottom":"right",enable:!1,refreshLayout:!0}],layout:{type:"dagre",rankdir:a==="vertical"?"TB":"LR"}}}const Z9=(0,kt.forwardRef)((s,r)=>{var l=s,{children:a}=l,n=Ur(l,["children"]);const u=(0,kt.useMemo)(()=>{const p=n,{direction:h="vertical",labelField:f}=p,d=Ur(p,["direction","labelField"]);return Io(Cc,F9,z9({direction:h,labelField:f}),d)},[n]);return kt.createElement(Mc,Ps(Br({},u),{ref:r}),a)})},55355:function(Se,Vt,K){"use strict";K.d(Vt,{Z:function(){return J}});var vt=K(87462),B=K(67294),Nt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},Rt=Nt,gt=K(84089),H=function(X,V){return B.createElement(gt.Z,(0,vt.Z)({},X,{ref:V,icon:Rt}))},j=B.forwardRef(H),J=j},81746:function(Se){(function(K,vt){Se.exports=vt()})(typeof self!="undefined"?self:this,function(){return function(Vt){var K={};function vt(B){if(K[B])return K[B].exports;var Nt=K[B]={i:B,l:!1,exports:{}};return Vt[B].call(Nt.exports,Nt,Nt.exports,vt),Nt.l=!0,Nt.exports}return vt.m=Vt,vt.c=K,vt.d=function(B,Nt,Rt){vt.o(B,Nt)||Object.defineProperty(B,Nt,{configurable:!1,enumerable:!0,get:Rt})},vt.n=function(B){var Nt=B&&B.__esModule?function(){return B.default}:function(){return B};return vt.d(Nt,"a",Nt),Nt},vt.o=function(B,Nt){return Object.prototype.hasOwnProperty.call(B,Nt)},vt.p="",vt(vt.s=5)}([function(Vt,K){function vt(B,Nt,Rt,gt){return gt===void 0&&(gt="height"),Rt==="center"?(B[gt]+Nt[gt])/2:B.height}Vt.exports={assign:Object.assign,getHeight:vt}},function(Vt,K,vt){var B=vt(3),Nt=function(){function Rt(H,j){j===void 0&&(j={});var J=this;J.options=j,J.rootNode=B(H,j)}var gt=Rt.prototype;return gt.execute=function(){throw new Error("please override this method")},Rt}();Vt.exports=Nt},function(Vt,K,vt){var B=vt(4),Nt=["LR","RL","TB","BT","H","V"],Rt=["LR","RL","H"],gt=function($){return Rt.indexOf($)>-1},H=Nt[0];Vt.exports=function(J,$,X){var V=$.direction||H;if($.isHorizontal=gt(V),V&&Nt.indexOf(V)===-1)throw new TypeError("Invalid direction: "+V);if(V===Nt[0])X(J,$);else if(V===Nt[1])X(J,$),J.right2left();else if(V===Nt[2])X(J,$);else if(V===Nt[3])X(J,$),J.bottom2top();else if(V===Nt[4]||V===Nt[5]){var ct=B(J,$),Ct=ct.left,it=ct.right;X(Ct,$),X(it,$),$.isHorizontal?Ct.right2left():Ct.bottom2top(),it.translate(Ct.x-it.x,Ct.y-it.y),J.x=Ct.x,J.y=it.y;var Ot=J.getBoundingBox();$.isHorizontal?Ot.top<0&&J.translate(0,-Ot.top):Ot.left<0&&J.translate(-Ot.left,0)}var Dt=$.fixedRoot;return Dt===void 0&&(Dt=!0),Dt&&J.translate(-(J.x+J.width/2+J.hgap),-(J.y+J.height/2+J.vgap)),j(J,$),J};function j(J,$){if($.radial){var X=$.isHorizontal?["x","y"]:["y","x"],V=X[0],ct=X[1],Ct={x:1/0,y:1/0},it={x:-1/0,y:-1/0},Ot=0;J.DFTraverse(function(me){Ot++;var Yt=me.x,Ge=me.y;Ct.x=Math.min(Ct.x,Yt),Ct.y=Math.min(Ct.y,Ge),it.x=Math.max(it.x,Yt),it.y=Math.max(it.y,Ge)});var Dt=it[ct]-Ct[ct];if(Dt===0)return;var Ft=Math.PI*2/Ot;J.DFTraverse(function(me){var Yt=(me[ct]-Ct[ct])/Dt*(Math.PI*2-Ft)+Ft,Ge=me[V]-J[V];me.x=Math.cos(Yt)*Ge,me.y=Math.sin(Yt)*Ge})}}},function(Vt,K,vt){var B=vt(0),Nt=18,Rt=Nt*2,gt=Nt,H={getId:function(X){return X.id||X.name},getPreH:function(X){return X.preH||0},getPreV:function(X){return X.preV||0},getHGap:function(X){return X.hgap||gt},getVGap:function(X){return X.vgap||gt},getChildren:function(X){return X.children},getHeight:function(X){return X.height||Rt},getWidth:function(X){var V=X.label||" ";return X.width||V.split("").length*Nt}};function j($,X){var V=this;if(V.vgap=V.hgap=0,$ instanceof j)return $;V.data=$;var ct=X.getHGap($),Ct=X.getVGap($);return V.preH=X.getPreH($),V.preV=X.getPreV($),V.width=X.getWidth($),V.height=X.getHeight($),V.width+=V.preH,V.height+=V.preV,V.id=X.getId($),V.x=V.y=0,V.depth=0,V.children||(V.children=[]),V.addGap(ct,Ct),V}B.assign(j.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(X,V){var ct=this;ct.hgap+=X,ct.vgap+=V,ct.width+=2*X,ct.height+=2*V},eachNode:function(X){for(var V=this,ct=[V],Ct;Ct=ct.shift();)X(Ct),ct=Ct.children.concat(ct)},DFTraverse:function(X){this.eachNode(X)},BFTraverse:function(X){for(var V=this,ct=[V],Ct;Ct=ct.shift();)X(Ct),ct=ct.concat(Ct.children)},getBoundingBox:function(){var X={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(V){X.left=Math.min(X.left,V.x),X.top=Math.min(X.top,V.y),X.width=Math.max(X.width,V.x+V.width),X.height=Math.max(X.height,V.y+V.height)}),X},translate:function(X,V){X===void 0&&(X=0),V===void 0&&(V=0),this.eachNode(function(ct){ct.x+=X,ct.y+=V,ct.x+=ct.preH,ct.y+=ct.preV})},right2left:function(){var X=this,V=X.getBoundingBox();X.eachNode(function(ct){ct.x=ct.x-(ct.x-V.left)*2-ct.width}),X.translate(V.width,0)},bottom2top:function(){var X=this,V=X.getBoundingBox();X.eachNode(function(ct){ct.y=ct.y-(ct.y-V.top)*2-ct.height}),X.translate(0,V.height)}});function J($,X,V){X===void 0&&(X={}),X=B.assign({},H,X);var ct=new j($,X),Ct=[ct],it;if(!V&&!$.collapsed){for(;it=Ct.shift();)if(!it.data.collapsed){var Ot=X.getChildren(it.data),Dt=Ot?Ot.length:0;if(it.children=new Array(Dt),Ot&&Dt)for(var Ft=0;Ft<Dt;Ft++){var me=new j(Ot[Ft],X);it.children[Ft]=me,Ct.push(me),me.parent=it,me.depth=it.depth+1}}}return ct}Vt.exports=J},function(Vt,K,vt){var B=vt(3);Vt.exports=function(Nt,Rt){for(var gt=B(Nt.data,Rt,!0),H=B(Nt.data,Rt,!0),j=Nt.children.length,J=Math.round(j/2),$=Rt.getSide||function(Ct,it){return it<J?"right":"left"},X=0;X<j;X++){var V=Nt.children[X],ct=$(V,X);ct==="right"?H.children.push(V):gt.children.push(V)}return gt.eachNode(function(Ct){Ct.isRoot()||(Ct.side="left")}),H.eachNode(function(Ct){Ct.isRoot()||(Ct.side="right")}),{left:gt,right:H}}},function(Vt,K,vt){var B={compactBox:vt(6),dendrogram:vt(8),indented:vt(10),mindmap:vt(12)};Vt.exports=B},function(Vt,K,vt){function B(V,ct){V.prototype=Object.create(ct.prototype),V.prototype.constructor=V,Nt(V,ct)}function Nt(V,ct){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ct,it){return Ct.__proto__=it,Ct},Nt(V,ct)}var Rt=vt(1),gt=vt(7),H=vt(2),j=vt(0),J=function(V){function ct(){return V.apply(this,arguments)||this}B(ct,V);var Ct=ct.prototype;return Ct.execute=function(){var Ot=this;return H(Ot.rootNode,Ot.options,gt)},ct}(Rt),$={};function X(V,ct){return ct=j.assign({},$,ct),new J(V,ct).execute()}Vt.exports=X},function(Vt,K){function vt(j,J,$,X){X===void 0&&(X=[]);var V=this;V.w=j||0,V.h=J||0,V.y=$||0,V.x=0,V.c=X||[],V.cs=X.length,V.prelim=0,V.mod=0,V.shift=0,V.change=0,V.tl=null,V.tr=null,V.el=null,V.er=null,V.msel=0,V.mser=0}vt.fromNode=function(j,J){if(!j)return null;var $=[];return j.children.forEach(function(X){$.push(vt.fromNode(X,J))}),J?new vt(j.height,j.width,j.x,$):new vt(j.width,j.height,j.y,$)};function B(j,J,$){$?j.y+=J:j.x+=J,j.children.forEach(function(X){B(X,J,$)})}function Nt(j,J){var $=J?j.y:j.x;return j.children.forEach(function(X){$=Math.min(Nt(X,J),$)}),$}function Rt(j,J){var $=Nt(j,J);B(j,-$,J)}function gt(j,J,$){$?J.y=j.x:J.x=j.x,j.c.forEach(function(X,V){gt(X,J.children[V],$)})}function H(j,J,$){$===void 0&&($=0),J?(j.x=$,$+=j.width):(j.y=$,$+=j.height),j.children.forEach(function(X){H(X,J,$)})}Vt.exports=function(j,J){J===void 0&&(J={});var $=J.isHorizontal;function X(bt){if(bt.cs===0){V(bt);return}X(bt.c[0]);for(var Ut=rn(Dt(bt.c[0].el),0,null),oe=1;oe<bt.cs;++oe){X(bt.c[oe]);var zt=Dt(bt.c[oe].er);ct(bt,oe,Ut),Ut=rn(zt,oe,Ut)}Yt(bt),V(bt)}function V(bt){bt.cs===0?(bt.el=bt,bt.er=bt,bt.msel=bt.mser=0):(bt.el=bt.c[0].el,bt.msel=bt.c[0].msel,bt.er=bt.c[bt.cs-1].er,bt.mser=bt.c[bt.cs-1].mser)}function ct(bt,Ut,oe){for(var zt=bt.c[Ut-1],ce=zt.mod,Me=bt.c[Ut],Ne=Me.mod;zt!==null&&Me!==null;){Dt(zt)>oe.low&&(oe=oe.nxt);var dn=ce+zt.prelim+zt.w-(Ne+Me.prelim);dn>0&&(Ne+=dn,Ct(bt,Ut,oe.index,dn));var or=Dt(zt),qn=Dt(Me);or<=qn&&(zt=Ot(zt),zt!==null&&(ce+=zt.mod)),or>=qn&&(Me=it(Me),Me!==null&&(Ne+=Me.mod))}!zt&&Me?Ft(bt,Ut,Me,Ne):zt&&!Me&&me(bt,Ut,zt,ce)}function Ct(bt,Ut,oe,zt){bt.c[Ut].mod+=zt,bt.c[Ut].msel+=zt,bt.c[Ut].mser+=zt,Xt(bt,Ut,oe,zt)}function it(bt){return bt.cs===0?bt.tl:bt.c[0]}function Ot(bt){return bt.cs===0?bt.tr:bt.c[bt.cs-1]}function Dt(bt){return bt.y+bt.h}function Ft(bt,Ut,oe,zt){var ce=bt.c[0].el;ce.tl=oe;var Me=zt-oe.mod-bt.c[0].msel;ce.mod+=Me,ce.prelim-=Me,bt.c[0].el=bt.c[Ut].el,bt.c[0].msel=bt.c[Ut].msel}function me(bt,Ut,oe,zt){var ce=bt.c[Ut].er;ce.tr=oe;var Me=zt-oe.mod-bt.c[Ut].mser;ce.mod+=Me,ce.prelim-=Me,bt.c[Ut].er=bt.c[Ut-1].er,bt.c[Ut].mser=bt.c[Ut-1].mser}function Yt(bt){bt.prelim=(bt.c[0].prelim+bt.c[0].mod+bt.c[bt.cs-1].mod+bt.c[bt.cs-1].prelim+bt.c[bt.cs-1].w)/2-bt.w/2}function Ge(bt,Ut){Ut+=bt.mod,bt.x=bt.prelim+Ut,On(bt);for(var oe=0;oe<bt.cs;oe++)Ge(bt.c[oe],Ut)}function Xt(bt,Ut,oe,zt){if(oe!==Ut-1){var ce=Ut-oe;bt.c[oe+1].shift+=zt/ce,bt.c[Ut].shift-=zt/ce,bt.c[Ut].change-=zt-zt/ce}}function On(bt){for(var Ut=0,oe=0,zt=0;zt<bt.cs;zt++)Ut+=bt.c[zt].shift,oe+=Ut+bt.c[zt].change,bt.c[zt].mod+=oe}function rn(bt,Ut,oe){for(;oe!==null&&bt>=oe.low;)oe=oe.nxt;return{low:bt,index:Ut,nxt:oe}}H(j,$);var pe=vt.fromNode(j,$);return X(pe),Ge(pe,0),gt(pe,j,$),Rt(j,$),j}},function(Vt,K,vt){function B(V,ct){V.prototype=Object.create(ct.prototype),V.prototype.constructor=V,Nt(V,ct)}function Nt(V,ct){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ct,it){return Ct.__proto__=it,Ct},Nt(V,ct)}var Rt=vt(1),gt=vt(9),H=vt(2),j=vt(0),J=function(V){function ct(){return V.apply(this,arguments)||this}B(ct,V);var Ct=ct.prototype;return Ct.execute=function(){var Ot=this;return Ot.rootNode.width=0,H(Ot.rootNode,Ot.options,gt)},ct}(Rt),$={};function X(V,ct){return ct=j.assign({},$,ct),new J(V,ct).execute()}Vt.exports=X},function(Vt,K,vt){var B=vt(0);function Nt(H,j){H===void 0&&(H=0),j===void 0&&(j=[]);var J=this;J.x=J.y=0,J.leftChild=J.rightChild=null,J.height=0,J.children=j}var Rt={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function gt(H,j,J){J?(j.x=H.x,j.y=H.y):(j.x=H.y,j.y=H.x),H.children.forEach(function($,X){gt($,j.children[X],J)})}Vt.exports=function(H,j){j===void 0&&(j={}),j=B.assign({},Rt,j);var J=0;function $(it){if(!it)return null;it.width=0,it.depth&&it.depth>J&&(J=it.depth);var Ot=it.children,Dt=Ot.length,Ft=new Nt(it.height,[]);return Ot.forEach(function(me,Yt){var Ge=$(me);Ft.children.push(Ge),Yt===0&&(Ft.leftChild=Ge),Yt===Dt-1&&(Ft.rightChild=Ge)}),Ft.originNode=it,Ft.isLeaf=it.isLeaf(),Ft}function X(it){if(it.isLeaf||it.children.length===0)it.drawingDepth=J;else{var Ot=it.children.map(function(Ft){return X(Ft)}),Dt=Math.min.apply(null,Ot);it.drawingDepth=Dt-1}return it.drawingDepth}var V;function ct(it){it.x=it.drawingDepth*j.rankSep,it.isLeaf?(it.y=0,V&&(it.y=V.y+V.height+j.nodeSep,it.originNode.parent!==V.originNode.parent&&(it.y+=j.subTreeSep)),V=it):(it.children.forEach(function(Ot){ct(Ot)}),it.y=(it.leftChild.y+it.rightChild.y)/2)}var Ct=$(H);return X(Ct),ct(Ct),gt(Ct,H,j.isHorizontal),H}},function(Vt,K,vt){function B(Ct,it){Ct.prototype=Object.create(it.prototype),Ct.prototype.constructor=Ct,Nt(Ct,it)}function Nt(Ct,it){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ot,Dt){return Ot.__proto__=Dt,Ot},Nt(Ct,it)}var Rt=vt(1),gt=vt(11),H=vt(4),j=vt(0),J=["LR","RL","H"],$=J[0],X=function(Ct){function it(){return Ct.apply(this,arguments)||this}B(it,Ct);var Ot=it.prototype;return Ot.execute=function(){var Ft=this,me=Ft.options,Yt=Ft.rootNode;me.isHorizontal=!0;var Ge=me.indent,Xt=Ge===void 0?20:Ge,On=me.dropCap,rn=On===void 0?!0:On,pe=me.direction,bt=pe===void 0?$:pe,Ut=me.align;if(bt&&J.indexOf(bt)===-1)throw new TypeError("Invalid direction: "+bt);if(bt===J[0])gt(Yt,Xt,rn,Ut);else if(bt===J[1])gt(Yt,Xt,rn,Ut),Yt.right2left();else if(bt===J[2]){var oe=H(Yt,me),zt=oe.left,ce=oe.right;gt(zt,Xt,rn,Ut),zt.right2left(),gt(ce,Xt,rn,Ut);var Me=zt.getBoundingBox();ce.translate(Me.width,0),Yt.x=ce.x-Yt.width/2}return Yt},it}(Rt),V={};function ct(Ct,it){return it=j.assign({},V,it),new X(Ct,it).execute()}Vt.exports=ct},function(Vt,K,vt){var B=vt(0);function Nt(Rt,gt,H,j,J){var $=(typeof H=="function"?H(Rt):H)*Rt.depth;if(!j)try{if(Rt.id===Rt.parent.children[0].id){Rt.x+=$,Rt.y=gt?gt.y:0;return}}catch(ct){}if(Rt.x+=$,gt){if(Rt.y=gt.y+B.getHeight(gt,Rt,J),gt.parent&&Rt.parent.id!==gt.parent.id){var X=gt.parent,V=X.y+B.getHeight(X,Rt,J);Rt.y=V>Rt.y?V:Rt.y}}else Rt.y=0}Vt.exports=function(Rt,gt,H,j){var J=null;Rt.eachNode(function($){Nt($,J,gt,H,j),J=$})}},function(Vt,K,vt){function B(V,ct){V.prototype=Object.create(ct.prototype),V.prototype.constructor=V,Nt(V,ct)}function Nt(V,ct){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ct,it){return Ct.__proto__=it,Ct},Nt(V,ct)}var Rt=vt(1),gt=vt(13),H=vt(2),j=vt(0),J=function(V){function ct(){return V.apply(this,arguments)||this}B(ct,V);var Ct=ct.prototype;return Ct.execute=function(){var Ot=this;return H(Ot.rootNode,Ot.options,gt)},ct}(Rt),$={};function X(V,ct){return ct=j.assign({},$,ct),new J(V,ct).execute()}Vt.exports=X},function(Vt,K,vt){var B=vt(0);function Nt(H,j){var J=0;return H.children.length?H.children.forEach(function($){J+=Nt($,j)}):J=H.height,H._subTreeSep=j.getSubTreeSep(H.data),H.totalHeight=Math.max(H.height,J)+2*H._subTreeSep,H.totalHeight}function Rt(H){var j=H.children,J=j.length;if(J){j.forEach(function(it){Rt(it)});var $=j[0],X=j[J-1],V=X.y-$.y+X.height,ct=0;if(j.forEach(function(it){ct+=it.totalHeight}),V>H.height)H.y=$.y+V/2-H.height/2;else if(j.length!==1||H.height>ct){var Ct=H.y+(H.height-V)/2-$.y;j.forEach(function(it){it.translate(0,Ct)})}else H.y=($.y+$.height/2+X.y+X.height/2)/2-H.height/2}}var gt={getSubTreeSep:function(){return 0}};Vt.exports=function(H,j){j===void 0&&(j={}),j=B.assign({},gt,j),H.parent={x:0,width:0,height:0,y:0},H.BFTraverse(function(J){J.x=J.parent.x+J.parent.width}),H.parent=null,Nt(H,j),H.startY=0,H.y=H.totalHeight/2-H.height/2,H.eachNode(function(J){var $=J.children,X=$.length;if(X){var V=$[0];if(V.startY=J.startY+J._subTreeSep,X===1)V.y=J.y+J.height/2-V.height/2;else{V.y=V.startY+V.totalHeight/2-V.height/2;for(var ct=1;ct<X;ct++){var Ct=$[ct];Ct.startY=$[ct-1].startY+$[ct-1].totalHeight,Ct.y=Ct.startY+Ct.totalHeight/2-Ct.height/2}}}}),Rt(H)}}])})},40238:function(Se,Vt,K){"use strict";K.d(Vt,{Z:function(){return me}});var vt=K(97582),B=K(23279),Nt=K.n(B),Rt=K(67294);function gt(Yt){var Ge=(0,Rt.useRef)(Yt);return Ge.current=Yt,Ge}var H=gt,j=function(Yt){return Yt!==null&&typeof Yt=="object"},J=function(Yt){return typeof Yt=="function"},$=function(Yt){return typeof Yt=="string"},X=function(Yt){return typeof Yt=="boolean"},V=function(Yt){return typeof Yt=="number"},ct=function(Yt){return typeof Yt=="undefined"},Ct=!1,it=Ct,Ot=function(Yt){it&&(J(Yt)||console.error("useUnmount expected parameter is a function, got ".concat(typeof Yt)));var Ge=H(Yt);(0,Rt.useEffect)(function(){return function(){Ge.current()}},[])},Dt=Ot;function Ft(Yt,Ge){var Xt;it&&(J(Yt)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof Yt)));var On=H(Yt),rn=(Xt=Ge==null?void 0:Ge.wait)!==null&&Xt!==void 0?Xt:1e3,pe=(0,Rt.useMemo)(function(){return Nt()(function(){for(var bt=[],Ut=0;Ut<arguments.length;Ut++)bt[Ut]=arguments[Ut];return On.current.apply(On,(0,vt.ev)([],(0,vt.CR)(bt),!1))},rn,Ge)},[]);return Dt(function(){pe.cancel()}),{run:pe,cancel:pe.cancel,flush:pe.flush}}var me=Ft},86738:function(Se,Vt,K){"use strict";K.d(Vt,{Z:function(){return oe}});var vt=K(67294),B=K(21640),Nt=K(93967),Rt=K.n(Nt),gt=K(21770),H=K(98423),j=K(53124),J=K(55241),$=K(86743),X=K(81643),V=K(83622),ct=K(33671),Ct=K(10110),it=K(24457),Ot=K(66330),Dt=K(83559);const Ft=zt=>{const{componentCls:ce,iconCls:Me,antCls:Ne,zIndexPopup:dn,colorText:or,colorWarning:qn,marginXXS:Li,marginXS:hr,fontSize:Cr,fontWeightStrong:ot,colorTextHeading:ut}=zt;return{[ce]:{zIndex:dn,[`&${Ne}-popover`]:{fontSize:Cr},[`${ce}-message`]:{marginBottom:hr,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${ce}-message-icon ${Me}`]:{color:qn,fontSize:Cr,lineHeight:1,marginInlineEnd:hr},[`${ce}-title`]:{fontWeight:ot,color:ut,"&:only-child":{fontWeight:"normal"}},[`${ce}-description`]:{marginTop:Li,color:or}},[`${ce}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:hr}}}}},me=zt=>{const{zIndexPopupBase:ce}=zt;return{zIndexPopup:ce+60}};var Yt=(0,Dt.I$)("Popconfirm",zt=>Ft(zt),me,{resetStyle:!1}),Ge=function(zt,ce){var Me={};for(var Ne in zt)Object.prototype.hasOwnProperty.call(zt,Ne)&&ce.indexOf(Ne)<0&&(Me[Ne]=zt[Ne]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var dn=0,Ne=Object.getOwnPropertySymbols(zt);dn<Ne.length;dn++)ce.indexOf(Ne[dn])<0&&Object.prototype.propertyIsEnumerable.call(zt,Ne[dn])&&(Me[Ne[dn]]=zt[Ne[dn]]);return Me};const Xt=zt=>{const{prefixCls:ce,okButtonProps:Me,cancelButtonProps:Ne,title:dn,description:or,cancelText:qn,okText:Li,okType:hr="primary",icon:Cr=vt.createElement(B.Z,null),showCancel:ot=!0,close:ut,onConfirm:dt,onCancel:ht,onPopupClick:Tt}=zt,{getPrefixCls:_t}=vt.useContext(j.E_),[$t]=(0,Ct.Z)("Popconfirm",it.Z.Popconfirm),_e=(0,X.Z)(dn),An=(0,X.Z)(or);return vt.createElement("div",{className:`${ce}-inner-content`,onClick:Tt},vt.createElement("div",{className:`${ce}-message`},Cr&&vt.createElement("span",{className:`${ce}-message-icon`},Cr),vt.createElement("div",{className:`${ce}-message-text`},_e&&vt.createElement("div",{className:`${ce}-title`},_e),An&&vt.createElement("div",{className:`${ce}-description`},An))),vt.createElement("div",{className:`${ce}-buttons`},ot&&vt.createElement(V.ZP,Object.assign({onClick:ht,size:"small"},Ne),qn||($t==null?void 0:$t.cancelText)),vt.createElement($.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,ct.nx)(hr)),Me),actionFn:dt,close:ut,prefixCls:_t("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},Li||($t==null?void 0:$t.okText))))};var rn=zt=>{const{prefixCls:ce,placement:Me,className:Ne,style:dn}=zt,or=Ge(zt,["prefixCls","placement","className","style"]),{getPrefixCls:qn}=vt.useContext(j.E_),Li=qn("popconfirm",ce),[hr]=Yt(Li);return hr(vt.createElement(Ot.ZP,{placement:Me,className:Rt()(Li,Ne),style:dn,content:vt.createElement(Xt,Object.assign({prefixCls:Li},or))}))},pe=function(zt,ce){var Me={};for(var Ne in zt)Object.prototype.hasOwnProperty.call(zt,Ne)&&ce.indexOf(Ne)<0&&(Me[Ne]=zt[Ne]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var dn=0,Ne=Object.getOwnPropertySymbols(zt);dn<Ne.length;dn++)ce.indexOf(Ne[dn])<0&&Object.prototype.propertyIsEnumerable.call(zt,Ne[dn])&&(Me[Ne[dn]]=zt[Ne[dn]]);return Me};const Ut=vt.forwardRef((zt,ce)=>{var Me,Ne;const{prefixCls:dn,placement:or="top",trigger:qn="click",okType:Li="primary",icon:hr=vt.createElement(B.Z,null),children:Cr,overlayClassName:ot,onOpenChange:ut,onVisibleChange:dt,overlayStyle:ht,styles:Tt,classNames:_t}=zt,$t=pe(zt,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:_e,className:An,style:he,classNames:on,styles:lr}=(0,j.dj)("popconfirm"),[Ve,Ee]=(0,gt.Z)(!1,{value:(Me=zt.open)!==null&&Me!==void 0?Me:zt.visible,defaultValue:(Ne=zt.defaultOpen)!==null&&Ne!==void 0?Ne:zt.defaultVisible}),Wn=(mr,Ii)=>{Ee(mr,!0),dt==null||dt(mr),ut==null||ut(mr,Ii)},Vn=mr=>{Wn(!1,mr)},vi=mr=>{var Ii;return(Ii=zt.onConfirm)===null||Ii===void 0?void 0:Ii.call(void 0,mr)},ua=mr=>{var Ii;Wn(!1,mr),(Ii=zt.onCancel)===null||Ii===void 0||Ii.call(void 0,mr)},Rs=(mr,Ii)=>{const{disabled:Aa=!1}=zt;Aa||Wn(mr,Ii)},ti=_e("popconfirm",dn),ro=Rt()(ti,An,ot,on.root,_t==null?void 0:_t.root),Zo=Rt()(on.body,_t==null?void 0:_t.body),[Ns]=Yt(ti);return Ns(vt.createElement(J.Z,Object.assign({},(0,H.Z)($t,["title"]),{trigger:qn,placement:or,onOpenChange:Rs,open:Ve,ref:ce,classNames:{root:ro,body:Zo},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},lr.root),he),ht),Tt==null?void 0:Tt.root),body:Object.assign(Object.assign({},lr.body),Tt==null?void 0:Tt.body)},content:vt.createElement(Xt,Object.assign({okType:Li,icon:hr},zt,{prefixCls:ti,close:Vn,onConfirm:vi,onCancel:ua})),"data-popover-inject":!0}),Cr))});Ut._InternalPanelDoNotUseOrYouWillBeFired=rn;var oe=Ut},40784:function(Se,Vt,K){"use strict";K.d(Vt,{Z:function(){return Ls}});var vt=K(74902),B=K(67294),Nt=K(93967),Rt=K.n(Nt),gt=K(25132),H=K(9708);const j=Wt=>{const jt=new Map;return Wt.forEach((ge,se)=>{jt.set(ge,se)}),jt},J=Wt=>{const jt=new Map;return Wt.forEach(({disabled:ge,key:se},ae)=>{ge&&jt.set(se,ae)}),jt};var $=K(53124),X=K(88258),V=K(65223),ct=K(10110),Ct=K(24457),Ot=(Wt,jt,ge)=>{const se=B.useMemo(()=>(Wt||[]).map(fe=>jt?Object.assign(Object.assign({},fe),{key:jt(fe)}):fe),[Wt,jt]),[ae,be]=B.useMemo(()=>{var fe;const ln=[],kn=Array.from({length:(fe=ge==null?void 0:ge.length)!==null&&fe!==void 0?fe:0}),Qn=j(ge||[]);return se.forEach(Pn=>{if(Qn.has(Pn.key)){const an=Qn.get(Pn.key);kn[an]=Pn}else ln.push(Pn)}),[ln,kn]},[se,ge]);return[se,ae.filter(Boolean),be.filter(Boolean)]},Dt=K(56790);const Ft=[];function me(Wt,jt){const ge=Wt.filter(se=>jt.has(se));return Wt.length===ge.length?Wt:ge}function Yt(Wt){return Array.from(Wt).join(";")}function Ge(Wt,jt,ge){const[se,ae]=B.useMemo(()=>[new Set(Wt.map(an=>an==null?void 0:an.key)),new Set(jt.map(an=>an==null?void 0:an.key))],[Wt,jt]),[be,fe]=(0,Dt.C8)(Ft,{value:ge}),ln=B.useMemo(()=>me(be,se),[be,se]),kn=B.useMemo(()=>me(be,ae),[be,ae]);B.useEffect(()=>{fe([].concat((0,vt.Z)(me(be,se)),(0,vt.Z)(me(be,ae))))},[Yt(se),Yt(ae)]);const Qn=(0,Dt.zX)(an=>{fe([].concat((0,vt.Z)(an),(0,vt.Z)(kn)))}),Pn=(0,Dt.zX)(an=>{fe([].concat((0,vt.Z)(ln),(0,vt.Z)(an)))});return[ln,kn,Qn,Pn]}var Xt=Ge,On=K(80882),rn=K(98423),pe=K(84567),bt=K(85418),Ut=K(21770),oe=K(84611),zt=K(48689);const ce=Wt=>{const{renderedText:jt,renderedEl:ge,item:se,checked:ae,disabled:be,prefixCls:fe,onClick:ln,onRemove:kn,showRemove:Qn}=Wt,Pn=Rt()(`${fe}-content-item`,{[`${fe}-content-item-disabled`]:be||se.disabled,[`${fe}-content-item-checked`]:ae&&!se.disabled});let an;(typeof jt=="string"||typeof jt=="number")&&(an=String(jt));const[pi]=(0,ct.Z)("Transfer",Ct.Z.Transfer),Un={className:Pn,title:an},Yr=B.createElement("span",{className:`${fe}-content-item-text`},ge);return Qn?B.createElement("li",Object.assign({},Un),Yr,B.createElement("button",{type:"button",disabled:be||se.disabled,className:`${fe}-content-item-remove`,"aria-label":pi==null?void 0:pi.remove,onClick:()=>kn==null?void 0:kn(se)},B.createElement(zt.Z,null))):(Un.onClick=be||se.disabled?void 0:os=>ln(se,os),B.createElement("li",Object.assign({},Un),B.createElement(pe.Z,{className:`${fe}-checkbox`,checked:ae,disabled:be||se.disabled}),Yr))};var Me=B.memo(ce);const Ne=["handleFilter","handleClear","checkedKeys"],dn=Wt=>Object.assign(Object.assign({},{simple:!0,showSizeChanger:!1,showLessItems:!1}),Wt),or=(Wt,jt)=>{const{prefixCls:ge,filteredRenderItems:se,selectedKeys:ae,disabled:be,showRemove:fe,pagination:ln,onScroll:kn,onItemSelect:Qn,onItemRemove:Pn}=Wt,[an,pi]=B.useState(1),Un=B.useMemo(()=>ln?dn(typeof ln=="object"?ln:{}):null,[ln]),[Yr,os]=(0,Ut.Z)(10,{value:Un==null?void 0:Un.pageSize});B.useEffect(()=>{if(Un){const In=Math.ceil(se.length/Yr);pi(Math.min(an,In))}},[se,Un,Yr]);const io=(In,br)=>{Qn(In.key,!ae.includes(In.key),br)},ka=In=>{Pn==null||Pn([In.key])},ei=In=>{pi(In)},Pa=(In,br)=>{pi(In),os(br)},Ra=B.useMemo(()=>Un?se.slice((an-1)*Yr,an*Yr):se,[an,se,Un,Yr]);B.useImperativeHandle(jt,()=>({items:Ra}));const Is=Un?B.createElement(oe.Z,{size:"small",disabled:be,simple:Un.simple,pageSize:Yr,showLessItems:Un.showLessItems,showSizeChanger:Un.showSizeChanger,className:`${ge}-pagination`,total:se.length,current:an,onChange:ei,onShowSizeChange:Pa}):null,gi=Rt()(`${ge}-content`,{[`${ge}-content-show-remove`]:fe});return B.createElement(B.Fragment,null,B.createElement("ul",{className:gi,onScroll:kn},(Ra||[]).map(({renderedEl:In,renderedText:br,item:ha})=>B.createElement(Me,{key:ha.key,item:ha,renderedText:br,renderedEl:In,prefixCls:ge,showRemove:fe,onClick:io,onRemove:ka,checked:ae.includes(ha.key),disabled:be||ha.disabled}))),Is)};var qn=B.forwardRef(or),Li=K(68795),hr=K(82586),ot=Wt=>{const{placeholder:jt="",value:ge,prefixCls:se,disabled:ae,onChange:be,handleClear:fe}=Wt,ln=B.useCallback(kn=>{be==null||be(kn),kn.target.value===""&&(fe==null||fe())},[be]);return B.createElement(hr.Z,{placeholder:jt,className:se,value:ge,onChange:ln,disabled:ae,allowClear:!0,prefix:B.createElement(Li.Z,null)})};const ut=()=>null;function dt(Wt){return!!(Wt&&!B.isValidElement(Wt)&&Object.prototype.toString.call(Wt)==="[object Object]")}function ht(Wt){return Wt.filter(jt=>!jt.disabled).map(jt=>jt.key)}const Tt=Wt=>Wt!==void 0,_t=Wt=>Wt&&typeof Wt=="object"?Object.assign(Object.assign({},Wt),{defaultValue:Wt.defaultValue||""}):{defaultValue:"",placeholder:""};var _e=Wt=>{const{prefixCls:jt,dataSource:ge=[],titleText:se="",checkedKeys:ae,disabled:be,showSearch:fe=!1,style:ln,searchPlaceholder:kn,notFoundContent:Qn,selectAll:Pn,deselectAll:an,selectCurrent:pi,selectInvert:Un,removeAll:Yr,removeCurrent:os,showSelectAll:io=!0,showRemove:ka,pagination:ei,direction:Pa,itemsUnit:Ra,itemUnit:Is,selectAllLabel:gi,selectionsIcon:In,footer:br,renderList:ha,onItemSelectAll:Jn,onItemRemove:Fr,handleFilter:yi,handleClear:ls,filterOption:kc,render:mi=ut}=Wt,ao=_t(fe),[zr,Xi]=(0,B.useState)(ao.defaultValue),so=(0,B.useRef)({}),Pc=qt=>{Xi(qt.target.value),yi(qt)},Wu=()=>{Xi(""),ls()},Gu=(qt,Be)=>kc?kc(zr,Be,Pa):qt.includes(zr),Wo=qt=>{let Be=ha?ha(Object.assign(Object.assign({},qt),{onItemSelect:(Zr,bi)=>qt.onItemSelect(Zr,bi)})):null;const Dn=!!Be;return Dn||(Be=B.createElement(qn,Object.assign({ref:so},qt))),{customize:Dn,bodyContent:Be}},cs=qt=>{const Be=mi(qt),Dn=dt(Be);return{item:qt,renderedEl:Dn?Be.label:Be,renderedText:Dn?Be.value:Be}},fa=(0,B.useMemo)(()=>Array.isArray(Qn)?Qn[Pa==="left"?0:1]:Qn,[Qn,Pa]),[tr,Rc]=(0,B.useMemo)(()=>{const qt=[],Be=[];return ge.forEach(Dn=>{const Zr=cs(Dn);zr&&!Gu(Zr.renderedText,Dn)||(qt.push(Dn),Be.push(Zr))}),[qt,Be]},[ge,zr]),Il=(0,B.useMemo)(()=>tr.filter(qt=>ae.includes(qt.key)&&!qt.disabled),[ae,tr]),Qe=(0,B.useMemo)(()=>{if(Il.length===0)return"none";const qt=j(ae);return tr.every(Be=>qt.has(Be.key)||!!Be.disabled)?"all":"part"},[ae,Il]),Go=(0,B.useMemo)(()=>{const qt=fe?B.createElement("div",{className:`${jt}-body-search-wrapper`},B.createElement(ot,{prefixCls:`${jt}-search`,onChange:Pc,handleClear:Wu,placeholder:ao.placeholder||kn,value:zr,disabled:be})):null,{customize:Be,bodyContent:Dn}=Wo(Object.assign(Object.assign({},(0,rn.Z)(Wt,Ne)),{filteredItems:tr,filteredRenderItems:Rc,selectedKeys:ae}));let Zr;return Be?Zr=B.createElement("div",{className:`${jt}-body-customize-wrapper`},Dn):Zr=tr.length?Dn:B.createElement("div",{className:`${jt}-body-not-found`},fa),B.createElement("div",{className:Rt()(`${jt}-body`,{[`${jt}-body-with-search`]:fe})},qt,Zr)},[fe,jt,kn,zr,be,ae,tr,Rc,fa]),Na=B.createElement(pe.Z,{disabled:ge.filter(qt=>!qt.disabled).length===0||be,checked:Qe==="all",indeterminate:Qe==="part",className:`${jt}-checkbox`,onChange:()=>{Jn==null||Jn(tr.filter(qt=>!qt.disabled).map(({key:qt})=>qt),Qe!=="all")}}),jo=(qt,Be)=>{if(gi)return typeof gi=="function"?gi({selectedCount:qt,totalCount:Be}):gi;const Dn=Be>1?Ra:Is;return B.createElement(B.Fragment,null,(qt>0?`${qt}/`:"")+Be," ",Dn)},da=br&&(br.length<2?br(Wt):br(Wt,{direction:Pa})),ni=Rt()(jt,{[`${jt}-with-pagination`]:!!ei,[`${jt}-with-footer`]:!!da}),oo=da?B.createElement("div",{className:`${jt}-footer`},da):null,Di=!ka&&!ei&&Na;let lo;ka?lo=[ei?{key:"removeCurrent",label:os,onClick(){var qt;const Be=ht((((qt=so.current)===null||qt===void 0?void 0:qt.items)||[]).map(Dn=>Dn.item));Fr==null||Fr(Be)}}:null,{key:"removeAll",label:Yr,onClick(){Fr==null||Fr(ht(tr))}}].filter(Boolean):lo=[{key:"selectAll",label:Qe==="all"?an:Pn,onClick(){const qt=ht(tr);Jn==null||Jn(qt,qt.length!==ae.length)}},ei?{key:"selectCurrent",label:pi,onClick(){var qt;const Be=((qt=so.current)===null||qt===void 0?void 0:qt.items)||[];Jn==null||Jn(ht(Be.map(Dn=>Dn.item)),!0)}}:null,{key:"selectInvert",label:Un,onClick(){var qt;const Be=ht((((qt=so.current)===null||qt===void 0?void 0:qt.items)||[]).map(bi=>bi.item)),Dn=new Set(ae),Zr=new Set(Dn);Be.forEach(bi=>{Dn.has(bi)?Zr.delete(bi):Zr.add(bi)}),Jn==null||Jn(Array.from(Zr),"replace")}}];const $o=B.createElement(bt.Z,{className:`${jt}-header-dropdown`,menu:{items:lo},disabled:be},Tt(In)?In:B.createElement(On.Z,null));return B.createElement("div",{className:ni,style:ln},B.createElement("div",{className:`${jt}-header`},io?B.createElement(B.Fragment,null,Di,$o):null,B.createElement("span",{className:`${jt}-header-selected`},jo(Il.length,tr.length)),B.createElement("span",{className:`${jt}-header-title`},se)),Go,oo)},An=K(6171),he=K(90814),on=K(83622),Ve=Wt=>{const{disabled:jt,moveToLeft:ge,moveToRight:se,leftArrowText:ae="",rightArrowText:be="",leftActive:fe,rightActive:ln,className:kn,style:Qn,direction:Pn,oneWay:an}=Wt;return B.createElement("div",{className:kn,style:Qn},B.createElement(on.ZP,{type:"primary",size:"small",disabled:jt||!ln,onClick:se,icon:Pn!=="rtl"?B.createElement(he.Z,null):B.createElement(An.Z,null)},be),!an&&B.createElement(on.ZP,{type:"primary",size:"small",disabled:jt||!fe,onClick:ge,icon:Pn!=="rtl"?B.createElement(An.Z,null):B.createElement(he.Z,null)},ae))},Ee=K(11568),Wn=K(14747),Vn=K(83559),vi=K(83262);const ua=Wt=>{const{antCls:jt,componentCls:ge,listHeight:se,controlHeightLG:ae}=Wt,be=`${jt}-table`,fe=`${jt}-input`;return{[`${ge}-customize-list`]:{[`${ge}-list`]:{flex:"1 1 50%",width:"auto",height:"auto",minHeight:se,minWidth:0},[`${be}-wrapper`]:{[`${be}-small`]:{border:0,borderRadius:0,[`${be}-selection-column`]:{width:ae,minWidth:ae}},[`${be}-pagination${be}-pagination`]:{margin:0,padding:Wt.paddingXS}},[`${fe}[disabled]`]:{backgroundColor:"transparent"}}}},Rs=(Wt,jt)=>{const{componentCls:ge,colorBorder:se}=Wt;return{[`${ge}-list`]:{borderColor:jt,"&-search:not([disabled])":{borderColor:se}}}},ti=Wt=>{const{componentCls:jt}=Wt;return{[`${jt}-status-error`]:Object.assign({},Rs(Wt,Wt.colorError)),[`${jt}-status-warning`]:Object.assign({},Rs(Wt,Wt.colorWarning))}},ro=Wt=>{const{componentCls:jt,colorBorder:ge,colorSplit:se,lineWidth:ae,itemHeight:be,headerHeight:fe,transferHeaderVerticalPadding:ln,itemPaddingBlock:kn,controlItemBgActive:Qn,colorTextDisabled:Pn,colorTextSecondary:an,listHeight:pi,listWidth:Un,listWidthLG:Yr,fontSizeIcon:os,marginXS:io,paddingSM:ka,lineType:ei,antCls:Pa,iconCls:Ra,motionDurationSlow:Is,controlItemBgHover:gi,borderRadiusLG:In,colorBgContainer:br,colorText:ha,controlItemBgActiveHover:Jn}=Wt,Fr=(0,Ee.bf)(Wt.calc(In).sub(ae).equal());return{display:"flex",flexDirection:"column",width:Un,height:pi,border:`${(0,Ee.bf)(ae)} ${ei} ${ge}`,borderRadius:Wt.borderRadiusLG,"&-with-pagination":{width:Yr,height:"auto"},"&-search":{[`${Ra}-search`]:{color:Pn}},"&-header":{display:"flex",flex:"none",alignItems:"center",height:fe,padding:`${(0,Ee.bf)(Wt.calc(ln).sub(ae).equal())} ${(0,Ee.bf)(ka)} ${(0,Ee.bf)(ln)}`,color:ha,background:br,borderBottom:`${(0,Ee.bf)(ae)} ${ei} ${se}`,borderRadius:`${(0,Ee.bf)(In)} ${(0,Ee.bf)(In)} 0 0`,"> *:not(:last-child)":{marginInlineEnd:4},"> *":{flex:"none"},"&-title":Object.assign(Object.assign({},Wn.vS),{flex:"auto",textAlign:"end"}),"&-dropdown":Object.assign(Object.assign({},(0,Wn.Ro)()),{fontSize:os,transform:"translateY(10%)",cursor:"pointer","&[disabled]":{cursor:"not-allowed"}})},"&-body":{display:"flex",flex:"auto",flexDirection:"column",fontSize:Wt.fontSize,minHeight:0,"&-search-wrapper":{position:"relative",flex:"none",padding:ka}},"&-content":{flex:"auto",margin:0,padding:0,overflow:"auto",listStyle:"none",borderRadius:`0 0 ${Fr} ${Fr}`,"&-item":{display:"flex",alignItems:"center",minHeight:be,padding:`${(0,Ee.bf)(kn)} ${(0,Ee.bf)(ka)}`,transition:`all ${Is}`,"> *:not(:last-child)":{marginInlineEnd:io},"> *":{flex:"none"},"&-text":Object.assign(Object.assign({},Wn.vS),{flex:"auto"}),"&-remove":Object.assign(Object.assign({},(0,Wn.Nd)(Wt)),{color:ge,"&:hover, &:focus":{color:an}}),[`&:not(${jt}-list-content-item-disabled)`]:{"&:hover":{backgroundColor:gi,cursor:"pointer"},[`&${jt}-list-content-item-checked:hover`]:{backgroundColor:Jn}},"&-checked":{backgroundColor:Qn},"&-disabled":{color:Pn,cursor:"not-allowed"}},[`&-show-remove ${jt}-list-content-item:not(${jt}-list-content-item-disabled):hover`]:{background:"transparent",cursor:"default"}},"&-pagination":{padding:Wt.paddingXS,textAlign:"end",borderTop:`${(0,Ee.bf)(ae)} ${ei} ${se}`,[`${Pa}-pagination-options`]:{paddingInlineEnd:Wt.paddingXS}},"&-body-not-found":{flex:"none",width:"100%",margin:"auto 0",color:Pn,textAlign:"center"},"&-footer":{borderTop:`${(0,Ee.bf)(ae)} ${ei} ${se}`},"&-checkbox":{lineHeight:1}}},Zo=Wt=>{const{antCls:jt,iconCls:ge,componentCls:se,marginXS:ae,marginXXS:be,fontSizeIcon:fe,colorBgContainerDisabled:ln}=Wt;return{[se]:Object.assign(Object.assign({},(0,Wn.Wf)(Wt)),{position:"relative",display:"flex",alignItems:"stretch",[`${se}-disabled`]:{[`${se}-list`]:{background:ln}},[`${se}-list`]:ro(Wt),[`${se}-operation`]:{display:"flex",flex:"none",flexDirection:"column",alignSelf:"center",margin:`0 ${(0,Ee.bf)(ae)}`,verticalAlign:"middle",gap:be,[`${jt}-btn ${ge}`]:{fontSize:fe}}})}},Ns=Wt=>{const{componentCls:jt}=Wt;return{[`${jt}-rtl`]:{direction:"rtl"}}},mr=Wt=>{const{fontSize:jt,lineHeight:ge,controlHeight:se,controlHeightLG:ae,lineWidth:be}=Wt,fe=Math.round(jt*ge);return{listWidth:180,listHeight:200,listWidthLG:250,headerHeight:ae,itemHeight:se,itemPaddingBlock:(se-fe)/2,transferHeaderVerticalPadding:Math.ceil((ae-be-fe)/2)}};var Ii=(0,Vn.I$)("Transfer",Wt=>{const jt=(0,vi.IX)(Wt);return[Zo(jt),ua(jt),ti(jt),Ns(jt)]},mr);const Aa=Wt=>{const{dataSource:jt,targetKeys:ge=[],selectedKeys:se,selectAllLabels:ae=[],operations:be=[],style:fe={},listStyle:ln={},locale:kn={},titles:Qn,disabled:Pn,showSearch:an=!1,operationStyle:pi,showSelectAll:Un,oneWay:Yr,pagination:os,status:io,prefixCls:ka,className:ei,rootClassName:Pa,selectionsIcon:Ra,filterOption:Is,render:gi,footer:In,children:br,rowKey:ha,onScroll:Jn,onChange:Fr,onSearch:yi,onSelectChange:ls}=Wt,{getPrefixCls:kc,renderEmpty:mi,direction:ao,transfer:zr}=(0,B.useContext)($.E_),Xi=kc("transfer",ka),[so,Pc,Wu]=Ii(Xi),[Gu,Wo,cs]=Ot(jt,ha,ge),[fa,tr,Rc,Il]=Xt(Wo,cs,se),[Qe,Go]=(0,gt.Z)(ne=>ne.key),[Na,jo]=(0,gt.Z)(ne=>ne.key),da=(0,B.useCallback)((ne,ke)=>{if(ne==="left"){const Rn=typeof ke=="function"?ke(fa||[]):ke;Rc(Rn)}else{const Rn=typeof ke=="function"?ke(tr||[]):ke;Il(Rn)}},[fa,tr]),ni=(ne,ke)=>{(ne==="left"?Go:jo)(ke)},oo=(0,B.useCallback)((ne,ke)=>{ne==="left"?ls==null||ls(ke,tr):ls==null||ls(fa,ke)},[fa,tr]),Di=ne=>{var ke;return(ke=Qn!=null?Qn:ne.titles)!==null&&ke!==void 0?ke:[]},lo=ne=>{Jn==null||Jn("left",ne)},$o=ne=>{Jn==null||Jn("right",ne)},qt=ne=>{const ke=ne==="right"?fa:tr,Rn=J(Gu),ri=ke.filter(fo=>!Rn.has(fo)),xi=j(ri),Je=ne==="right"?ri.concat(ge):ge.filter(fo=>!xi.has(fo)),Ue=ne==="right"?"left":"right";da(Ue,[]),oo(Ue,[]),Fr==null||Fr(Je,ne,ri)},Be=()=>{qt("left"),ni("left",null)},Dn=()=>{qt("right"),ni("right",null)},Zr=(ne,ke,Rn)=>{da(ne,ri=>{let xi=[];if(Rn==="replace")xi=ke;else if(Rn)xi=Array.from(new Set([].concat((0,vt.Z)(ri),(0,vt.Z)(ke))));else{const Je=j(ke);xi=ri.filter(Ue=>!Je.has(Ue))}return oo(ne,xi),xi}),ni(ne,null)},bi=(ne,ke)=>{Zr("left",ne,ke)},Nc=(ne,ke)=>{Zr("right",ne,ke)},Bf=ne=>yi==null?void 0:yi("left",ne.target.value),La=ne=>yi==null?void 0:yi("right",ne.target.value),us=()=>yi==null?void 0:yi("left",""),Dl=()=>yi==null?void 0:yi("right",""),ju=(ne,ke,Rn,ri,xi)=>{ke.has(Rn)&&(ke.delete(Rn),ni(ne,null)),ri&&(ke.add(Rn),ni(ne,xi))},Lc=(ne,ke,Rn,ri)=>{(ne==="left"?Qe:Na)(ri,ke,Rn)},co=(ne,ke,Rn,ri)=>{const xi=ne==="left",Je=(0,vt.Z)(xi?fa:tr),Ue=new Set(Je),fo=(0,vt.Z)(xi?Wo:cs).filter(vo=>!(vo!=null&&vo.disabled)),Dc=fo.findIndex(vo=>vo.key===ke);ri&&Je.length>0?Lc(ne,fo,Ue,Dc):ju(ne,Ue,ke,Rn,Dc);const Ku=Array.from(Ue);oo(ne,Ku),Wt.selectedKeys||da(ne,Ku)},Bl=(ne,ke,Rn)=>{co("left",ne,ke,Rn==null?void 0:Rn.shiftKey)},uo=(ne,ke,Rn)=>{co("right",ne,ke,Rn==null?void 0:Rn.shiftKey)},Ho=ne=>{da("right",[]),Fr==null||Fr(ge.filter(ke=>!ne.includes(ke)),"left",(0,vt.Z)(ne))},hs=ne=>typeof ln=="function"?ln({direction:ne}):ln||{},Fl=(0,B.useContext)(V.aM),{hasFeedback:$u,status:ho}=Fl,zl=ne=>Object.assign(Object.assign(Object.assign({},ne),{notFoundContent:(mi==null?void 0:mi("Transfer"))||B.createElement(X.Z,{componentName:"Transfer"})}),kn),Hu=(0,H.F)(ho,io),Ic=!br&&os,Ff=cs.filter(ne=>tr.includes(ne.key)&&!ne.disabled).length>0,zf=Wo.filter(ne=>fa.includes(ne.key)&&!ne.disabled).length>0,Vu=Rt()(Xi,{[`${Xi}-disabled`]:Pn,[`${Xi}-customize-list`]:!!br,[`${Xi}-rtl`]:ao==="rtl"},(0,H.Z)(Xi,Hu,$u),zr==null?void 0:zr.className,ei,Pa,Pc,Wu),[Uu]=(0,ct.Z)("Transfer",Ct.Z.Transfer),Zl=zl(Uu),[Yu,Xu]=Di(Zl),Wl=Ra!=null?Ra:zr==null?void 0:zr.selectionsIcon;return so(B.createElement("div",{className:Vu,style:Object.assign(Object.assign({},zr==null?void 0:zr.style),fe)},B.createElement(_e,Object.assign({prefixCls:`${Xi}-list`,titleText:Yu,dataSource:Wo,filterOption:Is,style:hs("left"),checkedKeys:fa,handleFilter:Bf,handleClear:us,onItemSelect:Bl,onItemSelectAll:bi,render:gi,showSearch:an,renderList:br,footer:In,onScroll:lo,disabled:Pn,direction:ao==="rtl"?"right":"left",showSelectAll:Un,selectAllLabel:ae[0],pagination:Ic,selectionsIcon:Wl},Zl)),B.createElement(Ve,{className:`${Xi}-operation`,rightActive:zf,rightArrowText:be[0],moveToRight:Dn,leftActive:Ff,leftArrowText:be[1],moveToLeft:Be,style:pi,disabled:Pn,direction:ao,oneWay:Yr}),B.createElement(_e,Object.assign({prefixCls:`${Xi}-list`,titleText:Xu,dataSource:cs,filterOption:Is,style:hs("right"),checkedKeys:tr,handleFilter:La,handleClear:Dl,onItemSelect:uo,onItemSelectAll:Nc,onItemRemove:Ho,render:gi,showSearch:an,renderList:br,footer:In,onScroll:$o,disabled:Pn,direction:ao==="rtl"?"left":"right",showSelectAll:Un,selectAllLabel:ae[1],showRemove:Yr,pagination:Ic,selectionsIcon:Wl},Zl))))};Aa.List=_e,Aa.Search=ot,Aa.Operation=Ve;var Ls=Aa},8874:function(Se){"use strict";Se.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Se,Vt,K){var vt=K(8874),B=K(86851),Nt=Object.hasOwnProperty,Rt=Object.create(null);for(var gt in vt)Nt.call(vt,gt)&&(Rt[vt[gt]]=gt);var H=Se.exports={to:{},get:{}};H.get=function($){var X=$.substring(0,3).toLowerCase(),V,ct;switch(X){case"hsl":V=H.get.hsl($),ct="hsl";break;case"hwb":V=H.get.hwb($),ct="hwb";break;default:V=H.get.rgb($),ct="rgb";break}return V?{model:ct,value:V}:null},H.get.rgb=function($){if(!$)return null;var X=/^#([a-f0-9]{3,4})$/i,V=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,ct=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Ct=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,it=/^(\w+)$/,Ot=[0,0,0,1],Dt,Ft,me;if(Dt=$.match(V)){for(me=Dt[2],Dt=Dt[1],Ft=0;Ft<3;Ft++){var Yt=Ft*2;Ot[Ft]=parseInt(Dt.slice(Yt,Yt+2),16)}me&&(Ot[3]=parseInt(me,16)/255)}else if(Dt=$.match(X)){for(Dt=Dt[1],me=Dt[3],Ft=0;Ft<3;Ft++)Ot[Ft]=parseInt(Dt[Ft]+Dt[Ft],16);me&&(Ot[3]=parseInt(me+me,16)/255)}else if(Dt=$.match(ct)){for(Ft=0;Ft<3;Ft++)Ot[Ft]=parseInt(Dt[Ft+1],0);Dt[4]&&(Dt[5]?Ot[3]=parseFloat(Dt[4])*.01:Ot[3]=parseFloat(Dt[4]))}else if(Dt=$.match(Ct)){for(Ft=0;Ft<3;Ft++)Ot[Ft]=Math.round(parseFloat(Dt[Ft+1])*2.55);Dt[4]&&(Dt[5]?Ot[3]=parseFloat(Dt[4])*.01:Ot[3]=parseFloat(Dt[4]))}else return(Dt=$.match(it))?Dt[1]==="transparent"?[0,0,0,0]:Nt.call(vt,Dt[1])?(Ot=vt[Dt[1]],Ot[3]=1,Ot):null:null;for(Ft=0;Ft<3;Ft++)Ot[Ft]=j(Ot[Ft],0,255);return Ot[3]=j(Ot[3],0,1),Ot},H.get.hsl=function($){if(!$)return null;var X=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,V=$.match(X);if(V){var ct=parseFloat(V[4]),Ct=(parseFloat(V[1])%360+360)%360,it=j(parseFloat(V[2]),0,100),Ot=j(parseFloat(V[3]),0,100),Dt=j(isNaN(ct)?1:ct,0,1);return[Ct,it,Ot,Dt]}return null},H.get.hwb=function($){if(!$)return null;var X=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,V=$.match(X);if(V){var ct=parseFloat(V[4]),Ct=(parseFloat(V[1])%360+360)%360,it=j(parseFloat(V[2]),0,100),Ot=j(parseFloat(V[3]),0,100),Dt=j(isNaN(ct)?1:ct,0,1);return[Ct,it,Ot,Dt]}return null},H.to.hex=function(){var $=B(arguments);return"#"+J($[0])+J($[1])+J($[2])+($[3]<1?J(Math.round($[3]*255)):"")},H.to.rgb=function(){var $=B(arguments);return $.length<4||$[3]===1?"rgb("+Math.round($[0])+", "+Math.round($[1])+", "+Math.round($[2])+")":"rgba("+Math.round($[0])+", "+Math.round($[1])+", "+Math.round($[2])+", "+$[3]+")"},H.to.rgb.percent=function(){var $=B(arguments),X=Math.round($[0]/255*100),V=Math.round($[1]/255*100),ct=Math.round($[2]/255*100);return $.length<4||$[3]===1?"rgb("+X+"%, "+V+"%, "+ct+"%)":"rgba("+X+"%, "+V+"%, "+ct+"%, "+$[3]+")"},H.to.hsl=function(){var $=B(arguments);return $.length<4||$[3]===1?"hsl("+$[0]+", "+$[1]+"%, "+$[2]+"%)":"hsla("+$[0]+", "+$[1]+"%, "+$[2]+"%, "+$[3]+")"},H.to.hwb=function(){var $=B(arguments),X="";return $.length>=4&&$[3]!==1&&(X=", "+$[3]),"hwb("+$[0]+", "+$[1]+"%, "+$[2]+"%"+X+")"},H.to.keyword=function($){return Rt[$.slice(0,3)]};function j($,X,V){return Math.min(Math.max(X,$),V)}function J($){var X=Math.round($).toString(16).toUpperCase();return X.length<2?"0"+X:X}},26729:function(Se){"use strict";var Vt=Object.prototype.hasOwnProperty,K="~";function vt(){}Object.create&&(vt.prototype=Object.create(null),new vt().__proto__||(K=!1));function B(H,j,J){this.fn=H,this.context=j,this.once=J||!1}function Nt(H,j,J,$,X){if(typeof J!="function")throw new TypeError("The listener must be a function");var V=new B(J,$||H,X),ct=K?K+j:j;return H._events[ct]?H._events[ct].fn?H._events[ct]=[H._events[ct],V]:H._events[ct].push(V):(H._events[ct]=V,H._eventsCount++),H}function Rt(H,j){--H._eventsCount===0?H._events=new vt:delete H._events[j]}function gt(){this._events=new vt,this._eventsCount=0}gt.prototype.eventNames=function(){var j=[],J,$;if(this._eventsCount===0)return j;for($ in J=this._events)Vt.call(J,$)&&j.push(K?$.slice(1):$);return Object.getOwnPropertySymbols?j.concat(Object.getOwnPropertySymbols(J)):j},gt.prototype.listeners=function(j){var J=K?K+j:j,$=this._events[J];if(!$)return[];if($.fn)return[$.fn];for(var X=0,V=$.length,ct=new Array(V);X<V;X++)ct[X]=$[X].fn;return ct},gt.prototype.listenerCount=function(j){var J=K?K+j:j,$=this._events[J];return $?$.fn?1:$.length:0},gt.prototype.emit=function(j,J,$,X,V,ct){var Ct=K?K+j:j;if(!this._events[Ct])return!1;var it=this._events[Ct],Ot=arguments.length,Dt,Ft;if(it.fn){switch(it.once&&this.removeListener(j,it.fn,void 0,!0),Ot){case 1:return it.fn.call(it.context),!0;case 2:return it.fn.call(it.context,J),!0;case 3:return it.fn.call(it.context,J,$),!0;case 4:return it.fn.call(it.context,J,$,X),!0;case 5:return it.fn.call(it.context,J,$,X,V),!0;case 6:return it.fn.call(it.context,J,$,X,V,ct),!0}for(Ft=1,Dt=new Array(Ot-1);Ft<Ot;Ft++)Dt[Ft-1]=arguments[Ft];it.fn.apply(it.context,Dt)}else{var me=it.length,Yt;for(Ft=0;Ft<me;Ft++)switch(it[Ft].once&&this.removeListener(j,it[Ft].fn,void 0,!0),Ot){case 1:it[Ft].fn.call(it[Ft].context);break;case 2:it[Ft].fn.call(it[Ft].context,J);break;case 3:it[Ft].fn.call(it[Ft].context,J,$);break;case 4:it[Ft].fn.call(it[Ft].context,J,$,X);break;default:if(!Dt)for(Yt=1,Dt=new Array(Ot-1);Yt<Ot;Yt++)Dt[Yt-1]=arguments[Yt];it[Ft].fn.apply(it[Ft].context,Dt)}}return!0},gt.prototype.on=function(j,J,$){return Nt(this,j,J,$,!1)},gt.prototype.once=function(j,J,$){return Nt(this,j,J,$,!0)},gt.prototype.removeListener=function(j,J,$,X){var V=K?K+j:j;if(!this._events[V])return this;if(!J)return Rt(this,V),this;var ct=this._events[V];if(ct.fn)ct.fn===J&&(!X||ct.once)&&(!$||ct.context===$)&&Rt(this,V);else{for(var Ct=0,it=[],Ot=ct.length;Ct<Ot;Ct++)(ct[Ct].fn!==J||X&&!ct[Ct].once||$&&ct[Ct].context!==$)&&it.push(ct[Ct]);it.length?this._events[V]=it.length===1?it[0]:it:Rt(this,V)}return this},gt.prototype.removeAllListeners=function(j){var J;return j?(J=K?K+j:j,this._events[J]&&Rt(this,J)):(this._events=new vt,this._eventsCount=0),this},gt.prototype.off=gt.prototype.removeListener,gt.prototype.addListener=gt.prototype.on,gt.prefixed=K,gt.EventEmitter=gt,Se.exports=gt},96486:function(Se,Vt,K){Se=K.nmd(Se);var vt;(function(){var B,Nt="4.17.21",Rt=200,gt="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",H="Expected a function",j="Invalid `variable` option passed into `_.template`",J="__lodash_hash_undefined__",$=500,X="__lodash_placeholder__",V=1,ct=2,Ct=4,it=1,Ot=2,Dt=1,Ft=2,me=4,Yt=8,Ge=16,Xt=32,On=64,rn=128,pe=256,bt=512,Ut=30,oe="...",zt=800,ce=16,Me=1,Ne=2,dn=3,or=1/0,qn=9007199254740991,Li=17976931348623157e292,hr=NaN,Cr=4294967295,ot=Cr-1,ut=Cr>>>1,dt=[["ary",rn],["bind",Dt],["bindKey",Ft],["curry",Yt],["curryRight",Ge],["flip",bt],["partial",Xt],["partialRight",On],["rearg",pe]],ht="[object Arguments]",Tt="[object Array]",_t="[object AsyncFunction]",$t="[object Boolean]",_e="[object Date]",An="[object DOMException]",he="[object Error]",on="[object Function]",lr="[object GeneratorFunction]",Ve="[object Map]",Ee="[object Number]",Wn="[object Null]",Vn="[object Object]",vi="[object Promise]",ua="[object Proxy]",Rs="[object RegExp]",ti="[object Set]",ro="[object String]",Zo="[object Symbol]",Ns="[object Undefined]",mr="[object WeakMap]",Ii="[object WeakSet]",Aa="[object ArrayBuffer]",Ls="[object DataView]",Wt="[object Float32Array]",jt="[object Float64Array]",ge="[object Int8Array]",se="[object Int16Array]",ae="[object Int32Array]",be="[object Uint8Array]",fe="[object Uint8ClampedArray]",ln="[object Uint16Array]",kn="[object Uint32Array]",Qn=/\b__p \+= '';/g,Pn=/\b(__p \+=) '' \+/g,an=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pi=/&(?:amp|lt|gt|quot|#39);/g,Un=/[&<>"']/g,Yr=RegExp(pi.source),os=RegExp(Un.source),io=/<%-([\s\S]+?)%>/g,ka=/<%([\s\S]+?)%>/g,ei=/<%=([\s\S]+?)%>/g,Pa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ra=/^\w*$/,Is=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gi=/[\\^$.*+?()[\]{}|]/g,In=RegExp(gi.source),br=/^\s+/,ha=/\s/,Jn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fr=/\{\n\/\* \[wrapped with (.+)\] \*/,yi=/,? & /,ls=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kc=/[()=,{}\[\]\/\s]/,mi=/\\(\\)?/g,ao=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zr=/\w*$/,Xi=/^[-+]0x[0-9a-f]+$/i,so=/^0b[01]+$/i,Pc=/^\[object .+?Constructor\]$/,Wu=/^0o[0-7]+$/i,Gu=/^(?:0|[1-9]\d*)$/,Wo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cs=/($^)/,fa=/['\n\r\u2028\u2029\\]/g,tr="\\ud800-\\udfff",Rc="\\u0300-\\u036f",Il="\\ufe20-\\ufe2f",Qe="\\u20d0-\\u20ff",Go=Rc+Il+Qe,Na="\\u2700-\\u27bf",jo="a-z\\xdf-\\xf6\\xf8-\\xff",da="\\xac\\xb1\\xd7\\xf7",ni="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",oo="\\u2000-\\u206f",Di=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lo="A-Z\\xc0-\\xd6\\xd8-\\xde",$o="\\ufe0e\\ufe0f",qt=da+ni+oo+Di,Be="['\u2019]",Dn="["+tr+"]",Zr="["+qt+"]",bi="["+Go+"]",Nc="\\d+",Bf="["+Na+"]",La="["+jo+"]",us="[^"+tr+qt+Nc+Na+jo+lo+"]",Dl="\\ud83c[\\udffb-\\udfff]",ju="(?:"+bi+"|"+Dl+")",Lc="[^"+tr+"]",co="(?:\\ud83c[\\udde6-\\uddff]){2}",Bl="[\\ud800-\\udbff][\\udc00-\\udfff]",uo="["+lo+"]",Ho="\\u200d",hs="(?:"+La+"|"+us+")",Fl="(?:"+uo+"|"+us+")",$u="(?:"+Be+"(?:d|ll|m|re|s|t|ve))?",ho="(?:"+Be+"(?:D|LL|M|RE|S|T|VE))?",zl=ju+"?",Hu="["+$o+"]?",Ic="(?:"+Ho+"(?:"+[Lc,co,Bl].join("|")+")"+Hu+zl+")*",Ff="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vu=Hu+zl+Ic,Uu="(?:"+[Bf,co,Bl].join("|")+")"+Vu,Zl="(?:"+[Lc+bi+"?",bi,co,Bl,Dn].join("|")+")",Yu=RegExp(Be,"g"),Xu=RegExp(bi,"g"),Wl=RegExp(Dl+"(?="+Dl+")|"+Zl+Vu,"g"),ne=RegExp([uo+"?"+La+"+"+$u+"(?="+[Zr,uo,"$"].join("|")+")",Fl+"+"+ho+"(?="+[Zr,uo+hs,"$"].join("|")+")",uo+"?"+hs+"+"+$u,uo+"+"+ho,zf,Ff,Nc,Uu].join("|"),"g"),ke=RegExp("["+Ho+tr+Go+$o+"]"),Rn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ri=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xi=-1,Je={};Je[Wt]=Je[jt]=Je[ge]=Je[se]=Je[ae]=Je[be]=Je[fe]=Je[ln]=Je[kn]=!0,Je[ht]=Je[Tt]=Je[Aa]=Je[$t]=Je[Ls]=Je[_e]=Je[he]=Je[on]=Je[Ve]=Je[Ee]=Je[Vn]=Je[Rs]=Je[ti]=Je[ro]=Je[mr]=!1;var Ue={};Ue[ht]=Ue[Tt]=Ue[Aa]=Ue[Ls]=Ue[$t]=Ue[_e]=Ue[Wt]=Ue[jt]=Ue[ge]=Ue[se]=Ue[ae]=Ue[Ve]=Ue[Ee]=Ue[Vn]=Ue[Rs]=Ue[ti]=Ue[ro]=Ue[Zo]=Ue[be]=Ue[fe]=Ue[ln]=Ue[kn]=!0,Ue[he]=Ue[on]=Ue[mr]=!1;var fo={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Dc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ku={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},t1=parseFloat,mS=parseInt,e1=typeof K.g=="object"&&K.g&&K.g.Object===Object&&K.g,n1=typeof self=="object"&&self&&self.Object===Object&&self,ii=e1||n1||Function("return this")(),r1=Vt&&!Vt.nodeType&&Vt,qu=r1&&!0&&Se&&!Se.nodeType&&Se,i1=qu&&qu.exports===r1,Jv=i1&&e1.process,Ia=function(){try{var et=qu&&qu.require&&qu.require("util").types;return et||Jv&&Jv.binding&&Jv.binding("util")}catch(xt){}}(),a1=Ia&&Ia.isArrayBuffer,s1=Ia&&Ia.isDate,o1=Ia&&Ia.isMap,l1=Ia&&Ia.isRegExp,c1=Ia&&Ia.isSet,u1=Ia&&Ia.isTypedArray;function va(et,xt,ft){switch(ft.length){case 0:return et.call(xt);case 1:return et.call(xt,ft[0]);case 2:return et.call(xt,ft[0],ft[1]);case 3:return et.call(xt,ft[0],ft[1],ft[2])}return et.apply(xt,ft)}function bS(et,xt,ft,Qt){for(var Oe=-1,vn=et==null?0:et.length;++Oe<vn;){var Wr=et[Oe];xt(Qt,Wr,ft(Wr),et)}return Qt}function Da(et,xt){for(var ft=-1,Qt=et==null?0:et.length;++ft<Qt&&xt(et[ft],ft,et)!==!1;);return et}function xS(et,xt){for(var ft=et==null?0:et.length;ft--&&xt(et[ft],ft,et)!==!1;);return et}function h1(et,xt){for(var ft=-1,Qt=et==null?0:et.length;++ft<Qt;)if(!xt(et[ft],ft,et))return!1;return!0}function Vo(et,xt){for(var ft=-1,Qt=et==null?0:et.length,Oe=0,vn=[];++ft<Qt;){var Wr=et[ft];xt(Wr,ft,et)&&(vn[Oe++]=Wr)}return vn}function Zf(et,xt){var ft=et==null?0:et.length;return!!ft&&Bc(et,xt,0)>-1}function t0(et,xt,ft){for(var Qt=-1,Oe=et==null?0:et.length;++Qt<Oe;)if(ft(xt,et[Qt]))return!0;return!1}function er(et,xt){for(var ft=-1,Qt=et==null?0:et.length,Oe=Array(Qt);++ft<Qt;)Oe[ft]=xt(et[ft],ft,et);return Oe}function Uo(et,xt){for(var ft=-1,Qt=xt.length,Oe=et.length;++ft<Qt;)et[Oe+ft]=xt[ft];return et}function e0(et,xt,ft,Qt){var Oe=-1,vn=et==null?0:et.length;for(Qt&&vn&&(ft=et[++Oe]);++Oe<vn;)ft=xt(ft,et[Oe],Oe,et);return ft}function ES(et,xt,ft,Qt){var Oe=et==null?0:et.length;for(Qt&&Oe&&(ft=et[--Oe]);Oe--;)ft=xt(ft,et[Oe],Oe,et);return ft}function n0(et,xt){for(var ft=-1,Qt=et==null?0:et.length;++ft<Qt;)if(xt(et[ft],ft,et))return!0;return!1}var wS=r0("length");function SS(et){return et.split("")}function Tr(et){return et.match(ls)||[]}function f1(et,xt,ft){var Qt;return ft(et,function(Oe,vn,Wr){if(xt(Oe,vn,Wr))return Qt=vn,!1}),Qt}function Ba(et,xt,ft,Qt){for(var Oe=et.length,vn=ft+(Qt?1:-1);Qt?vn--:++vn<Oe;)if(xt(et[vn],vn,et))return vn;return-1}function Bc(et,xt,ft){return xt===xt?Ju(et,xt,ft):Ba(et,Ds,ft)}function _S(et,xt,ft,Qt){for(var Oe=ft-1,vn=et.length;++Oe<vn;)if(Qt(et[Oe],xt))return Oe;return-1}function Ds(et){return et!==et}function d1(et,xt){var ft=et==null?0:et.length;return ft?Wf(et,xt)/ft:hr}function r0(et){return function(xt){return xt==null?B:xt[et]}}function i0(et){return function(xt){return et==null?B:et[xt]}}function v1(et,xt,ft,Qt,Oe){return Oe(et,function(vn,Wr,Bn){ft=Qt?(Qt=!1,vn):xt(ft,vn,Wr,Bn)}),ft}function p1(et,xt){var ft=et.length;for(et.sort(xt);ft--;)et[ft]=et[ft].value;return et}function Wf(et,xt){for(var ft,Qt=-1,Oe=et.length;++Qt<Oe;){var vn=xt(et[Qt]);vn!==B&&(ft=ft===B?vn:ft+vn)}return ft}function a0(et,xt){for(var ft=-1,Qt=Array(et);++ft<et;)Qt[ft]=xt(ft);return Qt}function Gf(et,xt){return er(xt,function(ft){return[ft,et[ft]]})}function g1(et){return et&&et.slice(0,w1(et)+1).replace(br,"")}function Ei(et){return function(xt){return et(xt)}}function s0(et,xt){return er(xt,function(ft){return et[ft]})}function Fc(et,xt){return et.has(xt)}function zc(et,xt){for(var ft=-1,Qt=et.length;++ft<Qt&&Bc(xt,et[ft],0)>-1;);return ft}function y1(et,xt){for(var ft=et.length;ft--&&Bc(xt,et[ft],0)>-1;);return ft}function MS(et,xt){for(var ft=et.length,Qt=0;ft--;)et[ft]===xt&&++Qt;return Qt}var m1=i0(fo),Qu=i0(Dc);function o0(et){return"\\"+vo[et]}function CS(et,xt){return et==null?B:et[xt]}function Yo(et){return ke.test(et)}function b1(et){return Rn.test(et)}function x1(et){for(var xt,ft=[];!(xt=et.next()).done;)ft.push(xt.value);return ft}function l0(et){var xt=-1,ft=Array(et.size);return et.forEach(function(Qt,Oe){ft[++xt]=[Oe,Qt]}),ft}function E1(et,xt){return function(ft){return et(xt(ft))}}function Xo(et,xt){for(var ft=-1,Qt=et.length,Oe=0,vn=[];++ft<Qt;){var Wr=et[ft];(Wr===xt||Wr===X)&&(et[ft]=X,vn[Oe++]=ft)}return vn}function jf(et){var xt=-1,ft=Array(et.size);return et.forEach(function(Qt){ft[++xt]=Qt}),ft}function TS(et){var xt=-1,ft=Array(et.size);return et.forEach(function(Qt){ft[++xt]=[Qt,Qt]}),ft}function Ju(et,xt,ft){for(var Qt=ft-1,Oe=et.length;++Qt<Oe;)if(et[Qt]===xt)return Qt;return-1}function OS(et,xt,ft){for(var Qt=ft+1;Qt--;)if(et[Qt]===xt)return Qt;return Qt}function Zc(et){return Yo(et)?$f(et):wS(et)}function fs(et){return Yo(et)?kS(et):SS(et)}function w1(et){for(var xt=et.length;xt--&&ha.test(et.charAt(xt)););return xt}var AS=i0(Ku);function $f(et){for(var xt=Wl.lastIndex=0;Wl.test(et);)++xt;return xt}function kS(et){return et.match(Wl)||[]}function PS(et){return et.match(ne)||[]}var S1=function et(xt){xt=xt==null?ii:th.defaults(ii.Object(),xt,th.pick(ii,ri));var ft=xt.Array,Qt=xt.Date,Oe=xt.Error,vn=xt.Function,Wr=xt.Math,Bn=xt.Object,c0=xt.RegExp,RS=xt.String,Fa=xt.TypeError,Hf=ft.prototype,NS=vn.prototype,Wc=Bn.prototype,Vf=xt["__core-js_shared__"],Uf=NS.toString,Sn=Wc.hasOwnProperty,_1=0,u0=function(){var y=/[^.]+$/.exec(Vf&&Vf.keys&&Vf.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Yf=Wc.toString,LS=Uf.call(Bn),IS=ii._,DS=c0("^"+Uf.call(Sn).replace(gi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xf=i1?xt.Buffer:B,Ko=xt.Symbol,Kf=xt.Uint8Array,M1=Xf?Xf.allocUnsafe:B,qf=E1(Bn.getPrototypeOf,Bn),C1=Bn.create,T1=Wc.propertyIsEnumerable,eh=Hf.splice,O1=Ko?Ko.isConcatSpreadable:B,nh=Ko?Ko.iterator:B,Gl=Ko?Ko.toStringTag:B,Qf=function(){try{var y=al(Bn,"defineProperty");return y({},"",{}),y}catch(x){}}(),BS=xt.clearTimeout!==ii.clearTimeout&&xt.clearTimeout,FS=Qt&&Qt.now!==ii.Date.now&&Qt.now,zS=xt.setTimeout!==ii.setTimeout&&xt.setTimeout,Jf=Wr.ceil,td=Wr.floor,tn=Bn.getOwnPropertySymbols,Bi=Xf?Xf.isBuffer:B,le=xt.isFinite,xn=Hf.join,A1=E1(Bn.keys,Bn),Le=Wr.max,N=Wr.min,Gc=Qt.now,h0=xt.parseInt,ed=Wr.random,f0=Hf.reverse,rh=al(xt,"DataView"),jl=al(xt,"Map"),nd=al(xt,"Promise"),$l=al(xt,"Set"),ds=al(xt,"WeakMap"),jc=al(Bn,"create"),ih=ds&&new ds,Bs={},k1=Eo(rh),P1=Eo(jl),R1=Eo(nd),N1=Eo($l),L1=Eo(ds),ah=Ko?Ko.prototype:B,$c=ah?ah.valueOf:B,Hc=ah?ah.toString:B;function F(y){if($n(y)&&!Ae(y)&&!(y instanceof Ke)){if(y instanceof pa)return y;if(Sn.call(y,"__wrapped__"))return iu(y)}return new pa(y)}var po=function(){function y(){}return function(x){if(!jn(x))return{};if(C1)return C1(x);y.prototype=x;var _=new y;return y.prototype=B,_}}();function Vc(){}function pa(y,x){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!x,this.__index__=0,this.__values__=B}F.templateSettings={escape:io,evaluate:ka,interpolate:ei,variable:"",imports:{_:F}},F.prototype=Vc.prototype,F.prototype.constructor=F,pa.prototype=po(Vc.prototype),pa.prototype.constructor=pa;function Ke(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Cr,this.__views__=[]}function I1(){var y=new Ke(this.__wrapped__);return y.__actions__=zi(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=zi(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=zi(this.__views__),y}function d0(){if(this.__filtered__){var y=new Ke(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function D1(){var y=this.__wrapped__.value(),x=this.__dir__,_=Ae(y),P=x<0,I=_?y.length:0,Z=H0(0,I,this.__views__),U=Z.start,Q=Z.end,nt=Q-U,wt=P?Q:U-1,St=this.__iteratees__,At=St.length,Ht=0,ie=N(nt,this.__takeCount__);if(!_||!P&&I==nt&&ie==nt)return nl(y,this.__actions__);var ue=[];t:for(;nt--&&Ht<ie;){wt+=x;for(var Pe=-1,ye=y[wt];++Pe<At;){var ze=St[Pe],Ye=ze.iteratee,ia=ze.type,Ti=Ye(ye);if(ia==Ne)ye=Ti;else if(!Ti){if(ia==Me)continue t;break t}}ue[Ht++]=ye}return ue}Ke.prototype=po(Vc.prototype),Ke.prototype.constructor=Ke;function qo(y){var x=-1,_=y==null?0:y.length;for(this.clear();++x<_;){var P=y[x];this.set(P[0],P[1])}}function v0(){this.__data__=jc?jc(null):{},this.size=0}function B1(y){var x=this.has(y)&&delete this.__data__[y];return this.size-=x?1:0,x}function za(y){var x=this.__data__;if(jc){var _=x[y];return _===J?B:_}return Sn.call(x,y)?x[y]:B}function sh(y){var x=this.__data__;return jc?x[y]!==B:Sn.call(x,y)}function oh(y,x){var _=this.__data__;return this.size+=this.has(y)?0:1,_[y]=jc&&x===B?J:x,this}qo.prototype.clear=v0,qo.prototype.delete=B1,qo.prototype.get=za,qo.prototype.has=sh,qo.prototype.set=oh;function Fs(y){var x=-1,_=y==null?0:y.length;for(this.clear();++x<_;){var P=y[x];this.set(P[0],P[1])}}function Uc(){this.__data__=[],this.size=0}function F1(y){var x=this.__data__,_=go(x,y);if(_<0)return!1;var P=x.length-1;return _==P?x.pop():eh.call(x,_,1),--this.size,!0}function p0(y){var x=this.__data__,_=go(x,y);return _<0?B:x[_][1]}function z1(y){return go(this.__data__,y)>-1}function Z1(y,x){var _=this.__data__,P=go(_,y);return P<0?(++this.size,_.push([y,x])):_[P][1]=x,this}Fs.prototype.clear=Uc,Fs.prototype.delete=F1,Fs.prototype.get=p0,Fs.prototype.has=z1,Fs.prototype.set=Z1;function ga(y){var x=-1,_=y==null?0:y.length;for(this.clear();++x<_;){var P=y[x];this.set(P[0],P[1])}}function rd(){this.size=0,this.__data__={hash:new qo,map:new(jl||Fs),string:new qo}}function W1(y){var x=Mh(this,y).delete(y);return this.size-=x?1:0,x}function g0(y){return Mh(this,y).get(y)}function G1(y){return Mh(this,y).has(y)}function id(y,x){var _=Mh(this,y),P=_.size;return _.set(y,x),this.size+=_.size==P?0:1,this}ga.prototype.clear=rd,ga.prototype.delete=W1,ga.prototype.get=g0,ga.prototype.has=G1,ga.prototype.set=id;function Qo(y){var x=-1,_=y==null?0:y.length;for(this.__data__=new ga;++x<_;)this.add(y[x])}function j1(y){return this.__data__.set(y,J),this}function y0(y){return this.__data__.has(y)}Qo.prototype.add=Qo.prototype.push=j1,Qo.prototype.has=y0;function ya(y){var x=this.__data__=new Fs(y);this.size=x.size}function $1(){this.__data__=new Fs,this.size=0}function H1(y){var x=this.__data__,_=x.delete(y);return this.size=x.size,_}function m0(y){return this.__data__.get(y)}function V1(y){return this.__data__.has(y)}function U1(y,x){var _=this.__data__;if(_ instanceof Fs){var P=_.__data__;if(!jl||P.length<Rt-1)return P.push([y,x]),this.size=++_.size,this;_=this.__data__=new ga(P)}return _.set(y,x),this.size=_.size,this}ya.prototype.clear=$1,ya.prototype.delete=H1,ya.prototype.get=m0,ya.prototype.has=V1,ya.prototype.set=U1;function b0(y,x){var _=Ae(y),P=!_&&hl(y),I=!_&&!P&&So(y),Z=!_&&!P&&!I&&fl(y),U=_||P||I||Z,Q=U?a0(y.length,RS):[],nt=Q.length;for(var wt in y)(x||Sn.call(y,wt))&&!(U&&(wt=="length"||I&&(wt=="offset"||wt=="parent")||Z&&(wt=="buffer"||wt=="byteLength"||wt=="byteOffset")||Zs(wt,nt)))&&Q.push(wt);return Q}function x0(y){var x=y.length;return x?y[P0(0,x-1)]:B}function Y1(y,x){return Rh(zi(y),Jo(x,0,y.length))}function xe(y){return Rh(zi(y))}function ad(y,x,_){(_!==B&&!Va(y[x],_)||_===B&&!(x in y))&&Zt(y,x,_)}function Yc(y,x,_){var P=y[x];(!(Sn.call(y,x)&&Va(P,_))||_===B&&!(x in y))&&Zt(y,x,_)}function go(y,x){for(var _=y.length;_--;)if(Va(y[_][0],x))return _;return-1}function re(y,x,_,P){return zs(y,function(I,Z,U){x(P,I,_(I),U)}),P}function ai(y,x){return y&&nr(x,Ar(x),y)}function X1(y,x){return y&&nr(x,Ci(x),y)}function Zt(y,x,_){x=="__proto__"&&Qf?Qf(y,x,{configurable:!0,enumerable:!0,value:_,writable:!0}):y[x]=_}function lh(y,x){for(var _=-1,P=x.length,I=ft(P),Z=y==null;++_<P;)I[_]=Z?B:Dp(y,x[_]);return I}function Jo(y,x,_){return y===y&&(_!==B&&(y=y<=_?y:_),x!==B&&(y=y>=x?y:x)),y}function Fi(y,x,_,P,I,Z){var U,Q=x&V,nt=x&ct,wt=x&Ct;if(_&&(U=I?_(y,P,I,Z):_(y)),U!==B)return U;if(!jn(y))return y;var St=Ae(y);if(St){if(U=U0(y),!Q)return zi(y,U)}else{var At=qr(y),Ht=At==on||At==lr;if(So(y))return Gr(y,Q);if(At==Vn||At==ht||Ht&&!I){if(U=nt||Ht?{}:nu(y),!Q)return nt?$S(y,X1(U,y)):vb(y,ai(U,y))}else{if(!Ue[At])return I?y:{};U=Y0(y,At,Q)}}Z||(Z=new ya);var ie=Z.get(y);if(ie)return ie;Z.set(y,U),jd(y)?y.forEach(function(ye){U.add(Fi(ye,x,_,ye,y,Z))}):_o(y)&&y.forEach(function(ye,ze){U.set(ze,Fi(ye,x,_,ze,y,Z))});var ue=wt?nt?Jl:il:nt?Ci:Ar,Pe=St?B:ue(y);return Da(Pe||y,function(ye,ze){Pe&&(ze=ye,ye=y[ze]),Yc(U,ze,Fi(ye,x,_,ze,y,Z))}),U}function E0(y){var x=Ar(y);return function(_){return Xr(_,y,x)}}function Xr(y,x,_){var P=_.length;if(y==null)return!P;for(y=Bn(y);P--;){var I=_[P],Z=x[I],U=y[I];if(U===B&&!(I in y)||!Z(U))return!1}return!0}function Xc(y,x,_){if(typeof y!="function")throw new Fa(H);return ru(function(){y.apply(B,_)},x)}function Hl(y,x,_,P){var I=-1,Z=Zf,U=!0,Q=y.length,nt=[],wt=x.length;if(!Q)return nt;_&&(x=er(x,Ei(_))),P?(Z=t0,U=!1):x.length>=Rt&&(Z=Fc,U=!1,x=new Qo(x));t:for(;++I<Q;){var St=y[I],At=_==null?St:_(St);if(St=P||St!==0?St:0,U&&At===At){for(var Ht=wt;Ht--;)if(x[Ht]===At)continue t;nt.push(St)}else Z(x,At,P)||nt.push(St)}return nt}var zs=Qc(Za),w0=Qc(uh,!0);function K1(y,x){var _=!0;return zs(y,function(P,I,Z){return _=!!x(P,I,Z),_}),_}function ch(y,x,_){for(var P=-1,I=y.length;++P<I;){var Z=y[P],U=x(Z);if(U!=null&&(Q===B?U===U&&!ta(U):_(U,Q)))var Q=U,nt=Z}return nt}function q1(y,x,_,P){var I=y.length;for(_=Ie(_),_<0&&(_=-_>I?0:I+_),P=P===B||P>I?I:Ie(P),P<0&&(P+=I),P=_>P?0:Np(P);_<P;)y[_++]=x;return y}function S0(y,x){var _=[];return zs(y,function(P,I,Z){x(P,I,Z)&&_.push(P)}),_}function Kr(y,x,_,P,I){var Z=-1,U=y.length;for(_||(_=bb),I||(I=[]);++Z<U;){var Q=y[Z];x>0&&_(Q)?x>1?Kr(Q,x-1,_,P,I):Uo(I,Q):P||(I[I.length]=Q)}return I}var sd=F0(),_0=F0(!0);function Za(y,x){return y&&sd(y,x,Ar)}function uh(y,x){return y&&_0(y,x,Ar)}function hh(y,x){return Vo(x,function(_){return Ws(y[_])})}function Vl(y,x){x=en(x,y);for(var _=0,P=x.length;y!=null&&_<P;)y=y[ys(x[_++])];return _&&_==P?y:B}function Q1(y,x,_){var P=x(y);return Ae(y)?P:Uo(P,_(y))}function wi(y){return y==null?y===B?Ns:Wn:Gl&&Gl in Bn(y)?yb(y):kh(y)}function fh(y,x){return y>x}function J1(y,x){return y!=null&&Sn.call(y,x)}function ZS(y,x){return y!=null&&x in Bn(y)}function M0(y,x,_){return y>=N(x,_)&&y<Le(x,_)}function ma(y,x,_){for(var P=_?t0:Zf,I=y[0].length,Z=y.length,U=Z,Q=ft(Z),nt=1/0,wt=[];U--;){var St=y[U];U&&x&&(St=er(St,Ei(x))),nt=N(St.length,nt),Q[U]=!_&&(x||I>=120&&St.length>=120)?new Qo(U&&St):B}St=y[0];var At=-1,Ht=Q[0];t:for(;++At<I&&wt.length<nt;){var ie=St[At],ue=x?x(ie):ie;if(ie=_||ie!==0?ie:0,!(Ht?Fc(Ht,ue):P(wt,ue,_))){for(U=Z;--U;){var Pe=Q[U];if(!(Pe?Fc(Pe,ue):P(y[U],ue,_)))continue t}Ht&&Ht.push(ue),wt.push(ie)}}return wt}function tb(y,x,_,P){return Za(y,function(I,Z,U){x(P,_(I),Z,U)}),P}function Ul(y,x,_){x=en(x,y),y=fr(y,x);var P=y==null?y:y[ys(Ea(x))];return P==null?B:va(P,y,_)}function eb(y){return $n(y)&&wi(y)==ht}function tl(y){return $n(y)&&wi(y)==Aa}function C0(y){return $n(y)&&wi(y)==_e}function Yl(y,x,_,P,I){return y===x?!0:y==null||x==null||!$n(y)&&!$n(x)?y!==y&&x!==x:nb(y,x,_,P,Yl,I)}function nb(y,x,_,P,I,Z){var U=Ae(y),Q=Ae(x),nt=U?Tt:qr(y),wt=Q?Tt:qr(x);nt=nt==ht?Vn:nt,wt=wt==ht?Vn:wt;var St=nt==Vn,At=wt==Vn,Ht=nt==wt;if(Ht&&So(y)){if(!So(x))return!1;U=!0,St=!1}if(Ht&&!St)return Z||(Z=new ya),U||fl(y)?Lt(y,x,_,P,I,Z):md(y,x,nt,_,P,I,Z);if(!(_&it)){var ie=St&&Sn.call(y,"__wrapped__"),ue=At&&Sn.call(x,"__wrapped__");if(ie||ue){var Pe=ie?y.value():y,ye=ue?x.value():x;return Z||(Z=new ya),I(Pe,ye,_,P,Z)}}return Ht?(Z||(Z=new ya),j0(y,x,_,P,I,Z)):!1}function od(y){return $n(y)&&qr(y)==Ve}function ld(y,x,_,P){var I=_.length,Z=I,U=!P;if(y==null)return!Z;for(y=Bn(y);I--;){var Q=_[I];if(U&&Q[2]?Q[1]!==y[Q[0]]:!(Q[0]in y))return!1}for(;++I<Z;){Q=_[I];var nt=Q[0],wt=y[nt],St=Q[1];if(U&&Q[2]){if(wt===B&&!(nt in y))return!1}else{var At=new ya;if(P)var Ht=P(wt,St,nt,y,x,At);if(!(Ht===B?Yl(St,wt,it|Ot,P,At):Ht))return!1}}return!0}function rb(y){if(!jn(y)||Ah(y))return!1;var x=Ws(y)?DS:Pc;return x.test(Eo(y))}function ib(y){return $n(y)&&wi(y)==Rs}function T0(y){return $n(y)&&qr(y)==ti}function WS(y){return $n(y)&&Uh(y.length)&&!!Je[wi(y)]}function ab(y){return typeof y=="function"?y:y==null?ur:typeof y=="object"?Ae(y)?A0(y[0],y[1]):ud(y):Hp(y)}function dh(y){if(!ja(y))return A1(y);var x=[];for(var _ in Bn(y))Sn.call(y,_)&&_!="constructor"&&x.push(_);return x}function O0(y){if(!jn(y))return X0(y);var x=ja(y),_=[];for(var P in y)P=="constructor"&&(x||!Sn.call(y,P))||_.push(P);return _}function vh(y,x){return y<x}function cd(y,x){var _=-1,P=oi(y)?ft(y.length):[];return zs(y,function(I,Z,U){P[++_]=x(I,Z,U)}),P}function ud(y){var x=bd(y);return x.length==1&&x[0][2]?wd(x[0][0],x[0][1]):function(_){return _===y||ld(_,y,x)}}function A0(y,x){return Th(y)&&Ed(x)?wd(ys(y),x):function(_){var P=Dp(_,y);return P===B&&P===x?qh(_,y):Yl(x,P,it|Ot)}}function ph(y,x,_,P,I){y!==x&&sd(x,function(Z,U){if(I||(I=new ya),jn(Z))GS(y,x,U,_,ph,P,I);else{var Q=P?P(Qi(y,U),Z,U+"",y,x,I):B;Q===B&&(Q=Z),ad(y,U,Q)}},Ci)}function GS(y,x,_,P,I,Z,U){var Q=Qi(y,_),nt=Qi(x,_),wt=U.get(nt);if(wt){ad(y,_,wt);return}var St=Z?Z(Q,nt,_+"",y,x,U):B,At=St===B;if(At){var Ht=Ae(nt),ie=!Ht&&So(nt),ue=!Ht&&!ie&&fl(nt);St=nt,Ht||ie||ue?Ae(Q)?St=Q:dr(Q)?St=zi(Q):ie?(At=!1,St=Gr(nt,!0)):ue?(At=!1,St=rl(nt,!0)):St=[]:uu(nt)||hl(nt)?(St=Q,hl(Q)?St=cr(Q):(!jn(Q)||Ws(Q))&&(St=nu(nt))):At=!1}At&&(U.set(nt,St),I(St,nt,P,Z,U),U.delete(nt)),ad(y,_,St)}function sb(y,x){var _=y.length;if(_)return x+=x<0?_:0,Zs(x,_)?y[x]:B}function ob(y,x,_){x.length?x=er(x,function(Z){return Ae(Z)?function(U){return Vl(U,Z.length===1?Z[0]:Z)}:Z}):x=[ur];var P=-1;x=er(x,Ei(de()));var I=cd(y,function(Z,U,Q){var nt=er(x,function(wt){return wt(Z)});return{criteria:nt,index:++P,value:Z}});return p1(I,function(Z,U){return Si(Z,U,_)})}function gh(y,x){return lb(y,x,function(_,P){return qh(y,P)})}function lb(y,x,_){for(var P=-1,I=x.length,Z={};++P<I;){var U=x[P],Q=Vl(y,U);_(Q,U)&&mh(Z,en(U,y),Q)}return Z}function jS(y){return function(x){return Vl(x,y)}}function k0(y,x,_,P){var I=P?_S:Bc,Z=-1,U=x.length,Q=y;for(y===x&&(x=zi(x)),_&&(Q=er(y,Ei(_)));++Z<U;)for(var nt=0,wt=x[Z],St=_?_(wt):wt;(nt=I(Q,St,nt,P))>-1;)Q!==y&&eh.call(Q,nt,1),eh.call(y,nt,1);return y}function cb(y,x){for(var _=y?x.length:0,P=_-1;_--;){var I=x[_];if(_==P||I!==Z){var Z=I;Zs(I)?eh.call(y,I,1):ps(y,I)}}return y}function P0(y,x){return y+td(ed()*(x-y+1))}function Kc(y,x,_,P){for(var I=-1,Z=Le(Jf((x-y)/(_||1)),0),U=ft(Z);Z--;)U[P?Z:++I]=y,y+=_;return U}function yh(y,x){var _="";if(!y||x<1||x>qn)return _;do x%2&&(_+=y),x=td(x/2),x&&(y+=y);while(x);return _}function Fe(y,x){return Sd(Ph(y,x,ur),y+"")}function hd(y){return x0(ea(y))}function ub(y,x){var _=ea(y);return Rh(_,Jo(x,0,_.length))}function mh(y,x,_,P){if(!jn(y))return y;x=en(x,y);for(var I=-1,Z=x.length,U=Z-1,Q=y;Q!=null&&++I<Z;){var nt=ys(x[I]),wt=_;if(nt==="__proto__"||nt==="constructor"||nt==="prototype")return y;if(I!=U){var St=Q[nt];wt=P?P(St,nt,Q):B,wt===B&&(wt=jn(St)?St:Zs(x[I+1])?[]:{})}Yc(Q,nt,wt),Q=Q[nt]}return y}var R0=ih?function(y,x){return ih.set(y,x),y}:ur,hb=Qf?function(y,x){return Qf(y,"toString",{configurable:!0,enumerable:!1,value:wa(x),writable:!0})}:ur;function si(y){return Rh(ea(y))}function Or(y,x,_){var P=-1,I=y.length;x<0&&(x=-x>I?0:I+x),_=_>I?I:_,_<0&&(_+=I),I=x>_?0:_-x>>>0,x>>>=0;for(var Z=ft(I);++P<I;)Z[P]=y[P+x];return Z}function el(y,x){var _;return zs(y,function(P,I,Z){return _=x(P,I,Z),!_}),!!_}function vs(y,x,_){var P=0,I=y==null?P:y.length;if(typeof x=="number"&&x===x&&I<=ut){for(;P<I;){var Z=P+I>>>1,U=y[Z];U!==null&&!ta(U)&&(_?U<=x:U<x)?P=Z+1:I=Z}return I}return fd(y,x,ur,_)}function fd(y,x,_,P){var I=0,Z=y==null?0:y.length;if(Z===0)return 0;x=_(x);for(var U=x!==x,Q=x===null,nt=ta(x),wt=x===B;I<Z;){var St=td((I+Z)/2),At=_(y[St]),Ht=At!==B,ie=At===null,ue=At===At,Pe=ta(At);if(U)var ye=P||ue;else wt?ye=ue&&(P||Ht):Q?ye=ue&&Ht&&(P||!ie):nt?ye=ue&&Ht&&!ie&&(P||!Pe):ie||Pe?ye=!1:ye=P?At<=x:At<x;ye?I=St+1:Z=St}return N(Z,ot)}function dd(y,x){for(var _=-1,P=y.length,I=0,Z=[];++_<P;){var U=y[_],Q=x?x(U):U;if(!_||!Va(Q,nt)){var nt=Q;Z[I++]=U===0?0:U}}return Z}function N0(y){return typeof y=="number"?y:ta(y)?hr:+y}function lt(y){if(typeof y=="string")return y;if(Ae(y))return er(y,lt)+"";if(ta(y))return Hc?Hc.call(y):"";var x=y+"";return x=="0"&&1/y==-or?"-0":x}function Wa(y,x,_){var P=-1,I=Zf,Z=y.length,U=!0,Q=[],nt=Q;if(_)U=!1,I=t0;else if(Z>=Rt){var wt=x?null:Z0(y);if(wt)return jf(wt);U=!1,I=Fc,nt=new Qo}else nt=x?[]:Q;t:for(;++P<Z;){var St=y[P],At=x?x(St):St;if(St=_||St!==0?St:0,U&&At===At){for(var Ht=nt.length;Ht--;)if(nt[Ht]===At)continue t;x&&nt.push(At),Q.push(St)}else I(nt,At,_)||(nt!==Q&&nt.push(At),Q.push(St))}return Q}function ps(y,x){return x=en(x,y),y=fr(y,x),y==null||delete y[ys(Ea(x))]}function L0(y,x,_,P){return mh(y,x,_(Vl(y,x)),P)}function Xl(y,x,_,P){for(var I=y.length,Z=P?I:-1;(P?Z--:++Z<I)&&x(y[Z],Z,y););return _?Or(y,P?0:Z,P?Z+1:I):Or(y,P?Z+1:0,P?I:Z)}function nl(y,x){var _=y;return _ instanceof Ke&&(_=_.value()),e0(x,function(P,I){return I.func.apply(I.thisArg,Uo([P],I.args))},_)}function vd(y,x,_){var P=y.length;if(P<2)return P?Wa(y[0]):[];for(var I=-1,Z=ft(P);++I<P;)for(var U=y[I],Q=-1;++Q<P;)Q!=I&&(Z[I]=Hl(Z[I]||U,y[Q],x,_));return Wa(Kr(Z,1),x,_)}function I0(y,x,_){for(var P=-1,I=y.length,Z=x.length,U={};++P<I;){var Q=P<Z?x[P]:B;_(U,y[P],Q)}return U}function bh(y){return dr(y)?y:[]}function qc(y){return typeof y=="function"?y:ur}function en(y,x){return Ae(y)?y:Th(y,x)?[y]:Q0(gn(y))}var fb=Fe;function Ki(y,x,_){var P=y.length;return _=_===B?P:_,!x&&_>=P?y:Or(y,x,_)}var D0=BS||function(y){return ii.clearTimeout(y)};function Gr(y,x){if(x)return y.slice();var _=y.length,P=M1?M1(_):new y.constructor(_);return y.copy(P),P}function yo(y){var x=new y.constructor(y.byteLength);return new Kf(x).set(new Kf(y)),x}function En(y,x){var _=x?yo(y.buffer):y.buffer;return new y.constructor(_,y.byteOffset,y.byteLength)}function Kl(y){var x=new y.constructor(y.source,zr.exec(y));return x.lastIndex=y.lastIndex,x}function db(y){return $c?Bn($c.call(y)):{}}function rl(y,x){var _=x?yo(y.buffer):y.buffer;return new y.constructor(_,y.byteOffset,y.length)}function xh(y,x){if(y!==x){var _=y!==B,P=y===null,I=y===y,Z=ta(y),U=x!==B,Q=x===null,nt=x===x,wt=ta(x);if(!Q&&!wt&&!Z&&y>x||Z&&U&&nt&&!Q&&!wt||P&&U&&nt||!_&&nt||!I)return 1;if(!P&&!Z&&!wt&&y<x||wt&&_&&I&&!P&&!Z||Q&&_&&I||!U&&I||!nt)return-1}return 0}function Si(y,x,_){for(var P=-1,I=y.criteria,Z=x.criteria,U=I.length,Q=_.length;++P<U;){var nt=xh(I[P],Z[P]);if(nt){if(P>=Q)return nt;var wt=_[P];return nt*(wt=="desc"?-1:1)}}return y.index-x.index}function B0(y,x,_,P){for(var I=-1,Z=y.length,U=_.length,Q=-1,nt=x.length,wt=Le(Z-U,0),St=ft(nt+wt),At=!P;++Q<nt;)St[Q]=x[Q];for(;++I<U;)(At||I<Z)&&(St[_[I]]=y[I]);for(;wt--;)St[Q++]=y[I++];return St}function pn(y,x,_,P){for(var I=-1,Z=y.length,U=-1,Q=_.length,nt=-1,wt=x.length,St=Le(Z-Q,0),At=ft(St+wt),Ht=!P;++I<St;)At[I]=y[I];for(var ie=I;++nt<wt;)At[ie+nt]=x[nt];for(;++U<Q;)(Ht||I<Z)&&(At[ie+_[U]]=y[I++]);return At}function zi(y,x){var _=-1,P=y.length;for(x||(x=ft(P));++_<P;)x[_]=y[_];return x}function nr(y,x,_,P){var I=!_;_||(_={});for(var Z=-1,U=x.length;++Z<U;){var Q=x[Z],nt=P?P(_[Q],y[Q],Q,_,y):B;nt===B&&(nt=y[Q]),I?Zt(_,Q,nt):Yc(_,Q,nt)}return _}function vb(y,x){return nr(y,xd(y),x)}function $S(y,x){return nr(y,$0(y),x)}function pd(y,x){return function(_,P){var I=Ae(_)?bS:re,Z=x?x():{};return I(_,y,de(P,2),Z)}}function ql(y){return Fe(function(x,_){var P=-1,I=_.length,Z=I>1?_[I-1]:B,U=I>2?_[2]:B;for(Z=y.length>3&&typeof Z=="function"?(I--,Z):B,U&&_n(_[0],_[1],U)&&(Z=I<3?B:Z,I=1),x=Bn(x);++P<I;){var Q=_[P];Q&&y(x,Q,P,Z)}return x})}function Qc(y,x){return function(_,P){if(_==null)return _;if(!oi(_))return y(_,P);for(var I=_.length,Z=x?I:-1,U=Bn(_);(x?Z--:++Z<I)&&P(U[Z],Z,U)!==!1;);return _}}function F0(y){return function(x,_,P){for(var I=-1,Z=Bn(x),U=P(x),Q=U.length;Q--;){var nt=U[y?Q:++I];if(_(Z[nt],nt,Z)===!1)break}return x}}function pb(y,x,_){var P=x&Dt,I=Jc(y);function Z(){var U=this&&this!==ii&&this instanceof Z?I:y;return U.apply(P?_:this,arguments)}return Z}function Eh(y){return function(x){x=gn(x);var _=Yo(x)?fs(x):B,P=_?_[0]:x.charAt(0),I=_?Ki(_,1).join(""):x.slice(1);return P[y]()+I}}function Ql(y){return function(x){return e0(rf(Co(x).replace(Yu,"")),y,"")}}function Jc(y){return function(){var x=arguments;switch(x.length){case 0:return new y;case 1:return new y(x[0]);case 2:return new y(x[0],x[1]);case 3:return new y(x[0],x[1],x[2]);case 4:return new y(x[0],x[1],x[2],x[3]);case 5:return new y(x[0],x[1],x[2],x[3],x[4]);case 6:return new y(x[0],x[1],x[2],x[3],x[4],x[5]);case 7:return new y(x[0],x[1],x[2],x[3],x[4],x[5],x[6])}var _=po(y.prototype),P=y.apply(_,x);return jn(P)?P:_}}function z0(y,x,_){var P=Jc(y);function I(){for(var Z=arguments.length,U=ft(Z),Q=Z,nt=_i(I);Q--;)U[Q]=arguments[Q];var wt=Z<3&&U[0]!==nt&&U[Z-1]!==nt?[]:Xo(U,nt);if(Z-=wt.length,Z<_)return _h(y,x,mo,I.placeholder,B,U,wt,B,B,_-Z);var St=this&&this!==ii&&this instanceof I?P:y;return va(St,this,U)}return I}function Ga(y){return function(x,_,P){var I=Bn(x);if(!oi(x)){var Z=de(_,3);x=Ar(x),_=function(Q){return Z(I[Q],Q,I)}}var U=y(x,_,P);return U>-1?I[Z?x[U]:U]:B}}function ba(y){return qi(function(x){var _=x.length,P=_,I=pa.prototype.thru;for(y&&x.reverse();P--;){var Z=x[P];if(typeof Z!="function")throw new Fa(H);if(I&&!U&&xo(Z)=="wrapper")var U=new pa([],!0)}for(P=U?P:_;++P<_;){Z=x[P];var Q=xo(Z),nt=Q=="wrapper"?bo(Z):B;nt&&Oh(nt[0])&&nt[1]==(rn|Yt|Xt|pe)&&!nt[4].length&&nt[9]==1?U=U[xo(nt[0])].apply(U,nt[3]):U=Z.length==1&&Oh(Z)?U[Q]():U.thru(Z)}return function(){var wt=arguments,St=wt[0];if(U&&wt.length==1&&Ae(St))return U.plant(St).value();for(var At=0,Ht=_?x[At].apply(this,wt):St;++At<_;)Ht=x[At].call(this,Ht);return Ht}})}function mo(y,x,_,P,I,Z,U,Q,nt,wt){var St=x&rn,At=x&Dt,Ht=x&Ft,ie=x&(Yt|Ge),ue=x&bt,Pe=Ht?B:Jc(y);function ye(){for(var ze=arguments.length,Ye=ft(ze),ia=ze;ia--;)Ye[ia]=arguments[ia];if(ie)var Ti=_i(ye),aa=MS(Ye,Ti);if(P&&(Ye=B0(Ye,P,I,ie)),Z&&(Ye=pn(Ye,Z,U,ie)),ze-=aa,ie&&ze<wt){var vr=Xo(Ye,Ti);return _h(y,x,mo,ye.placeholder,_,Ye,vr,Q,nt,wt-ze)}var Ua=At?_:this,js=Ht?Ua[y]:y;return ze=Ye.length,Q?Ye=Bt(Ye,Q):ue&&ze>1&&Ye.reverse(),St&&nt<ze&&(Ye.length=nt),this&&this!==ii&&this instanceof ye&&(js=Pe||Jc(js)),js.apply(Ua,Ye)}return ye}function ve(y,x){return function(_,P){return tb(_,y,x(P),{})}}function tu(y,x){return function(_,P){var I;if(_===B&&P===B)return x;if(_!==B&&(I=_),P!==B){if(I===B)return P;typeof _=="string"||typeof P=="string"?(_=lt(_),P=lt(P)):(_=N0(_),P=N0(P)),I=y(_,P)}return I}}function gd(y){return qi(function(x){return x=er(x,Ei(de())),Fe(function(_){var P=this;return y(x,function(I){return va(I,P,_)})})})}function wh(y,x){x=x===B?" ":lt(x);var _=x.length;if(_<2)return _?yh(x,y):x;var P=yh(x,Jf(y/Zc(x)));return Yo(x)?Ki(fs(P),0,y).join(""):P.slice(0,y)}function gb(y,x,_,P){var I=x&Dt,Z=Jc(y);function U(){for(var Q=-1,nt=arguments.length,wt=-1,St=P.length,At=ft(St+nt),Ht=this&&this!==ii&&this instanceof U?Z:y;++wt<St;)At[wt]=P[wt];for(;nt--;)At[wt++]=arguments[++Q];return va(Ht,I?_:this,At)}return U}function Sh(y){return function(x,_,P){return P&&typeof P!="number"&&_n(x,_,P)&&(_=P=B),x=Gs(x),_===B?(_=x,x=0):_=Gs(_),P=P===B?x<_?1:-1:Gs(P),Kc(x,_,P,y)}}function sn(y){return function(x,_){return typeof x=="string"&&typeof _=="string"||(x=ji(x),_=ji(_)),y(x,_)}}function _h(y,x,_,P,I,Z,U,Q,nt,wt){var St=x&Yt,At=St?U:B,Ht=St?B:U,ie=St?Z:B,ue=St?B:Z;x|=St?Xt:On,x&=~(St?On:Xt),x&me||(x&=~(Dt|Ft));var Pe=[y,x,I,ie,At,ue,Ht,Q,nt,wt],ye=_.apply(B,Pe);return Oh(y)&&K0(ye,Pe),ye.placeholder=P,ol(ye,y,x)}function Zi(y){var x=Wr[y];return function(_,P){if(_=ji(_),P=P==null?0:N(Ie(P),292),P&&le(_)){var I=(gn(_)+"e").split("e"),Z=x(I[0]+"e"+(+I[1]+P));return I=(gn(Z)+"e").split("e"),+(I[0]+"e"+(+I[1]-P))}return x(_)}}var Z0=$l&&1/jf(new $l([,-0]))[1]==or?function(y){return new $l(y)}:vl;function yd(y){return function(x){var _=qr(x);return _==Ve?l0(x):_==ti?TS(x):Gf(x,y(x))}}function gs(y,x,_,P,I,Z,U,Q){var nt=x&Ft;if(!nt&&typeof y!="function")throw new Fa(H);var wt=P?P.length:0;if(wt||(x&=~(Xt|On),P=I=B),U=U===B?U:Le(Ie(U),0),Q=Q===B?Q:Ie(Q),wt-=I?I.length:0,x&On){var St=P,At=I;P=I=B}var Ht=nt?B:bo(y),ie=[y,x,_,P,I,St,At,Z,U,Q];if(Ht&&$a(ie,Ht),y=ie[0],x=ie[1],_=ie[2],P=ie[3],I=ie[4],Q=ie[9]=ie[9]===B?nt?0:y.length:Le(ie[9]-wt,0),!Q&&x&(Yt|Ge)&&(x&=~(Yt|Ge)),!x||x==Dt)var ue=pb(y,x,_);else x==Yt||x==Ge?ue=z0(y,x,Q):(x==Xt||x==(Dt|Xt))&&!I.length?ue=gb(y,x,_,P):ue=mo.apply(B,ie);var Pe=Ht?R0:K0;return ol(Pe(ue,ie),y,x)}function W0(y,x,_,P){return y===B||Va(y,Wc[_])&&!Sn.call(P,_)?x:y}function eu(y,x,_,P,I,Z){return jn(y)&&jn(x)&&(Z.set(x,y),ph(y,x,B,eu,Z),Z.delete(x)),y}function G0(y){return uu(y)?B:y}function Lt(y,x,_,P,I,Z){var U=_&it,Q=y.length,nt=x.length;if(Q!=nt&&!(U&&nt>Q))return!1;var wt=Z.get(y),St=Z.get(x);if(wt&&St)return wt==x&&St==y;var At=-1,Ht=!0,ie=_&Ot?new Qo:B;for(Z.set(y,x),Z.set(x,y);++At<Q;){var ue=y[At],Pe=x[At];if(P)var ye=U?P(Pe,ue,At,x,y,Z):P(ue,Pe,At,y,x,Z);if(ye!==B){if(ye)continue;Ht=!1;break}if(ie){if(!n0(x,function(ze,Ye){if(!Fc(ie,Ye)&&(ue===ze||I(ue,ze,_,P,Z)))return ie.push(Ye)})){Ht=!1;break}}else if(!(ue===Pe||I(ue,Pe,_,P,Z))){Ht=!1;break}}return Z.delete(y),Z.delete(x),Ht}function md(y,x,_,P,I,Z,U){switch(_){case Ls:if(y.byteLength!=x.byteLength||y.byteOffset!=x.byteOffset)return!1;y=y.buffer,x=x.buffer;case Aa:return!(y.byteLength!=x.byteLength||!Z(new Kf(y),new Kf(x)));case $t:case _e:case Ee:return Va(+y,+x);case he:return y.name==x.name&&y.message==x.message;case Rs:case ro:return y==x+"";case Ve:var Q=l0;case ti:var nt=P&it;if(Q||(Q=jf),y.size!=x.size&&!nt)return!1;var wt=U.get(y);if(wt)return wt==x;P|=Ot,U.set(y,x);var St=Lt(Q(y),Q(x),P,I,Z,U);return U.delete(y),St;case Zo:if($c)return $c.call(y)==$c.call(x)}return!1}function j0(y,x,_,P,I,Z){var U=_&it,Q=il(y),nt=Q.length,wt=il(x),St=wt.length;if(nt!=St&&!U)return!1;for(var At=nt;At--;){var Ht=Q[At];if(!(U?Ht in x:Sn.call(x,Ht)))return!1}var ie=Z.get(y),ue=Z.get(x);if(ie&&ue)return ie==x&&ue==y;var Pe=!0;Z.set(y,x),Z.set(x,y);for(var ye=U;++At<nt;){Ht=Q[At];var ze=y[Ht],Ye=x[Ht];if(P)var ia=U?P(Ye,ze,Ht,x,y,Z):P(ze,Ye,Ht,y,x,Z);if(!(ia===B?ze===Ye||I(ze,Ye,_,P,Z):ia)){Pe=!1;break}ye||(ye=Ht=="constructor")}if(Pe&&!ye){var Ti=y.constructor,aa=x.constructor;Ti!=aa&&"constructor"in y&&"constructor"in x&&!(typeof Ti=="function"&&Ti instanceof Ti&&typeof aa=="function"&&aa instanceof aa)&&(Pe=!1)}return Z.delete(y),Z.delete(x),Pe}function qi(y){return Sd(Ph(y,B,Lh),y+"")}function il(y){return Q1(y,Ar,xd)}function Jl(y){return Q1(y,Ci,$0)}var bo=ih?function(y){return ih.get(y)}:vl;function xo(y){for(var x=y.name+"",_=Bs[x],P=Sn.call(Bs,x)?_.length:0;P--;){var I=_[P],Z=I.func;if(Z==null||Z==y)return I.name}return x}function _i(y){var x=Sn.call(F,"placeholder")?F:y;return x.placeholder}function de(){var y=F.iteratee||Yd;return y=y===Yd?ab:y,arguments.length?y(arguments[0],arguments[1]):y}function Mh(y,x){var _=y.__data__;return xb(x)?_[typeof x=="string"?"string":"hash"]:_.map}function bd(y){for(var x=Ar(y),_=x.length;_--;){var P=x[_],I=y[P];x[_]=[P,I,Ed(I)]}return x}function al(y,x){var _=CS(y,x);return rb(_)?_:B}function yb(y){var x=Sn.call(y,Gl),_=y[Gl];try{y[Gl]=B;var P=!0}catch(Z){}var I=Yf.call(y);return P&&(x?y[Gl]=_:delete y[Gl]),I}var xd=tn?function(y){return y==null?[]:(y=Bn(y),Vo(tn(y),function(x){return T1.call(y,x)}))}:Pr,$0=tn?function(y){for(var x=[];y;)Uo(x,xd(y)),y=qf(y);return x}:Pr,qr=wi;(rh&&qr(new rh(new ArrayBuffer(1)))!=Ls||jl&&qr(new jl)!=Ve||nd&&qr(nd.resolve())!=vi||$l&&qr(new $l)!=ti||ds&&qr(new ds)!=mr)&&(qr=function(y){var x=wi(y),_=x==Vn?y.constructor:B,P=_?Eo(_):"";if(P)switch(P){case k1:return Ls;case P1:return Ve;case R1:return vi;case N1:return ti;case L1:return mr}return x});function H0(y,x,_){for(var P=-1,I=_.length;++P<I;){var Z=_[P],U=Z.size;switch(Z.type){case"drop":y+=U;break;case"dropRight":x-=U;break;case"take":x=N(x,y+U);break;case"takeRight":y=Le(y,x-U);break}}return{start:y,end:x}}function mb(y){var x=y.match(Fr);return x?x[1].split(yi):[]}function V0(y,x,_){x=en(x,y);for(var P=-1,I=x.length,Z=!1;++P<I;){var U=ys(x[P]);if(!(Z=y!=null&&_(y,U)))break;y=y[U]}return Z||++P!=I?Z:(I=y==null?0:y.length,!!I&&Uh(I)&&Zs(U,I)&&(Ae(y)||hl(y)))}function U0(y){var x=y.length,_=new y.constructor(x);return x&&typeof y[0]=="string"&&Sn.call(y,"index")&&(_.index=y.index,_.input=y.input),_}function nu(y){return typeof y.constructor=="function"&&!ja(y)?po(qf(y)):{}}function Y0(y,x,_){var P=y.constructor;switch(x){case Aa:return yo(y);case $t:case _e:return new P(+y);case Ls:return En(y,_);case Wt:case jt:case ge:case se:case ae:case be:case fe:case ln:case kn:return rl(y,_);case Ve:return new P;case Ee:case ro:return new P(y);case Rs:return Kl(y);case ti:return new P;case Zo:return db(y)}}function Ch(y,x){var _=x.length;if(!_)return y;var P=_-1;return x[P]=(_>1?"& ":"")+x[P],x=x.join(_>2?", ":" "),y.replace(Jn,`{
/* [wrapped with `+x+`] */
`)}function bb(y){return Ae(y)||hl(y)||!!(O1&&y&&y[O1])}function Zs(y,x){var _=typeof y;return x=x==null?qn:x,!!x&&(_=="number"||_!="symbol"&&Gu.test(y))&&y>-1&&y%1==0&&y<x}function _n(y,x,_){if(!jn(_))return!1;var P=typeof x;return(P=="number"?oi(_)&&Zs(x,_.length):P=="string"&&x in _)?Va(_[x],y):!1}function Th(y,x){if(Ae(y))return!1;var _=typeof y;return _=="number"||_=="symbol"||_=="boolean"||y==null||ta(y)?!0:Ra.test(y)||!Pa.test(y)||x!=null&&y in Bn(x)}function xb(y){var x=typeof y;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?y!=="__proto__":y===null}function Oh(y){var x=xo(y),_=F[x];if(typeof _!="function"||!(x in Ke.prototype))return!1;if(y===_)return!0;var P=bo(_);return!!P&&y===P[0]}function Ah(y){return!!u0&&u0 in y}var sl=Vf?Ws:qd;function ja(y){var x=y&&y.constructor,_=typeof x=="function"&&x.prototype||Wc;return y===_}function Ed(y){return y===y&&!jn(y)}function wd(y,x){return function(_){return _==null?!1:_[y]===x&&(x!==B||y in Bn(_))}}function Eb(y){var x=ec(y,function(P){return _.size===$&&_.clear(),P}),_=x.cache;return x}function $a(y,x){var _=y[1],P=x[1],I=_|P,Z=I<(Dt|Ft|rn),U=P==rn&&_==Yt||P==rn&&_==pe&&y[7].length<=x[8]||P==(rn|pe)&&x[7].length<=x[8]&&_==Yt;if(!(Z||U))return y;P&Dt&&(y[2]=x[2],I|=_&Dt?0:me);var Q=x[3];if(Q){var nt=y[3];y[3]=nt?B0(nt,Q,x[4]):Q,y[4]=nt?Xo(y[3],X):x[4]}return Q=x[5],Q&&(nt=y[5],y[5]=nt?pn(nt,Q,x[6]):Q,y[6]=nt?Xo(y[5],X):x[6]),Q=x[7],Q&&(y[7]=Q),P&rn&&(y[8]=y[8]==null?x[8]:N(y[8],x[8])),y[9]==null&&(y[9]=x[9]),y[0]=x[0],y[1]=I,y}function X0(y){var x=[];if(y!=null)for(var _ in Bn(y))x.push(_);return x}function kh(y){return Yf.call(y)}function Ph(y,x,_){return x=Le(x===B?y.length-1:x,0),function(){for(var P=arguments,I=-1,Z=Le(P.length-x,0),U=ft(Z);++I<Z;)U[I]=P[x+I];I=-1;for(var Q=ft(x+1);++I<x;)Q[I]=P[I];return Q[x]=_(U),va(y,this,Q)}}function fr(y,x){return x.length<2?y:Vl(y,Or(x,0,-1))}function Bt(y,x){for(var _=y.length,P=N(x.length,_),I=zi(y);P--;){var Z=x[P];y[P]=Zs(Z,_)?I[Z]:B}return y}function Qi(y,x){if(!(x==="constructor"&&typeof y[x]=="function")&&x!="__proto__")return y[x]}var K0=q0(R0),ru=zS||function(y,x){return ii.setTimeout(y,x)},Sd=q0(hb);function ol(y,x,_){var P=x+"";return Sd(y,Ch(P,_d(mb(P),_)))}function q0(y){var x=0,_=0;return function(){var P=Gc(),I=ce-(P-_);if(_=P,I>0){if(++x>=zt)return arguments[0]}else x=0;return y.apply(B,arguments)}}function Rh(y,x){var _=-1,P=y.length,I=P-1;for(x=x===B?P:x;++_<x;){var Z=P0(_,I),U=y[Z];y[Z]=y[_],y[_]=U}return y.length=x,y}var Q0=Eb(function(y){var x=[];return y.charCodeAt(0)===46&&x.push(""),y.replace(Is,function(_,P,I,Z){x.push(I?Z.replace(mi,"$1"):P||_)}),x});function ys(y){if(typeof y=="string"||ta(y))return y;var x=y+"";return x=="0"&&1/y==-or?"-0":x}function Eo(y){if(y!=null){try{return Uf.call(y)}catch(x){}try{return y+""}catch(x){}}return""}function _d(y,x){return Da(dt,function(_){var P="_."+_[0];x&_[1]&&!Zf(y,P)&&y.push(P)}),y.sort()}function iu(y){if(y instanceof Ke)return y.clone();var x=new pa(y.__wrapped__,y.__chain__);return x.__actions__=zi(y.__actions__),x.__index__=y.__index__,x.__values__=y.__values__,x}function wb(y,x,_){(_?_n(y,x,_):x===B)?x=1:x=Le(Ie(x),0);var P=y==null?0:y.length;if(!P||x<1)return[];for(var I=0,Z=0,U=ft(Jf(P/x));I<P;)U[Z++]=Or(y,I,I+=x);return U}function wo(y){for(var x=-1,_=y==null?0:y.length,P=0,I=[];++x<_;){var Z=y[x];Z&&(I[P++]=Z)}return I}function Nh(){var y=arguments.length;if(!y)return[];for(var x=ft(y-1),_=arguments[0],P=y;P--;)x[P-1]=arguments[P];return Uo(Ae(_)?zi(_):[_],Kr(x,1))}var xa=Fe(function(y,x){return dr(y)?Hl(y,Kr(x,1,dr,!0)):[]}),Sb=Fe(function(y,x){var _=Ea(x);return dr(_)&&(_=B),dr(y)?Hl(y,Kr(x,1,dr,!0),de(_,2)):[]}),Md=Fe(function(y,x){var _=Ea(x);return dr(_)&&(_=B),dr(y)?Hl(y,Kr(x,1,dr,!0),B,_):[]});function wn(y,x,_){var P=y==null?0:y.length;return P?(x=_||x===B?1:Ie(x),Or(y,x<0?0:x,P)):[]}function Ha(y,x,_){var P=y==null?0:y.length;return P?(x=_||x===B?1:Ie(x),x=P-x,Or(y,0,x<0?0:x)):[]}function ll(y,x){return y&&y.length?Xl(y,de(x,3),!0,!0):[]}function Cd(y,x){return y&&y.length?Xl(y,de(x,3),!0):[]}function J0(y,x,_,P){var I=y==null?0:y.length;return I?(_&&typeof _!="number"&&_n(y,x,_)&&(_=0,P=I),q1(y,x,_,P)):[]}function tp(y,x,_){var P=y==null?0:y.length;if(!P)return-1;var I=_==null?0:Ie(_);return I<0&&(I=Le(P+I,0)),Ba(y,de(x,3),I)}function ep(y,x,_){var P=y==null?0:y.length;if(!P)return-1;var I=P-1;return _!==B&&(I=Ie(_),I=_<0?Le(P+I,0):N(I,P-1)),Ba(y,de(x,3),I,!0)}function Lh(y){var x=y==null?0:y.length;return x?Kr(y,1):[]}function _b(y){var x=y==null?0:y.length;return x?Kr(y,or):[]}function np(y,x){var _=y==null?0:y.length;return _?(x=x===B?1:Ie(x),Kr(y,x)):[]}function rp(y){for(var x=-1,_=y==null?0:y.length,P={};++x<_;){var I=y[x];P[I[0]]=I[1]}return P}function ip(y){return y&&y.length?y[0]:B}function Gn(y,x,_){var P=y==null?0:y.length;if(!P)return-1;var I=_==null?0:Ie(_);return I<0&&(I=Le(P+I,0)),Bc(y,x,I)}function Mb(y){var x=y==null?0:y.length;return x?Or(y,0,-1):[]}var Cb=Fe(function(y){var x=er(y,bh);return x.length&&x[0]===y[0]?ma(x):[]}),Tb=Fe(function(y){var x=Ea(y),_=er(y,bh);return x===Ea(_)?x=B:_.pop(),_.length&&_[0]===y[0]?ma(_,de(x,2)):[]}),Ob=Fe(function(y){var x=Ea(y),_=er(y,bh);return x=typeof x=="function"?x:B,x&&_.pop(),_.length&&_[0]===y[0]?ma(_,B,x):[]});function Ab(y,x){return y==null?"":xn.call(y,x)}function Ea(y){var x=y==null?0:y.length;return x?y[x-1]:B}function kb(y,x,_){var P=y==null?0:y.length;if(!P)return-1;var I=P;return _!==B&&(I=Ie(_),I=I<0?Le(P+I,0):N(I,P-1)),x===x?OS(y,x,I):Ba(y,Ds,I,!0)}function ap(y,x){return y&&y.length?sb(y,Ie(x)):B}var Pb=Fe(sp);function sp(y,x){return y&&y.length&&x&&x.length?k0(y,x):y}function Rb(y,x,_){return y&&y.length&&x&&x.length?k0(y,x,de(_,2)):y}function Nb(y,x,_){return y&&y.length&&x&&x.length?k0(y,x,B,_):y}var Lb=qi(function(y,x){var _=y==null?0:y.length,P=lh(y,x);return cb(y,er(x,function(I){return Zs(I,_)?+I:I}).sort(xh)),P});function Ib(y,x){var _=[];if(!(y&&y.length))return _;var P=-1,I=[],Z=y.length;for(x=de(x,3);++P<Z;){var U=y[P];x(U,P,y)&&(_.push(U),I.push(P))}return cb(y,I),_}function Td(y){return y==null?y:f0.call(y)}function HS(y,x,_){var P=y==null?0:y.length;return P?(_&&typeof _!="number"&&_n(y,x,_)?(x=0,_=P):(x=x==null?0:Ie(x),_=_===B?P:Ie(_)),Or(y,x,_)):[]}function cl(y,x){return vs(y,x)}function Ih(y,x,_){return fd(y,x,de(_,2))}function au(y,x){var _=y==null?0:y.length;if(_){var P=vs(y,x);if(P<_&&Va(y[P],x))return P}return-1}function Db(y,x){return vs(y,x,!0)}function su(y,x,_){return fd(y,x,de(_,2),!0)}function op(y,x){var _=y==null?0:y.length;if(_){var P=vs(y,x,!0)-1;if(Va(y[P],x))return P}return-1}function Bb(y){return y&&y.length?dd(y):[]}function Fb(y,x){return y&&y.length?dd(y,de(x,2)):[]}function lp(y){var x=y==null?0:y.length;return x?Or(y,1,x):[]}function Od(y,x,_){return y&&y.length?(x=_||x===B?1:Ie(x),Or(y,0,x<0?0:x)):[]}function cp(y,x,_){var P=y==null?0:y.length;return P?(x=_||x===B?1:Ie(x),x=P-x,Or(y,x<0?0:x,P)):[]}function zb(y,x){return y&&y.length?Xl(y,de(x,3),!1,!0):[]}function Zb(y,x){return y&&y.length?Xl(y,de(x,3)):[]}var Wi=Fe(function(y){return Wa(Kr(y,1,dr,!0))}),up=Fe(function(y){var x=Ea(y);return dr(x)&&(x=B),Wa(Kr(y,1,dr,!0),de(x,2))}),Ji=Fe(function(y){var x=Ea(y);return x=typeof x=="function"?x:B,Wa(Kr(y,1,dr,!0),B,x)});function Wb(y){return y&&y.length?Wa(y):[]}function Gb(y,x){return y&&y.length?Wa(y,de(x,2)):[]}function jb(y,x){return x=typeof x=="function"?x:B,y&&y.length?Wa(y,B,x):[]}function Dh(y){if(!(y&&y.length))return[];var x=0;return y=Vo(y,function(_){if(dr(_))return x=Le(_.length,x),!0}),a0(x,function(_){return er(y,r0(_))})}function Ad(y,x){if(!(y&&y.length))return[];var _=Dh(y);return x==null?_:er(_,function(P){return va(x,B,P)})}var kd=Fe(function(y,x){return dr(y)?Hl(y,x):[]}),Pd=Fe(function(y){return vd(Vo(y,dr))}),Rd=Fe(function(y){var x=Ea(y);return dr(x)&&(x=B),vd(Vo(y,dr),de(x,2))}),hp=Fe(function(y){var x=Ea(y);return x=typeof x=="function"?x:B,vd(Vo(y,dr),B,x)}),Nd=Fe(Dh);function $b(y,x){return I0(y||[],x||[],Yc)}function Hb(y,x){return I0(y||[],x||[],mh)}var Vb=Fe(function(y){var x=y.length,_=x>1?y[x-1]:B;return _=typeof _=="function"?(y.pop(),_):B,Ad(y,_)});function fp(y){var x=F(y);return x.__chain__=!0,x}function Bh(y,x){return x(y),y}function Fh(y,x){return x(y)}var zh=qi(function(y){var x=y.length,_=x?y[0]:0,P=this.__wrapped__,I=function(Z){return lh(Z,y)};return x>1||this.__actions__.length||!(P instanceof Ke)||!Zs(_)?this.thru(I):(P=P.slice(_,+_+(x?1:0)),P.__actions__.push({func:Fh,args:[I],thisArg:B}),new pa(P,this.__chain__).thru(function(Z){return x&&!Z.length&&Z.push(B),Z}))});function dp(){return fp(this)}function vp(){return new pa(this.value(),this.__chain__)}function pp(){this.__values__===B&&(this.__values__=Xh(this.value()));var y=this.__index__>=this.__values__.length,x=y?B:this.__values__[this.__index__++];return{done:y,value:x}}function Ub(){return this}function gp(y){for(var x,_=this;_ instanceof Vc;){var P=iu(_);P.__index__=0,P.__values__=B,x?I.__wrapped__=P:x=P;var I=P;_=_.__wrapped__}return I.__wrapped__=y,x}function Zh(){var y=this.__wrapped__;if(y instanceof Ke){var x=y;return this.__actions__.length&&(x=new Ke(this)),x=x.reverse(),x.__actions__.push({func:Fh,args:[Td],thisArg:B}),new pa(x,this.__chain__)}return this.thru(Td)}function Ld(){return nl(this.__wrapped__,this.__actions__)}var yp=pd(function(y,x,_){Sn.call(y,_)?++y[_]:Zt(y,_,1)});function Yb(y,x,_){var P=Ae(y)?h1:K1;return _&&_n(y,x,_)&&(x=B),P(y,de(x,3))}function Xb(y,x){var _=Ae(y)?Vo:S0;return _(y,de(x,3))}var Kb=Ga(tp),mp=Ga(ep);function qb(y,x){return Kr(Wh(y,x),1)}function Qb(y,x){return Kr(Wh(y,x),or)}function VS(y,x,_){return _=_===B?1:Ie(_),Kr(Wh(y,x),_)}function Jb(y,x){var _=Ae(y)?Da:zs;return _(y,de(x,3))}function Id(y,x){var _=Ae(y)?xS:w0;return _(y,de(x,3))}var tx=pd(function(y,x,_){Sn.call(y,_)?y[_].push(x):Zt(y,_,[x])});function bp(y,x,_,P){y=oi(y)?y:ea(y),_=_&&!P?Ie(_):0;var I=y.length;return _<0&&(_=Le(I+_,0)),Yh(y)?_<=I&&y.indexOf(x,_)>-1:!!I&&Bc(y,x,_)>-1}var ex=Fe(function(y,x,_){var P=-1,I=typeof x=="function",Z=oi(y)?ft(y.length):[];return zs(y,function(U){Z[++P]=I?va(x,U,_):Ul(U,x,_)}),Z}),nx=pd(function(y,x,_){Zt(y,_,x)});function Wh(y,x){var _=Ae(y)?er:cd;return _(y,de(x,3))}function rr(y,x,_,P){return y==null?[]:(Ae(x)||(x=x==null?[]:[x]),_=P?B:_,Ae(_)||(_=_==null?[]:[_]),ob(y,x,_))}var tc=pd(function(y,x,_){y[_?0:1].push(x)},function(){return[[],[]]});function Gi(y,x,_){var P=Ae(y)?e0:v1,I=arguments.length<3;return P(y,de(x,4),_,I,zs)}function ul(y,x,_){var P=Ae(y)?ES:v1,I=arguments.length<3;return P(y,de(x,4),_,I,w0)}function ou(y,x){var _=Ae(y)?Vo:S0;return _(y,Hh(de(x,3)))}function xp(y){var x=Ae(y)?x0:hd;return x(y)}function Ep(y,x,_){(_?_n(y,x,_):x===B)?x=1:x=Ie(x);var P=Ae(y)?Y1:ub;return P(y,x)}function rx(y){var x=Ae(y)?xe:si;return x(y)}function ix(y){if(y==null)return 0;if(oi(y))return Yh(y)?Zc(y):y.length;var x=qr(y);return x==Ve||x==ti?y.size:dh(y).length}function ax(y,x,_){var P=Ae(y)?n0:el;return _&&_n(y,x,_)&&(x=B),P(y,de(x,3))}var sx=Fe(function(y,x){if(y==null)return[];var _=x.length;return _>1&&_n(y,x[0],x[1])?x=[]:_>2&&_n(x[0],x[1],x[2])&&(x=[x[0]]),ob(y,Kr(x,1),[])}),lu=FS||function(){return ii.Date.now()};function ox(y,x){if(typeof x!="function")throw new Fa(H);return y=Ie(y),function(){if(--y<1)return x.apply(this,arguments)}}function wp(y,x,_){return x=_?B:x,x=y&&x==null?y.length:x,gs(y,rn,B,B,B,B,x)}function Gh(y,x){var _;if(typeof x!="function")throw new Fa(H);return y=Ie(y),function(){return--y>0&&(_=x.apply(this,arguments)),y<=1&&(x=B),_}}var Dd=Fe(function(y,x,_){var P=Dt;if(_.length){var I=Xo(_,_i(Dd));P|=Xt}return gs(y,P,x,_,I)}),Sp=Fe(function(y,x,_){var P=Dt|Ft;if(_.length){var I=Xo(_,_i(Sp));P|=Xt}return gs(x,P,y,_,I)});function jh(y,x,_){x=_?B:x;var P=gs(y,Yt,B,B,B,B,B,x);return P.placeholder=jh.placeholder,P}function $h(y,x,_){x=_?B:x;var P=gs(y,Ge,B,B,B,B,B,x);return P.placeholder=$h.placeholder,P}function _p(y,x,_){var P,I,Z,U,Q,nt,wt=0,St=!1,At=!1,Ht=!0;if(typeof y!="function")throw new Fa(H);x=ji(x)||0,jn(_)&&(St=!!_.leading,At="maxWait"in _,Z=At?Le(ji(_.maxWait)||0,x):Z,Ht="trailing"in _?!!_.trailing:Ht);function ie(vr){var Ua=P,js=I;return P=I=B,wt=vr,U=y.apply(js,Ua),U}function ue(vr){return wt=vr,Q=ru(ze,x),St?ie(vr):U}function Pe(vr){var Ua=vr-nt,js=vr-wt,ac=x-Ua;return At?N(ac,Z-js):ac}function ye(vr){var Ua=vr-nt,js=vr-wt;return nt===B||Ua>=x||Ua<0||At&&js>=Z}function ze(){var vr=lu();if(ye(vr))return Ye(vr);Q=ru(ze,Pe(vr))}function Ye(vr){return Q=B,Ht&&P?ie(vr):(P=I=B,U)}function ia(){Q!==B&&D0(Q),wt=0,P=nt=I=Q=B}function Ti(){return Q===B?U:Ye(lu())}function aa(){var vr=lu(),Ua=ye(vr);if(P=arguments,I=this,nt=vr,Ua){if(Q===B)return ue(nt);if(At)return D0(Q),Q=ru(ze,x),ie(nt)}return Q===B&&(Q=ru(ze,x)),U}return aa.cancel=ia,aa.flush=Ti,aa}var lx=Fe(function(y,x){return Xc(y,1,x)}),cx=Fe(function(y,x,_){return Xc(y,ji(x)||0,_)});function Mp(y){return gs(y,bt)}function ec(y,x){if(typeof y!="function"||x!=null&&typeof x!="function")throw new Fa(H);var _=function(){var P=arguments,I=x?x.apply(this,P):P[0],Z=_.cache;if(Z.has(I))return Z.get(I);var U=y.apply(this,P);return _.cache=Z.set(I,U)||Z,U};return _.cache=new(ec.Cache||ga),_}ec.Cache=ga;function Hh(y){if(typeof y!="function")throw new Fa(H);return function(){var x=arguments;switch(x.length){case 0:return!y.call(this);case 1:return!y.call(this,x[0]);case 2:return!y.call(this,x[0],x[1]);case 3:return!y.call(this,x[0],x[1],x[2])}return!y.apply(this,x)}}function Cp(y){return Gh(2,y)}var ux=fb(function(y,x){x=x.length==1&&Ae(x[0])?er(x[0],Ei(de())):er(Kr(x,1),Ei(de()));var _=x.length;return Fe(function(P){for(var I=-1,Z=N(P.length,_);++I<Z;)P[I]=x[I].call(this,P[I]);return va(y,this,P)})}),Bd=Fe(function(y,x){var _=Xo(x,_i(Bd));return gs(y,Xt,B,x,_)}),Fd=Fe(function(y,x){var _=Xo(x,_i(Fd));return gs(y,On,B,x,_)}),hx=qi(function(y,x){return gs(y,pe,B,B,B,x)});function fx(y,x){if(typeof y!="function")throw new Fa(H);return x=x===B?x:Ie(x),Fe(y,x)}function dx(y,x){if(typeof y!="function")throw new Fa(H);return x=x==null?0:Le(Ie(x),0),Fe(function(_){var P=_[x],I=Ki(_,0,x);return P&&Uo(I,P),va(y,this,I)})}function vx(y,x,_){var P=!0,I=!0;if(typeof y!="function")throw new Fa(H);return jn(_)&&(P="leading"in _?!!_.leading:P,I="trailing"in _?!!_.trailing:I),_p(y,x,{leading:P,maxWait:x,trailing:I})}function Tp(y){return wp(y,1)}function zd(y,x){return Bd(qc(x),y)}function px(){if(!arguments.length)return[];var y=arguments[0];return Ae(y)?y:[y]}function gx(y){return Fi(y,Ct)}function yx(y,x){return x=typeof x=="function"?x:B,Fi(y,Ct,x)}function mx(y){return Fi(y,V|Ct)}function bx(y,x){return x=typeof x=="function"?x:B,Fi(y,V|Ct,x)}function xx(y,x){return x==null||Xr(y,x,Ar(x))}function Va(y,x){return y===x||y!==y&&x!==x}var Ex=sn(fh),wx=sn(function(y,x){return y>=x}),hl=eb(function(){return arguments}())?eb:function(y){return $n(y)&&Sn.call(y,"callee")&&!T1.call(y,"callee")},Ae=ft.isArray,US=a1?Ei(a1):tl;function oi(y){return y!=null&&Uh(y.length)&&!Ws(y)}function dr(y){return $n(y)&&oi(y)}function Zd(y){return y===!0||y===!1||$n(y)&&wi(y)==$t}var So=Bi||qd,Sx=s1?Ei(s1):C0;function Op(y){return $n(y)&&y.nodeType===1&&!uu(y)}function Ap(y){if(y==null)return!0;if(oi(y)&&(Ae(y)||typeof y=="string"||typeof y.splice=="function"||So(y)||fl(y)||hl(y)))return!y.length;var x=qr(y);if(x==Ve||x==ti)return!y.size;if(ja(y))return!dh(y).length;for(var _ in y)if(Sn.call(y,_))return!1;return!0}function kp(y,x){return Yl(y,x)}function _x(y,x,_){_=typeof _=="function"?_:B;var P=_?_(y,x):B;return P===B?Yl(y,x,B,_):!!P}function Vh(y){if(!$n(y))return!1;var x=wi(y);return x==he||x==An||typeof y.message=="string"&&typeof y.name=="string"&&!uu(y)}function Mx(y){return typeof y=="number"&&le(y)}function Ws(y){if(!jn(y))return!1;var x=wi(y);return x==on||x==lr||x==_t||x==ua}function Pp(y){return typeof y=="number"&&y==Ie(y)}function Uh(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=qn}function jn(y){var x=typeof y;return y!=null&&(x=="object"||x=="function")}function $n(y){return y!=null&&typeof y=="object"}var _o=o1?Ei(o1):od;function Cx(y,x){return y===x||ld(y,x,bd(x))}function Tx(y,x,_){return _=typeof _=="function"?_:B,ld(y,x,bd(x),_)}function ms(y){return Wd(y)&&y!=+y}function Ox(y){if(sl(y))throw new Oe(gt);return rb(y)}function Ax(y){return y===null}function cu(y){return y==null}function Wd(y){return typeof y=="number"||$n(y)&&wi(y)==Ee}function uu(y){if(!$n(y)||wi(y)!=Vn)return!1;var x=qf(y);if(x===null)return!0;var _=Sn.call(x,"constructor")&&x.constructor;return typeof _=="function"&&_ instanceof _&&Uf.call(_)==LS}var Gd=l1?Ei(l1):ib;function kx(y){return Pp(y)&&y>=-qn&&y<=qn}var jd=c1?Ei(c1):T0;function Yh(y){return typeof y=="string"||!Ae(y)&&$n(y)&&wi(y)==ro}function ta(y){return typeof y=="symbol"||$n(y)&&wi(y)==Zo}var fl=u1?Ei(u1):WS;function $d(y){return y===B}function Rp(y){return $n(y)&&qr(y)==mr}function Px(y){return $n(y)&&wi(y)==Ii}var Rx=sn(vh),Mi=sn(function(y,x){return y<=x});function Xh(y){if(!y)return[];if(oi(y))return Yh(y)?fs(y):zi(y);if(nh&&y[nh])return x1(y[nh]());var x=qr(y),_=x==Ve?l0:x==ti?jf:ea;return _(y)}function Gs(y){if(!y)return y===0?y:0;if(y=ji(y),y===or||y===-or){var x=y<0?-1:1;return x*Li}return y===y?y:0}function Ie(y){var x=Gs(y),_=x%1;return x===x?_?x-_:x:0}function Np(y){return y?Jo(Ie(y),0,Cr):0}function ji(y){if(typeof y=="number")return y;if(ta(y))return hr;if(jn(y)){var x=typeof y.valueOf=="function"?y.valueOf():y;y=jn(x)?x+"":x}if(typeof y!="string")return y===0?y:+y;y=g1(y);var _=so.test(y);return _||Wu.test(y)?mS(y.slice(2),_?2:8):Xi.test(y)?hr:+y}function cr(y){return nr(y,Ci(y))}function Nx(y){return y?Jo(Ie(y),-qn,qn):y===0?y:0}function gn(y){return y==null?"":lt(y)}var Lx=ql(function(y,x){if(ja(x)||oi(x)){nr(x,Ar(x),y);return}for(var _ in x)Sn.call(x,_)&&Yc(y,_,x[_])}),Lp=ql(function(y,x){nr(x,Ci(x),y)}),hu=ql(function(y,x,_,P){nr(x,Ci(x),y,P)}),Ip=ql(function(y,x,_,P){nr(x,Ar(x),y,P)}),Ix=qi(lh);function Dx(y,x){var _=po(y);return x==null?_:ai(_,x)}var Bx=Fe(function(y,x){y=Bn(y);var _=-1,P=x.length,I=P>2?x[2]:B;for(I&&_n(x[0],x[1],I)&&(P=1);++_<P;)for(var Z=x[_],U=Ci(Z),Q=-1,nt=U.length;++Q<nt;){var wt=U[Q],St=y[wt];(St===B||Va(St,Wc[wt])&&!Sn.call(y,wt))&&(y[wt]=Z[wt])}return y}),Fx=Fe(function(y){return y.push(B,eu),va(Jh,B,y)});function zx(y,x){return f1(y,de(x,3),Za)}function Zx(y,x){return f1(y,de(x,3),uh)}function Wx(y,x){return y==null?y:sd(y,de(x,3),Ci)}function Gx(y,x){return y==null?y:_0(y,de(x,3),Ci)}function jx(y,x){return y&&Za(y,de(x,3))}function $x(y,x){return y&&uh(y,de(x,3))}function Hx(y){return y==null?[]:hh(y,Ar(y))}function Vx(y){return y==null?[]:hh(y,Ci(y))}function Dp(y,x,_){var P=y==null?B:Vl(y,x);return P===B?_:P}function Kh(y,x){return y!=null&&V0(y,x,J1)}function qh(y,x){return y!=null&&V0(y,x,ZS)}var Qh=ve(function(y,x,_){x!=null&&typeof x.toString!="function"&&(x=Yf.call(x)),y[x]=_},wa(ur)),Hd=ve(function(y,x,_){x!=null&&typeof x.toString!="function"&&(x=Yf.call(x)),Sn.call(y,x)?y[x].push(_):y[x]=[_]},de),xr=Fe(Ul);function Ar(y){return oi(y)?b0(y):dh(y)}function Ci(y){return oi(y)?b0(y,!0):O0(y)}function Yn(y,x){var _={};return x=de(x,3),Za(y,function(P,I,Z){Zt(_,x(P,I,Z),P)}),_}function Ux(y,x){var _={};return x=de(x,3),Za(y,function(P,I,Z){Zt(_,I,x(P,I,Z))}),_}var Yx=ql(function(y,x,_){ph(y,x,_)}),Jh=ql(function(y,x,_,P){ph(y,x,_,P)}),nc=qi(function(y,x){var _={};if(y==null)return _;var P=!1;x=er(x,function(Z){return Z=en(Z,y),P||(P=Z.length>1),Z}),nr(y,Jl(y),_),P&&(_=Fi(_,V|ct|Ct,G0));for(var I=x.length;I--;)ps(_,x[I]);return _});function Xx(y,x){return Bp(y,Hh(de(x)))}var Kx=qi(function(y,x){return y==null?{}:gh(y,x)});function Bp(y,x){if(y==null)return{};var _=er(Jl(y),function(P){return[P]});return x=de(x),lb(y,_,function(P,I){return x(P,I[0])})}function De(y,x,_){x=en(x,y);var P=-1,I=x.length;for(I||(I=1,y=B);++P<I;){var Z=y==null?B:y[ys(x[P])];Z===B&&(P=I,Z=_),y=Ws(Z)?Z.call(y):Z}return y}function bs(y,x,_){return y==null?y:mh(y,x,_)}function Fp(y,x,_,P){return P=typeof P=="function"?P:B,y==null?y:mh(y,x,_,P)}var zp=yd(Ar),Zp=yd(Ci);function tf(y,x,_){var P=Ae(y),I=P||So(y)||fl(y);if(x=de(x,4),_==null){var Z=y&&y.constructor;I?_=P?new Z:[]:jn(y)?_=Ws(Z)?po(qf(y)):{}:_={}}return(I?Da:Za)(y,function(U,Q,nt){return x(_,U,Q,nt)}),_}function qx(y,x){return y==null?!0:ps(y,x)}function Qx(y,x,_){return y==null?y:L0(y,x,qc(_))}function Jx(y,x,_,P){return P=typeof P=="function"?P:B,y==null?y:L0(y,x,qc(_),P)}function ea(y){return y==null?[]:s0(y,Ar(y))}function rc(y){return y==null?[]:s0(y,Ci(y))}function Mo(y,x,_){return _===B&&(_=x,x=B),_!==B&&(_=ji(_),_=_===_?_:0),x!==B&&(x=ji(x),x=x===x?x:0),Jo(ji(y),x,_)}function tE(y,x,_){return x=Gs(x),_===B?(_=x,x=0):_=Gs(_),y=ji(y),M0(y,x,_)}function eE(y,x,_){if(_&&typeof _!="boolean"&&_n(y,x,_)&&(x=_=B),_===B&&(typeof x=="boolean"?(_=x,x=B):typeof y=="boolean"&&(_=y,y=B)),y===B&&x===B?(y=0,x=1):(y=Gs(y),x===B?(x=y,y=0):x=Gs(x)),y>x){var P=y;y=x,x=P}if(_||y%1||x%1){var I=ed();return N(y+I*(x-y+t1("1e-"+((I+"").length-1))),x)}return P0(y,x)}var nE=Ql(function(y,x,_){return x=x.toLowerCase(),y+(_?ic(x):x)});function ic(y){return fu(gn(y).toLowerCase())}function Co(y){return y=gn(y),y&&y.replace(Wo,m1).replace(Xu,"")}function ef(y,x,_){y=gn(y),x=lt(x);var P=y.length;_=_===B?P:Jo(Ie(_),0,P);var I=_;return _-=x.length,_>=0&&y.slice(_,I)==x}function Wp(y){return y=gn(y),y&&os.test(y)?y.replace(Un,Qu):y}function Gp(y){return y=gn(y),y&&In.test(y)?y.replace(gi,"\\$&"):y}var nf=Ql(function(y,x,_){return y+(_?"-":"")+x.toLowerCase()}),Vd=Ql(function(y,x,_){return y+(_?" ":"")+x.toLowerCase()}),rE=Eh("toLowerCase");function dl(y,x,_){y=gn(y),x=Ie(x);var P=x?Zc(y):0;if(!x||P>=x)return y;var I=(x-P)/2;return wh(td(I),_)+y+wh(Jf(I),_)}function jp(y,x,_){y=gn(y),x=Ie(x);var P=x?Zc(y):0;return x&&P<x?y+wh(x-P,_):y}function iE(y,x,_){y=gn(y),x=Ie(x);var P=x?Zc(y):0;return x&&P<x?wh(x-P,_)+y:y}function aE(y,x,_){return _||x==null?x=0:x&&(x=+x),h0(gn(y).replace(br,""),x||0)}function sE(y,x,_){return(_?_n(y,x,_):x===B)?x=1:x=Ie(x),yh(gn(y),x)}function oE(){var y=arguments,x=gn(y[0]);return y.length<3?x:x.replace(y[1],y[2])}var lE=Ql(function(y,x,_){return y+(_?"_":"")+x.toLowerCase()});function cE(y,x,_){return _&&typeof _!="number"&&_n(y,x,_)&&(x=_=B),_=_===B?Cr:_>>>0,_?(y=gn(y),y&&(typeof x=="string"||x!=null&&!Gd(x))&&(x=lt(x),!x&&Yo(y))?Ki(fs(y),0,_):y.split(x,_)):[]}var uE=Ql(function(y,x,_){return y+(_?" ":"")+fu(x)});function hE(y,x,_){return y=gn(y),_=_==null?0:Jo(Ie(_),0,y.length),x=lt(x),y.slice(_,_+x.length)==x}function fE(y,x,_){var P=F.templateSettings;_&&_n(y,x,_)&&(x=B),y=gn(y),x=hu({},x,P,W0);var I=hu({},x.imports,P.imports,W0),Z=Ar(I),U=s0(I,Z),Q,nt,wt=0,St=x.interpolate||cs,At="__p += '",Ht=c0((x.escape||cs).source+"|"+St.source+"|"+(St===ei?ao:cs).source+"|"+(x.evaluate||cs).source+"|$","g"),ie="//# sourceURL="+(Sn.call(x,"sourceURL")?(x.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xi+"]")+`
`;y.replace(Ht,function(ye,ze,Ye,ia,Ti,aa){return Ye||(Ye=ia),At+=y.slice(wt,aa).replace(fa,o0),ze&&(Q=!0,At+=`' +
__e(`+ze+`) +
'`),Ti&&(nt=!0,At+=`';
`+Ti+`;
__p += '`),Ye&&(At+=`' +
((__t = (`+Ye+`)) == null ? '' : __t) +
'`),wt=aa+ye.length,ye}),At+=`';
`;var ue=Sn.call(x,"variable")&&x.variable;if(!ue)At=`with (obj) {
`+At+`
}
`;else if(kc.test(ue))throw new Oe(j);At=(nt?At.replace(Qn,""):At).replace(Pn,"$1").replace(an,"$1;"),At="function("+(ue||"obj")+`) {
`+(ue?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Q?", __e = _.escape":"")+(nt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+At+`return __p
}`;var Pe=Ud(function(){return vn(Z,ie+"return "+At).apply(B,U)});if(Pe.source=At,Vh(Pe))throw Pe;return Pe}function dE(y){return gn(y).toLowerCase()}function vE(y){return gn(y).toUpperCase()}function Mt(y,x,_){if(y=gn(y),y&&(_||x===B))return g1(y);if(!y||!(x=lt(x)))return y;var P=fs(y),I=fs(x),Z=zc(P,I),U=y1(P,I)+1;return Ki(P,Z,U).join("")}function pE(y,x,_){if(y=gn(y),y&&(_||x===B))return y.slice(0,w1(y)+1);if(!y||!(x=lt(x)))return y;var P=fs(y),I=y1(P,fs(x))+1;return Ki(P,0,I).join("")}function gE(y,x,_){if(y=gn(y),y&&(_||x===B))return y.replace(br,"");if(!y||!(x=lt(x)))return y;var P=fs(y),I=zc(P,fs(x));return Ki(P,I).join("")}function yE(y,x){var _=Ut,P=oe;if(jn(x)){var I="separator"in x?x.separator:I;_="length"in x?Ie(x.length):_,P="omission"in x?lt(x.omission):P}y=gn(y);var Z=y.length;if(Yo(y)){var U=fs(y);Z=U.length}if(_>=Z)return y;var Q=_-Zc(P);if(Q<1)return P;var nt=U?Ki(U,0,Q).join(""):y.slice(0,Q);if(I===B)return nt+P;if(U&&(Q+=nt.length-Q),Gd(I)){if(y.slice(Q).search(I)){var wt,St=nt;for(I.global||(I=c0(I.source,gn(zr.exec(I))+"g")),I.lastIndex=0;wt=I.exec(St);)var At=wt.index;nt=nt.slice(0,At===B?Q:At)}}else if(y.indexOf(lt(I),Q)!=Q){var Ht=nt.lastIndexOf(I);Ht>-1&&(nt=nt.slice(0,Ht))}return nt+P}function $p(y){return y=gn(y),y&&Yr.test(y)?y.replace(pi,AS):y}var YS=Ql(function(y,x,_){return y+(_?" ":"")+x.toUpperCase()}),fu=Eh("toUpperCase");function rf(y,x,_){return y=gn(y),x=_?B:x,x===B?b1(y)?PS(y):Tr(y):y.match(x)||[]}var Ud=Fe(function(y,x){try{return va(y,B,x)}catch(_){return Vh(_)?_:new Oe(_)}}),mE=qi(function(y,x){return Da(x,function(_){_=ys(_),Zt(y,_,Dd(y[_],y))}),y});function nn(y){var x=y==null?0:y.length,_=de();return y=x?er(y,function(P){if(typeof P[1]!="function")throw new Fa(H);return[_(P[0]),P[1]]}):[],Fe(function(P){for(var I=-1;++I<x;){var Z=y[I];if(va(Z[0],this,P))return va(Z[1],this,P)}})}function bE(y){return E0(Fi(y,V))}function wa(y){return function(){return y}}function du(y,x){return y==null||y!==y?x:y}var xE=ba(),Fn=ba(!0);function ur(y){return y}function Yd(y){return ab(typeof y=="function"?y:Fi(y,V))}function Xd(y){return ud(Fi(y,V))}function vu(y,x){return A0(y,Fi(x,V))}var EE=Fe(function(y,x){return function(_){return Ul(_,y,x)}}),kr=Fe(function(y,x){return function(_){return Ul(y,_,x)}});function Kd(y,x,_){var P=Ar(x),I=hh(x,P);_==null&&!(jn(x)&&(I.length||!P.length))&&(_=x,x=y,y=this,I=hh(x,Ar(x)));var Z=!(jn(_)&&"chain"in _)||!!_.chain,U=Ws(y);return Da(I,function(Q){var nt=x[Q];y[Q]=nt,U&&(y.prototype[Q]=function(){var wt=this.__chain__;if(Z||wt){var St=y(this.__wrapped__),At=St.__actions__=zi(this.__actions__);return At.push({func:nt,args:arguments,thisArg:y}),St.__chain__=wt,St}return nt.apply(y,Uo([this.value()],arguments))})}),y}function pu(){return ii._===this&&(ii._=IS),this}function vl(){}function wE(y){return y=Ie(y),Fe(function(x){return sb(x,y)})}var pl=gd(er),SE=gd(h1),na=gd(n0);function Hp(y){return Th(y)?r0(ys(y)):jS(y)}function gl(y){return function(x){return y==null?B:Vl(y,x)}}var _E=Sh(),af=Sh(!0);function Pr(){return[]}function qd(){return!1}function yl(){return{}}function ME(){return""}function XS(){return!0}function Vp(y,x){if(y=Ie(y),y<1||y>qn)return[];var _=Cr,P=N(y,Cr);x=de(x),y-=Cr;for(var I=a0(P,x);++_<y;)x(_);return I}function Up(y){return Ae(y)?er(y,ys):ta(y)?[y]:zi(Q0(gn(y)))}function Yp(y){var x=++_1;return gn(y)+x}var CE=tu(function(y,x){return y+x},0),TE=Zi("ceil"),Xp=tu(function(y,x){return y/x},1),KS=Zi("floor");function ra(y){return y&&y.length?ch(y,ur,fh):B}function Kp(y,x){return y&&y.length?ch(y,de(x,2),fh):B}function OE(y){return d1(y,ur)}function AE(y,x){return d1(y,de(x,2))}function sf(y){return y&&y.length?ch(y,ur,vh):B}function of(y,x){return y&&y.length?ch(y,de(x,2),vh):B}var Qd=tu(function(y,x){return y*x},1),qp=Zi("round"),Jd=tu(function(y,x){return y-x},0);function tv(y){return y&&y.length?Wf(y,ur):0}function kE(y,x){return y&&y.length?Wf(y,de(x,2)):0}return F.after=ox,F.ary=wp,F.assign=Lx,F.assignIn=Lp,F.assignInWith=hu,F.assignWith=Ip,F.at=Ix,F.before=Gh,F.bind=Dd,F.bindAll=mE,F.bindKey=Sp,F.castArray=px,F.chain=fp,F.chunk=wb,F.compact=wo,F.concat=Nh,F.cond=nn,F.conforms=bE,F.constant=wa,F.countBy=yp,F.create=Dx,F.curry=jh,F.curryRight=$h,F.debounce=_p,F.defaults=Bx,F.defaultsDeep=Fx,F.defer=lx,F.delay=cx,F.difference=xa,F.differenceBy=Sb,F.differenceWith=Md,F.drop=wn,F.dropRight=Ha,F.dropRightWhile=ll,F.dropWhile=Cd,F.fill=J0,F.filter=Xb,F.flatMap=qb,F.flatMapDeep=Qb,F.flatMapDepth=VS,F.flatten=Lh,F.flattenDeep=_b,F.flattenDepth=np,F.flip=Mp,F.flow=xE,F.flowRight=Fn,F.fromPairs=rp,F.functions=Hx,F.functionsIn=Vx,F.groupBy=tx,F.initial=Mb,F.intersection=Cb,F.intersectionBy=Tb,F.intersectionWith=Ob,F.invert=Qh,F.invertBy=Hd,F.invokeMap=ex,F.iteratee=Yd,F.keyBy=nx,F.keys=Ar,F.keysIn=Ci,F.map=Wh,F.mapKeys=Yn,F.mapValues=Ux,F.matches=Xd,F.matchesProperty=vu,F.memoize=ec,F.merge=Yx,F.mergeWith=Jh,F.method=EE,F.methodOf=kr,F.mixin=Kd,F.negate=Hh,F.nthArg=wE,F.omit=nc,F.omitBy=Xx,F.once=Cp,F.orderBy=rr,F.over=pl,F.overArgs=ux,F.overEvery=SE,F.overSome=na,F.partial=Bd,F.partialRight=Fd,F.partition=tc,F.pick=Kx,F.pickBy=Bp,F.property=Hp,F.propertyOf=gl,F.pull=Pb,F.pullAll=sp,F.pullAllBy=Rb,F.pullAllWith=Nb,F.pullAt=Lb,F.range=_E,F.rangeRight=af,F.rearg=hx,F.reject=ou,F.remove=Ib,F.rest=fx,F.reverse=Td,F.sampleSize=Ep,F.set=bs,F.setWith=Fp,F.shuffle=rx,F.slice=HS,F.sortBy=sx,F.sortedUniq=Bb,F.sortedUniqBy=Fb,F.split=cE,F.spread=dx,F.tail=lp,F.take=Od,F.takeRight=cp,F.takeRightWhile=zb,F.takeWhile=Zb,F.tap=Bh,F.throttle=vx,F.thru=Fh,F.toArray=Xh,F.toPairs=zp,F.toPairsIn=Zp,F.toPath=Up,F.toPlainObject=cr,F.transform=tf,F.unary=Tp,F.union=Wi,F.unionBy=up,F.unionWith=Ji,F.uniq=Wb,F.uniqBy=Gb,F.uniqWith=jb,F.unset=qx,F.unzip=Dh,F.unzipWith=Ad,F.update=Qx,F.updateWith=Jx,F.values=ea,F.valuesIn=rc,F.without=kd,F.words=rf,F.wrap=zd,F.xor=Pd,F.xorBy=Rd,F.xorWith=hp,F.zip=Nd,F.zipObject=$b,F.zipObjectDeep=Hb,F.zipWith=Vb,F.entries=zp,F.entriesIn=Zp,F.extend=Lp,F.extendWith=hu,Kd(F,F),F.add=CE,F.attempt=Ud,F.camelCase=nE,F.capitalize=ic,F.ceil=TE,F.clamp=Mo,F.clone=gx,F.cloneDeep=mx,F.cloneDeepWith=bx,F.cloneWith=yx,F.conformsTo=xx,F.deburr=Co,F.defaultTo=du,F.divide=Xp,F.endsWith=ef,F.eq=Va,F.escape=Wp,F.escapeRegExp=Gp,F.every=Yb,F.find=Kb,F.findIndex=tp,F.findKey=zx,F.findLast=mp,F.findLastIndex=ep,F.findLastKey=Zx,F.floor=KS,F.forEach=Jb,F.forEachRight=Id,F.forIn=Wx,F.forInRight=Gx,F.forOwn=jx,F.forOwnRight=$x,F.get=Dp,F.gt=Ex,F.gte=wx,F.has=Kh,F.hasIn=qh,F.head=ip,F.identity=ur,F.includes=bp,F.indexOf=Gn,F.inRange=tE,F.invoke=xr,F.isArguments=hl,F.isArray=Ae,F.isArrayBuffer=US,F.isArrayLike=oi,F.isArrayLikeObject=dr,F.isBoolean=Zd,F.isBuffer=So,F.isDate=Sx,F.isElement=Op,F.isEmpty=Ap,F.isEqual=kp,F.isEqualWith=_x,F.isError=Vh,F.isFinite=Mx,F.isFunction=Ws,F.isInteger=Pp,F.isLength=Uh,F.isMap=_o,F.isMatch=Cx,F.isMatchWith=Tx,F.isNaN=ms,F.isNative=Ox,F.isNil=cu,F.isNull=Ax,F.isNumber=Wd,F.isObject=jn,F.isObjectLike=$n,F.isPlainObject=uu,F.isRegExp=Gd,F.isSafeInteger=kx,F.isSet=jd,F.isString=Yh,F.isSymbol=ta,F.isTypedArray=fl,F.isUndefined=$d,F.isWeakMap=Rp,F.isWeakSet=Px,F.join=Ab,F.kebabCase=nf,F.last=Ea,F.lastIndexOf=kb,F.lowerCase=Vd,F.lowerFirst=rE,F.lt=Rx,F.lte=Mi,F.max=ra,F.maxBy=Kp,F.mean=OE,F.meanBy=AE,F.min=sf,F.minBy=of,F.stubArray=Pr,F.stubFalse=qd,F.stubObject=yl,F.stubString=ME,F.stubTrue=XS,F.multiply=Qd,F.nth=ap,F.noConflict=pu,F.noop=vl,F.now=lu,F.pad=dl,F.padEnd=jp,F.padStart=iE,F.parseInt=aE,F.random=eE,F.reduce=Gi,F.reduceRight=ul,F.repeat=sE,F.replace=oE,F.result=De,F.round=qp,F.runInContext=et,F.sample=xp,F.size=ix,F.snakeCase=lE,F.some=ax,F.sortedIndex=cl,F.sortedIndexBy=Ih,F.sortedIndexOf=au,F.sortedLastIndex=Db,F.sortedLastIndexBy=su,F.sortedLastIndexOf=op,F.startCase=uE,F.startsWith=hE,F.subtract=Jd,F.sum=tv,F.sumBy=kE,F.template=fE,F.times=Vp,F.toFinite=Gs,F.toInteger=Ie,F.toLength=Np,F.toLower=dE,F.toNumber=ji,F.toSafeInteger=Nx,F.toString=gn,F.toUpper=vE,F.trim=Mt,F.trimEnd=pE,F.trimStart=gE,F.truncate=yE,F.unescape=$p,F.uniqueId=Yp,F.upperCase=YS,F.upperFirst=fu,F.each=Jb,F.eachRight=Id,F.first=ip,Kd(F,function(){var y={};return Za(F,function(x,_){Sn.call(F.prototype,_)||(y[_]=x)}),y}(),{chain:!1}),F.VERSION=Nt,Da(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){F[y].placeholder=F}),Da(["drop","take"],function(y,x){Ke.prototype[y]=function(_){_=_===B?1:Le(Ie(_),0);var P=this.__filtered__&&!x?new Ke(this):this.clone();return P.__filtered__?P.__takeCount__=N(_,P.__takeCount__):P.__views__.push({size:N(_,Cr),type:y+(P.__dir__<0?"Right":"")}),P},Ke.prototype[y+"Right"]=function(_){return this.reverse()[y](_).reverse()}}),Da(["filter","map","takeWhile"],function(y,x){var _=x+1,P=_==Me||_==dn;Ke.prototype[y]=function(I){var Z=this.clone();return Z.__iteratees__.push({iteratee:de(I,3),type:_}),Z.__filtered__=Z.__filtered__||P,Z}}),Da(["head","last"],function(y,x){var _="take"+(x?"Right":"");Ke.prototype[y]=function(){return this[_](1).value()[0]}}),Da(["initial","tail"],function(y,x){var _="drop"+(x?"":"Right");Ke.prototype[y]=function(){return this.__filtered__?new Ke(this):this[_](1)}}),Ke.prototype.compact=function(){return this.filter(ur)},Ke.prototype.find=function(y){return this.filter(y).head()},Ke.prototype.findLast=function(y){return this.reverse().find(y)},Ke.prototype.invokeMap=Fe(function(y,x){return typeof y=="function"?new Ke(this):this.map(function(_){return Ul(_,y,x)})}),Ke.prototype.reject=function(y){return this.filter(Hh(de(y)))},Ke.prototype.slice=function(y,x){y=Ie(y);var _=this;return _.__filtered__&&(y>0||x<0)?new Ke(_):(y<0?_=_.takeRight(-y):y&&(_=_.drop(y)),x!==B&&(x=Ie(x),_=x<0?_.dropRight(-x):_.take(x-y)),_)},Ke.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},Ke.prototype.toArray=function(){return this.take(Cr)},Za(Ke.prototype,function(y,x){var _=/^(?:filter|find|map|reject)|While$/.test(x),P=/^(?:head|last)$/.test(x),I=F[P?"take"+(x=="last"?"Right":""):x],Z=P||/^find/.test(x);I&&(F.prototype[x]=function(){var U=this.__wrapped__,Q=P?[1]:arguments,nt=U instanceof Ke,wt=Q[0],St=nt||Ae(U),At=function(ze){var Ye=I.apply(F,Uo([ze],Q));return P&&Ht?Ye[0]:Ye};St&&_&&typeof wt=="function"&&wt.length!=1&&(nt=St=!1);var Ht=this.__chain__,ie=!!this.__actions__.length,ue=Z&&!Ht,Pe=nt&&!ie;if(!Z&&St){U=Pe?U:new Ke(this);var ye=y.apply(U,Q);return ye.__actions__.push({func:Fh,args:[At],thisArg:B}),new pa(ye,Ht)}return ue&&Pe?y.apply(this,Q):(ye=this.thru(At),ue?P?ye.value()[0]:ye.value():ye)})}),Da(["pop","push","shift","sort","splice","unshift"],function(y){var x=Hf[y],_=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",P=/^(?:pop|shift)$/.test(y);F.prototype[y]=function(){var I=arguments;if(P&&!this.__chain__){var Z=this.value();return x.apply(Ae(Z)?Z:[],I)}return this[_](function(U){return x.apply(Ae(U)?U:[],I)})}}),Za(Ke.prototype,function(y,x){var _=F[x];if(_){var P=_.name+"";Sn.call(Bs,P)||(Bs[P]=[]),Bs[P].push({name:x,func:_})}}),Bs[mo(B,Ft).name]=[{name:"wrapper",func:B}],Ke.prototype.clone=I1,Ke.prototype.reverse=d0,Ke.prototype.value=D1,F.prototype.at=zh,F.prototype.chain=dp,F.prototype.commit=vp,F.prototype.next=pp,F.prototype.plant=gp,F.prototype.reverse=Zh,F.prototype.toJSON=F.prototype.valueOf=F.prototype.value=Ld,F.prototype.first=F.prototype.head,nh&&(F.prototype[nh]=Ub),F},th=S1();ii._=th,vt=function(){return th}.call(Vt,K,Vt,Se),vt!==B&&(Se.exports=vt)}).call(this)},86851:function(Se,Vt,K){"use strict";var vt=K(89594),B=Array.prototype.concat,Nt=Array.prototype.slice,Rt=Se.exports=function(H){for(var j=[],J=0,$=H.length;J<$;J++){var X=H[J];vt(X)?j=B.call(j,Nt.call(X)):j.push(X)}return j};Rt.wrap=function(gt){return function(){return gt(Rt(arguments))}}},89594:function(Se){Se.exports=function(K){return!K||typeof K=="string"?!1:K instanceof Array||Array.isArray(K)||K.length>=0&&(K.splice instanceof Function||Object.getOwnPropertyDescriptor(K,K.length-1)&&K.constructor.name!=="String")}},97582:function(Se,Vt,K){"use strict";K.d(Vt,{CR:function(){return Ft},Q_:function(){return Me},XA:function(){return Dt},ZT:function(){return B},_T:function(){return Rt},ev:function(){return Ge},mG:function(){return ct},pi:function(){return Nt},pr:function(){return Yt}});var vt=function(ot,ut){return vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,ht){dt.__proto__=ht}||function(dt,ht){for(var Tt in ht)Object.prototype.hasOwnProperty.call(ht,Tt)&&(dt[Tt]=ht[Tt])},vt(ot,ut)};function B(ot,ut){if(typeof ut!="function"&&ut!==null)throw new TypeError("Class extends value "+String(ut)+" is not a constructor or null");vt(ot,ut);function dt(){this.constructor=ot}ot.prototype=ut===null?Object.create(ut):(dt.prototype=ut.prototype,new dt)}var Nt=function(){return Nt=Object.assign||function(ut){for(var dt,ht=1,Tt=arguments.length;ht<Tt;ht++){dt=arguments[ht];for(var _t in dt)Object.prototype.hasOwnProperty.call(dt,_t)&&(ut[_t]=dt[_t])}return ut},Nt.apply(this,arguments)};function Rt(ot,ut){var dt={};for(var ht in ot)Object.prototype.hasOwnProperty.call(ot,ht)&&ut.indexOf(ht)<0&&(dt[ht]=ot[ht]);if(ot!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Tt=0,ht=Object.getOwnPropertySymbols(ot);Tt<ht.length;Tt++)ut.indexOf(ht[Tt])<0&&Object.prototype.propertyIsEnumerable.call(ot,ht[Tt])&&(dt[ht[Tt]]=ot[ht[Tt]]);return dt}function gt(ot,ut,dt,ht){var Tt=arguments.length,_t=Tt<3?ut:ht===null?ht=Object.getOwnPropertyDescriptor(ut,dt):ht,$t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_t=Reflect.decorate(ot,ut,dt,ht);else for(var _e=ot.length-1;_e>=0;_e--)($t=ot[_e])&&(_t=(Tt<3?$t(_t):Tt>3?$t(ut,dt,_t):$t(ut,dt))||_t);return Tt>3&&_t&&Object.defineProperty(ut,dt,_t),_t}function H(ot,ut){return function(dt,ht){ut(dt,ht,ot)}}function j(ot,ut,dt,ht,Tt,_t){function $t(ua){if(ua!==void 0&&typeof ua!="function")throw new TypeError("Function expected");return ua}for(var _e=ht.kind,An=_e==="getter"?"get":_e==="setter"?"set":"value",he=!ut&&ot?ht.static?ot:ot.prototype:null,on=ut||(he?Object.getOwnPropertyDescriptor(he,ht.name):{}),lr,Ve=!1,Ee=dt.length-1;Ee>=0;Ee--){var Wn={};for(var Vn in ht)Wn[Vn]=Vn==="access"?{}:ht[Vn];for(var Vn in ht.access)Wn.access[Vn]=ht.access[Vn];Wn.addInitializer=function(ua){if(Ve)throw new TypeError("Cannot add initializers after decoration has completed");_t.push($t(ua||null))};var vi=(0,dt[Ee])(_e==="accessor"?{get:on.get,set:on.set}:on[An],Wn);if(_e==="accessor"){if(vi===void 0)continue;if(vi===null||typeof vi!="object")throw new TypeError("Object expected");(lr=$t(vi.get))&&(on.get=lr),(lr=$t(vi.set))&&(on.set=lr),(lr=$t(vi.init))&&Tt.unshift(lr)}else(lr=$t(vi))&&(_e==="field"?Tt.unshift(lr):on[An]=lr)}he&&Object.defineProperty(he,ht.name,on),Ve=!0}function J(ot,ut,dt){for(var ht=arguments.length>2,Tt=0;Tt<ut.length;Tt++)dt=ht?ut[Tt].call(ot,dt):ut[Tt].call(ot);return ht?dt:void 0}function $(ot){return typeof ot=="symbol"?ot:"".concat(ot)}function X(ot,ut,dt){return typeof ut=="symbol"&&(ut=ut.description?"[".concat(ut.description,"]"):""),Object.defineProperty(ot,"name",{configurable:!0,value:dt?"".concat(dt," ",ut):ut})}function V(ot,ut){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ot,ut)}function ct(ot,ut,dt,ht){function Tt(_t){return _t instanceof dt?_t:new dt(function($t){$t(_t)})}return new(dt||(dt=Promise))(function(_t,$t){function _e(on){try{he(ht.next(on))}catch(lr){$t(lr)}}function An(on){try{he(ht.throw(on))}catch(lr){$t(lr)}}function he(on){on.done?_t(on.value):Tt(on.value).then(_e,An)}he((ht=ht.apply(ot,ut||[])).next())})}function Ct(ot,ut){var dt={label:0,sent:function(){if(_t[0]&1)throw _t[1];return _t[1]},trys:[],ops:[]},ht,Tt,_t,$t=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return $t.next=_e(0),$t.throw=_e(1),$t.return=_e(2),typeof Symbol=="function"&&($t[Symbol.iterator]=function(){return this}),$t;function _e(he){return function(on){return An([he,on])}}function An(he){if(ht)throw new TypeError("Generator is already executing.");for(;$t&&($t=0,he[0]&&(dt=0)),dt;)try{if(ht=1,Tt&&(_t=he[0]&2?Tt.return:he[0]?Tt.throw||((_t=Tt.return)&&_t.call(Tt),0):Tt.next)&&!(_t=_t.call(Tt,he[1])).done)return _t;switch(Tt=0,_t&&(he=[he[0]&2,_t.value]),he[0]){case 0:case 1:_t=he;break;case 4:return dt.label++,{value:he[1],done:!1};case 5:dt.label++,Tt=he[1],he=[0];continue;case 7:he=dt.ops.pop(),dt.trys.pop();continue;default:if(_t=dt.trys,!(_t=_t.length>0&&_t[_t.length-1])&&(he[0]===6||he[0]===2)){dt=0;continue}if(he[0]===3&&(!_t||he[1]>_t[0]&&he[1]<_t[3])){dt.label=he[1];break}if(he[0]===6&&dt.label<_t[1]){dt.label=_t[1],_t=he;break}if(_t&&dt.label<_t[2]){dt.label=_t[2],dt.ops.push(he);break}_t[2]&&dt.ops.pop(),dt.trys.pop();continue}he=ut.call(ot,dt)}catch(on){he=[6,on],Tt=0}finally{ht=_t=0}if(he[0]&5)throw he[1];return{value:he[0]?he[1]:void 0,done:!0}}}var it=Object.create?function(ot,ut,dt,ht){ht===void 0&&(ht=dt);var Tt=Object.getOwnPropertyDescriptor(ut,dt);(!Tt||("get"in Tt?!ut.__esModule:Tt.writable||Tt.configurable))&&(Tt={enumerable:!0,get:function(){return ut[dt]}}),Object.defineProperty(ot,ht,Tt)}:function(ot,ut,dt,ht){ht===void 0&&(ht=dt),ot[ht]=ut[dt]};function Ot(ot,ut){for(var dt in ot)dt!=="default"&&!Object.prototype.hasOwnProperty.call(ut,dt)&&it(ut,ot,dt)}function Dt(ot){var ut=typeof Symbol=="function"&&Symbol.iterator,dt=ut&&ot[ut],ht=0;if(dt)return dt.call(ot);if(ot&&typeof ot.length=="number")return{next:function(){return ot&&ht>=ot.length&&(ot=void 0),{value:ot&&ot[ht++],done:!ot}}};throw new TypeError(ut?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ft(ot,ut){var dt=typeof Symbol=="function"&&ot[Symbol.iterator];if(!dt)return ot;var ht=dt.call(ot),Tt,_t=[],$t;try{for(;(ut===void 0||ut-- >0)&&!(Tt=ht.next()).done;)_t.push(Tt.value)}catch(_e){$t={error:_e}}finally{try{Tt&&!Tt.done&&(dt=ht.return)&&dt.call(ht)}finally{if($t)throw $t.error}}return _t}function me(){for(var ot=[],ut=0;ut<arguments.length;ut++)ot=ot.concat(Ft(arguments[ut]));return ot}function Yt(){for(var ot=0,ut=0,dt=arguments.length;ut<dt;ut++)ot+=arguments[ut].length;for(var ht=Array(ot),Tt=0,ut=0;ut<dt;ut++)for(var _t=arguments[ut],$t=0,_e=_t.length;$t<_e;$t++,Tt++)ht[Tt]=_t[$t];return ht}function Ge(ot,ut,dt){if(dt||arguments.length===2)for(var ht=0,Tt=ut.length,_t;ht<Tt;ht++)(_t||!(ht in ut))&&(_t||(_t=Array.prototype.slice.call(ut,0,ht)),_t[ht]=ut[ht]);return ot.concat(_t||Array.prototype.slice.call(ut))}function Xt(ot){return this instanceof Xt?(this.v=ot,this):new Xt(ot)}function On(ot,ut,dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ht=dt.apply(ot,ut||[]),Tt,_t=[];return Tt=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),_e("next"),_e("throw"),_e("return",$t),Tt[Symbol.asyncIterator]=function(){return this},Tt;function $t(Ee){return function(Wn){return Promise.resolve(Wn).then(Ee,lr)}}function _e(Ee,Wn){ht[Ee]&&(Tt[Ee]=function(Vn){return new Promise(function(vi,ua){_t.push([Ee,Vn,vi,ua])>1||An(Ee,Vn)})},Wn&&(Tt[Ee]=Wn(Tt[Ee])))}function An(Ee,Wn){try{he(ht[Ee](Wn))}catch(Vn){Ve(_t[0][3],Vn)}}function he(Ee){Ee.value instanceof Xt?Promise.resolve(Ee.value.v).then(on,lr):Ve(_t[0][2],Ee)}function on(Ee){An("next",Ee)}function lr(Ee){An("throw",Ee)}function Ve(Ee,Wn){Ee(Wn),_t.shift(),_t.length&&An(_t[0][0],_t[0][1])}}function rn(ot){var ut,dt;return ut={},ht("next"),ht("throw",function(Tt){throw Tt}),ht("return"),ut[Symbol.iterator]=function(){return this},ut;function ht(Tt,_t){ut[Tt]=ot[Tt]?function($t){return(dt=!dt)?{value:Xt(ot[Tt]($t)),done:!1}:_t?_t($t):$t}:_t}}function pe(ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut=ot[Symbol.asyncIterator],dt;return ut?ut.call(ot):(ot=typeof Dt=="function"?Dt(ot):ot[Symbol.iterator](),dt={},ht("next"),ht("throw"),ht("return"),dt[Symbol.asyncIterator]=function(){return this},dt);function ht(_t){dt[_t]=ot[_t]&&function($t){return new Promise(function(_e,An){$t=ot[_t]($t),Tt(_e,An,$t.done,$t.value)})}}function Tt(_t,$t,_e,An){Promise.resolve(An).then(function(he){_t({value:he,done:_e})},$t)}}function bt(ot,ut){return Object.defineProperty?Object.defineProperty(ot,"raw",{value:ut}):ot.raw=ut,ot}var Ut=Object.create?function(ot,ut){Object.defineProperty(ot,"default",{enumerable:!0,value:ut})}:function(ot,ut){ot.default=ut},oe=function(ot){return oe=Object.getOwnPropertyNames||function(ut){var dt=[];for(var ht in ut)Object.prototype.hasOwnProperty.call(ut,ht)&&(dt[dt.length]=ht);return dt},oe(ot)};function zt(ot){if(ot&&ot.__esModule)return ot;var ut={};if(ot!=null)for(var dt=oe(ot),ht=0;ht<dt.length;ht++)dt[ht]!=="default"&&it(ut,ot,dt[ht]);return Ut(ut,ot),ut}function ce(ot){return ot&&ot.__esModule?ot:{default:ot}}function Me(ot,ut,dt,ht){if(dt==="a"&&!ht)throw new TypeError("Private accessor was defined without a getter");if(typeof ut=="function"?ot!==ut||!ht:!ut.has(ot))throw new TypeError("Cannot read private member from an object whose class did not declare it");return dt==="m"?ht:dt==="a"?ht.call(ot):ht?ht.value:ut.get(ot)}function Ne(ot,ut,dt,ht,Tt){if(ht==="m")throw new TypeError("Private method is not writable");if(ht==="a"&&!Tt)throw new TypeError("Private accessor was defined without a setter");if(typeof ut=="function"?ot!==ut||!Tt:!ut.has(ot))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ht==="a"?Tt.call(ot,dt):Tt?Tt.value=dt:ut.set(ot,dt),dt}function dn(ot,ut){if(ut===null||typeof ut!="object"&&typeof ut!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof ot=="function"?ut===ot:ot.has(ut)}function or(ot,ut,dt){if(ut!=null){if(typeof ut!="object"&&typeof ut!="function")throw new TypeError("Object expected.");var ht,Tt;if(dt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");ht=ut[Symbol.asyncDispose]}if(ht===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");ht=ut[Symbol.dispose],dt&&(Tt=ht)}if(typeof ht!="function")throw new TypeError("Object not disposable.");Tt&&(ht=function(){try{Tt.call(this)}catch(_t){return Promise.reject(_t)}}),ot.stack.push({value:ut,dispose:ht,async:dt})}else dt&&ot.stack.push({async:!0});return ut}var qn=typeof SuppressedError=="function"?SuppressedError:function(ot,ut,dt){var ht=new Error(dt);return ht.name="SuppressedError",ht.error=ot,ht.suppressed=ut,ht};function Li(ot){function ut(_t){ot.error=ot.hasError?new qn(_t,ot.error,"An error was suppressed during disposal."):_t,ot.hasError=!0}var dt,ht=0;function Tt(){for(;dt=ot.stack.pop();)try{if(!dt.async&&ht===1)return ht=0,ot.stack.push(dt),Promise.resolve().then(Tt);if(dt.dispose){var _t=dt.dispose.call(dt.value);if(dt.async)return ht|=2,Promise.resolve(_t).then(Tt,function($t){return ut($t),Tt()})}else ht|=1}catch($t){ut($t)}if(ht===1)return ot.hasError?Promise.reject(ot.error):Promise.resolve();if(ot.hasError)throw ot.error}return Tt()}function hr(ot,ut){return typeof ot=="string"&&/^\.\.?\//.test(ot)?ot.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(dt,ht,Tt,_t,$t){return ht?ut?".jsx":".js":Tt&&(!_t||!$t)?dt:Tt+_t+"."+$t.toLowerCase()+"js"}):ot}var Cr={__extends:B,__assign:Nt,__rest:Rt,__decorate:gt,__param:H,__esDecorate:j,__runInitializers:J,__propKey:$,__setFunctionName:X,__metadata:V,__awaiter:ct,__generator:Ct,__createBinding:it,__exportStar:Ot,__values:Dt,__read:Ft,__spread:me,__spreadArrays:Yt,__spreadArray:Ge,__await:Xt,__asyncGenerator:On,__asyncDelegator:rn,__asyncValues:pe,__makeTemplateObject:bt,__importStar:zt,__importDefault:ce,__classPrivateFieldGet:Me,__classPrivateFieldSet:Ne,__classPrivateFieldIn:dn,__addDisposableResource:or,__disposeResources:Li,__rewriteRelativeImportExtension:hr}}}]);
}());