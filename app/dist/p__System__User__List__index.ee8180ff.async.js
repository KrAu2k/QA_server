"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[786],{82692:function(Y,b,a){a.r(b),a.d(b,{default:function(){return q}});var U=a(15009),l=a.n(U),B=a(99289),g=a.n(B),x=a(5574),O=a.n(x),E=a(99611),D=a(86548),T=a(48689),z=a(87462),w=a(67294),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},A=$,F=a(84089),I=function(Z,K){return w.createElement(F.Z,(0,z.Z)({},Z,{ref:K,icon:A}))},M=w.forwardRef(I),P=M,W=a(24969),R=a(90930),L=a(66854),y=a(2453),N=a(68997),C=a(66309),G=a(72269),j=a(78957),s=a(83622),c=a(85418),v=a(32983),t=a(86738),f=a(45618),k=a(96287),n=a(85893),_=function(){var Z=(0,w.useRef)(),K=(0,w.useState)(new Set),Q=O()(K,2),ne=Q[0],V=Q[1],H=function(){var p=g()(l()().mark(function r(e){var u,i;return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,h.next=3,(0,k.h8)(e);case 3:u=h.sent,u.success?(y.ZP.success("\u5220\u9664\u6210\u529F"),(i=Z.current)===null||i===void 0||i.reload()):y.ZP.error("\u5220\u9664\u5931\u8D25"),h.next=10;break;case 7:h.prev=7,h.t0=h.catch(0),y.ZP.error("\u5220\u9664\u5931\u8D25");case 10:case"end":return h.stop()}},r,null,[[0,7]])}));return function(e){return p.apply(this,arguments)}}(),re=function(){var p=g()(l()().mark(function r(e,u){var i,d,h;return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,V(function(S){return new Set(S).add(e)}),i=!u,o.next=5,(0,k.VC)(e,i);case 5:d=o.sent,d.success?(y.ZP.success(i?"\u7528\u6237\u5DF2\u542F\u7528":"\u7528\u6237\u5DF2\u7981\u7528"),(h=Z.current)===null||h===void 0||h.reload()):y.ZP.error("\u72B6\u6001\u66F4\u65B0\u5931\u8D25"),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),y.ZP.error("\u72B6\u6001\u66F4\u65B0\u5931\u8D25");case 12:return o.prev=12,V(function(S){var X=new Set(S);return X.delete(e),X}),o.finish(12);case 15:case"end":return o.stop()}},r,null,[[0,9,12,15]])}));return function(e,u){return p.apply(this,arguments)}}(),se=function(r){return[{key:"view",label:"\u67E5\u770B\u8BE6\u60C5",icon:(0,n.jsx)(E.Z,{}),onClick:function(){return f.history.push("/system/user/detail/".concat(r.id))}},{key:"edit",label:"\u7F16\u8F91",icon:(0,n.jsx)(D.Z,{}),onClick:function(){return f.history.push("/system/user/edit/".concat(r.id))}},{type:"divider"},{key:"delete",label:"\u5220\u9664",icon:(0,n.jsx)(T.Z,{}),danger:!0,onClick:function(){window.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u7528\u6237\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\u3002")&&H(r.id)}}]},J=function(){var p=g()(l()().mark(function r(e,u){var i,d,h;return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,i=e.map(function(S){return S.id}),o.next=4,(0,k.Wf)(i,u);case 4:d=o.sent,d.success?(y.ZP.success("\u6279\u91CF".concat(u?"\u542F\u7528":"\u7981\u7528","\u6210\u529F")),(h=Z.current)===null||h===void 0||h.reload()):y.ZP.error("\u6279\u91CF".concat(u?"\u542F\u7528":"\u7981\u7528","\u5931\u8D25")),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),y.ZP.error("\u6279\u91CF".concat(u?"\u542F\u7528":"\u7981\u7528","\u5931\u8D25"));case 11:case"end":return o.stop()}},r,null,[[0,8]])}));return function(e,u){return p.apply(this,arguments)}}(),te=[{title:"\u7528\u6237\u4FE1\u606F",dataIndex:"userInfo",key:"userInfo",width:200,fixed:"left",hideInSearch:!0,render:function(r,e){var u,i;return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px",borderRadius:"6px",transition:"background-color 0.2s"},children:[(0,n.jsx)(N.Z,{src:e.avatar,size:40,children:((u=e.name)===null||u===void 0?void 0:u.charAt(0))||((i=e.username)===null||i===void 0?void 0:i.charAt(0))}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsx)("div",{style:{fontWeight:500,marginBottom:2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#262626"},children:e.name||e.username}),(0,n.jsxs)("div",{style:{fontSize:12,color:"#666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["@",e.username]})]})]})}},{title:"\u7528\u6237\u540D",dataIndex:"username",key:"username",hideInTable:!0,order:4},{title:"\u59D3\u540D",dataIndex:"name",key:"name",hideInTable:!0,order:3},{title:"\u90AE\u7BB1",dataIndex:"email",key:"email",hideInTable:!0,order:2},{title:"\u5458\u5DE5\u7F16\u53F7",dataIndex:"employeeNo",key:"employeeNo",width:100,ellipsis:!0,responsive:["lg"],hideInSearch:!0,render:function(r){return(0,n.jsx)("span",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"12px",color:"#666",backgroundColor:"#f5f5f5",padding:"2px 6px",borderRadius:"4px"},children:r})}},{title:"\u624B\u673A\u53F7",dataIndex:"phone",key:"phone",hideInTable:!0,hideInSearch:!1,order:1},{title:"\u90E8\u95E8",dataIndex:"departmentName",key:"departmentName",hideInTable:!0,hideInSearch:!1},{title:"\u804C\u4F4D\u90E8\u95E8",dataIndex:"jobInfo",key:"jobInfo",width:140,hideInSearch:!0,responsive:["xl"],render:function(r,e){return(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[e.position&&(0,n.jsx)("div",{style:{marginBottom:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:500,color:"#262626"},children:e.position}),e.departmentName&&(0,n.jsx)("div",{style:{fontSize:12,color:"#666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.departmentName}),!e.position&&!e.departmentName&&(0,n.jsx)("div",{style:{fontSize:12,color:"#ccc",fontStyle:"italic"},children:"\u672A\u5206\u914D"})]})}},{title:"\u8D26\u6237\u72B6\u6001",dataIndex:"isActive",key:"isActiveSearch",hideInTable:!0,valueType:"select",valueEnum:{true:{text:"\u542F\u7528",status:"Success"},false:{text:"\u7981\u7528",status:"Error"}},fieldProps:{placeholder:"\u8BF7\u9009\u62E9\u8D26\u6237\u72B6\u6001"}},{title:"\u6807\u7B7E",dataIndex:"tags",hideInSearch:!0,width:120,responsive:["lg"],render:function(r,e){var u,i,d,h,m;return(0,n.jsxs)("div",{style:{maxHeight:60,overflow:"hidden"},children:[(u=e.tags)===null||u===void 0?void 0:u.slice(0,2).map(function(o,S){return(0,n.jsx)(C.Z,{color:S===0?"blue":"green",style:{marginBottom:4,fontSize:"11px"},children:o},o)}),((i=(d=e.tags)===null||d===void 0?void 0:d.length)!==null&&i!==void 0?i:0)>2&&(0,n.jsxs)(C.Z,{color:"default",style:{fontSize:"11px",backgroundColor:"#f0f0f0"},children:["+",((h=(m=e.tags)===null||m===void 0?void 0:m.length)!==null&&h!==void 0?h:0)-2]})]})}},{title:"\u6743\u9650",dataIndex:"isAdmin",hideInSearch:!0,width:80,render:function(r,e){return(0,n.jsx)("div",{style:{textAlign:"center"},children:e.isAdmin?(0,n.jsx)(C.Z,{color:"red",style:{fontSize:"11px"},children:"\u7BA1\u7406\u5458"}):(0,n.jsx)(C.Z,{color:"default",style:{fontSize:"11px"},children:"\u666E\u901A\u7528\u6237"})})}},{title:"\u72B6\u6001",dataIndex:"isActive",hideInSearch:!0,width:90,fixed:"right",render:function(r,e){return(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 0"},onClick:function(i){return i.stopPropagation()},children:(0,n.jsx)(G.Z,{checked:e.isActive,loading:ne.has(e.id),onChange:function(){var i;return re(e.id,(i=e.isActive)!==null&&i!==void 0?i:!0)},checkedChildren:"\u542F\u7528",unCheckedChildren:"\u7981\u7528",size:"small"})})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createdAt",hideInSearch:!0,width:120,valueType:"dateTime",responsive:["xl"],render:function(r){return(0,n.jsx)("span",{style:{fontSize:"12px",color:"#666"},children:r})}},{title:"\u64CD\u4F5C",valueType:"option",width:120,fixed:"right",align:"center",render:function(r,e){var u=[{key:"edit",label:"\u7F16\u8F91",icon:(0,n.jsx)(D.Z,{}),onClick:function(){return f.history.push("/system/user/edit/".concat(e.id))}},{type:"divider"},{key:"delete",label:"\u5220\u9664",icon:(0,n.jsx)(T.Z,{}),danger:!0,onClick:function(){window.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u7528\u6237\u5417\uFF1F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u6062\u590D\u3002")&&H(e.id)}}];return(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(s.ZP,{size:"small",type:"primary",icon:(0,n.jsx)(E.Z,{}),onClick:function(){return f.history.push("/system/user/detail/".concat(e.id))},children:"\u67E5\u770B"}),(0,n.jsx)(c.Z,{menu:{items:u},trigger:["click"],children:(0,n.jsx)(s.ZP,{size:"small",icon:(0,n.jsx)(P,{})})})]})}}];return(0,n.jsx)(R._z,{children:(0,n.jsx)(L.Z,{headerTitle:(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:"16px",fontWeight:600},children:"\u{1F465} \u7528\u6237\u7BA1\u7406"}),actionRef:Z,rowKey:"id",search:{labelWidth:"auto",collapsed:!1,collapseRender:function(r){return(0,n.jsx)("span",{style:{color:"#1890ff",fontWeight:500},children:r?"\u5C55\u5F00\u641C\u7D22":"\u6536\u8D77\u641C\u7D22"})},searchText:"\u641C\u7D22",resetText:"\u91CD\u7F6E",optionRender:function(r,e){var u=r.searchText,i=r.resetText,d=e.form;return[(0,n.jsx)(s.ZP,{type:"primary",onClick:function(){d==null||d.submit()},children:u},"search"),(0,n.jsx)(s.ZP,{onClick:function(){d==null||d.resetFields(),d==null||d.submit()},children:i},"reset")]},span:{xs:24,sm:12,md:8,lg:6,xl:6,xxl:4}},toolBarRender:function(){return[(0,n.jsx)(s.ZP,{type:"primary",icon:(0,n.jsx)(W.Z,{}),onClick:function(){return f.history.push("/system/user/create")},children:"\u65B0\u5EFA\u7528\u6237"},"primary")]},request:function(){var p=g()(l()().mark(function r(e,u,i){var d;return l()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,(0,k.lE)({current:String(e.current||1),pageSize:String(e.pageSize||10),name:e.name,username:e.username,email:e.email,employeeNo:e.employeeNo,phone:e.phone,group:e.group,title:e.title,isActive:e.isActive});case 3:return d=m.sent,m.abrupt("return",{data:d.data||[],success:d.success,total:d.total||0});case 7:return m.prev=7,m.t0=m.catch(0),m.abrupt("return",{data:[],success:!1,total:0});case 10:case"end":return m.stop()}},r,null,[[0,7]])}));return function(r,e,u){return p.apply(this,arguments)}}(),columns:te,scroll:{x:1200},style:{backgroundColor:"#fff"},locale:{emptyText:(0,n.jsx)(v.Z,{image:v.Z.PRESENTED_IMAGE_SIMPLE,description:(0,n.jsxs)("div",{style:{marginTop:16},children:[(0,n.jsx)("div",{style:{marginBottom:8,color:"#999",fontSize:"14px"},children:"\u6682\u65E0\u7528\u6237\u6570\u636E"}),(0,n.jsx)("div",{style:{fontSize:12,color:"#ccc",marginBottom:16},children:'\u70B9\u51FB"\u65B0\u5EFA\u7528\u6237"\u6309\u94AE\u5F00\u59CB\u521B\u5EFA\u7B2C\u4E00\u4E2A\u7528\u6237'}),(0,n.jsx)(s.ZP,{type:"primary",icon:(0,n.jsx)(W.Z,{}),onClick:function(){return f.history.push("/system/user/create")},children:"\u65B0\u5EFA\u7528\u6237"})]})})},rowSelection:{onChange:function(r,e){}},pagination:{defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(r,e){return(0,n.jsxs)("span",{style:{color:"#666",fontSize:"13px"},children:["\u7B2C ",(0,n.jsxs)("span",{style:{fontWeight:600,color:"#1890ff"},children:[e[0],"-",e[1]]})," \u6761 / \u603B\u5171 ",(0,n.jsx)("span",{style:{fontWeight:600,color:"#1890ff"},children:r})," \u6761"]})}},tableAlertRender:function(r){var e=r.selectedRowKeys,u=r.selectedRows,i=r.onCleanSelected;return(0,n.jsx)("div",{style:{backgroundColor:"#f0f8ff",border:"1px solid #bae7ff",borderRadius:"6px",padding:"12px 16px",marginBottom:16},children:(0,n.jsx)(j.Z,{size:24,children:(0,n.jsxs)("span",{style:{color:"#1890ff",fontWeight:500},children:["\u5DF2\u9009\u62E9 ",(0,n.jsx)("a",{style:{fontWeight:600,color:"#1890ff"},children:e.length})," \u9879",(0,n.jsx)("a",{style:{marginInlineStart:8,color:"#1890ff",textDecoration:"underline",cursor:"pointer"},onClick:i,children:"\u53D6\u6D88\u9009\u62E9"})]})})})},tableAlertOptionRender:function(r){var e=r.selectedRows,u=r.onCleanSelected;return(0,n.jsxs)(j.Z,{size:16,children:[(0,n.jsx)(t.Z,{title:"\u786E\u5B9A\u8981\u6279\u91CF\u542F\u7528\u9009\u4E2D\u7684\u7528\u6237\u5417\uFF1F",onConfirm:function(){J(e,!0),u()},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,n.jsx)(s.ZP,{size:"small",type:"primary",children:"\u6279\u91CF\u542F\u7528"})}),(0,n.jsx)(t.Z,{title:"\u786E\u5B9A\u8981\u6279\u91CF\u7981\u7528\u9009\u4E2D\u7684\u7528\u6237\u5417\uFF1F",onConfirm:function(){J(e,!1),u()},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,n.jsx)(s.ZP,{size:"small",danger:!0,children:"\u6279\u91CF\u7981\u7528"})})]})}})})},q=_},96287:function(Y,b,a){a.d(b,{Cp:function(){return N},Nq:function(){return $},VC:function(){return M},VR:function(){return G},Wf:function(){return L},h8:function(){return F},lE:function(){return O},nE:function(){return D},r4:function(){return z}});var U=a(15009),l=a.n(U),B=a(99289),g=a.n(B),x=a(45618);function O(s){return E.apply(this,arguments)}function E(){return E=g()(l()().mark(function s(c){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.request)("/api/users",{method:"GET",params:c}));case 1:case"end":return t.stop()}},s)})),E.apply(this,arguments)}function D(s){return T.apply(this,arguments)}function T(){return T=g()(l()().mark(function s(c){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.request)("/api/users/".concat(c),{method:"GET"}));case 1:case"end":return t.stop()}},s)})),T.apply(this,arguments)}function z(s){return w.apply(this,arguments)}function w(){return w=g()(l()().mark(function s(c){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.request)("/api/users",{method:"POST",data:c}));case 1:case"end":return t.stop()}},s)})),w.apply(this,arguments)}function $(s){return A.apply(this,arguments)}function A(){return A=g()(l()().mark(function s(c){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.request)("/api/users/".concat(c.id),{method:"PUT",data:c}));case 1:case"end":return t.stop()}},s)})),A.apply(this,arguments)}function F(s){return I.apply(this,arguments)}function I(){return I=g()(l()().mark(function s(c){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.request)("/api/users/".concat(c),{method:"DELETE"}));case 1:case"end":return t.stop()}},s)})),I.apply(this,arguments)}function M(s,c){return P.apply(this,arguments)}function P(){return P=g()(l()().mark(function s(c,v){return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,x.request)("/api/users/".concat(c,"/toggle-status"),{method:"PUT",data:{isActive:v}}));case 1:case"end":return f.stop()}},s)})),P.apply(this,arguments)}function W(s){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function s(c){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/users/batch-delete",{method:"POST",data:{ids:c}}));case 1:case"end":return t.stop()}},s)})),R.apply(this,arguments)}function L(s,c){return y.apply(this,arguments)}function y(){return y=g()(l()().mark(function s(c,v){return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,x.request)("/api/users/batch-toggle-status",{method:"PUT",data:{ids:c,isActive:v}}));case 1:case"end":return f.stop()}},s)})),y.apply(this,arguments)}function N(s){return C.apply(this,arguments)}function C(){return C=g()(l()().mark(function s(c){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,x.request)("/api/users/change-password",{method:"PUT",data:c}));case 1:case"end":return t.stop()}},s)})),C.apply(this,arguments)}function G(s,c){return j.apply(this,arguments)}function j(){return j=g()(l()().mark(function s(c,v){return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,x.request)("/api/users/".concat(c,"/reset-password"),{method:"PUT",data:v}));case 1:case"end":return f.stop()}},s)})),j.apply(this,arguments)}}}]);
