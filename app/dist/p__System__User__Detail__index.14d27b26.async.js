"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[313],{19467:function(H,R,n){n.r(R);var S=n(19632),s=n.n(S),U=n(82826),p=n(86548),_=n(8751),W=n(33862),v=n(20841),b=n(60198),D=n(3253),I=n(11475),y=n(10524),T=n(90930),j=n(2453),P=n(83622),O=n(74330),B=n(4393),E=n(78957),F=n(68997),A=n(92398),L=n(71230),f=n(15746),i=n(66309),d=n(53531),o=n(96074),u=n(12845),t=n(69499),l=n(83062),c=n(45618),r=n(96287),h=n(42551),V=n(27484),w=n.n(V),e=n(85893),J=function(){var z,$,G,Y,X=(0,c.useParams)(),K=X.id,Q=(0,c.useRequest)(function(){return(0,r.nE)(K)},{ready:!!K,onError:function(g){console.error("\u7528\u6237\u8BE6\u60C5\u8BF7\u6C42\u9519\u8BEF:",g),j.ZP.error("\u83B7\u53D6\u7528\u6237\u8BE6\u60C5\u5931\u8D25")}}),M=Q.data,k=Q.loading,q=Q.error,N=(0,c.useRequest)(function(){return(0,h.CT)(K,20)},{ready:!!K,onError:function(g){console.error("\u83B7\u53D6\u7528\u6237\u767B\u5F55\u65E5\u5FD7\u5931\u8D25:",g)}}),x=N.data,ee=N.loading,a;M&&(M!=null&&M.data?a=M.data:M!=null&&M.id&&(a=M));var C=function(){return x?(console.log("\u767B\u5F55\u65E5\u5FD7\u539F\u59CB\u6570\u636E:",x),x!=null&&x.data?(console.log("\u4F7F\u7528\u5305\u88C5\u683C\u5F0F\u6570\u636E:",x.data),x.data):Array.isArray(x)?(console.log("\u4F7F\u7528\u76F4\u63A5\u6570\u7EC4\u6570\u636E:",x),x):(console.log("\u672A\u627E\u5230\u6709\u6548\u6570\u636E\u683C\u5F0F"),[])):[]}();return console.log("\u5904\u7406\u540E\u7684\u767B\u5F55\u65E5\u5FD7:",C),k?(0,e.jsx)(T._z,{header:{extra:(0,e.jsx)(P.ZP,{icon:(0,e.jsx)(U.Z,{}),onClick:function(){return c.history.back()},style:{marginRight:8},children:"\u8FD4\u56DE"})},children:(0,e.jsxs)("div",{style:{textAlign:"center",padding:"50px 20px"},children:[(0,e.jsx)(O.Z,{size:"large",style:{marginBottom:16}}),(0,e.jsx)("div",{style:{fontSize:"14px",color:"#666"},children:"\u6B63\u5728\u52A0\u8F7D\u7528\u6237\u4FE1\u606F..."})]})}):q||!a?(0,e.jsx)(T._z,{header:{extra:(0,e.jsx)(P.ZP,{icon:(0,e.jsx)(U.Z,{}),onClick:function(){return c.history.back()},style:{marginRight:8},children:"\u8FD4\u56DE"})},children:(0,e.jsx)(B.Z,{children:(0,e.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px"},children:[(0,e.jsx)("div",{style:{fontSize:"16px",marginBottom:8},children:"\u7528\u6237\u4FE1\u606F\u52A0\u8F7D\u5931\u8D25"}),(0,e.jsx)("div",{style:{fontSize:"14px",color:"#666",marginBottom:24},children:"\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5\u6216\u7A0D\u540E\u91CD\u8BD5"}),(0,e.jsx)(P.ZP,{type:"primary",onClick:function(){return c.history.back()},children:"\u8FD4\u56DE\u5217\u8868"})]})})}):(0,e.jsxs)(T._z,{ghost:!0,header:{extra:(0,e.jsxs)(E.Z,{children:[(0,e.jsx)(P.ZP,{icon:(0,e.jsx)(U.Z,{}),onClick:function(){return c.history.back()},children:"\u8FD4\u56DE"}),(0,e.jsx)(P.ZP,{type:"primary",icon:(0,e.jsx)(p.Z,{}),onClick:function(){return c.history.push("/system/user/edit/".concat(K))},children:"\u7F16\u8F91\u7528\u6237"})]})},children:[(0,e.jsxs)("div",{style:{width:"100%",minHeight:180,background:"linear-gradient(90deg, #6a82fb 0%, #fc5c7d 100%)",borderRadius:12,marginBottom:32,position:"relative",display:"flex",alignItems:"flex-end",justifyContent:"center",padding:"0 0 32px 0"},children:[(0,e.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:1,opacity:.08}}),(0,e.jsxs)("div",{style:{zIndex:2,textAlign:"center"},children:[(0,e.jsx)(F.Z,{src:a.avatar,size:96,style:{border:"4px solid #fff",marginBottom:12},children:((z=a.name)===null||z===void 0?void 0:z.charAt(0))||(($=a.username)===null||$===void 0?void 0:$.charAt(0))}),(0,e.jsxs)("div",{style:{fontSize:28,fontWeight:700,color:"#fff",marginBottom:4,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[a.name||a.username,a.isActive&&(0,e.jsx)(_.Z,{style:{color:"#52c41a",fontSize:20}})]}),(0,e.jsxs)("div",{style:{color:"#fff",fontSize:16,marginBottom:8},children:["@",a.username," \xA0|",(0,e.jsxs)("span",{style:{marginLeft:8},children:[(0,e.jsx)(W.Z,{})," ",a.address||"\u672A\u77E5\u5730\u5740"]}),a.createdAt&&(0,e.jsxs)("span",{style:{marginLeft:8},children:[(0,e.jsx)(v.Z,{})," \u52A0\u5165 ",w()(a.createdAt).format("YYYY\u5E74MM\u6708DD\u65E5")]})]})]})]}),(0,e.jsx)(A.Z,{defaultActiveKey:"profile",style:{marginBottom:24},items:[{key:"profile",label:"\u4E2A\u4EBA\u4FE1\u606F"}]}),(0,e.jsxs)(L.Z,{gutter:32,children:[(0,e.jsx)(f.Z,{xs:24,md:14,lg:14,children:(0,e.jsxs)(B.Z,{bordered:!1,style:{marginBottom:24},children:[(0,e.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:12},children:"ABOUT"}),(0,e.jsx)("div",{style:{marginBottom:8},children:a.name}),(0,e.jsx)("div",{style:{marginBottom:8},children:a.departmentName||"No department"}),(0,e.jsx)("div",{style:{marginBottom:8},children:a.position||""}),(0,e.jsx)("div",{style:{color:"#888",fontSize:13,margin:"16px 0 8px 0"},children:"CONTACTS"}),(0,e.jsx)("div",{style:{marginBottom:8},children:a.email||"\u2014"}),(0,e.jsx)("div",{style:{marginBottom:8},children:a.phone||"\u2014"}),(0,e.jsx)("div",{style:{color:"#888",fontSize:13,margin:"16px 0 8px 0"},children:"TEAMS"}),(0,e.jsxs)("div",{style:{marginBottom:8},children:["\u6210\u5458\u4E8E ",a.group||"\u2014"]}),(0,e.jsxs)("div",{style:{marginBottom:8},children:["\u53C2\u4E0E ",((G=a.tags)===null||G===void 0?void 0:G.length)||0," \u4E2A\u6807\u7B7E"]}),(0,e.jsx)("div",{style:{color:"#888",fontSize:13,margin:"16px 0 8px 0"},children:"\u72B6\u6001"}),(0,e.jsx)(i.Z,{color:a.isActive?"green":"red",children:a.isActive?"\u6B63\u5E38":"\u7981\u7528"})]})}),(0,e.jsx)(f.Z,{xs:24,md:10,children:(0,e.jsxs)(B.Z,{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(b.Z,{style:{color:"#1890ff"}})," \u7EDF\u8BA1\u4E0E\u52A8\u6001"]}),bordered:!1,style:{marginBottom:24},children:[(0,e.jsxs)(L.Z,{gutter:16,style:{marginTop:12},children:[(0,e.jsx)(f.Z,{span:12,children:(0,e.jsx)(d.Z,{title:"\u767B\u5F55\u6B21\u6570",value:C.filter(function(m){return m.action==="login"&&m.status==="success"}).length,valueStyle:{color:"#52c41a"},prefix:(0,e.jsx)(D.Z,{})})}),(0,e.jsx)(f.Z,{span:12,children:(0,e.jsx)(d.Z,{title:"\u767B\u5F55\u5931\u8D25",value:C.filter(function(m){return m.action==="login"&&m.status==="error"}).length,valueStyle:{color:"#ff4d4f"},prefix:(0,e.jsx)(I.Z,{})})})]}),C.length>0&&(0,e.jsxs)("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid #f0f0f0"},children:[(0,e.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:8},children:"\u6700\u8FD1\u767B\u5F55\u65F6\u95F4"}),(0,e.jsx)("div",{style:{fontSize:"13px",fontWeight:500},children:w()((Y=C[0])===null||Y===void 0?void 0:Y.createdAt).format("YYYY-MM-DD HH:mm:ss")})]}),(0,e.jsx)(o.Z,{style:{margin:"12px 0"},children:"\u65F6\u95F4\u7EBF"}),(0,e.jsx)(u.Z,{items:[{color:"green",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{fontWeight:500,marginBottom:4},children:"\u8D26\u6237\u521B\u5EFA"}),(0,e.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:typeof a.createdAt=="string"?new Date(a.createdAt).toLocaleString():"\u672A\u77E5"})]})}].concat(s()(a.updatedAt&&a.updatedAt!==a.createdAt&&typeof a.updatedAt=="string"?[{color:"blue",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{fontWeight:500,marginBottom:4},children:"\u6700\u540E\u66F4\u65B0"}),(0,e.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:new Date(a.updatedAt).toLocaleString()})]})}]:[]),s()(a.joinDate&&typeof a.joinDate=="string"?[{color:"orange",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{fontWeight:500,marginBottom:4},children:"\u5165\u804C\u65F6\u95F4"}),(0,e.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:new Date(a.joinDate).toLocaleDateString()})]})}]:[]))})]})}),(0,e.jsx)(f.Z,{xs:24,md:24,lg:24,children:(0,e.jsx)(L.Z,{gutter:24,children:(0,e.jsx)(f.Z,{xs:24,md:24,children:(0,e.jsx)(B.Z,{title:(0,e.jsxs)("span",{children:[" \u767B\u5F55\u8BB0\u5F55 ",(0,e.jsxs)(i.Z,{color:"blue",style:{marginLeft:8},children:[C.length," \u6761\u8BB0\u5F55"]})]}),bordered:!1,style:{marginBottom:24},loading:ee,children:C.length>0?(0,e.jsx)(t.Z,{dataSource:C,rowKey:"id",pagination:!1,size:"small",columns:[{title:"\u64CD\u4F5C",dataIndex:"action",width:80,render:function(g){return(0,e.jsx)(E.Z,{children:(0,e.jsx)(i.Z,{color:g==="login"?"green":"orange",children:g==="login"?"\u767B\u5F55":"\u767B\u51FA"})})}},{title:"\u72B6\u6001",dataIndex:"status",width:80,render:function(g){return(0,e.jsx)(i.Z,{color:g==="success"?"success":"error",icon:g==="success"?(0,e.jsx)(_.Z,{}):(0,e.jsx)(I.Z,{}),children:g==="success"?"\u6210\u529F":"\u5931\u8D25"})}},{title:"IP\u5730\u5740",dataIndex:"ipAddress",width:120,render:function(g){return(0,e.jsxs)(E.Z,{children:[(0,e.jsx)(y.Z,{}),(0,e.jsx)("span",{style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"12px"},children:g||"-"})]})}},{title:"\u65F6\u95F4",dataIndex:"createdAt",width:160,render:function(g){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{fontSize:"12px",fontWeight:500},children:w()(g).format("MM-DD HH:mm")}),(0,e.jsx)("div",{style:{fontSize:"11px",color:"#666"},children:w()(g).format("YYYY-MM-DD")})]})}},{title:"\u8BE6\u60C5",dataIndex:"content",render:function(g,Z){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{fontSize:"12px",marginBottom:4},children:g}),Z.errorMessage&&(0,e.jsxs)("div",{style:{fontSize:"11px",color:"#ff4d4f"},children:["\u9519\u8BEF: ",Z.errorMessage]}),Z.userAgent&&(0,e.jsx)(l.Z,{title:Z.userAgent,children:(0,e.jsx)("div",{style:{fontSize:"11px",color:"#666",cursor:"pointer"},children:Z.userAgent.length>50?"".concat(Z.userAgent.substring(0,50),"..."):Z.userAgent})})]})}}]}):(0,e.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[(0,e.jsx)(D.Z,{style:{fontSize:"24px",marginBottom:8}}),(0,e.jsx)("div",{children:"\u6682\u65E0\u767B\u5F55\u8BB0\u5F55"})]})})})})})]})]})};R.default=J},42551:function(H,R,n){n.d(R,{Br:function(){return F},CT:function(){return L},Iz:function(){return I},Mg:function(){return W},OG:function(){return P},ie:function(){return b},sS:function(){return B},tD:function(){return T}});var S=n(15009),s=n.n(S),U=n(99289),p=n.n(U),_=n(45618);function W(i){return v.apply(this,arguments)}function v(){return v=p()(s()().mark(function i(d){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,_.request)("/api/logs",{method:"GET",params:d}));case 1:case"end":return u.stop()}},i)})),v.apply(this,arguments)}function b(){return D.apply(this,arguments)}function D(){return D=p()(s()().mark(function i(){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,_.request)("/api/logs/stats",{method:"GET"}));case 1:case"end":return o.stop()}},i)})),D.apply(this,arguments)}function I(i){return y.apply(this,arguments)}function y(){return y=p()(s()().mark(function i(d){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,_.request)("/api/logs/".concat(d),{method:"GET"}));case 1:case"end":return u.stop()}},i)})),y.apply(this,arguments)}function T(i){return j.apply(this,arguments)}function j(){return j=p()(s()().mark(function i(d){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,_.request)("/api/logs/".concat(d),{method:"DELETE"}));case 1:case"end":return u.stop()}},i)})),j.apply(this,arguments)}function P(i){return O.apply(this,arguments)}function O(){return O=p()(s()().mark(function i(d){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,_.request)("/api/logs/batch-delete",{method:"POST",data:{ids:d}}));case 1:case"end":return u.stop()}},i)})),O.apply(this,arguments)}function B(){return E.apply(this,arguments)}function E(){return E=p()(s()().mark(function i(){var d,o=arguments;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=o.length>0&&o[0]!==void 0?o[0]:90,t.abrupt("return",(0,_.request)("/api/logs/clean-expired",{method:"POST",data:{days:d}}));case 2:case"end":return t.stop()}},i)})),E.apply(this,arguments)}function F(){return A.apply(this,arguments)}function A(){return A=p()(s()().mark(function i(){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,_.request)("/api/logs/users",{method:"GET"}));case 1:case"end":return o.stop()}},i)})),A.apply(this,arguments)}function L(i,d){return f.apply(this,arguments)}function f(){return f=p()(s()().mark(function i(d,o){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/api/logs/user/".concat(d,"/login-logs"),{method:"GET",params:{limit:o}}));case 1:case"end":return t.stop()}},i)})),f.apply(this,arguments)}},96287:function(H,R,n){n.d(R,{Cp:function(){return i},Nq:function(){return T},VC:function(){return B},VR:function(){return o},Wf:function(){return L},h8:function(){return P},lE:function(){return W},nE:function(){return b},r4:function(){return I}});var S=n(15009),s=n.n(S),U=n(99289),p=n.n(U),_=n(45618);function W(t){return v.apply(this,arguments)}function v(){return v=p()(s()().mark(function t(l){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/users",{method:"GET",params:l}));case 1:case"end":return r.stop()}},t)})),v.apply(this,arguments)}function b(t){return D.apply(this,arguments)}function D(){return D=p()(s()().mark(function t(l){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/users/".concat(l),{method:"GET"}));case 1:case"end":return r.stop()}},t)})),D.apply(this,arguments)}function I(t){return y.apply(this,arguments)}function y(){return y=p()(s()().mark(function t(l){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/users",{method:"POST",data:l}));case 1:case"end":return r.stop()}},t)})),y.apply(this,arguments)}function T(t){return j.apply(this,arguments)}function j(){return j=p()(s()().mark(function t(l){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/users/".concat(l.id),{method:"PUT",data:l}));case 1:case"end":return r.stop()}},t)})),j.apply(this,arguments)}function P(t){return O.apply(this,arguments)}function O(){return O=p()(s()().mark(function t(l){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/users/".concat(l),{method:"DELETE"}));case 1:case"end":return r.stop()}},t)})),O.apply(this,arguments)}function B(t,l){return E.apply(this,arguments)}function E(){return E=p()(s()().mark(function t(l,c){return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,_.request)("/api/users/".concat(l,"/toggle-status"),{method:"PUT",data:{isActive:c}}));case 1:case"end":return h.stop()}},t)})),E.apply(this,arguments)}function F(t){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function t(l){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/users/batch-delete",{method:"POST",data:{ids:l}}));case 1:case"end":return r.stop()}},t)})),A.apply(this,arguments)}function L(t,l){return f.apply(this,arguments)}function f(){return f=p()(s()().mark(function t(l,c){return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,_.request)("/api/users/batch-toggle-status",{method:"PUT",data:{ids:l,isActive:c}}));case 1:case"end":return h.stop()}},t)})),f.apply(this,arguments)}function i(t){return d.apply(this,arguments)}function d(){return d=p()(s()().mark(function t(l){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/users/change-password",{method:"PUT",data:l}));case 1:case"end":return r.stop()}},t)})),d.apply(this,arguments)}function o(t,l){return u.apply(this,arguments)}function u(){return u=p()(s()().mark(function t(l,c){return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,_.request)("/api/users/".concat(l,"/reset-password"),{method:"PUT",data:c}));case 1:case"end":return h.stop()}},t)})),u.apply(this,arguments)}}}]);
